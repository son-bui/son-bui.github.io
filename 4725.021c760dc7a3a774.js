"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[4725],{42678:(M,T,a)=>{a.d(T,{zz:()=>U,Cs:()=>s,yL:()=>re,u1:()=>ve,I5:()=>D,FH:()=>ce});var r=a(80529),e=a(88001),f=a(54004),D=(()=>{return(g=D||(D={})).JOURNEY="JOURNEY",g.PASSENGER="PASSENGER",g.CONFIGURATION="CONFIGURATION",D;var g})(),n=a(97582),b=a(97380),o=a(87067),m=a(43429);class s{}(0,n.gn)([(0,o.C)()],s.prototype,"status",void 0),(0,n.gn)([(0,m.D)(()=>h),(0,o.C)()],s.prototype,"data",void 0),(0,n.gn)([(0,o.C)()],s.prototype,"objectError",void 0),(0,n.gn)([(0,o.C)()],s.prototype,"success",void 0);class h extends b.VP{}class d{}(0,n.gn)([(0,o.C)()],d.prototype,"airline",void 0),(0,n.gn)([(0,o.C)()],d.prototype,"flightType",void 0),(0,n.gn)([(0,m.D)(()=>C),(0,o.C)()],d.prototype,"journeys",void 0),(0,n.gn)([(0,m.D)(()=>P),(0,o.C)()],d.prototype,"passengers",void 0),(0,n.gn)([(0,m.D)(()=>c),(0,o.C)()],d.prototype,"priceMonitors",void 0);class c{}(0,n.gn)([(0,o.C)()],c.prototype,"airline",void 0),(0,n.gn)([(0,o.C)()],c.prototype,"airlineLogo",void 0),(0,n.gn)([(0,o.C)()],c.prototype,"targetPrice",void 0);class C{}(0,n.gn)([(0,o.C)()],C.prototype,"leg",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"startPoint",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"endPoint",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"departTime",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"arrivalTime",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"duration",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"segments",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"rangeTime",void 0),(0,n.gn)([(0,o.C)()],C.prototype,"rangeDateTime",void 0);class I{}(0,n.gn)([(0,o.C)()],I.prototype,"fromDate",void 0),(0,n.gn)([(0,o.C)()],I.prototype,"toDate",void 0);class P{}(0,n.gn)([(0,o.C)()],P.prototype,"birthday",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"firstName",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"lastName",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"type",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"key",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"parentKey",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"namePrefix",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"gender",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"index",void 0),(0,n.gn)([(0,o.C)()],P.prototype,"parentIndex",void 0);class t{}(0,n.gn)([(0,o.C)()],t.prototype,"timeCreate",void 0),(0,n.gn)([(0,o.C)()],t.prototype,"timeExpire",void 0),(0,n.gn)([(0,o.C)()],t.prototype,"timeUpdate",void 0),(0,n.gn)([(0,o.C)()],t.prototype,"timeFinished",void 0),(0,n.gn)([(0,m.D)(()=>E),(0,o.C)()],t.prototype,"fareMonitors",void 0),(0,n.gn)([(0,o.C)()],t.prototype,"notifyBeforeExpired",void 0),(0,n.gn)([(0,o.C)()],t.prototype,"targetPrice",void 0);class E{}(0,n.gn)([(0,o.C)()],E.prototype,"onlyCareLowerFare",void 0),(0,n.gn)([(0,o.C)()],E.prototype,"expectLowerFareClass",void 0),(0,n.gn)([(0,o.C)()],E.prototype,"specifyFareClass",void 0),(0,n.gn)([(0,o.C)()],E.prototype,"currentFareClass",void 0),(0,n.gn)([(0,o.C)()],E.prototype,"specifyFareClassInfo",void 0);class L{}(0,n.gn)([(0,o.C)()],L.prototype,"airline",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"originalPnr",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"detectedPnr",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"originalFare",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"detectedFare",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"originalFareClass",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"detectedFareClass",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"higherFare",void 0),(0,n.gn)([(0,o.C)()],L.prototype,"lastTimeUpdate",void 0);class U{}(0,n.gn)([(0,o.C)()],U.prototype,"status",void 0),(0,n.gn)([(0,m.D)(()=>N),(0,o.C)()],U.prototype,"data",void 0),(0,n.gn)([(0,o.C)()],U.prototype,"objectError",void 0),(0,n.gn)([(0,o.C)()],U.prototype,"success",void 0);class N{}(0,n.gn)([(0,o.C)()],N.prototype,"orderId",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"canUpdate",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"code",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"huntFareConditions",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"conditions",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"advanceSetting",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"ticketInfo",void 0),(0,n.gn)([(0,m.D)(()=>b.v_),(0,o.C)()],N.prototype,"availableSlotInfo",void 0),(0,n.gn)([(0,o.C)()],N.prototype,"distributionChannel",void 0);var Z=a(50494),_=a(94650);const H={headers:new r.WM({"Content-Type":"application/json"})};let re=(()=>{class g{constructor(i,v){this.http=i,this.appConfig=v}getLstAirlineFareoptions(){return this.http.post(this.appConfig.apiUrlTPS+"ticket-low-fare/get-list-airline-fare-class",JSON.stringify({airline:"vn,qh,vj"}),H)}registerHuntBooking(i){return this.http.post(this.appConfig.apiUrlTPS+"hunt_for_ticket/register-order",JSON.stringify(i),H)}getPnrOrderDetail(i){return this.http.get(this.appConfig.apiUrlTPS+"hunt_for_ticket/pnr-order_detail/"+i,H).pipe((0,f.U)(v=>(0,Z.yE)(s,v,{excludeExtraneousValues:!0})))}getCurrentConfigOrder(i){return this.http.post(this.appConfig.apiUrlTPS+"hunt_for_ticket/current-config-order",JSON.stringify({orderId:i}),H).pipe((0,f.U)(v=>(0,Z.yE)(U,v,{excludeExtraneousValues:!0})))}updateConfigOrder(i){return this.http.post(this.appConfig.apiUrlTPS+"hunt_for_ticket/update_order_config",JSON.stringify(i),H).pipe((0,f.U)(v=>(0,Z.yE)(s,v,{excludeExtraneousValues:!0})))}}return g.\u0275fac=function(i){return new(i||g)(_.LFG(r.eN),_.LFG(e.qB))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var u=a(24006),J=a(57085),ne=a(35650),Y=a(43201),A=a(15439),ue=a(77579);const oe=g=>{const R=g.get("targetVNPrice"),i=g.get("targetVJPrice"),v=g.get("targetQHPrice"),y=g.get("fareOptions"),F=g.get("enableTimeStart"),O=g.get("enableFareOption"),k=g.get("enablePriceOption"),S=g.get("startTimeRange");let x={};return null!=F&&F.value&&(null!=S&&S.value&&(null==S?void 0:S.value.length)>0||(x.invalidTimeRanges=!0)),null!=O&&O.value&&(null!=y&&y.value&&(null==y?void 0:y.value.length)>0||(x.invalidFares=!0)),null!=k&&k.value&&(null!=R&&R.value||null!=i&&i.value||null!=v&&v.value?((null==R?void 0:R.value)<0||(null==i?void 0:i.value)<0||(null==v?void 0:v.value)<0)&&(x.negativePrice=!0):x.invalidPrice=!0),!F&&!k&&(x.invalidPriceFareOption=!0),Object.values(x),Object.values(x).length>0?x:null};var ie=a(82761),pe=a(37735),ge=a(9497);let ce=(()=>{class g{constructor(i,v,y,F,O,k){this.route=i,this._route=v,this.fb=y,this._permissionService=F,this._systemService=O,this._bookingHunterService=k,this.optionsAdultPassenger=[],this.numberOfPassenger={adult:1,child:0,infant:0},this.phoneAreaDefault=e.$T,this.hasVJAirline=!1,this.showPriceOption=!1,this.showTimeStartOption=!1,this.showFareOption=!0,this.numberOfPassengerChange$=new ue.x,this.isBooker=!this._permissionService.isVNAccount(),this.optionDepartureTime=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!1,disable:!1,startTime:0,endTime:1439,totalAvailable:0}],this.customRangeItem={rangeValues:[0,1439],startTimeStr:"00:00",endTimeStr:"23:59"},this.checkPhoneRequired=this._systemService.isFeatureEnabled(e.Ke.Web_Features_RulePhoneNumber_RulePhoneNumberVJ_Enable),this.CF_IDENTIFY_TYPE=e.FV,this.departureTime=A().toDate().getTime(),this.earliestDoBChild=(0,Y.Z)(this.departureTime,-2),this.earliestDoBChild=(0,ne.Z)(this.earliestDoBChild,-1),this.earliestDoBInfant=A().toDate(),this.lastestDoBChild=(0,Y.Z)(this.departureTime,-11),this.lastestDoBInfant=(0,Y.Z)(this.departureTime,-2),this.lastestDoBInfant=(0,ne.Z)(this.lastestDoBInfant,1)}initForm(){this.resetDataService(),this.initJourneyForm(),this.initConfigurationForm(),this.initPassengerForm()}preloadForm(i){var v,y,F,O,k,S,x,$,q,w,z,K,W,Q,X,ee;const V=i.ticketInfo.journeys[0],j="PRICE"===i.huntFareConditions.type;this.showPriceOption=j,this.showFareOption=!j;const me=(null===(y=null===(v=i.huntFareConditions.specifyPriceList)||void 0===v?void 0:v.find(l=>"VN"===l.airline.toUpperCase()))||void 0===y?void 0:y.targetPrice)||0,he=(null===(O=null===(F=i.huntFareConditions.specifyPriceList)||void 0===F?void 0:F.find(l=>"QH"===l.airline.toUpperCase()))||void 0===O?void 0:O.targetPrice)||0,Ce=(null===(S=null===(k=i.huntFareConditions.specifyPriceList)||void 0===k?void 0:k.find(l=>"VJ"===l.airline.toUpperCase()))||void 0===S?void 0:S.targetPrice)||0;let ae=!0;if(V.rangeTime.forEach(l=>{this.optionDepartureTime.forEach(p=>{p.start===l.fromDate&&p.end===l.toDate&&(p.isActive=!0,ae=!1)})}),ae&&V.rangeTime[0]){const l=V.rangeTime[0],p=this.convertTimeRangeStrToMin(l.fromDate),de=this.convertTimeRangeStrToMin(l.toDate);this.customRangeItem={rangeValues:[p,de],startTimeStr:l.fromDate,endTimeStr:l.toDate},this.optionDepartureTime[4].isActive=!0,this.optionDepartureTime[4].start=l.fromDate,this.optionDepartureTime[4].end=l.toDate,this.optionDepartureTime[4].startTime=p,this.optionDepartureTime[4].endTime=de}const te=this.optionDepartureTime.filter(l=>l.isActive),se=te&&te.length>0;this.showTimeStartOption=se;const fe=(null!==(x=A(V.departTime))&&void 0!==x&&x.isBefore(A())?null:A(V.departTime).toDate())||null;this.journeyFormGroup=this.fb.group({startPoint:[V.startPoint,[u.kI.required]],endPoint:[V.endPoint,[u.kI.required]],departDate:[fe,[u.kI.required]],startTimeRange:[te],enablePriceOption:[j],targetVNPrice:[me],targetVJPrice:[he],targetQHPrice:[Ce],enableFareOption:[!j],enableTimeStart:[se],fareOptions:[i.huntFareConditions.specifyFareClassList]},{validators:oe});const le=A(i.advanceSetting.timeExecute).isAfter(A().toDate()),B=le?A(i.advanceSetting.timeExecute).toDate():null,ye=le&&B?`${null==B?void 0:B.getHours().toString().padStart(2,"0")}:${null==B?void 0:B.getMinutes().toString().padStart(2,"0")}`:null;this.configurationFormGroup=this.fb.group({dateExpires:[B,[u.kI.required]],timeExpires:[ye,[u.kI.required]],sendNotify:[i.advanceSetting.notifBeforExpire,[u.kI.required]],agentDisplayName:[null],agentAvatar:[null],agentName:[null],agentPhone:[null,[u.kI.required,u.kI.minLength(7),u.kI.maxLength(11)]],agentPhoneArea:[this.phoneAreaDefault,u.kI.required],agentEmail:[null],agentId:[null,[u.kI.required]]}),this.numberOfPassenger={adult:(null===(q=null===($=i.ticketInfo.passengers)||void 0===$?void 0:$.filter(l=>{var p;return"ADT"===(null===(p=l.type)||void 0===p?void 0:p.toUpperCase())}))||void 0===q?void 0:q.length)||0,child:(null===(z=null===(w=i.ticketInfo.passengers)||void 0===w?void 0:w.filter(l=>{var p;return"CHD"===(null===(p=l.type)||void 0===p?void 0:p.toUpperCase())}))||void 0===z?void 0:z.length)||0,infant:(null===(W=null===(K=i.ticketInfo.passengers)||void 0===K?void 0:K.filter(l=>{var p;return"INF"===(null===(p=l.type)||void 0===p?void 0:p.toUpperCase())}))||void 0===W?void 0:W.length)||0},this.passengerFormGroup=this.fb.group({adultPassenger:this.fb.array([]),childPassenger:this.fb.array([]),infantPassenger:this.fb.array([])},{validator:(0,J.aV)()});const Pe=(null===(Q=i.ticketInfo.passengers)||void 0===Q?void 0:Q.filter(l=>{var p;return"ADT"===(null===(p=l.type)||void 0===p?void 0:p.toUpperCase())}).map(l=>{var p;return{firstName:l.firstName,lastName:l.lastName,gender:(null===(p=l.gender)||void 0===p?void 0:p.toLowerCase())||"male"}}))||[],De=(null===(X=i.ticketInfo.passengers)||void 0===X?void 0:X.filter(l=>{var p;return"CHD"===(null===(p=l.type)||void 0===p?void 0:p.toUpperCase())}).map(l=>{var p;return{firstName:l.firstName,lastName:l.lastName,gender:(null===(p=l.gender)||void 0===p?void 0:p.toLowerCase())||"male",birthday:A(l.birthday).toDate()}}))||[],Ee=(null===(ee=i.ticketInfo.passengers)||void 0===ee?void 0:ee.filter(l=>{var p;return"INF"===(null===(p=l.type)||void 0===p?void 0:p.toUpperCase())}).map(l=>{var p;return{firstName:l.firstName,lastName:l.lastName,gender:(null===(p=l.gender)||void 0===p?void 0:p.toLowerCase())||"male",birthday:A(l.birthday).toDate(),parentIndex:l.parentIndex+""}}))||[];this.initPassengerForm(),this.initAdultFormGroup(),this.initChildFormGroup(),this.initInfantFormGroup(),this.passengerFormGroup.patchValue({adultPassenger:Pe,childPassenger:De,infantPassenger:Ee}),this.preInitialFormOrderId=void 0}reloadPassengerForm(){const i=this.passengerFormGroup.value;this.initPassengerForm(),this.initAdultFormGroup(),this.initChildFormGroup(),this.initInfantFormGroup(),this.passengerFormGroup.patchValue(Object.assign({},i))}initJourneyForm(){this.journeyFormGroup=this.fb.group({startPoint:["",[u.kI.required]],endPoint:["",[u.kI.required]],departDate:[null,[u.kI.required]],startTimeRange:[null],enablePriceOption:[!1],targetVNPrice:[0],targetVJPrice:[0],targetQHPrice:[0],enableFareOption:[!0],enableTimeStart:[!1],fareOptions:[null]},{validators:oe})}initConfigurationForm(){this.configurationFormGroup=this.fb.group({dateExpires:[null,[u.kI.required]],timeExpires:[null,[u.kI.required]],sendNotify:[!1,[u.kI.required]],agentDisplayName:[null],agentAvatar:[null],agentName:[null],agentPhone:[null,[u.kI.required,u.kI.minLength(7),u.kI.maxLength(11)]],agentPhoneArea:[this.phoneAreaDefault,u.kI.required],agentEmail:[null],agentId:[null,[u.kI.required]]})}initPassengerForm(){this.passengerFormGroup=this.fb.group({secretRemark:[null],publicRemark:[null],adultPassenger:this.fb.array([]),childPassenger:this.fb.array([]),infantPassenger:this.fb.array([])},{validator:(0,J.aV)()})}initAdultFormGroup(){for(let i=0;i<this.numberOfPassenger.adult;i++){const v=this.fb.group({firstName:[null,[u.kI.required]],lastName:[null,[u.kI.required]],gender:["male",[u.kI.required]],birthday:[null],membershipQH:[null],membershipVN:[null],issuanceDate:[null],expiryDate:[null],issuanceCountry:[null],nationality:[null],number:[null],cccdNumber:[null],documentType:[e.FV.CCCD],type:"ADT"},{validator:(0,J.fJ)("birthday",this.departureTime)});this.getFormArray("adultPassenger").push(v)}}initChildFormGroup(){for(let i=0;i<this.numberOfPassenger.child;i++){const v=this.fb.group({birthday:[null,[u.kI.required]],firstName:[null,[u.kI.required]],lastName:[null,[u.kI.required]],gender:["male",[u.kI.required]],membershipQH:[null],membershipVN:[null],issuanceDate:[null],expiryDate:[null],issuanceCountry:[null],nationality:[null],number:[null],cccdNumber:[null],documentType:[e.FV.CCCD],type:"CHD"},{validator:(0,J.$K)("birthday",this.departureTime)});this.getFormArray("childPassenger").push(v)}}initInfantFormGroup(){for(let i=0;i<this.numberOfPassenger.infant;i++){const v=this.fb.group({birthday:[null,[u.kI.required]],firstName:[null,[u.kI.required]],lastName:[null,[u.kI.required]],gender:["male",[u.kI.required]],parentIndex:[i+"",[u.kI.required]],membershipQH:[null],membershipVN:[null],issuanceDate:[null],expiryDate:[null],issuanceCountry:[null],nationality:[null],number:[null],cccdNumber:[null],documentType:[e.FV.CCCD],type:"INF"},{validator:(0,J.DW)("birthday",this.departureTime)});this.getFormArray("infantPassenger").push(v)}}getNumberOfPassenger(){this.initAdultPassengerOptions()}getFormArray(i){return this.passengerFormGroup.controls[i]}getFormControlInArray(i,v){return i.controls[v]}initAdultPassengerOptions(){for(let i=0;i<this.numberOfPassenger.adult;i++)this.optionsAdultPassenger.push({code:i+"",name:`Ng\u01b0\u1eddi l\u1edbn ${i+1}`})}changeNumberOfPassenger(i){this.numberOfPassenger=i,this.numberOfPassengerChange$.next(i)}numOfPax(){return this.numberOfPassenger}formJourneyData(){return this.journeyFormGroup.value}formPassengerData(){return this.passengerFormGroup.value}formConfigurationData(){return this.configurationFormGroup.value}resetDataService(){this.customRangeItem={rangeValues:[0,1439],startTimeStr:"00:00",endTimeStr:"23:59"},this.showPriceOption=!1,this.showTimeStartOption=!1,this.showFareOption=!0,this.selectedFaresTree=[],this.optionDepartureTime=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!1,disable:!1,startTime:0,endTime:1439,totalAvailable:0}]}isAgent2Show(){const i=this._permissionService.getCurrentAuthor();return"AGENT2"===(null==i?void 0:i.titleCode.toUpperCase())}getSourceEvent(){switch(this.sourceEvent){case"SEARCH_INPUT":return 0;case"SEARCH_RESULT":return 1;case"HEADER_MANAGE":return 2;case"EMPTY_STATE":return 3;case"REGENERATE":return 4;default:return-1}}convertTimeRangeStrToMin(i){return A.duration(i).asMinutes()}minuteToString(i){const v=Math.floor(i/60),y=i%60;let F=`${v}`,O=`${y}`;return v<10&&(F=`0${v}`),y<10&&(O=`0${y}`),`${F}:${O}`}checkVJAirline(){var i;const v=null===(i=this.selectedFaresTree)||void 0===i?void 0:i.filter(y=>y.isActive).map(y=>y.code.toUpperCase());if(this.journeyFormGroup.value.enableFareOption&&v.includes("VJ")){if(this.hasVJAirline=!0,!this.checkPhoneRequired){const y=this._permissionService.getCurrentUser();this.configurationFormGroup.controls.agentPhone.setValue(y.phone)}this.configurationFormGroup.controls.agentPhone.setValidators([u.kI.required,u.kI.minLength(7),u.kI.maxLength(11)]),this.configurationFormGroup.controls.agentPhoneArea.setValidators([u.kI.required])}else if(this.journeyFormGroup.value.enablePriceOption&&this.journeyFormGroup.value.targetVJPrice){if(this.hasVJAirline=!0,!this.checkPhoneRequired){const y=this._permissionService.getCurrentUser();this.configurationFormGroup.controls.agentPhone.setValue(y.phone)}this.configurationFormGroup.controls.agentPhone.setValidators([u.kI.required,u.kI.minLength(7),u.kI.maxLength(11)]),this.configurationFormGroup.controls.agentPhoneArea.setValidators([u.kI.required])}else this.hasVJAirline=!1,this.configurationFormGroup.controls.agentPhone.setValidators(null),this.configurationFormGroup.controls.agentPhoneArea.setValidators(null)}}return g.\u0275fac=function(i){return new(i||g)(_.LFG(ie.gz),_.LFG(ie.F0),_.LFG(u.qu),_.LFG(pe.$A),_.LFG(ge.o),_.LFG(re))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var G=a(53820);const ve={[G.b.CREATE]:{name:"\u0110ang s\u0103n v\xe9",description:"S\u0103n v\xe9 t\u1ef1 \u0111\u1ed9ng \u0111ang ho\u1ea1t \u0111\u1ed9ng",icon:"search",backgroundColor:"bg-[#FFEAB9]",textColor:"text-secondary-7-5"},[G.b.IN_PROCESS]:{name:"\u0110ang canh v\xe9",description:"Canh v\xe9 r\u1ebb t\u1ef1 \u0111\u1ed9ng \u0111ang ho\u1ea1t \u0111\u1ed9ng",icon:"search",backgroundColor:"bg-[#FFEAB9]",textColor:"text-secondary-7-5"},[G.b.COMPLETED]:{name:"\u0110\xe3 s\u0103n th\xe0nh c\xf4ng",description:"\u0110\xe3 s\u0103n \u0111\u01b0\u1ee3c v\xe9",icon:"check",backgroundColor:"bg-[#07A35D]",textColor:"text-neutral-white"},[G.b.IN_PROCESS_PRICE_UP]:{name:"\u0110ang s\u0103n gi\xe1 t\u0103ng",description:"Gi\xe1 v\xe9 \u0111\xe3 t\u0103ng, vui l\xf2ng c\xe2n nh\u1eafc xu\u1ea5t v\xe9",icon:"arrow_right_up",backgroundColor:"bg-[#ffd1bc]",textColor:"text-primary-1-4"},[G.b.CANCEL]:{name:"\u0110\xe3 h\u1ee7y",description:"\u0110\xe3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",icon:"coupon_slash",backgroundColor:"bg-[#999999]",textColor:"text-neutral-white"},[G.b.EXPIRED]:{name:"\u0110\xe3 h\u1ebft s\u0103n",description:"H\u1ebft h\u1ea1n s\u0103n v\xe9",icon:"clock",backgroundColor:"bg-[#CCCCCC]",textColor:"text-neutral-gray-6"}}},57085:(M,T,a)=>{a.d(T,{bz:()=>r,fJ:()=>n,$K:()=>f,DW:()=>D,Ab:()=>b,i4:()=>m,aV:()=>o});const r=(s,h)=>s.get(h);var e=a(15439);const f=(s,h)=>d=>{const c=d.controls[s];if(!c.value)return;const C=e(h).startOf("day").toDate().getTime(),I=e(c.value).startOf("day").toDate();I.setFullYear(I.getFullYear()+2);const P=I.getTime(),t=e(c.value).toDate();t.setFullYear(t.getFullYear()+12);const E=t.getTime();C<=E&&C>=P?c.setErrors(null):C<=E?c.setErrors({DoBChildUnder:!0}):C>P&&c.setErrors({DoBChildUpper:!0})},D=(s,h)=>d=>{const c=d.controls[s];if(!c.value)return;const C=e(h).startOf("day").add(0,"hours").toDate().getTime(),I=e(c.value).startOf("day").toDate().getTime(),P=e(c.value).startOf("day").toDate();P.setFullYear(P.getFullYear()+2);const t=P.getTime();c.setErrors(C<t&&C>I?null:{DoBInfant:!0})},n=(s,h)=>d=>{const c=d.controls[s];if(!c.value)return;const C=e(h).startOf("day").add(0,"hours").toDate().getTime(),I=e(c.value).toDate().getTime();c.setErrors(C-I>=378683424e3?null:{DoBAdult:!0})},b=s=>h=>{const d=h.controls[s];d.value&&d.setErrors(""!=d.value?null:{required:!0})},o=()=>s=>{let h=[];for(let d=0;d<s.controls.infantPassenger.controls.length;d++){const c=s.controls.infantPassenger.at(d).controls.parentIndex.value;h.push({index:d,parentIndex:c})}for(let d=0;d<s.controls.infantPassenger.controls.length;d++){const c=s.controls.infantPassenger.at(d).controls.parentIndex.value;h.filter(I=>I.parentIndex===c).length>1?s.controls.infantPassenger.at(d).controls.parentIndex.setErrors({ParentInfantDupplicate:!0}):s.controls.infantPassenger.at(d).controls.parentIndex.setErrors(null)}},m=(s,h)=>d=>{const c=d.controls[s],C=d.controls[h];if(!c.value||!C.value)return;const I=e(c.value).startOf("day").add(0,"hours").toDate().getTime();e(C.value).startOf("day").add(0,"hours").toDate().getTime()<=I?c.setErrors({issuanceDateInvalid:!0}):c.setErrors(null)}},49195:(M,T,a)=>{a.d(T,{t:()=>e});var r=a(53820);const e={[r.b.CREATE]:{name:"\u0110ang canh v\xe9",description:"Canh v\xe9 r\u1ebb \u0111ang ho\u1ea1t \u0111\u1ed9ng t\u1ef1 \u0111\u1ed9ng",icon:"search",backgroundColor:"bg-[#FFEAB9]",textColor:"text-secondary-7-5"},[r.b.IN_PROCESS]:{name:"\u0110ang canh v\xe9",description:"Canh v\xe9 r\u1ebb \u0111ang ho\u1ea1t \u0111\u1ed9ng t\u1ef1 \u0111\u1ed9ng",icon:"search",backgroundColor:"bg-[#FFEAB9]",textColor:"text-secondary-7-5"},[r.b.COMPLETED]:{name:"\u0110\xe3 canh th\xe0nh c\xf4ng",description:"\u0110\xe3 canh \u0111\u01b0\u1ee3c gi\xe1 v\xe9 r\u1ebb",icon:"check",backgroundColor:"bg-[#07A35D]",textColor:"text-neutral-white"},[r.b.IN_PROCESS_PRICE_UP]:{name:"\u0110ang canh gi\xe1 t\u0103ng",description:"Gi\xe1 v\xe9 \u0111\xe3 t\u0103ng, vui l\xf2ng c\xe2n nh\u1eafc xu\u1ea5t v\xe9",icon:"arrow_right_up",backgroundColor:"bg-[#ffd1bc]",textColor:"text-primary-1-4"},[r.b.CANCEL]:{name:"\u0110\xe3 h\u1ee7y",description:"\u0110\xe3 h\u1ee7y y\xeau c\u1ea7u canh v\xe9",icon:"delete",backgroundColor:"bg-[#999999]",textColor:"text-neutral-white"},[r.b.EXPIRED]:{name:"\u0110\xe3 h\u1ebft h\u1ea1n",description:"H\u1ebft h\u1ea1n canh v\xe9",icon:"clock",backgroundColor:"bg-[#CCCCCC]",textColor:"text-neutral-gray-6"}}},53820:(M,T,a)=>{a.d(T,{b:()=>r});var r=(()=>{return(e=r||(r={})).CREATE="CREATE",e.IN_PROCESS="IN_PROCESS",e.IN_PROCESS_PRICE_UP="IN_PROCESS_PRICE_UP",e.COMPLETED="COMPLETED",e.EXPIRED="EXPIRED",e.CANCEL="CANCEL",r;var e})()},97380:(M,T,a)=>{a.d(T,{D5:()=>d,VP:()=>s,_r:()=>h,v_:()=>P,xj:()=>b,yI:()=>I});var r=a(97582),e=a(87067),f=a(43429),D=a(49195),n=a(53820);let b=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"status",void 0),(0,r.gn)([(0,f.D)(()=>o),(0,e.C)()],t.prototype,"data",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"objectError",void 0),t})(),o=(()=>{class t{}return(0,r.gn)([(0,f.D)(()=>s),(0,e.C)()],t.prototype,"listOrder",void 0),(0,r.gn)([(0,f.D)(()=>m),(0,e.C)()],t.prototype,"orderTaskStatus",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"pageOffset",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"pageSize",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"total",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"empty",void 0),t})(),m=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"canCreateOrder",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"completeTask",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"inProcessTask",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"maxTask",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"numMaxFree",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"numOrderFree",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"ownerId",void 0),t})(),s=(()=>{class t{get stateDisplay(){switch(this.state){case n.b.CREATE:return D.t[n.b.CREATE].name;case n.b.IN_PROCESS:return D.t[n.b.IN_PROCESS].name;case n.b.COMPLETED:return D.t[n.b.COMPLETED].name;case n.b.CANCEL:return D.t[n.b.CANCEL].name;case n.b.EXPIRED:return D.t[n.b.EXPIRED].name;case n.b.IN_PROCESS_PRICE_UP:return D.t[n.b.IN_PROCESS_PRICE_UP].name;default:return""}}}return(0,r.gn)([(0,e.C)()],t.prototype,"orderId",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"canUpdate",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"code",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"state",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"monitorType",void 0),(0,r.gn)([(0,f.D)(()=>h),(0,e.C)()],t.prototype,"ticketInfo",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"distributionChannel",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"orderInfo",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"fareInfo",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"ownerInfo",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"userActionInfo",void 0),(0,r.gn)([(0,f.D)(()=>P),(0,e.C)()],t.prototype,"availableSlotInfo",void 0),t})(),h=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"leg",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"airline",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"flightType",void 0),(0,r.gn)([(0,f.D)(()=>d),(0,e.C)()],t.prototype,"journeys",void 0),(0,r.gn)([(0,f.D)(()=>I),(0,e.C)()],t.prototype,"passengers",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"totalFare",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"originalPrice",void 0),t})(),d=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"leg",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"startPoint",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"endPoint",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"departTime",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"arrivalTime",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"duration",void 0),(0,r.gn)([(0,f.D)(()=>C),(0,e.C)()],t.prototype,"segments",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"rangeTime",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"rangeDateTime",void 0),t})(),C=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"startPoint",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"endPoint",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"flightNumber",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"fareBasic",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"fareClass",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"departTime",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"departZone",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"arriveTime",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"arriveZone",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"index",void 0),t})(),I=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"birthday",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"firstName",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"lastName",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"type",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"index",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"parentIndex",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"key",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"parentKey",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"namePrefix",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"gender",void 0),t})(),P=(()=>{class t{}return(0,r.gn)([(0,e.C)()],t.prototype,"amountPerPax",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"currency",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"free",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"percent",void 0),(0,r.gn)([(0,e.C)()],t.prototype,"type",void 0),t})()},35650:(M,T,a)=>{a.d(T,{Z:()=>D});var r=a(91998),e=a(80953),f=a(40833);function D(n,b){(0,f.Z)(2,arguments);var o=(0,e.Z)(n),m=(0,r.Z)(b);return isNaN(m)?new Date(NaN):(m&&o.setDate(o.getDate()+m),o)}},43201:(M,T,a)=>{a.d(T,{Z:()=>n});var r=a(91998),e=a(80953),f=a(40833);function n(b,o){return(0,f.Z)(2,arguments),function D(b,o){(0,f.Z)(2,arguments);var m=(0,e.Z)(b),s=(0,r.Z)(o);if(isNaN(s))return new Date(NaN);if(!s)return m;var h=m.getDate(),d=new Date(m.getTime());return d.setMonth(m.getMonth()+s+1,0),h>=d.getDate()?d:(m.setFullYear(d.getFullYear(),d.getMonth(),h),m)}(b,12*(0,r.Z)(o))}},4688:(M,T,a)=>{a.d(T,{b:()=>b});var r=a(36895),e=a(94650),f=a(72506);function D(o,m){if(1&o){const s=e.EpF();e.TgZ(0,"cf-icon",3),e.NdJ("click",function(d){e.CHM(s);const c=e.oxw();return e.KtG(c.close(d))}),e.qZA()}}const n=["*"];let b=(()=>{class o{constructor(s,h,d){this.renderer=s,this.elementRef=h,this.mode="default",this.type="solid",this.size="medium",this.color="red",this.onClose=new e.vpe,d.registerIcons([f.UNF])}ngOnChanges(s){this.loadClasses()}ngOnInit(){this.loadClasses()}loadClasses(){this.classes="rounded inline-flex justify-center items-center gap-x-1 "+this.getSizeClass()+" "+this.getModeClass()}getSizeClass(){return"small"===this.size?"py-1 px-2 text-express-sm":"xsmall"===this.size?"py-[2px] px-1 text-express-sm":"py-1.5 px-3 text-express-md"}getModeClass(){return"outline"===this.type?`bg-white bordertext-${this.color}-4 border-${this.color}-4`:"inverted"===this.type?`bg-${this.color}-1 text-${this.color}-4`:"gray-2"===this.color?"text-neutral-gray-6 bg-neutral-gray-2":`text-neutral-white bg-${this.color}-4`}close(s){this.onClose.emit(s),s.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(f.KNP))},o.\u0275cmp=e.Xpm({type:o,selectors:[["cf-label"]],hostVars:2,hostBindings:function(s,h){2&s&&e.Tol(h.classes)},inputs:{mode:"mode",type:"type",size:"size",color:"color"},outputs:{onClose:"onClose"},standalone:!0,features:[e.TTD,e.jDz],ngContentSelectors:n,decls:4,vars:1,consts:[[1,"flex","justify-between","items-center","gap-x-2"],[1,"text-ellipsis","overflow-hidden","whitespace-normal","flex","items-center"],["icon","close","size","small","class","cursor-pointer",3,"click",4,"ngIf"],["icon","close","size","small",1,"cursor-pointer",3,"click"]],template:function(s,h){1&s&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.YNc(3,D,1,0,"cf-icon",2),e.qZA()),2&s&&(e.xp6(3),e.Q6J("ngIf","closeable"===h.mode))},dependencies:[r.ez,r.O5,f.AxE,f.Sm8],encapsulation:2,changeDetection:0}),o})()}}]);