var Reflect;(function(j){!function(Z){var le="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),Le=fe(j);function fe(He,et){return function(tt,Ze){"function"!=typeof He[tt]&&Object.defineProperty(He,tt,{configurable:!0,writable:!0,value:Ze}),et&&et(tt,Ze)}}typeof le.Reflect>"u"?le.Reflect=j:Le=fe(le.Reflect,Le),function(Z){var le=Object.prototype.hasOwnProperty,Le="function"==typeof Symbol,fe=Le&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",He=Le&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",et="function"==typeof Object.create,tt={__proto__:[]}instanceof Array,Ze=!et&&!tt,ot={create:et?function(){return fo(Object.create(null))}:tt?function(){return fo({__proto__:null})}:function(){return fo({})},has:Ze?function(F,Y){return le.call(F,Y)}:function(F,Y){return Y in F},get:Ze?function(F,Y){return le.call(F,Y)?F[Y]:void 0}:function(F,Y){return F[Y]}},tn=Object.getPrototypeOf(Function),Gt="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,te=Gt||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function Wn(){var F={},Y=[],Q=function(){function Me(Ye,ge,nt){this._index=0,this._keys=Ye,this._values=ge,this._selector=nt}return Me.prototype["@@iterator"]=function(){return this},Me.prototype[He]=function(){return this},Me.prototype.next=function(){var Ye=this._index;if(Ye>=0&&Ye<this._keys.length){var ge=this._selector(this._keys[Ye],this._values[Ye]);return Ye+1>=this._keys.length?(this._index=-1,this._keys=Y,this._values=Y):this._index++,{value:ge,done:!1}}return{value:void 0,done:!0}},Me.prototype.throw=function(Ye){throw this._index>=0&&(this._index=-1,this._keys=Y,this._values=Y),Ye},Me.prototype.return=function(Ye){return this._index>=0&&(this._index=-1,this._keys=Y,this._values=Y),{value:Ye,done:!0}},Me}();return function(){function Me(){this._keys=[],this._values=[],this._cacheKey=F,this._cacheIndex=-2}return Object.defineProperty(Me.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Me.prototype.has=function(Ye){return this._find(Ye,!1)>=0},Me.prototype.get=function(Ye){var ge=this._find(Ye,!1);return ge>=0?this._values[ge]:void 0},Me.prototype.set=function(Ye,ge){var nt=this._find(Ye,!0);return this._values[nt]=ge,this},Me.prototype.delete=function(Ye){var ge=this._find(Ye,!1);if(ge>=0){for(var nt=this._keys.length,st=ge+1;st<nt;st++)this._keys[st-1]=this._keys[st],this._values[st-1]=this._values[st];return this._keys.length--,this._values.length--,Ye===this._cacheKey&&(this._cacheKey=F,this._cacheIndex=-2),!0}return!1},Me.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=F,this._cacheIndex=-2},Me.prototype.keys=function(){return new Q(this._keys,this._values,he)},Me.prototype.values=function(){return new Q(this._keys,this._values,Se)},Me.prototype.entries=function(){return new Q(this._keys,this._values,xt)},Me.prototype["@@iterator"]=function(){return this.entries()},Me.prototype[He]=function(){return this.entries()},Me.prototype._find=function(Ye,ge){return this._cacheKey!==Ye&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Ye)),this._cacheIndex<0&&ge&&(this._cacheIndex=this._keys.length,this._keys.push(Ye),this._values.push(void 0)),this._cacheIndex},Me}();function he(Me,Ye){return Me}function Se(Me,Ye){return Ye}function xt(Me,Ye){return[Me,Ye]}}():Map,Ue=Gt||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function mo(){return function(){function F(){this._map=new te}return Object.defineProperty(F.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),F.prototype.has=function(Y){return this._map.has(Y)},F.prototype.add=function(Y){return this._map.set(Y,Y),this},F.prototype.delete=function(Y){return this._map.delete(Y)},F.prototype.clear=function(){this._map.clear()},F.prototype.keys=function(){return this._map.keys()},F.prototype.values=function(){return this._map.values()},F.prototype.entries=function(){return this._map.entries()},F.prototype["@@iterator"]=function(){return this.keys()},F.prototype[He]=function(){return this.keys()},F}()}():Set,H=new(Gt||"function"!=typeof WeakMap?function ta(){var F=16,Y=ot.create(),Q=he();return function(){function ge(){this._key=he()}return ge.prototype.has=function(nt){var st=Se(nt,!1);return void 0!==st&&ot.has(st,this._key)},ge.prototype.get=function(nt){var st=Se(nt,!1);return void 0!==st?ot.get(st,this._key):void 0},ge.prototype.set=function(nt,st){return Se(nt,!0)[this._key]=st,this},ge.prototype.delete=function(nt){var st=Se(nt,!1);return void 0!==st&&delete st[this._key]},ge.prototype.clear=function(){this._key=he()},ge}();function he(){var ge;do{ge="@@WeakMap@@"+Ye()}while(ot.has(Y,ge));return Y[ge]=!0,ge}function Se(ge,nt){if(!le.call(ge,Q)){if(!nt)return;Object.defineProperty(ge,Q,{value:ot.create()})}return ge[Q]}function xt(ge,nt){for(var st=0;st<nt;++st)ge[st]=255*Math.random()|0;return ge}function Ye(){var ge=function Me(ge){return"function"==typeof Uint8Array?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(ge)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(ge)):xt(new Uint8Array(ge),ge):xt(new Array(ge),ge)}(F);ge[6]=79&ge[6]|64,ge[8]=191&ge[8]|128;for(var nt="",st=0;st<F;++st){var Mn=ge[st];(4===st||6===st||8===st)&&(nt+="-"),Mn<16&&(nt+="0"),nt+=Mn.toString(16).toLowerCase()}return nt}}():WeakMap);function ht(F,Y,Q){var he=H.get(F);if(C(he)){if(!Q)return;he=new te,H.set(F,he)}var Se=he.get(Y);if(C(Se)){if(!Q)return;Se=new te,he.set(Y,Se)}return Se}function nr(F,Y,Q){if(oe(F,Y,Q))return!0;var Se=cn(Y);return!kt(Se)&&nr(F,Se,Q)}function oe(F,Y,Q){var he=ht(Y,Q,!1);return!C(he)&&function ct(F){return!!F}(he.has(F))}function pt(F,Y,Q){if(oe(F,Y,Q))return qt(F,Y,Q);var Se=cn(Y);return kt(Se)?void 0:pt(F,Se,Q)}function qt(F,Y,Q){var he=ht(Y,Q,!1);if(!C(he))return he.get(F)}function ln(F,Y,Q,he){ht(Q,he,!0).set(F,Y)}function dn(F,Y){var Q=qe(F,Y),he=cn(F);if(null===he)return Q;var Se=dn(he,Y);if(Se.length<=0)return Q;if(Q.length<=0)return Se;for(var xt=new Ue,Me=[],Ye=0,ge=Q;Ye<ge.length;Ye++)xt.has(nt=ge[Ye])||(xt.add(nt),Me.push(nt));for(var Mn=0,Wa=Se;Mn<Wa.length;Mn++){var nt;xt.has(nt=Wa[Mn])||(xt.add(nt),Me.push(nt))}return Me}function qe(F,Y){var Q=[],he=ht(F,Y,!1);if(C(he))return Q;for(var xt=function Ei(F){var Y=Kt(F,He);if(!kn(Y))throw new TypeError;var Q=Y.call(F);if(!bt(Q))throw new TypeError;return Q}(he.keys()),Me=0;;){var Ye=uo(xt);if(!Ye)return Q.length=Me,Q;var ge=_t(Ye);try{Q[Me]=ge}catch(nt){try{ki(xt)}finally{throw nt}}Me++}}function dt(F){if(null===F)return 1;switch(typeof F){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===F?1:6;default:return 6}}function C(F){return void 0===F}function kt(F){return null===F}function bt(F){return"object"==typeof F?null!==F:"function"==typeof F}function jr(F,Y){switch(dt(F)){case 0:case 1:case 2:case 3:case 4:case 5:return F}var Q=3===Y?"string":5===Y?"number":"default",he=Kt(F,fe);if(void 0!==he){var Se=he.call(F,Q);if(bt(Se))throw new TypeError;return Se}return function Ke(F,Y){if("string"===Y){var Q=F.toString;if(kn(Q)&&!bt(he=Q.call(F)))return he;if(kn(Se=F.valueOf)&&!bt(he=Se.call(F)))return he}else{var Se;if(kn(Se=F.valueOf)&&!bt(he=Se.call(F)))return he;var he,xt=F.toString;if(kn(xt)&&!bt(he=xt.call(F)))return he}throw new TypeError}(F,"default"===Q?"number":Q)}function U(F){var Y=jr(F,3);return function vn(F){return"symbol"==typeof F}(Y)?Y:function ze(F){return""+F}(Y)}function _r(F){return Array.isArray?Array.isArray(F):F instanceof Object?F instanceof Array:"[object Array]"===Object.prototype.toString.call(F)}function kn(F){return"function"==typeof F}function Ae(F){return"function"==typeof F}function Kt(F,Y){var Q=F[Y];if(null!=Q){if(!kn(Q))throw new TypeError;return Q}}function _t(F){return F.value}function uo(F){var Y=F.next();return!Y.done&&Y}function ki(F){var Y=F.return;Y&&Y.call(F)}function cn(F){var Y=Object.getPrototypeOf(F);if("function"!=typeof F||F===tn||Y!==tn)return Y;var Q=F.prototype,he=Q&&Object.getPrototypeOf(Q);if(null==he||he===Object.prototype)return Y;var Se=he.constructor;return"function"!=typeof Se||Se===F?Y:Se}function fo(F){return F.__=void 0,delete F.__,F}Z("decorate",function V(F,Y,Q,he){if(C(Q)){if(!_r(F))throw new TypeError;if(!Ae(Y))throw new TypeError;return function tr(F,Y){for(var Q=F.length-1;Q>=0;--Q){var Se=(0,F[Q])(Y);if(!C(Se)&&!kt(Se)){if(!Ae(Se))throw new TypeError;Y=Se}}return Y}(F,Y)}if(!_r(F))throw new TypeError;if(!bt(Y))throw new TypeError;if(!bt(he)&&!C(he)&&!kt(he))throw new TypeError;return kt(he)&&(he=void 0),function X(F,Y,Q,he){for(var Se=F.length-1;Se>=0;--Se){var Me=(0,F[Se])(Y,Q,he);if(!C(Me)&&!kt(Me)){if(!bt(Me))throw new TypeError;he=Me}}return he}(F,Y,Q=U(Q),he)}),Z("metadata",function se(F,Y){return function Q(he,Se){if(!bt(he))throw new TypeError;if(!C(Se)&&!function co(F){switch(dt(F)){case 3:case 4:return!0;default:return!1}}(Se))throw new TypeError;ln(F,Y,he,Se)}}),Z("defineMetadata",function J(F,Y,Q,he){if(!bt(Q))throw new TypeError;return C(he)||(he=U(he)),ln(F,Y,Q,he)}),Z("hasMetadata",function ne(F,Y,Q){if(!bt(Y))throw new TypeError;return C(Q)||(Q=U(Q)),nr(F,Y,Q)}),Z("hasOwnMetadata",function M(F,Y,Q){if(!bt(Y))throw new TypeError;return C(Q)||(Q=U(Q)),oe(F,Y,Q)}),Z("getMetadata",function Ce(F,Y,Q){if(!bt(Y))throw new TypeError;return C(Q)||(Q=U(Q)),pt(F,Y,Q)}),Z("getOwnMetadata",function ke(F,Y,Q){if(!bt(Y))throw new TypeError;return C(Q)||(Q=U(Q)),qt(F,Y,Q)}),Z("getMetadataKeys",function We(F,Y){if(!bt(F))throw new TypeError;return C(Y)||(Y=U(Y)),dn(F,Y)}),Z("getOwnMetadataKeys",function we(F,Y){if(!bt(F))throw new TypeError;return C(Y)||(Y=U(Y)),qe(F,Y)}),Z("deleteMetadata",function Et(F,Y,Q){if(!bt(Y))throw new TypeError;C(Q)||(Q=U(Q));var he=ht(Y,Q,!1);if(C(he)||!he.delete(F))return!1;if(he.size>0)return!0;var Se=H.get(Y);return Se.delete(Q),Se.size>0||H.delete(Y),!0})}(Le)}()})(Reflect||(Reflect={})),function(){"use strict";var j=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},Z=function(e){return{eq:e}},le=Z(function(e,t){return e===t}),Le=function(e){return Z(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},fe=function(e){return Z(function(t,n){var l,c,u,r=Object.keys(t),o=Object.keys(n);if(!(l=le,c=Le(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},Z(function(m,p){return c.eq(u(m),u(p))})).eq(r,o))return!1;for(var a=r.length,s=0;s<a;s++){var i=r[s];if(!e.eq(t[i],n[i]))return!1}return!0})},He=Z(function(e,t){if(e===t)return!0;var n=j(e);return n===j(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?Le(He).eq(e,t):"object"===n&&fe(He).eq(e,t))});const et=Object.getPrototypeOf,tt=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},Ze=e=>t=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&tt(n,String,(o,a)=>a.isPrototypeOf(o))?"string":r})(t)===e,ot=e=>t=>typeof t===e,tn=e=>t=>e===t,Gt=(e,t)=>Ue(e)&&tt(e,t,(n,r)=>et(n)===r),te=Ze("string"),Ue=Ze("object"),lt=e=>Gt(e,Object),H=Ze("array"),V=tn(null),se=ot("boolean"),J=tn(void 0),ne=e=>null==e,M=e=>!ne(e),Ce=ot("function"),ke=ot("number"),We=(e,t)=>{if(H(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},we=()=>{},Et=(e,t)=>(...n)=>e(t.apply(null,n)),tr=(e,t)=>n=>e(t(n)),X=e=>()=>e,ht=e=>e,nr=(e,t)=>e===t;function oe(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const pt=e=>t=>!e(t),qt=e=>()=>{throw new Error(e)},ln=e=>e(),dn=e=>{e()},qe=X(!1),dt=X(!0);class C{constructor(t,n){this.tag=t,this.value=n}static some(t){return new C(!0,t)}static none(){return C.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?C.some(t(this.value)):C.none()}bind(t){return this.tag?t(this.value):C.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:C.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return M(t)?C.some(t):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const kt=Array.prototype.slice,vn=Array.prototype.indexOf,bt=Array.prototype.push,jr=(e,t)=>vn.call(e,t),Ke=(e,t)=>jr(e,t)>-1,ct=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},ze=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=t(e[o],o);return r},U=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},_r=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},kn=(e,t)=>{const n=[],r=[];for(let o=0,a=e.length;o<a;o++){const s=e[o];(t(s,o)?n:r).push(s)}return{pass:n,fail:r}},Ae=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];t(a,r)&&n.push(a)}return n},co=(e,t,n)=>(_r(e,(r,o)=>{n=t(n,r,o)}),n),Kt=(e,t,n)=>(U(e,(r,o)=>{n=t(n,r,o)}),n),Ei=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const a=e[r];if(t(a,r))return C.some(a);if(n(a,r))break}return C.none()},_t=(e,t)=>Ei(e,t,qe),uo=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return C.some(n);return C.none()},ki=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!H(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);bt.apply(t,e[n])}return t},cn=(e,t)=>ki(ze(e,t)),Wn=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},mo=e=>{const t=kt.call(e,0);return t.reverse(),t},ta=(e,t)=>Ae(e,n=>!Ke(t,n)),fo=(e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const a=e[r];n[String(a)]=t(a,r)}return n},F=(e,t)=>{const n=kt.call(e,0);return n.sort(t),n},Y=(e,t)=>t>=0&&t<e.length?C.some(e[t]):C.none(),Q=e=>Y(e,0),he=e=>Y(e,e.length-1),Se=Ce(Array.from)?Array.from:e=>kt.call(e),xt=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return C.none()},Me=Object.keys,Ye=Object.hasOwnProperty,ge=(e,t)=>{const n=Me(e);for(let r=0,o=n.length;r<o;r++){const a=n[r];t(e[a],a)}},nt=(e,t)=>st(e,(n,r)=>({k:r,v:t(n,r)})),st=(e,t)=>{const n={};return ge(e,(r,o)=>{const a=t(r,o);n[a.k]=a.v}),n},Mn=e=>(t,n)=>{e[n]=t},Wa=(e,t,n,r)=>{ge(e,(o,a)=>{(t(o,a)?n:r)(o,a)})},Ga=(e,t)=>{const n={};return Wa(e,t,Mn(n),we),n},_i=(e,t)=>{const n=[];return ge(e,(r,o)=>{n.push(t(r,o))}),n},xd=e=>_i(e,ht),ut=(e,t)=>Pe(e,t)?C.from(e[t]):C.none(),Pe=(e,t)=>Ye.call(e,t),na=(e,t)=>Pe(e,t)&&null!=e[t],Xf=e=>{const t={};return U(e,n=>{t[n]={}}),Me(t)},Zf=e=>void 0!==e.length,Sd=Array.isArray,xi=(e,t,n)=>{if(!e)return!1;if(n=n||e,Zf(e)){for(let r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(const r in e)if(Pe(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},Ad=(e,t)=>{const n=[];return xi(e,(r,o)=>{n.push(t(r,o,e))}),n},Ka=(e,t)=>{const n=[];return xi(e,(r,o)=>{t&&!t(r,o,e)||n.push(r)}),n},Si=(e,t,n,r)=>{let o=J(n)?e[0]:n;for(let a=0;a<e.length;a++)o=t.call(r,o,e[a],a);return o},Qf=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},go=e=>e[e.length-1],po=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Jf=()=>Nd(0,0),Nd=(e,t)=>({major:e,minor:t}),Ya={nu:Nd,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Jf():((r,o)=>{const a=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(r,o);if(!a)return{major:0,minor:0};const s=i=>Number(o.replace(a,"$"+i));return Nd(s(1),s(2))})(e,n)},unknown:Jf},eg=(e,t)=>{const n=String(t).toLowerCase();return _t(e,r=>r.search(n))},tg=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,ng=(e,t)=>Ut(e,t)?e.substring(t.length):e,Yt=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!J(r)||o+t.length<=r)},Ut=(e,t)=>tg(e,t,0),Rd=(e,t)=>tg(e,t,e.length-t.length),Td=e=>t=>t.replace(e,""),ra=Td(/^\s+|\s+$/g),n_=Td(/^\s+/g),rg=Td(/\s+$/g),rr=e=>e.length>0,Xa=e=>!rr(e),Ai=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?C.none():C.some(n)},Od=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xr=e=>t=>Yt(t,e),r_=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Yt(e,"edge/")&&Yt(e,"chrome")&&Yt(e,"safari")&&Yt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Od],search:e=>Yt(e,"chrome")&&!Yt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Yt(e,"msie")||Yt(e,"trident")},{name:"Opera",versionRegexes:[Od,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xr("firefox")},{name:"Safari",versionRegexes:[Od,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Yt(e,"safari")||Yt(e,"mobile/"))&&Yt(e,"applewebkit")}],o_=[{name:"Windows",search:xr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Yt(e,"iphone")||Yt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:xr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xr("linux"),versionRegexes:[]},{name:"Solaris",search:xr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:xr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],og={browsers:X(r_),oses:X(o_)},sg="Chromium",lg="Firefox",cg=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isEdge:r("Edge"),isChromium:r(sg),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(lg),isSafari:r("Safari")}},a_=()=>cg({current:void 0,version:Ya.unknown()}),s_=cg,ug=(X("Edge"),X(sg),X("IE"),X("Opera"),X(lg),X("Safari"),"Windows"),mg="Android",pg="Solaris",hg="FreeBSD",bg="ChromeOS",vg=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isWindows:r(ug),isiOS:r("iOS"),isAndroid:r(mg),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(pg),isFreeBSD:r(hg),isChromeOS:r(bg)}},i_=()=>vg({current:void 0,version:Ya.unknown()}),l_=vg,d_=(X(ug),X("iOS"),X(mg),X("Linux"),X("macOS"),X(pg),X(hg),X(bg),e=>window.matchMedia(e).matches);let c_=po(()=>((e,t,n)=>{const r=og.browsers(),o=og.oses(),a=t.bind(l=>{return d=r,xt(l.brands,u=>{const m=u.brand.toLowerCase();return _t(d,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:Ya.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return eg(r,d=e).map(c=>{const u=Ya.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(a_,s_),s=(l=o,d=e,eg(l,d).map(c=>{const u=Ya.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(i_,l_),i=((l,d,c,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!g&&!v;return{isiPad:X(m),isiPhone:X(p),isTablet:X(g),isPhone:X(b),isTouch:X(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:X(v),isDesktop:X(y)}})(s,a,e,n);var l,d;return{browser:a,os:s,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),d_));const or=()=>c_(),u_=navigator.userAgent,Bd=or(),ar=Bd.browser,sr=Bd.os,ho=Bd.deviceType,m_=-1!==u_.indexOf("Windows Phone"),Ge={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ar.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ar.isIE(),windowsPhone:m_,browser:{current:ar.current,version:ar.version,isChromium:ar.isChromium,isEdge:ar.isEdge,isFirefox:ar.isFirefox,isIE:ar.isIE,isOpera:ar.isOpera,isSafari:ar.isSafari},os:{current:sr.current,version:sr.version,isAndroid:sr.isAndroid,isChromeOS:sr.isChromeOS,isFreeBSD:sr.isFreeBSD,isiOS:sr.isiOS,isLinux:sr.isLinux,isMacOS:sr.isMacOS,isSolaris:sr.isSolaris,isWindows:sr.isWindows},deviceType:{isDesktop:ho.isDesktop,isiPad:ho.isiPad,isiPhone:ho.isiPhone,isPhone:ho.isPhone,isTablet:ho.isTablet,isTouch:ho.isTouch,isWebView:ho.isWebView}},f_=/^\s*|\s*$/g,yg=e=>ne(e)?"":(""+e).replace(f_,""),Cg=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),xi(e,(o,a)=>!1!==t.call(r,o,a,n)&&(Cg(o,t,n,r),!0)))},G={trim:yg,isArray:Sd,is:(e,t)=>t?!("array"!==t||!Sd(e))||typeof e===t:void 0!==e,toArray:e=>{if(Sd(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const r=te(e)?e.split(t||","):e||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:xi,map:Ad,grep:Ka,inArray:(e,t)=>{if(e)for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hasOwn:Pe,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(Pe(r,o)){const a=r[o];void 0!==a&&(e[o]=a)}}return e},walk:Cg,resolve:(e,t=window)=>{const n=e.split(".");for(let r=0,o=n.length;r<o&&(t=t[n[r]]);r++);return t},explode:(e,t)=>H(e)?e:""===e?[]:Ad(e.split(t||","),yg),_addCacheSuffix:e=>{const t=Ge.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},oa=(e,t,n=nr)=>e.exists(r=>n(r,t)),wg=(e,t,n=nr)=>Xt(e,t,n).getOr(e.isNone()&&t.isNone()),Xt=(e,t,n)=>e.isSome()&&t.isSome()?C.some(n(e.getOrDie(),t.getOrDie())):C.none(),aa=(e,t)=>e?C.some(t):C.none(),g_=typeof window<"u"?window:Function("return this;")(),Eg=(e,t)=>((n,r)=>{let o=null!=r?r:g_;for(let a=0;a<n.length&&null!=o;++a)o=o[n[a]];return o})(e.split("."),t),p_=Object.getPrototypeOf,Ve=e=>e.dom.nodeName.toLowerCase(),kg=e=>e.dom.nodeType,Ni=e=>t=>kg(t)===e,Ri=e=>yn(e)&&(e=>{const t=Eg("ownerDocument.defaultView",e);return Ue(e)&&((n=t,((r,o)=>{const a=Eg(r,o);if(null==a)throw new Error(r+" not available on this browser");return a})("HTMLElement",n)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(p_(e).constructor.name));var n})(e.dom),yn=Ni(1),_n=Ni(3),b_=Ni(9),v_=Ni(11),Ti=e=>t=>yn(t)&&Ve(t)===e,_g=(e,t,n)=>{if(!(te(n)||se(n)||ke(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},$t=(e,t,n)=>{_g(e.dom,t,n)},Sr=(e,t)=>{const n=e.dom;ge(t,(r,o)=>{_g(n,o,r)})},Cn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Ar=(e,t)=>C.from(Cn(e,t)),Za=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},zt=(e,t)=>{e.dom.removeAttribute(t)},xg=e=>Kt(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Ld=(e,t)=>{const n=Cn(e,t);return void 0===n||""===n?[]:n.split(" ")},Qa=e=>void 0!==e.dom.classList,Sg=e=>Ld(e,"class"),Ag=(e,t)=>((n,r,o)=>{const a=Ld(n,r).concat([o]);return $t(n,r,a.join(" ")),!0})(e,"class",t),Ng=(e,t)=>((n,r,o)=>{const a=Ae(Ld(n,r),s=>s!==o);return a.length>0?$t(n,r,a.join(" ")):zt(n,r),!1})(e,"class",t),sa=(e,t)=>{Qa(e)?e.dom.classList.add(t):Ag(e,t)},Rg=e=>{0===(Qa(e)?e.dom.classList:Sg(e)).length&&zt(e,"class")},Ja=(e,t)=>{Qa(e)?e.dom.classList.remove(t):Ng(e,t),Rg(e)},Pd=(e,t)=>Qa(e)&&e.dom.classList.contains(t),es=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},ts=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return es(n.childNodes[0])},Ot=(e,t)=>{const n=(t||document).createElement(e);return es(n)},ia=(e,t)=>{const n=(t||document).createTextNode(e);return es(n)},_=es,Tg=(e,t)=>{const n=[],r=a=>(n.push(a),t(a));let o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Gn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Og=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Xe=(e,t)=>e.dom===t.dom,Nr=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Bg=e=>_(e.dom.ownerDocument),Rr=e=>b_(e)?e:Bg(e),ns=e=>_(Rr(e).dom.defaultView),Fn=e=>C.from(e.dom.parentNode).map(_),Oi=e=>C.from(e.dom.parentElement).map(_),Lg=(e,t)=>{const n=Ce(t)?t:qe;let r=e.dom;const o=[];for(;null!=r.parentNode;){const a=r.parentNode,s=_(a);if(o.push(s),!0===n(s))break;r=a}return o},bo=e=>C.from(e.dom.previousSibling).map(_),rs=e=>C.from(e.dom.nextSibling).map(_),Pg=e=>mo(Tg(e,bo)),Dg=e=>Tg(e,rs),jt=e=>ze(e.dom.childNodes,_),la=(e,t)=>C.from(e.dom.childNodes[t]).map(_),Dd=e=>la(e,0),Id=e=>la(e,e.dom.childNodes.length-1),Md=e=>e.dom.childNodes.length,Fd=e=>v_(e)&&M(e.dom.host),Ig=Ce(Element.prototype.attachShadow)&&Ce(Node.prototype.getRootNode),C_=X(Ig),Hr=Ig?e=>_(e.dom.getRootNode()):Rr,Ud=e=>Fd(e)?e:(t=>{const n=t.dom.head;if(null==n)throw new Error("Head is not available yet");return _(n)})(Rr(e)),w_=e=>_(e.dom.host),Mg=e=>{if(C_()&&M(e.target)){const t=_(e.target);if(yn(t)&&E_(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Q(n)}}return C.from(e.target)},E_=e=>M(e.dom.shadowRoot),da=e=>{const t=_n(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(r=>{const o=Hr(r);return Fd(o)?C.some(o):C.none()})(_(t)).fold(()=>n.body.contains(t),tr(da,w_))};var Fg=(e,t,n,r,o)=>e(n,r)?C.some(n):Ce(o)&&o(n)?C.none():t(n,r,o);const Tr=(e,t,n)=>{let r=e.dom;const o=Ce(n)?n:qe;for(;r.parentNode;){r=r.parentNode;const a=_(r);if(t(a))return C.some(a);if(o(a))break}return C.none()},vo=(e,t,n)=>Fg((r,o)=>o(r),Tr,e,t,n),Ug=(e,t)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const a=_(r.childNodes[o]);if(t(a))return C.some(a);const s=n(r.childNodes[o]);if(s.isSome())return s}return C.none()};return n(e.dom)},os=(e,t,n)=>Tr(e,r=>Gn(r,t),n),as=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return Og(o)?C.none():C.from(o.querySelector(n)).map(_)})(t,e),yo=(e,t,n)=>Fg((r,o)=>Gn(r,o),os,e,t,n),Co=(e,t=!1)=>{return da(e)?e.dom.isContentEditable:(n=e,yo(n,"[contenteditable]")).fold(X(t),r=>"true"===k_(r));var n},k_=e=>e.dom.contentEditable,ss=e=>void 0!==e.style&&Ce(e.style.getPropertyValue),$g=(e,t,n)=>{if(!te(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ss(e)&&e.style.setProperty(t,n)},zg=(e,t,n)=>{$g(e.dom,t,n)},Bi=(e,t)=>{const n=e.dom;ge(t,(r,o)=>{$g(n,o,r)})},ir=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||da(e)?r:jg(n,t)},jg=(e,t)=>ss(e)?e.style.getPropertyValue(t):"",Li=(e,t)=>{const r=jg(e.dom,t);return C.from(r).filter(o=>o.length>0)},$d=e=>{const t={},n=e.dom;if(ss(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);t[o]=n.style[o]}return t},Hg=(e,t)=>{var n,r;r=t,ss(n=e.dom)&&n.style.removeProperty(r),oa(Ar(e,"style").map(ra),"")&&zt(e,"style")},gn=(e,t)=>{Fn(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Or=(e,t)=>{rs(e).fold(()=>{Fn(e).each(n=>{St(n,t)})},n=>{gn(n,t)})},zd=(e,t)=>{Dd(e).fold(()=>{St(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},St=(e,t)=>{e.dom.appendChild(t.dom)},qg=(e,t)=>{gn(e,t),St(t,e)},wo=(e,t)=>{U(t,n=>{St(e,n)})},ca=e=>{e.dom.textContent="",U(jt(e),t=>{mt(t)})},mt=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Br=e=>{const t=jt(e);var n,r;t.length>0&&(n=e,U(r=t,(o,a)=>{Or(0===a?n:r[a-1],o)})),mt(e)},jd=e=>ze(e,_),Vg=e=>e.dom.innerHTML,Pi=(e,t)=>{const n=Bg(e).dom,r=_(n.createDocumentFragment()),o=((a,s)=>{const i=(s||document).createElement("div");return i.innerHTML=a,jt(_(i))})(t,n);wo(r,o),ca(e),St(e,r)},x_=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Wg=(e,t)=>({left:e,top:t,translate:(n,r)=>Wg(e+n,t+r)}),ua=Wg,Di=(e,t)=>void 0!==e?e:void 0!==t?t:0,Hd=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?ua(n.offsetLeft,n.offsetTop):da(e)?(r=>{const o=r.getBoundingClientRect();return ua(o.left,o.top)})(t):ua(0,0)},qd=e=>{const t=void 0!==e?e.dom:document;return ua(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Gg=(e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Kg=(e,t)=>{or().browser.isSafari()&&Ce(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Yg=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),Xg=e=>{const t=void 0===e?window:e,r=qd(_(t.document));return(o=>{const a=void 0===o?window:o;return or().browser.isFirefox()?C.none():C.from(a.visualViewport)})(t).fold(()=>{const o=t.document.documentElement;return Yg(r.left,r.top,o.clientWidth,o.clientHeight)},o=>Yg(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},Zg=(e,t)=>{let n=[];return U(jt(e),r=>{t(r)&&(n=n.concat([r])),n=n.concat(Zg(r,t))}),n},Zt=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return Og(o)?[]:ze(o.querySelectorAll(n),_)})(t,e),Qg=(e,t,n)=>os(e,t,n).isSome();class Rt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,r,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let a=t[r];if(a)return a;for(let s=t.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(a=s[r],a)return a}}}findPreviousNode(t,n){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let a=r.lastChild;a;a=a.lastChild)if(!a.lastChild)return a;return r}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Eo=e=>t=>!!t&&t.nodeType===e,Ii=e=>!!e&&!Object.getPrototypeOf(e),ue=Eo(1),Lr=e=>ue(e)&&Ri(_(e)),is=e=>{const t=e.toLowerCase();return n=>M(n)&&n.nodeName.toLowerCase()===t},Kn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Ke(t,r)}return!1}},Mi=(e,t)=>{const n=t.toLowerCase().split(" ");return r=>{if(ue(r)){const o=r.ownerDocument.defaultView;if(o)for(let a=0;a<n.length;a++){const s=o.getComputedStyle(r,null);if((s?s.getPropertyValue(e):null)===n[a])return!0}}return!1}},Jg=e=>t=>ue(t)&&t.hasAttribute(e),ko=e=>ue(e)&&e.hasAttribute("data-mce-bogus"),Pr=e=>ue(e)&&"TABLE"===e.tagName,ep=e=>t=>!(!Lr(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),Vd=Kn(["textarea","input"]),W=Eo(3),S_=Eo(4),A_=Eo(7),qr=Eo(8),ls=Eo(9),Wd=Eo(11),vt=is("br"),tp=is("img"),Un=ep("true"),ft=ep("false"),Fi=Kn(["td","th"]),N_=Kn(["td","th","caption"]),lr=Kn(["video","audio","object","embed"]),R_=is("li"),Gd=is("details"),T_=is("summary"),Bt="\xa0",Kd=e=>"\ufeff"===e,Yd=((e,t)=>{const n=r=>e(r)?C.from(r.dom.nodeValue):C.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!e(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(_n),Ui=e=>Yd.get(e),np=e=>Yd.getOption(e),ma=e=>{let t;return n=>(t=t||fo(e,dt),Pe(t,Ve(n)))},_o=e=>yn(e)&&"br"===Ve(e),rp=ma(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Xd=ma(["ul","ol","dl"]),cs=ma(["li","dd","dt"]),O_=ma(["thead","tbody","tfoot"]),us=ma(["td","th"]),$i=ma(["pre","script","textarea","style"]),ms=()=>{const e=Ot("br");return $t(e,"data-mce-bogus","1"),e},Vr=e=>{ca(e),St(e,ms())},Lt="\ufeff",zi=Kd,wn=e=>e.replace(/\uFEFF/g,""),B_=ue,fa=W,ga=e=>(fa(e)&&(e=e.parentNode),B_(e)&&e.hasAttribute("data-mce-caret")),Wr=e=>fa(e)&&zi(e.data),xn=e=>ga(e)||Wr(e),op=e=>e.firstChild!==e.lastChild||!vt(e.firstChild),Zd=e=>{const t=e.container();return!!W(t)&&(t.data.charAt(e.offset())===Lt||e.isAtStart()&&Wr(t.previousSibling))},Qd=e=>{const t=e.container();return!!W(t)&&(t.data.charAt(e.offset()-1)===Lt||e.isAtEnd()&&Wr(t.nextSibling))},ji=e=>fa(e)&&e.data[0]===Lt,Hi=e=>fa(e)&&e.data[e.data.length-1]===Lt,Jd=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const r=t.getElementsByTagName("br"),o=r[r.length-1];ko(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ap=e=>ga(e.startContainer),sp=Un,L_=ft,P_=vt,D_=W,I_=Kn(["script","style","textarea"]),ip=Kn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),M_=Kn(["table"]),F_=xn,$n=e=>!F_(e)&&(D_(e)?!I_(e.parentNode):ip(e)||P_(e)||M_(e)||ec(e)),ec=e=>{return!(ue(t=e)&&"true"===t.getAttribute("unselectable"))&&L_(e);var t},lp=(e,t)=>$n(e)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(ec(o))return!1;if(sp(o))return!0}return!0})(e,t),U_=/^[ \t\r\n]*$/,Gr=e=>U_.test(e),$_=e=>{for(const t of e)if(!Kd(t))return!1;return!0},dp=e=>"\n"===e||"\r"===e,cp=(e,t=4,n=!0,r=!0)=>{const o=(l=t)<=0?"":new Array(l+1).join(" "),a=e.replace(/\t/g,o);var l;return Kt(a,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Bt?i.pcIsSpace||""===i.str&&n||i.str.length===a.length-1&&r||(c=i.str.length+1)<(d=a).length&&c>=0&&dp(d[c])?{pcIsSpace:!1,str:i.str+Bt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:dp(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},qi=(e,t)=>{return $n(e)&&(r=t,!(W(n=e)&&Gr(n.data)&&!((o,a)=>{const s=_(a),i=_(o);return Qg(i,"pre,code",oe(Xe,s))})(n,r)))||(n=>ue(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(e)||z_(e);var n,r},z_=Jg("data-mce-bookmark"),j_=Jg("data-mce-bogus"),H_=e=>ue(e)&&"all"===e.getAttribute("data-mce-bogus"),q_=e=>Oi(_(e)).exists(t=>!Co(t)),yt=(e,t=!0)=>((n,r)=>{let o=0;if(qi(n,n))return!1;{let a=n.firstChild;if(!a)return!0;const s=new Rt(a,n);do{if(r){if(H_(a)){a=s.next(!0);continue}if(j_(a)){a=s.next();continue}}if(Un(a)&&q_(a))return!1;if(vt(a))o++,a=s.next();else{if(qi(a,n))return!1;a=s.next()}}while(a);return o<=1}})(e.dom,t),xo=e=>"svg"===e.toLowerCase(),tc=e=>xo(e.nodeName),up=e=>"svg"===(null==e?void 0:e.nodeName)?"svg":"html",V_=["svg"],Vi="data-mce-block",nc=e=>{return ze((t=e,Ae(Me(t),n=>!/[A-Z]/.test(n))),t=>`${t}:`+ze(V_,n=>`not(${n} ${t})`).join(":")).join(",");var t},mp=(e,t)=>M(t.querySelector(e))?(t.setAttribute(Vi,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Vi),!1),fp=(e,t)=>{const n=nc(e.getTransparentElements()),r=nc(e.getBlockElements());return Ae(t.querySelectorAll(n),o=>mp(r,o))},gp=(e,t)=>{var n;const r=t?"lastChild":"firstChild";for(let o=e[r];o;o=o[r])if(yt(_(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},rc=(e,t)=>{const n=fp(e,t);var r,o,a;((e,t,n)=>{const r=e.getBlockElements(),o=_(t),a=i=>Ve(i)in r,s=i=>Xe(i,o);U(jd(n),i=>{Tr(i,a,s).each(l=>{const d=Ae(jt(i),m=>a(m)&&!e.isValidChild(Ve(l),Ve(m)));if(d.length>0){const c=Oi(l);U(d,u=>{Tr(u,a,s).each(m=>{((p,f)=>{const h=document.createRange(),g=p.parentNode;if(g){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();gp(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();gp(v,!1),yt(_(b))||g.insertBefore(b,p),yt(_(f))||g.insertBefore(f,p),yt(_(v))||g.insertBefore(v,p),g.removeChild(p)}})(m.dom,u.dom)})}),c.each(u=>fp(e,u.dom))}})})})(e,t,n),r=e,o=t,a=n,U([...a,...So(r,o)?[o]:[]],s=>U(Zt(_(s),s.nodeName.toLowerCase()),i=>{K_(r,i.dom)&&Br(i)}))},G_=(e,t)=>{if(sc(e,t)){const n=nc(e.getBlockElements());mp(n,t)}},oc=e=>e.hasAttribute(Vi),ac=(e,t)=>Pe(e.getTransparentElements(),t),sc=(e,t)=>ue(t)&&ac(e,t.nodeName),So=(e,t)=>sc(e,t)&&oc(t),K_=(e,t)=>sc(e,t)&&!oc(t),ic=(e,t)=>1===t.type&&ac(e,t.name)&&te(t.attr(Vi)),Y_=or().browser,pp=e=>_t(e,yn),hp=(e,t)=>e.children&&Ke(e.children,t),bp=(e,t={})=>{let n=0;const r={},o=_(e),a=Rr(o),s=u=>{St(Ud(o),u)},i=u=>{const m=Ud(o);as(m,"#"+u).each(mt)},l=u=>ut(r,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),d=u=>new Promise((m,p)=>{let f;const h=G._addCacheSuffix(u),g=l(h);r[h]=g,g.count++;const b=(w,k)=>{U(w,dn),g.status=k,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>b(g.passed,2),y=()=>b(g.failed,3);if(m&&g.passed.push(m),p&&g.failed.push(p),1===g.status)return;if(2===g.status)return void v();if(3===g.status)return void y();g.status=1;const E=Ot("link",a.dom);Sr(E,{rel:"stylesheet",type:"text/css",id:g.id}),t.contentCssCors&&$t(E,"crossOrigin","anonymous"),t.referrerPolicy&&$t(E,"referrerpolicy",t.referrerPolicy),f=E.dom,f.onload=v,f.onerror=y,s(E),$t(E,"href",h)}),c=u=>{const m=G._addCacheSuffix(u);ut(r,m).each(p=>{0==--p.count&&(delete r[m],i(p.id))})};return{load:d,loadRawCss:(u,m)=>{const p=l(u);r[u]=p,p.count++;const f=Ot("style",a.dom);Sr(f,{rel:"stylesheet",type:"text/css",id:p.id}),f.dom.innerHTML=m,s(f)},loadAll:u=>Promise.allSettled(ze(u,m=>d(m).then(X(m)))).then(m=>{const p=kn(m,f=>"fulfilled"===f.status);return p.fail.length>0?Promise.reject(ze(p.fail,f=>f.reason)):ze(p.pass,f=>f.value)}),unload:c,unloadRawCss:u=>{ut(r,u).each(m=>{0==--m.count&&(delete r[u],i(m.id))})},unloadAll:u=>{U(u,m=>{c(m)})},_setReferrerPolicy:u=>{t.referrerPolicy=u},_setContentCssCors:u=>{t.contentCssCors=u}}},vp=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=Hr(t).dom;return C.from(e.get(r)).getOrThunk(()=>{const o=bp(r,n);return e.set(r,o),o})}}})(),yp=(e,t,n)=>M(e)&&(qi(e,t)||n.isInline(e.nodeName.toLowerCase())),Cp=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),lc=(e,t,n,r)=>{var o;const a=r||t;if(ue(t)&&Cp(t))return t;const s=t.childNodes;for(let i=s.length-1;i>=0;i--)lc(e,s[i],n,a);if(ue(t)){const i=t.childNodes;1===i.length&&Cp(i[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(i[0],t))}return Wd(i=t)||ls(i)||qi(t,a)||(i=>!!ue(i)&&i.childNodes.length>0)(t)||((i,l,d)=>W(i)&&i.data.length>0&&((c,u,m)=>{const p=new Rt(c,u).prev(!1),f=new Rt(c,u).next(!1),h=J(p)||yp(p,u,m),g=J(f)||yp(f,u,m);return h&&g})(i,l,d))(t,a,n)||e.remove(t),t;var i},X_=G.makeMap,Wi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Z_=/[<>&\"\']/g,Q_=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,J_={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ao={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ex={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},wp=(e,t)=>{const n={};if(e){const r=e.split(",");t=t||10;for(let o=0;o<r.length;o+=2){const a=String.fromCharCode(parseInt(r[o],t));if(!Ao[a]){const s="&"+r[o+1]+";";n[a]=s,n[s]=a}}return n}},dc=wp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ep=(e,t)=>e.replace(t?Wi:Gi,n=>Ao[n]||n),kp=(e,t)=>e.replace(t?Wi:Gi,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Ao[n]||"&#"+n.charCodeAt(0)+";"),cc=(e,t,n)=>{const r=n||dc;return e.replace(t?Wi:Gi,o=>Ao[o]||r[o]||o)},No={encodeRaw:Ep,encodeAllRaw:e=>(""+e).replace(Z_,t=>Ao[t]||t),encodeNumeric:kp,encodeNamed:cc,getEncodeFunc:(e,t)=>{const n=wp(t)||dc,r=X_(e.replace(/\+/g,","));return r.named&&r.numeric?(o,a)=>o.replace(a?Wi:Gi,s=>void 0!==Ao[s]?Ao[s]:void 0!==n[s]?n[s]:s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":"&#"+s.charCodeAt(0)+";"):r.named?t?(o,a)=>cc(o,a,n):cc:r.numeric?kp:Ep},decode:e=>e.replace(Q_,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):J_[n]||String.fromCharCode(n):ex[t]||dc[t]||(r=>{const o=Ot("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(t))},Vt=(e,t)=>(e=G.trim(e))?e.split(t||" "):[],_p=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Ki={},fs=G.makeMap,Yn=G.each,uc=G.extend,xp=G.explode,Sp=(e,t={})=>{const n=fs(e," ",fs(e.toUpperCase()," "));return uc(n,t)},Ap=e=>Sp("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),mc=(e,t)=>{if(e){const n={};return te(e)&&(e={"*":e}),Yn(e,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===t?fs(r,/[, ]/):xp(r,/[, ]/)}),n}},Kr=(e={})=>{var t;const n={},r={};let o=[];const a={},s={},i=(me,Ie,$e)=>{const Be=e[me];if(Be)return fs(Be,/[, ]/,fs(Be.toUpperCase(),/[, ]/));{let Fe=Ki[me];return Fe||(Fe=Sp(Ie,$e),Ki[me]=Fe),Fe}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",d=(me=>{const{globalAttributes:Ie,phrasingContent:$e,flowContent:Be}=(wt=>{let Ht,Nt,It;Ht="id accesskey class dir lang style tabindex title role",Nt="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",It="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==wt&&(Ht+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Nt+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",It+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==wt&&(Ht+=" xml:lang",It=[It,"acronym applet basefont big font strike tt"].join(" "),Nt=[Nt,"center dir isindex noframes"].join(" "));const an=[Nt,It].join(" ");return{globalAttributes:Ht,blockContent:Nt,phrasingContent:It,flowContent:an}})(me),Fe={},At=(wt,Ht,Nt)=>{Fe[wt]={attributes:fo(Ht,X({})),attributesOrder:Ht,children:fo(Nt,X({}))}},ve=(wt,Ht="",Nt="")=>{const It=Vt(Nt),an=Vt(wt);let en=an.length;const In=Vt([Ie,Ht].join(" "));for(;en--;)At(an[en],In.slice(),It)},je=(wt,Ht)=>{const Nt=Vt(wt),It=Vt(Ht);let an=Nt.length;for(;an--;){const en=Fe[Nt[an]];for(let In=0,Mt=It.length;In<Mt;In++)en.attributes[It[In]]={},en.attributesOrder.push(It[In])}};return"html5-strict"!==me&&(U(Vt("acronym applet basefont big font strike tt"),wt=>{ve(wt,"",$e)}),U(Vt("center dir isindex noframes"),wt=>{ve(wt,"",Be)})),ve("html","manifest","head body"),ve("head","","base command link meta noscript script style title"),ve("title hr noscript br"),ve("base","href target"),ve("link","href rel media hreflang type sizes hreflang"),ve("meta","name http-equiv content charset"),ve("style","media type scoped"),ve("script","src async defer type charset"),ve("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Be),ve("dd div","",Be),ve("address dt caption","","html4"===me?$e:Be),ve("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",$e),ve("blockquote","cite",Be),ve("ol","reversed start type","li"),ve("ul","","li"),ve("li","value",Be),ve("dl","","dt dd"),ve("a","href target rel media hreflang type","html4"===me?$e:Be),ve("q","cite",$e),ve("ins del","cite datetime",Be),ve("img","src sizes srcset alt usemap ismap width height"),ve("iframe","src name width height",Be),ve("embed","src type width height"),ve("object","data type typemustmatch name usemap form width height",[Be,"param"].join(" ")),ve("param","name value"),ve("map","name",[Be,"area"].join(" ")),ve("area","alt coords shape href target rel media hreflang type"),ve("table","border","caption colgroup thead tfoot tbody tr"+("html4"===me?" col":"")),ve("colgroup","span","col"),ve("col","span"),ve("tbody thead tfoot","","tr"),ve("tr","","td th"),ve("td","colspan rowspan headers",Be),ve("th","colspan rowspan headers scope abbr",Be),ve("form","accept-charset action autocomplete enctype method name novalidate target",Be),ve("fieldset","disabled form name",[Be,"legend"].join(" ")),ve("label","form for",$e),ve("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ve("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===me?Be:$e),ve("select","disabled form multiple name required size","option optgroup"),ve("optgroup","disabled label","option"),ve("option","disabled label selected value"),ve("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ve("menu","type label",[Be,"li"].join(" ")),ve("noscript","",Be),"html4"!==me&&(ve("wbr"),ve("ruby","",[$e,"rt rp"].join(" ")),ve("figcaption","",Be),ve("mark rt rp bdi","",$e),ve("summary","",[$e,"h1 h2 h3 h4 h5 h6"].join(" ")),ve("canvas","width height",Be),ve("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Be,"track source"].join(" ")),ve("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Be,"track source"].join(" ")),ve("picture","","img source"),ve("source","src srcset type media sizes"),ve("track","kind src srclang label default"),ve("datalist","",[$e,"option"].join(" ")),ve("article section nav aside main header footer","",Be),ve("hgroup","","h1 h2 h3 h4 h5 h6"),ve("figure","",[Be,"figcaption"].join(" ")),ve("time","datetime",$e),ve("dialog","open",Be),ve("command","type label icon disabled checked radiogroup command"),ve("output","for form name",$e),ve("progress","value max",$e),ve("meter","value min max low high optimum",$e),ve("details","open",[Be,"summary"].join(" ")),ve("keygen","autofocus challenge disabled form keytype name"),At("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==me&&(je("script","language xml:space"),je("style","xml:space"),je("object","declare classid code codebase codetype archive standby align border hspace vspace"),je("embed","align name hspace vspace"),je("param","valuetype type"),je("a","charset name rev shape coords"),je("br","clear"),je("applet","codebase archive code object alt name width height align hspace vspace"),je("img","name longdesc align border hspace vspace"),je("iframe","longdesc frameborder marginwidth marginheight scrolling align"),je("font basefont","size color face"),je("input","usemap align"),je("select"),je("textarea"),je("h1 h2 h3 h4 h5 h6 div p legend caption","align"),je("ul","type compact"),je("li","type"),je("ol dl menu dir","compact"),je("pre","width xml:space"),je("hr","align noshade size width"),je("isindex","prompt"),je("table","summary width frame rules cellspacing cellpadding align bgcolor"),je("col","width align char charoff valign"),je("colgroup","width align char charoff valign"),je("thead","align char charoff valign"),je("tr","align char charoff valign bgcolor"),je("th","axis align char charoff valign nowrap bgcolor width height"),je("form","accept"),je("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),je("tfoot","align char charoff valign"),je("tbody","align char charoff valign"),je("area","nohref"),je("body","background bgcolor text link vlink alink")),"html4"!==me&&(je("input button select textarea","autofocus"),je("input textarea","placeholder"),je("a","download"),je("link script img","crossorigin"),je("img","loading"),je("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==me&&U([Fe.video,Fe.audio],wt=>{delete wt.children.audio,delete wt.children.video}),U(Vt("a form meter progress dfn"),wt=>{Fe[wt]&&delete Fe[wt].children[wt]}),delete Fe.caption.children.table,delete Fe.script,Fe})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const c=mc(e.valid_styles),u=mc(e.invalid_styles,"map"),m=mc(e.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre svg",h),y=i("move_caret_before_on_enter_elements",b+" table",h),E="h1 h2 h3 h4 h5 h6",w=i("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),k=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),A=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),T=i("transparent_elements","a ins del canvas map"),O=i("wrap_block_elements","pre "+E);Yn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),me=>{s[me]=new RegExp("</"+me+"[^>]*>","gi")});const P=me=>{const Ie=C.from(n["@"]),$e=/[*?+]/;U(((Be,Fe)=>{const At=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return cn(Vt(Fe,","),ve=>{const je=At.exec(ve);if(je){const wt=je[1],Ht=je[2],Nt=je[3],It=je[4],an=je[5],en={attributes:{},attributesOrder:[]};if(Be.each(In=>{return io=en,ge((Mt=In).attributes,(Ha,yr)=>{io.attributes[yr]=Ha}),void io.attributesOrder.push(...Mt.attributesOrder);var Mt,io}),"#"===wt?en.paddEmpty=!0:"-"===wt&&(en.removeEmpty=!0),"!"===It&&(en.removeEmptyAttrs=!0),an&&((In,Mt)=>{const io=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Ha=/[*?+]/,{attributes:yr,attributesOrder:lo}=Mt;U(Vt(In,"|"),er=>{const qn=io.exec(er);if(qn){const Cr={},qa=qn[1],Vn=qn[2].replace(/[\\:]:/g,":"),wr=qn[3],ea=qn[4];if("!"===qa&&(Mt.attributesRequired=Mt.attributesRequired||[],Mt.attributesRequired.push(Vn),Cr.required=!0),"-"===qa)return delete yr[Vn],void lo.splice(G.inArray(lo,Vn),1);if(wr&&("="===wr?(Mt.attributesDefault=Mt.attributesDefault||[],Mt.attributesDefault.push({name:Vn,value:ea}),Cr.defaultValue=ea):"~"===wr?(Mt.attributesForced=Mt.attributesForced||[],Mt.attributesForced.push({name:Vn,value:ea}),Cr.forcedValue=ea):"<"===wr&&(Cr.validValues=G.makeMap(ea,"?"))),Ha.test(Vn)){const Ft=Cr;Mt.attributePatterns=Mt.attributePatterns||[],Ft.pattern=_p(Vn),Mt.attributePatterns.push(Ft)}else yr[Vn]||lo.push(Vn),yr[Vn]=Cr}})})(an,en),Nt&&(en.outputName=Ht),"@"===Ht){if(!Be.isNone())return[];Be=C.some(en)}return[Nt?{name:Ht,element:en,aliasName:Nt}:{name:Ht,element:en}]}return[]})})(Ie,null!=me?me:""),({name:Be,element:Fe,aliasName:At})=>{if(At&&(n[At]=Fe),$e.test(Be)){const ve=Fe;ve.pattern=_p(Be),o.push(ve)}else n[Be]=Fe})},x=me=>{o=[],U(Me(n),Ie=>{delete n[Ie]}),P(me)},S=me=>{delete Ki.text_block_elements,delete Ki.block_elements,U((Ie=>{const $e=/^(~)?(.+)$/;return cn(Vt(Ie,","),Be=>{const Fe=$e.exec(Be);if(Fe){const At="~"===Fe[1];return[{inline:At,cloneName:At?"span":"div",name:Fe[2]}]}return[]})})(null!=me?me:""),({inline:Ie,name:$e,cloneName:Be})=>{if(r[$e]=r[Be],a[$e]=Be,v[$e.toUpperCase()]={},v[$e]={},Ie||(k[$e.toUpperCase()]={},k[$e]={}),!n[$e]){let Fe=n[Be];Fe=uc({},Fe),delete Fe.removeEmptyAttrs,delete Fe.removeEmpty,n[$e]=Fe}ge(r,(Fe,At)=>{Fe[Be]&&(r[At]=Fe=uc({},r[At]),Fe[$e]=Fe[Be])})})},B=me=>{U((Ie=>{const $e=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return cn(Vt(Ie,","),Be=>{const Fe=$e.exec(Be);if(Fe){const At=Fe[1];return[{operation:At?(je=At,"-"===je?"remove":"add"):"replace",name:Fe[2],validChildren:Vt(Fe[3],"|")}]}var je;return[]})})(null!=me?me:""),({operation:Ie,name:$e,validChildren:Be})=>{const Fe="replace"===Ie?{"#comment":{}}:r[$e];U(Be,At=>{"remove"===Ie?delete Fe[At]:Fe[At]={}}),r[$e]=Fe})},$=me=>{const Ie=n[me];if(Ie)return Ie;let $e=o.length;for(;$e--;){const Be=o[$e];if(Be.pattern.test(me))return Be}};e.valid_elements?(x(e.valid_elements),Yn(d,(me,Ie)=>{r[Ie]=me.children})):(Yn(d,(me,Ie)=>{n[Ie]={attributes:me.attributes,attributesOrder:me.attributesOrder},r[Ie]=me.children}),Yn(Vt("strong/b em/i"),me=>{const Ie=Vt(me,"/");n[Ie[1]].outputName=Ie[0]}),Yn(A,(me,Ie)=>{n[Ie]&&(e.padd_empty_block_inline_children&&(n[Ie].paddInEmptyBlock=!0),n[Ie].removeEmpty=!0)}),Yn(Vt("ol ul blockquote a table tbody"),me=>{n[me]&&(n[me].removeEmpty=!0)}),Yn(Vt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),me=>{n[me]&&(n[me].paddEmpty=!0)}),Yn(Vt("span"),me=>{n[me].removeEmptyAttrs=!0})),delete n.svg,S(e.custom_elements),B(e.valid_children),P(e.extended_valid_elements),B("+ol[ul|ol],+ul[ul|ol]"),Yn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(me,Ie)=>{n[Ie]&&(n[Ie].parentsRequired=Vt(me))}),e.invalid_elements&&Yn(xp(e.invalid_elements),me=>{n[me]&&delete n[me]}),$("span")||P("span[!data-mce-type|*]");const ee=X(c),K=X(u),be=X(m),pe=X(g),Ee=X(k),Te=X(w),re=X(A),de=X(Object.seal(h)),Ne=X(f),N=X(v),R=X(y),I=X(p),z=X(T),q=X(O),ce=X(Object.seal(s)),ye=(me,Ie)=>{const $e=$(me);if($e){if(!Ie)return!0;{if($e.attributes[Ie])return!0;const Be=$e.attributePatterns;if(Be){let Fe=Be.length;for(;Fe--;)if(Be[Fe].pattern.test(Ie))return!0}}}return!1},Oe=me=>Pe(Ee(),me),Re=me=>!Ut(me,"#")&&ye(me)&&!Oe(me),Qe=X(a);return{type:l,children:r,elements:n,getValidStyles:ee,getValidClasses:be,getBlockElements:Ee,getInvalidStyles:K,getVoidElements:de,getTextBlockElements:Te,getTextInlineElements:re,getBoolAttrs:pe,getElementRule:$,getSelfClosingElements:Ne,getNonEmptyElements:N,getMoveCaretBeforeOnEnterElements:R,getWhitespaceElements:I,getTransparentElements:z,getSpecialElements:ce,isValidChild:(me,Ie)=>{const $e=r[me.toLowerCase()];return!(!$e||!$e[Ie.toLowerCase()])},isValid:ye,isBlock:Oe,isInline:Re,isWrapper:me=>Pe(q(),me)||Re(me),getCustomElements:Qe,addValidElements:P,setValidElements:x,addCustomElements:S,addValidChildren:B}},fc=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},tx=e=>{return{value:(n=fc(e.red)+fc(e.green)+fc(e.blue),ng(n,"#").toUpperCase())};var n},nx=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,rx=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Np=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),Rp=(e,t,n,r)=>{const o=parseInt(e,10),a=parseInt(t,10),s=parseInt(n,10),i=parseFloat(r);return Np(o,a,s,i)},Tp=e=>{if("transparent"===e)return C.some(Np(0,0,0,0));const t=nx.exec(e);if(null!==t)return C.some(Rp(t[1],t[2],t[3],"1"));const n=rx.exec(e);return null!==n?C.some(Rp(n[1],n[2],n[3],n[4])):C.none()},ox=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,gs=e=>Tp(e).map(tx).map(t=>"#"+t.value).getOr(e),gc=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,a={};let s,i;t&&(s=t.getValidStyles(),i=t.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<d.length;u++)a[d[u]]="\ufeff"+u,a["\ufeff"+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=e.url_converter,h=e.url_converter_scope||c,g=(P,x,S)=>{const B=m[P+"-top"+x];if(!B)return;const $=m[P+"-right"+x];if(!$)return;const ee=m[P+"-bottom"+x];if(!ee)return;const K=m[P+"-left"+x];if(!K)return;const be=[B,$,ee,K];let pe=be.length-1;for(;pe--&&be[pe]===be[pe+1];);pe>-1&&S||(m[P+x]=-1===pe?be[0]:be.join(" "),delete m[P+"-top"+x],delete m[P+"-right"+x],delete m[P+"-bottom"+x],delete m[P+"-left"+x])},b=P=>{const x=m[P];if(!x)return;const S=x.indexOf(",")>-1?[x]:x.split(" ");let B=S.length;for(;B--;)if(S[B]!==S[0])return!1;return m[P]=S[0],!0},v=P=>(p=!0,a[P]),y=(P,x)=>(p&&(P=P.replace(/\uFEFF[0-9]/g,S=>a[S])),x||(P=P.replace(/\\([\'\";:])/g,"$1")),P),E=P=>String.fromCharCode(parseInt(P.slice(1),16)),w=P=>P.replace(/\\[0-9a-f]+/gi,E),k=(P,x,S,B,$,ee)=>{if($=$||ee)return"'"+($=y($)).replace(/\'/g,"\\'")+"'";if(x=y(x||S||B||""),!e.allow_script_urls){const K=x.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(K)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(K))return""}return f&&(x=f.call(h,x,"style")),"url('"+x.replace(/\'/g,"\\'")+"')"};if(u){let P;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,x=>x.replace(/[;:]/g,v));P=r.exec(u);){r.lastIndex=P.index+P[0].length;let x=P[1].replace(o,"").toLowerCase(),S=P[2].replace(o,"");if(x&&S){if(x=w(x),S=w(S),-1!==x.indexOf("\ufeff")||-1!==x.indexOf('"')||!e.allow_script_urls&&("behavior"===x||/expression\s*\(|\/\*|\*\//.test(S)))continue;"font-weight"===x&&"700"===S?S="bold":"color"!==x&&"background-color"!==x||(S=S.toLowerCase()),te(e.force_hex_color)&&"off"!==e.force_hex_color&&Tp(S).each(B=>{"always"!==e.force_hex_color&&1!==B.alpha||(S=gs(ox(B)))}),S=S.replace(n,k),m[x]=p?y(S,!0):S}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),T="border-style",O="border-color",b(A="border-width")&&b(T)&&b(O)&&(m.border=m[A]+" "+m[T]+" "+m[O],delete m[A],delete m[T],delete m[O]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var A,T,O;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const E=b[v],w=u[E];w&&(p+=(p.length>0?" ":"")+E+": "+w+";")}};return m&&s?(f("*",s),f(m,s)):ge(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},ax={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Op=(e,t)=>{const n=null!=t?t:{};for(const r in e)Pe(ax,r)||(n[r]=e[r]);return M(e.composedPath)&&(n.composedPath=()=>e.composedPath()),M(e.getModifierState)&&(n.getModifierState=r=>e.getModifierState(r)),M(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},pc=(e,t,n,r)=>{var o;const a=Op(t,r);return a.type=e,ne(a.target)&&(a.target=null!==(o=a.srcElement)&&void 0!==o?o:n),(ne((s=t).preventDefault)||(i=s)instanceof Event||Ce(i.initEvent))&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=dt,Ce(t.preventDefault)&&t.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=dt,Ce(t.stopPropagation)&&t.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=dt,a.stopPropagation()},(s=>s.isDefaultPrevented===dt||s.isDefaultPrevented===qe)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?dt:qe,a.isPropagationStopped=!0===a.cancelBubble?dt:qe,a.isImmediatePropagationStopped=qe)),a;var s,i},sx=/^(?:mouse|contextmenu)|click/,hc=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},Yi=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},ps=(e,t)=>{const n=pc(e.type,e,document,t);if(M(r=e)&&sx.test(r.type)&&J(e.pageX)&&!J(e.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,a=r.body,s=n;s.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),s.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}var r;return n},ix=(e,t,n)=>{const r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);const a=()=>{Yi(e,"DOMContentLoaded",a),Yi(e,"load",a),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?a():hc(e,"DOMContentLoaded",a),n.domLoaded||hc(e,"load",a)};class Ro{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,r,o){const a=this;let s;const i=window,l=m=>{a.executeHandlers(ps(m||i.event),d)};if(!t||W(t)||qr(t))return r;let d;t[a.expando]?d=t[a.expando]:(d=a.count++,t[a.expando]=d,a.events[d]={}),o=o||t;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),a.domLoaded&&"ready"===m&&"complete"===t.readyState?r.call(o,ps({type:m})):(a.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=ps(g||i.event);b.type="focus"===b.type?"focusin":"focusout",a.executeHandlers(b,d)}),s=a.events[d][m],s?"ready"===m&&a.domLoaded?r(ps({type:m})):s.push({func:r,scope:o}):(a.events[d][m]=s=[{func:r,scope:o}],s.fakeName=h,s.capture=f,s.nativeHandler=p,"ready"===m?ix(t,p,a):hc(t,h||m,p,f)))}return t=s=null,r}unbind(t,n,r){if(!t||W(t)||qr(t))return this;const o=t[this.expando];if(o){let a=this.events[o];if(n){const s=n.split(" ");let i=s.length;for(;i--;){const l=s[i],d=a[l];if(d){if(r){let c=d.length;for(;c--;)if(d[c].func===r){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,a[l]=f}}r&&0!==d.length||(delete a[l],Yi(t,d.fakeName||l,d.nativeHandler,d.capture))}}}else ge(a,(s,i)=>{Yi(t,s.fakeName||i,s.nativeHandler,s.capture)}),a={};for(const s in a)if(Pe(a,s))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,r){return this.dispatch(t,n,r)}dispatch(t,n,r){if(!t||W(t)||qr(t))return this;const o=ps({type:n,target:t},r);do{const a=t[this.expando];a&&this.executeHandlers(o,a),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||W(t)||qr(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let r=n.length;for(;r--;)(t=n[r])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const r=this.events[n],o=r&&r[t.type];if(o)for(let a=0,s=o.length;a<s;a++){const i=o[a];if(i&&!1===i.func.call(i.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}Ro.Event=new Ro;const bc=G.each,lx=G.grep,vc="data-mce-style",dx=G.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),hs=(e,t,n)=>{ne(n)||""===n?zt(e,t):$t(e,t,n)},Bp=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),pa=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const a=o.nodeType;(!t||!W(o)||a!==r&&o.data.length)&&(n++,r=a)}return n},Lp=(e,t)=>{const n=Cn(t,"style"),r=e.serialize(e.parse(n),Ve(t));hs(t,vc,r)},Pp=(e,t,n)=>{const r=Bp(t);var o,a;ne(n)||""===n?Hg(e,r):zg(e,r,(a=r,ke(o=n)?Pe(dx,a)?o+"":o+"px":o))},it=(e,t={})=>{const n={},r=window,o={};let a=0;const s=vp.forElement(_(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],l=t.schema?t.schema:Kr({}),d=gc({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),c=t.ownEvents?new Ro:Ro.Event,u=l.getBlockElements(),m=N=>N&&e&&te(N)?e.getElementById(N):N,p=N=>{const R=m(N);return M(R)?_(R):null},f=(N,R,I="")=>{let z;const q=p(N);if(M(q)&&yn(q)){const ce=Ne[R];z=ce&&ce.get?ce.get(q.dom,R):Cn(q,R)}return M(z)?z:I},h=N=>{const R=m(N);return ne(R)?[]:R.attributes},g=(N,R,I)=>{T(N,z=>{if(ue(z)){const q=_(z),ce=""===I?null:I,ye=Cn(q,R),Oe=Ne[R];Oe&&Oe.set?Oe.set(q.dom,ce,R):hs(q,R,ce),ye!==ce&&t.onSetAttrib&&t.onSetAttrib({attrElm:q.dom,attrName:R,attrValue:ce})}})},b=()=>t.root_element||e.body,v=(N,R)=>((I,z,q)=>{let ce=0,ye=0;const Oe=I.ownerDocument;if(q=q||I,z){if(q===I&&z.getBoundingClientRect&&"static"===ir(_(I),"position")){const Qe=z.getBoundingClientRect();return ce=Qe.left+(Oe.documentElement.scrollLeft||I.scrollLeft)-Oe.documentElement.clientLeft,ye=Qe.top+(Oe.documentElement.scrollTop||I.scrollTop)-Oe.documentElement.clientTop,{x:ce,y:ye}}let Re=z;for(;Re&&Re!==q&&Re.nodeType&&!hp(Re,q);)ce+=Re.offsetLeft||0,ye+=Re.offsetTop||0,Re=Re.offsetParent;for(Re=z.parentNode;Re&&Re!==q&&Re.nodeType&&!hp(Re,q);)ce-=Re.scrollLeft||0,ye-=Re.scrollTop||0,Re=Re.parentNode;ye+=(Qe=_(z),Y_.isFirefox()&&"table"===Ve(Qe)?pp(jt(Qe)).filter(me=>"caption"===Ve(me)).bind(me=>pp(Dg(me)).map(Ie=>Ie.dom.offsetTop<=me.dom.offsetTop?-me.dom.offsetHeight:0)).getOr(0):0)}var Qe;return{x:ce,y:ye}})(e.body,m(N),R),y=(N,R,I)=>{const z=m(N);var q;if(!ne(z)&&(Lr(z)||ue(q=z)&&"http://www.w3.org/2000/svg"===q.namespaceURI))return I?ir(_(z),Bp(R)):("float"===(R=R.replace(/-(\D)/g,(ce,ye)=>ye.toUpperCase()))&&(R="cssFloat"),z.style?z.style[R]:void 0)},E=N=>{const R=m(N);if(!R)return{w:0,h:0};let I=y(R,"width"),z=y(R,"height");return I&&-1!==I.indexOf("px")||(I="0"),z&&-1!==z.indexOf("px")||(z="0"),{w:parseInt(I,10)||R.offsetWidth||R.clientWidth,h:parseInt(z,10)||R.offsetHeight||R.clientHeight}},w=(N,R)=>{if(!N)return!1;const I=H(N)?N:[N];return ct(I,z=>Gn(_(z),R))},k=(N,R,I,z)=>{const q=[];let ce=m(N);z=void 0===z;const ye=I||("BODY"!==b().nodeName?b().parentNode:null);if(te(R))if("*"===R)R=ue;else{const Oe=R;R=Re=>w(Re,Oe)}for(;ce&&!(ce===ye||ne(ce.nodeType)||ls(ce)||Wd(ce));){if(!R||R(ce)){if(!z)return[ce];q.push(ce)}ce=ce.parentNode}return z?q:null},A=(N,R,I)=>{let z=R;if(N){te(R)&&(z=q=>w(q,R));for(let q=N[I];q;q=q[I])if(Ce(z)&&z(q))return q}return null},T=function(N,R,I){const z=null!=I?I:this;if(H(N)){const q=[];return bc(N,(ce,ye)=>{const Oe=m(ce);Oe&&q.push(R.call(z,Oe,ye))}),q}{const q=m(N);return!!q&&R.call(z,q)}},O=(N,R)=>{T(N,I=>{ge(R,(z,q)=>{g(I,q,z)})})},P=(N,R)=>{T(N,I=>{const z=_(I);Pi(z,R)})},x=(N,R,I,z,q)=>T(N,ce=>{const ye=te(R)?e.createElement(R):R;return M(I)&&O(ye,I),z&&(!te(z)&&z.nodeType?ye.appendChild(z):te(z)&&P(ye,z)),q?ye:ce.appendChild(ye)}),S=(N,R,I)=>x(e.createElement(N),N,R,I,!0),B=No.encodeAllRaw,$=(N,R)=>T(N,I=>{const z=_(I);return R&&U(jt(z),q=>{_n(q)&&0===q.dom.length?mt(q):gn(z,q)}),mt(z),z.dom}),ee=(N,R,I)=>{T(N,z=>{if(ue(z)){const q=_(z),ce=R.split(" ");U(ce,ye=>{var Oe,Re,me,Ie;M(I)?(I?sa:Ja)(q,ye):(Re=ye,Qa(Oe=q)?Oe.dom.classList.toggle(Re):(Ie=Re,Ke(Sg(me=Oe),Ie)?Ng(me,Ie):Ag(me,Ie)),Rg(Oe))})}})},K=(N,R,I)=>T(R,z=>{var q;const ce=H(R)?N.cloneNode(!0):N;return I&&bc(lx(z.childNodes),ye=>{ce.appendChild(ye)}),null===(q=z.parentNode)||void 0===q||q.replaceChild(ce,z),z}),be=N=>{if(ue(N)){const R="a"===N.nodeName.toLowerCase()&&!f(N,"href")&&f(N,"id");if(f(N,"name")||f(N,"data-mce-bookmark")||R)return!0}return!1},pe=()=>e.createRange(),Ee=(N,R,I,z)=>{if(H(N)){let q=N.length;const ce=[];for(;q--;)ce[q]=Ee(N[q],R,I,z);return ce}return!t.collect||N!==e&&N!==r||i.push([N,R,I,z]),c.bind(N,R,I,z||de)},Te=(N,R,I)=>{if(H(N)){let z=N.length;const q=[];for(;z--;)q[z]=Te(N[z],R,I);return q}if(i.length>0&&(N===e||N===r)){let z=i.length;for(;z--;){const[q,ce,ye]=i[z];N!==q||R&&R!==ce||I&&I!==ye||c.unbind(q,ce,ye)}}return c.unbind(N,R,I)},re=N=>{if(N&&Lr(N)){const R=N.getAttribute("data-mce-contenteditable");return R&&"inherit"!==R?R:"inherit"!==N.contentEditable?N.contentEditable:null}return null},de={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:i,styles:d,schema:l,events:c,isBlock:N=>te(N)?Pe(u,N):ue(N)&&(Pe(u,N.nodeName)||So(l,N)),root:null,clone:(N,R)=>N.cloneNode(R),getRoot:b,getViewPort:N=>{const R=Xg(N);return{x:R.x,y:R.y,w:R.width,h:R.height}},getRect:N=>{const R=m(N),I=v(R),z=E(R);return{x:I.x,y:I.y,w:z.w,h:z.h}},getSize:E,getParent:(N,R,I)=>{const z=k(N,R,I,!1);return z&&z.length>0?z[0]:null},getParents:k,get:m,getNext:(N,R)=>A(N,R,"nextSibling"),getPrev:(N,R)=>A(N,R,"previousSibling"),select:(N,R)=>{var I,z;const q=null!==(z=null!==(I=m(R))&&void 0!==I?I:t.root_element)&&void 0!==z?z:e;return Ce(q.querySelectorAll)?Se(q.querySelectorAll(N)):[]},is:w,add:x,create:S,createHTML:(N,R,I="")=>{let z="<"+N;for(const q in R)na(R,q)&&(z+=" "+q+'="'+B(R[q])+'"');return Xa(I)&&Pe(l.getVoidElements(),N)?z+" />":z+">"+I+"</"+N+">"},createFragment:N=>{const R=e.createElement("div"),I=e.createDocumentFragment();let z;for(I.appendChild(R),N&&(R.innerHTML=N);z=R.firstChild;)I.appendChild(z);return I.removeChild(R),I},remove:$,setStyle:(N,R,I)=>{T(N,z=>{const q=_(z);Pp(q,R,I),t.update_styles&&Lp(d,q)})},getStyle:y,setStyles:(N,R)=>{T(N,I=>{const z=_(I);ge(R,(q,ce)=>{Pp(z,ce,q)}),t.update_styles&&Lp(d,z)})},removeAllAttribs:N=>T(N,R=>{const I=R.attributes;for(let z=I.length-1;z>=0;z--)R.removeAttributeNode(I.item(z))}),setAttrib:g,setAttribs:O,getAttrib:f,getPos:v,parseStyle:N=>d.parse(N),serializeStyle:(N,R)=>d.serialize(N,R),addStyle:N=>{if(de!==it.DOM&&e===document){if(n[N])return;n[N]=!0}let R=e.getElementById("mceDefaultStyles");if(!R){R=e.createElement("style"),R.id="mceDefaultStyles",R.type="text/css";const I=e.head;I.firstChild?I.insertBefore(R,I.firstChild):I.appendChild(R)}R.styleSheet?R.styleSheet.cssText+=N:R.appendChild(e.createTextNode(N))},loadCSS:N=>{N||(N=""),U(N.split(","),R=>{o[R]=!0,s.load(R).catch(we)})},addClass:(N,R)=>{ee(N,R,!0)},removeClass:(N,R)=>{ee(N,R,!1)},hasClass:(N,R)=>{const I=p(N),z=R.split(" ");return M(I)&&Wn(z,q=>Pd(I,q))},toggleClass:ee,show:N=>{T(N,R=>Hg(_(R),"display"))},hide:N=>{T(N,R=>zg(_(R),"display","none"))},isHidden:N=>{const R=p(N);return M(R)&&oa(Li(R,"display"),"none")},uniqueId:N=>(N||"mce_")+a++,setHTML:P,getOuterHTML:N=>{const R=p(N);return M(R)?ue(R.dom)?R.dom.outerHTML:(I=>{const z=Ot("div"),q=_(I.dom.cloneNode(!0));return St(z,q),Vg(z)})(R):""},setOuterHTML:(N,R)=>{T(N,I=>{ue(I)&&(I.outerHTML=R)})},decode:No.decode,encode:B,insertAfter:(N,R)=>{const I=m(R);return T(N,z=>{const q=null==I?void 0:I.parentNode,ce=null==I?void 0:I.nextSibling;return q&&(ce?q.insertBefore(z,ce):q.appendChild(z)),z})},replace:K,rename:(N,R)=>{if(N.nodeName!==R.toUpperCase()){const I=S(R);return bc(h(N),z=>{g(I,z.nodeName,f(N,z.nodeName))}),K(I,N,!0),I}return N},findCommonAncestor:(N,R)=>{let I=N;for(;I;){let z=R;for(;z&&I!==z;)z=z.parentNode;if(I===z)break;I=I.parentNode}return!I&&N.ownerDocument?N.ownerDocument.documentElement:I},run:T,getAttribs:h,isEmpty:(N,R,I)=>{let z=0;if(be(N))return!1;const q=N.firstChild;if(q){const ce=new Rt(q,N),ye=l?l.getWhitespaceElements():{},Oe=R||(l?l.getNonEmptyElements():null);let Re=q;do{if(ue(Re)){const Qe=Re.getAttribute("data-mce-bogus");if(Qe){Re=ce.next("all"===Qe);continue}const me=Re.nodeName.toLowerCase();if(Oe&&Oe[me]){if("br"===me){z++,Re=ce.next();continue}return!1}if(be(Re))return!1}if(qr(Re)||W(Re)&&!Gr(Re.data)&&(null==I||!I.includeZwsp||!$_(Re.data))||W(Re)&&Re.parentNode&&ye[Re.parentNode.nodeName]&&Gr(Re.data))return!1;Re=ce.next()}while(Re)}return z<=1},createRng:pe,nodeIndex:pa,split:(N,R,I)=>{let z,q,ce=pe();if(N&&R&&N.parentNode&&R.parentNode){const ye=N.parentNode;return ce.setStart(ye,pa(N)),ce.setEnd(R.parentNode,pa(R)),z=ce.extractContents(),ce=pe(),ce.setStart(R.parentNode,pa(R)+1),ce.setEnd(ye,pa(N)+1),q=ce.extractContents(),ye.insertBefore(lc(de,z,l),N),ye.insertBefore(I||R,N),ye.insertBefore(lc(de,q,l),N),$(N),I||R}},bind:Ee,unbind:Te,fire:(N,R,I)=>c.dispatch(N,R,I),dispatch:(N,R,I)=>c.dispatch(N,R,I),getContentEditable:re,getContentEditableParent:N=>{const R=b();let I=null;for(let z=N;z&&z!==R&&(I=re(z),null===I);z=z.parentNode);return I},isEditable:N=>{if(M(N)){const R=ue(N)?N:N.parentElement;return M(R)&&Lr(R)&&Co(_(R))}return!1},destroy:()=>{if(i.length>0){let N=i.length;for(;N--;){const[R,I,z]=i[N];c.unbind(R,I,z)}}ge(o,(N,R)=>{s.unload(R),delete o[R]})},isChildOf:(N,R)=>N===R||R.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},Ne=((N,R,I)=>{const z=R.keep_values,ce={style:{set:(ye,Oe)=>{const Re=_(ye);z&&hs(Re,vc,Oe),zt(Re,"style"),te(Oe)&&Bi(Re,N.parse(Oe))},get:ye=>{const Oe=_(ye),Re=Cn(Oe,vc)||Cn(Oe,"style");return N.serialize(N.parse(Re),Ve(Oe))}}};return z&&(ce.href=ce.src={set:(ye,Oe,Re)=>{const Qe=_(ye);Ce(R.url_converter)&&M(Oe)&&(Oe=R.url_converter.call(R.url_converter_scope||I(),String(Oe),Re,ye)),hs(Qe,"data-mce-"+Re,Oe),hs(Qe,Re,Oe)},get:(ye,Oe)=>{const Re=_(ye);return Cn(Re,"data-mce-"+Oe)||Cn(Re,Oe)}}),ce})(d,t,X(de));return de};it.DOM=it(document),it.nodeIndex=pa;const cx=it.DOM;class Dr{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,r)=>{const o=cx;let a;const s=()=>{o.remove(i),a&&(a.onerror=a.onload=a=null)},i=o.uniqueId();a=document.createElement("script"),a.id=i,a.type="text/javascript",a.src=G._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=()=>{s(),n()},a.onerror=()=>{s(),r("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:r,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,r=(l,d)=>{ut(n.scriptLoadedCallbacks,d).each(c=>{U(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},o=l=>{const d=Ae(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(cn(d,({reason:c})=>H(c)?c:[c])):Promise.resolve()},a=l=>Promise.allSettled(ze(l,d=>2===n.states[d]?(r("resolve",d),Promise.resolve()):3===n.states[d]?(r("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,r("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],a(c).then(o)):Promise.resolve()},()=>(n.states[d]=3,r("reject",d),Promise.reject(d)))))),s=l=>(n.loading=!0,a(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(dn),o(d)})),i=Xf(t);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{s(i).then(l,d)})}):s(i)}}Dr.ScriptLoader=new Dr;const Pt=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},bs={},yc=Pt("en"),Dp=()=>ut(bs,yc.get()),Xn={getData:()=>nt(bs,e=>({...e})),setCode:e=>{e&&yc.set(e)},getCode:()=>yc.get(),add:(e,t)=>{let n=bs[e];n||(bs[e]=n={});const r=ze(Me(t),o=>o.toLowerCase());ge(t,(o,a)=>{const s=a.toLowerCase();s!==a&&((i,l)=>{const d=i.indexOf(l);return-1!==d&&i.indexOf(l,d+1)>d})(r,s)?(Pe(t,s)||(n[s]=o),n[a]=o):n[s]=o})},translate:e=>{const t=Dp().getOr({}),n=i=>Ce(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return Pe(t,l)?n(t[l]):ut(t,l.toLowerCase()).map(n).getOr(l)},a=i=>i.replace(/{context:\w+}$/,"");if(r(e))return"";if(Ue(s=e)&&Pe(s,"raw"))return n(e.raw);var s,i;if(H(i=e)&&i.length>1){const i=e.slice(1);return a(o(e[0]).replace(/\{([0-9]+)\}/g,(l,d)=>Pe(i,d)?n(i[d]):l))}return a(o(e))},isRtl:()=>Dp().bind(e=>ut(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Pe(bs,e)},nn=()=>{const e=[],t={},n={},r=[],o=(l,d)=>{const c=Ae(r,u=>u.name===l&&u.state===d);U(c,u=>u.resolve())},a=l=>Pe(t,l),s=(l,d)=>{const c=Xn.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||Dr.ScriptLoader.add(t[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&Pe(n,l)||"loaded"===d&&a(l)?Promise.resolve():new Promise(c=>{r.push({name:l,state:d,resolve:c})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==nn.languageLoad&&(a(l)?s(l,d):i(l,"loaded").then(()=>s(l,d)))},add:(l,d)=>(e.push(d),n[l]={instance:d},o(l,"added"),d),remove:l=>{delete t[l],delete n[l]},createUrl:(l,d)=>te(d)?te(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(t[l])return Promise.resolve();let c=te(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=nn.baseURL+"/"+c),t[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(o(l,"loaded"),Promise.resolve());return n[l]?u():Dr.ScriptLoader.add(c).then(u)},waitFor:i}};nn.languageLoad=!0,nn.baseURL="",nn.PluginManager=nn(),nn.ThemeManager=nn(),nn.ModelManager=nn();const ux=e=>{const t=Pt(C.none()),n=()=>t.get().each(r=>clearInterval(r));return{clear:()=>{n(),t.set(C.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(C.some(setInterval(r,e)))}}},Yr=()=>{const e=(t=>{const n=Pt(C.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(C.some(o))}}})(we);return{...e,on:t=>e.get().each(t)}},Xi=(e,t)=>{let n=null;return{cancel:()=>{V(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{V(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Cc=(e,t)=>{let n=null;const r=()=>{V(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},vs=X("mce-annotation"),To=X("data-mce-annotation"),ha=X("data-mce-annotation-uid"),ys=X("data-mce-annotation-active"),Cs=X("data-mce-annotation-classes"),ws=X("data-mce-annotation-attrs"),Ip=e=>t=>Xe(t,e),Mp=(e,t)=>{const n=e.selection.getRng(),r=_(n.startContainer),o=_(e.getBody()),a=t.fold(()=>"."+vs(),i=>`[${To()}="${i}"]`),s=la(r,n.startOffset).getOr(r);return yo(s,a,Ip(o)).bind(i=>Ar(i,`${ha()}`).bind(l=>Ar(i,`${To()}`).map(d=>{const c=Up(e,l);return{uid:l,name:d,elements:c}})))},Fp=(e,t)=>Za(e,"data-mce-bogus")||Qg(e,'[data-mce-bogus="all"]',Ip(t)),Up=(e,t)=>{const n=_(e.getBody()),r=Zt(n,`[${ha()}="${t}"]`);return Ae(r,o=>!Fp(o,n))},$p=(e,t)=>{const n=_(e.getBody()),r=Zt(n,`[${To()}="${t}"]`),o={};return U(r,a=>{if(!Fp(a,n)){const s=Cn(a,ha()),i=ut(o,s).getOr([]);o[s]=i.concat([a])}}),o};let zp=0;const Es=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return zp++,e+"_"+n+zp+String(t)},jp=(e,t)=>_(e.dom.cloneNode(t)),Oo=e=>jp(e,!1),Hp=e=>jp(e,!0),qp=(e,t,n=qe)=>{const r=new Rt(e,t),o=a=>{let s;do{s=r[a]()}while(s&&!W(s)&&!n(s));return C.from(s).filter(W)};return{current:()=>C.from(r.current()).filter(W),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Bo=(e,t)=>{const n=t||(o=>e.isBlock(o)||vt(o)||ft(o)),r=(o,a,s,i)=>{if(W(o)){const l=i(o,a,o.data);if(-1!==l)return C.some({container:o,offset:l})}return s().bind(l=>r(l.container,l.offset,s,i))};return{backwards:(o,a,s,i)=>{const l=qp(o,null!=i?i:e.getRoot(),n);return r(o,a,()=>l.prev().map(d=>({container:d,offset:d.length})),s).getOrNull()},forwards:(o,a,s,i)=>{const l=qp(o,null!=i?i:e.getRoot(),n);return r(o,a,()=>l.next().map(d=>({container:d,offset:0})),s).getOrNull()}}},ba=Math.round,Lo=e=>e?{left:ba(e.left),top:ba(e.top),bottom:ba(e.bottom),right:ba(e.right),width:ba(e.width),height:ba(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Vp=(e,t)=>(e=Lo(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Wp=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,ks=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Wp(t.top-e.bottom,e,t)},_s=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Wp(t.bottom-e.top,e,t),Gp=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-o)*(n-o))},Zi=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Xr=(e,t)=>{if(ue(e)&&e.hasChildNodes()){const n=e.childNodes;return n[(s=n.length-1,Math.min(Math.max(t,0),s))]}var s;return e},mx=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Kp=e=>te(e)&&e.charCodeAt(0)>=768&&mx.test(e),Yp=ue,fx=$n,Xp=Mi("display","block table"),gx=Mi("float","left right"),xs=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Yp,fx,pt(gx)),px=pt(Mi("white-space","pre pre-line pre-wrap")),Ss=W,wc=vt,Zp=it.nodeIndex,Qi=(e,t)=>t<0&&ue(e)&&e.hasChildNodes()?void 0:Xr(e,t),Ec=e=>e?e.createRange():it.DOM.createRng(),kc=e=>te(e)&&/[\r\n\t ]/.test(e),Qp=e=>!!e.setStart&&!!e.setEnd,_c=e=>{const t=e.startContainer,n=e.startOffset;if(kc(e.toString())&&px(t.parentNode)&&W(t)){const r=t.data;if(kc(r[n-1])||kc(r[n+1]))return!0}return!1},Jp=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Zr=e=>{var t;let n;const r=e.getClientRects();return n=Lo(r.length>0?r[0]:e.getBoundingClientRect()),!Qp(e)&&wc(e)&&Jp(n)?(o=>{const a=o.ownerDocument,s=Ec(a),i=a.createTextNode(Bt),l=o.parentNode;l.insertBefore(i,o),s.setStart(i,0),s.setEnd(i,1);const d=Lo(s.getBoundingClientRect());return l.removeChild(i),d})(e):Jp(n)&&Qp(e)&&null!==(t=(o=>{const s=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===s&&W(s)&&0===i&&1===l){const d=o.cloneRange();return d.setEndAfter(s),Zr(d)}return null})(e))&&void 0!==t?t:n},Po=(e,t)=>{const n=Vp(e,t);return n.width=1,n.right=n.left+1,n},D=(e,t,n)=>{const r=()=>(n||(n=(o=>{const a=[],s=c=>{var u,m;0!==c.height&&(a.length>0&&(u=c).left===(m=a[a.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||a.push(c))},i=(c,u)=>{const m=Ec(c.ownerDocument);if(u<c.data.length){if(Kp(c.data[u]))return;if(Kp(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!_c(m)))return void s(Po(Zr(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),_c(m)||s(Po(Zr(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),_c(m)||s(Po(Zr(m),!0)))},l=o.container(),d=o.offset();if(Ss(l))return i(l,d),a;if(Yp(l))if(o.isAtEnd()){const c=Qi(l,d);Ss(c)&&i(c,c.data.length),xs(c)&&!wc(c)&&s(Po(Zr(c),!1))}else{const c=Qi(l,d);if(Ss(c)&&i(c,0),xs(c)&&o.isAtEnd())return s(Po(Zr(c),!1)),a;const u=Qi(o.container(),o.offset()-1);xs(u)&&!wc(u)&&(Xp(u)||Xp(c)||!xs(c))&&s(Po(Zr(u),!1)),xs(c)&&s(Po(Zr(c),!0))}return a})(D(e,t))),n);return{container:X(e),offset:X(t),toRange:()=>{const o=Ec(e.ownerDocument);return o.setStart(e,t),o.setEnd(e,t),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Ss(e),0===t),isAtEnd:()=>Ss(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:o=>o&&e===o.container()&&t===o.offset(),getNode:o=>Qi(e,o?t-1:t)}};D.fromRangeStart=e=>D(e.startContainer,e.startOffset),D.fromRangeEnd=e=>D(e.endContainer,e.endOffset),D.after=e=>D(e.parentNode,Zp(e)+1),D.before=e=>D(e.parentNode,Zp(e)),D.isAbove=(e,t)=>Xt(Q(t.getClientRects()),he(e.getClientRects()),ks).getOr(!1),D.isBelow=(e,t)=>Xt(he(t.getClientRects()),Q(e.getClientRects()),_s).getOr(!1),D.isAtStart=e=>!!e&&e.isAtStart(),D.isAtEnd=e=>!!e&&e.isAtEnd(),D.isTextPosition=e=>!!e&&W(e.container()),D.isElementPosition=e=>!D.isTextPosition(e);const Ji=(e,t)=>{W(t)&&0===t.data.length&&e.remove(t)},xc=(e,t,n)=>{var r,a;Wd(n)?((r,o,a)=>{const s=C.from(a.firstChild),i=C.from(a.lastChild);o.insertNode(a),s.each(l=>Ji(r,l.previousSibling)),i.each(l=>Ji(r,l.nextSibling))})(e,t,n):(r=e,t.insertNode(a=n),Ji(r,a.previousSibling),Ji(r,a.nextSibling))},Zn=W,eh=ko,th=it.nodeIndex,nh=e=>{const t=e.parentNode;return eh(t)?nh(t):t},Sc=e=>e?Si(e.childNodes,(t,n)=>(eh(n)&&"BR"!==n.nodeName?t=t.concat(Sc(n)):t.push(n),t),[]):[],rh=e=>t=>e===t,oh=e=>(Zn(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,r;n=Sc(nh(t)),r=Qf(n,rh(t),t),n=n.slice(0,r+1);const o=Si(n,(a,s,i)=>(Zn(s)&&Zn(n[i-1])&&a++,a),0);return n=Ka(n,Kn([t.nodeName])),r=Qf(n,rh(t),t),r-o})(e)+"]",ah=(e,t)=>{let n,r=[],o=t.container(),a=t.offset();if(Zn(o))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&Zn(d);)l+=d.data.length;return l})(o,a);else{const i=o.childNodes;a>=i.length?(n="after",a=i.length-1):n="before",o=i[a]}r.push(oh(o));let s=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(e,o);return s=Ka(s,pt(ko)),r=r.concat(Ad(s,i=>oh(i))),r.reverse().join("/")+","+n},sh=(e,t)=>{if(!t)return null;const n=t.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",a=Si(r,(s,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let m=Sc(d);return m=Ka(m,(p,f)=>!Zn(p)||!Zn(m[f-1])),m=Ka(m,Kn([c])),m[u]})(s,l[1],parseInt(l[2],10))):null},e);if(!a)return null;if(!Zn(a)&&a.parentNode){let s;return s="after"===o?th(a)+1:th(a),D(a.parentNode,s)}return((s,i)=>{let l=s,d=0;for(;Zn(l);){const c=l.data.length;if(i>=d&&i<=d+c){s=l,i-=d;break}if(!Zn(l.nextSibling)){s=l,i=c;break}d+=c,l=l.nextSibling}return Zn(s)&&i>s.data.length&&(i=s.data.length),D(s,i)})(a,parseInt(o,10))},el=ft,ih=(e,t,n,r,o)=>{const a=o?r.startContainer:r.endContainer;let s=o?r.startOffset:r.endOffset;const i=[],l=e.getRoot();if(W(a))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&W(p);p=p.previousSibling)m+=d(p.data).length;return m})(t,a,s):s);else{let d=0;const c=a.childNodes;s>=c.length&&c.length&&(d=1,s=Math.max(0,c.length-1)),i.push(e.nodeIndex(c[s],n)+d)}for(let d=a;d&&d!==l;d=d.parentNode)i.push(e.nodeIndex(d,n));return i},Ac=(e,t,n)=>{let r=0;return G.each(e.select(t),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},lh=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(ue(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(t?r:r-1,o.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},dh=e=>(lh(e,!0),lh(e,!1),e),ch=(e,t)=>{if(ue(e)&&(e=Xr(e,t),el(e)))return e;if(xn(e)){W(e)&&ga(e)&&(e=e.parentNode);let n=e.previousSibling;if(el(n)||(n=e.nextSibling,el(n)))return n}},uh=(e,t,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||el(r)){const s=r.nodeName;return{name:s,index:Ac(n.dom,s,r)}}const a=ch((s=o).startContainer,s.startOffset)||ch(s.endContainer,s.endOffset);var s;if(a){const s=a.tagName;return{name:s,index:Ac(n.dom,s,a)}}return((s,i,l,d)=>{const c=i.dom,u=ih(c,s,l,d,!0),m=i.isForward(),p=ap(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:ih(c,s,l,d,!1),forward:m,...p}})(e,n,t,o)},mh=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},fh=(e,t)=>{const n=e.dom;let r=e.getRng();const o=n.uniqueId(),a=e.isCollapsed(),s=e.getNode(),i=s.nodeName,l=e.isForward();if("IMG"===i)return{name:i,index:Ac(n,i,s)};const d=dh(r.cloneRange());if(!a){d.collapse(!1);const u=mh(n,o+"_end",t);xc(n,d,u)}r=dh(r),r.collapse(!0);const c=mh(n,o+"_start",t);return xc(n,r,c),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},Nc=oe(uh,ht,!0),gh=e=>{const t=a=>a(e),n=X(e),r=()=>o,o={tag:!0,inner:e,fold:(a,s)=>s(e),isValue:dt,isError:qe,map:a=>un.value(a(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:a=>{a(e)},toOptional:()=>C.some(e)};return o},ph=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(r,o)=>r(e),isValue:qe,isError:dt,map:t,mapError:r=>un.error(r(e)),bind:t,exists:qe,forall:dt,getOr:ht,or:ht,getOrThunk:ln,orThunk:ln,getOrDie:qt(String(e)),each:we,toOptional:C.none};return n},un={value:gh,error:ph,fromOption:(e,t)=>e.fold(()=>ph(t),gh)},dr=e=>{if(!H(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return U(e,(r,o)=>{const a=Me(r);if(1!==a.length)throw new Error("one and only one name per case");const s=a[0],i=r[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!H(i))throw new Error("case arguments must be an array");t.push(s),n[s]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+c.length);return c[o].apply(null,l)},match:c=>{const u=Me(c);if(t.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+u.join(","));if(!Wn(t,m=>Ke(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+t.join(", "));return c[s].apply(null,l)},log:c=>{console.log(c,{constructors:t,constructor:s,params:l})}}}}),n};dr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const hx=e=>"inline-command"===e.type||"inline-format"===e.type,bx=e=>"block-command"===e.type||"block-format"===e.type,vx=e=>{const t=r=>un.error({message:r,pattern:e}),n=(r,o,a)=>{if(void 0!==e.format){let s;if(H(e.format)){if(!Wn(e.format,te))return t(r+" pattern has non-string items in the `format` array");s=e.format}else{if(!te(e.format))return t(r+" pattern has non-string `format` parameter");s=[e.format]}return un.value(o(s))}return void 0!==e.cmd?te(e.cmd)?un.value(a(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ue(e))return t("Raw pattern is not an object");if(!te(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!te(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,o=e.end;return 0===o.length&&(o=r,r=""),n("Inline",a=>({type:"inline-format",start:r,end:o,format:a}),(a,s)=>({type:"inline-command",start:r,end:o,cmd:a,value:s}))}return void 0!==e.replacement?te(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):un.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,o)=>({type:"block-command",start:e.start,cmd:r,value:o}))},hh=e=>Ae(e,bx),bh=e=>Ae(e,hx),vh=e=>{const t=(n=>{const r=[],o=[];return U(n,a=>{a.fold(s=>{r.push(s)},s=>{o.push(s)})}),{errors:r,values:o}})(ze(e,vx));return U(t.errors,n=>console.error(n.message,n.pattern)),t.values},Rc=or().deviceType,yx=Rc.isTouch(),Cx=it.DOM,yh=e=>Gt(e,RegExp),ie=e=>t=>t.options.get(e),Tc=e=>te(e)||Ue(e),Ch=(e,t="")=>n=>{const r=te(n);if(r){if(-1!==n.indexOf("=")){const o=(a=>{const s=a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(",");return Kt(s,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[ra(c)]=ra(u),i},{})})(n);return{value:ut(o,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},wx=ie("iframe_attrs"),Ex=ie("doctype"),wh=ie("document_base_url"),kx=ie("body_id"),_x=ie("body_class"),Eh=ie("content_security_policy"),xx=ie("br_in_pre"),Qt=ie("forced_root_block"),As=ie("forced_root_block_attrs"),Sx=ie("newline_behavior"),Ax=ie("br_newline_selector"),Nx=ie("no_newline_selector"),Rx=ie("keep_styles"),Tx=ie("end_container_on_empty_block"),kh=ie("automatic_uploads"),_h=ie("images_reuse_filename"),Ox=ie("images_replace_blob_uris"),xh=ie("icons"),Bx=ie("icons_url"),Lx=ie("images_upload_url"),Px=ie("images_upload_base_path"),Dx=ie("images_upload_credentials"),Ix=ie("images_upload_handler"),Mx=ie("content_css_cors"),Oc=ie("referrer_policy"),Sh=ie("language"),Fx=ie("language_url"),Ah=ie("indent_use_margin"),Ux=ie("indentation"),$x=ie("content_css"),zx=ie("content_style"),Nh=ie("font_css"),jx=ie("directionality"),Hx=ie("inline_boundaries_selector"),Rh=ie("object_resizing"),qx=ie("resize_img_proportional"),Vx=ie("placeholder"),Th=ie("event_root"),Wx=ie("service_message"),va=ie("theme"),Gx=ie("theme_url"),Bc=ie("model"),Kx=ie("model_url"),Ns=ie("inline_boundaries"),Yx=ie("formats"),Xx=ie("preview_styles"),Zx=ie("format_empty_lines"),Qx=ie("format_noneditable_selector"),Jx=ie("custom_ui_selector"),Lc=ie("inline"),eS=ie("hidden_input"),tS=ie("submit_patch"),nS=ie("add_form_submit_trigger"),rS=ie("add_unload_trigger"),oS=ie("custom_undo_redo_levels"),aS=ie("disable_nodechange"),Oh=ie("readonly"),sS=ie("editable_root"),Bh=ie("content_css_cors"),tl=ie("plugins"),iS=ie("external_plugins"),lS=ie("block_unsupported_drop"),dS=ie("visual"),cS=ie("visual_table_class"),Lh=ie("visual_anchor_class"),uS=ie("iframe_aria_text"),mS=ie("setup"),fS=ie("init_instance_callback"),gS=ie("urlconverter_callback"),pS=ie("auto_focus"),hS=ie("browser_spellcheck"),bS=ie("protect"),vS=ie("paste_block_drop"),nl=ie("paste_data_images"),yS=ie("paste_preprocess"),CS=ie("paste_postprocess"),wS=ie("newdocument_content"),ES=ie("paste_webkit_styles"),kS=ie("paste_remove_styles_if_webkit"),_S=ie("paste_merge_formats"),xS=ie("smart_paste"),SS=ie("paste_as_text"),AS=ie("paste_tab_spaces"),NS=ie("allow_html_data_urls"),RS=ie("text_patterns"),TS=ie("text_patterns_lookup"),Ph=ie("noneditable_class"),OS=ie("editable_class"),BS=ie("noneditable_regexp"),LS=ie("preserve_cdata"),PS=ie("highlight_on_focus"),Pc=ie("xss_sanitization"),DS=ie("init_content_sync"),Dh=e=>G.explode(e.options.get("images_file_types")),IS=ie("table_tab_navigation"),MS=ie("details_initial_state"),FS=ie("details_serialized_state"),US=ie("force_hex_color"),Dc=ie("sandbox_iframes"),$S=ue,Ih=W,Mh=e=>{const t=e.parentNode;t&&t.removeChild(e)},Fh=e=>{const t=wn(e);return{count:e.length-t.length,text:t}},Uh=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Lt));)e.deleteData(t,1)},$h=(e,t)=>(Do(e),t),Do=e=>{$S(e)&&xn(e)&&(op(e)?e.removeAttribute("data-mce-caret"):Mh(e)),Ih(e)&&(Uh(e),0===e.data.length&&Mh(e))},jS=ft,HS=lr,qS=Fi,zh=(e,t,n)=>{const r=Vp(t.getBoundingClientRect(),n);let o,a;if("BODY"===e.tagName){const i=e.ownerDocument.documentElement;o=e.scrollLeft||i.scrollLeft,a=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();o=e.scrollLeft-i.left,a=e.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=a,r.bottom+=a,r.width=1;let s=t.offsetWidth-t.clientWidth;return s>0&&(n&&(s*=-1),r.left+=s,r.right+=s),r},jh=()=>Ge.browser.isFirefox(),Rs=e=>jS(e)||HS(e),Ts=e=>(Rs(e)||Pr(e)&&jh())&&Oi(_(e)).exists(Co),WS=Un,Ic=ft,GS=lr,Hh=Mi("display","block table table-cell table-caption list-item"),qh=xn,Vh=ga,KS=ue,YS=W,XS=$n,ya=e=>e>0,Io=e=>e<0,rl=(e,t)=>{let n;for(;n=e(t);)if(!Vh(n))return n;return null},Os=(e,t,n,r,o)=>{const a=new Rt(e,r),s=Ic(e)||Vh(e);let i;if(Io(t)){if(s&&(i=rl(a.prev.bind(a),!0),n(i)))return i;for(;i=rl(a.prev.bind(a),o);)if(n(i))return i}if(ya(t)){if(s&&(i=rl(a.next.bind(a),!0),n(i)))return i;for(;i=rl(a.next.bind(a),o);)if(n(i))return i}return null},Qr=(e,t)=>{for(;e&&e!==t;){if(Hh(e))return e;e=e.parentNode}return null},cr=(e,t,n)=>Qr(e.container(),n)===Qr(t.container(),n),Mc=(e,t)=>{if(!t)return C.none();const n=t.container(),r=t.offset();return KS(n)?C.from(n.childNodes[r+e]):C.none()},Wh=(e,t)=>{var n;const r=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},ZS=(e,t,n)=>Qr(t,e)===Qr(n,e),Gh=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let a=o[r];if(a&&qh(a)&&(a=a[r]),Ic(a)||GS(a)){if(ZS(t,a,o))return a;break}if(XS(a))break;o=o.parentNode}return null},Bs=oe(Wh,!0),Ls=oe(Wh,!1),Fc=(e,t,n)=>{let r;const o=oe(Gh,!0,t),a=oe(Gh,!1,t),s=n.startContainer,i=n.startOffset;if(ga(s)){const l=YS(s)?s.parentNode:s,d=l.getAttribute("data-mce-caret");if("before"===d&&(r=l.nextSibling,Ts(r)))return Bs(r);if("after"===d&&(r=l.previousSibling,Ts(r)))return Ls(r)}if(!n.collapsed)return n;if(W(s)){if(qh(s)){if(1===e){if(r=a(s),r)return Bs(r);if(r=o(s),r)return Ls(r)}if(-1===e){if(r=o(s),r)return Ls(r);if(r=a(s),r)return Bs(r)}return n}if(Hi(s)&&i>=s.data.length-1)return 1===e&&(r=a(s),r)?Bs(r):n;if(ji(s)&&i<=1)return-1===e&&(r=o(s),r)?Ls(r):n;if(i===s.data.length)return r=a(s),r?Bs(r):n;if(0===i)return r=o(s),r?Ls(r):n}return n},Kh=(e,t)=>Mc(e?0:-1,t).filter(Ic),Ps=(e,t,n)=>{const r=Fc(e,t,n);return-1===e?D.fromRangeStart(r):D.fromRangeEnd(r)},ol=e=>C.from(e.getNode()).map(_),Uc=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},al=(e,t)=>{const n=cr(e,t);return!(n||!vt(e.getNode()))||n};var Dt,e;(e=Dt||(Dt={}))[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards";const QS=ft,ur=W,Yh=ue,$c=vt,Ca=$n,Xh=e=>{return ip(e)||!!ec(t=e)&&!Kt(Se(t.getElementsByTagName("*")),(n,r)=>n||sp(r),!1);var t},sl=lp,Zh=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Qh=(e,t)=>{if(ya(e)){if(Ca(t.previousSibling)&&!ur(t.previousSibling))return D.before(t);if(ur(t))return D(t,0)}if(Io(e)){if(Ca(t.nextSibling)&&!ur(t.nextSibling))return D.after(t);if(ur(t))return D(t,t.data.length)}return Io(e)?$c(t)?D.before(t):D.after(t):D.before(t)},zc=(e,t,n)=>{let r,o,a,s;if(!Yh(n)||!t)return null;if(t.isEqual(D.after(n))&&n.lastChild){if(s=D.after(n.lastChild),Io(e)&&Ca(n.lastChild)&&Yh(n.lastChild))return $c(n.lastChild)?D.before(n.lastChild):s}else s=t;const i=s.container();let l=s.offset();if(ur(i)){if(Io(e)&&l>0)return D(i,--l);if(ya(e)&&l<i.length)return D(i,++l);r=i}else{if(Io(e)&&l>0&&(o=Zh(i,l-1),Ca(o)))return!Xh(o)&&(a=Os(o,e,sl,o),a)?ur(a)?D(a,a.data.length):D.after(a):ur(o)?D(o,o.data.length):D.before(o);if(ya(e)&&l<i.childNodes.length&&(o=Zh(i,l),Ca(o)))return $c(o)?((c,u)=>{const m=u.nextSibling;return m&&Ca(m)?ur(m)?D(m,0):D.before(m):zc(Dt.Forwards,D.after(u),c)})(n,o):!Xh(o)&&(a=Os(o,e,sl,o),a)?ur(a)?D(a,0):D.before(a):ur(o)?D(o,0):D.after(o);r=o||s.getNode()}if(r&&(ya(e)&&s.isAtEnd()||Io(e)&&s.isAtStart())&&(r=Os(r,e,dt,n,!0),sl(r,n)))return Qh(e,r);o=r&&Os(r,e,sl,n);const d=go(Ae(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),QS));return!d||o&&d.contains(o)?o?Qh(e,o):null:(s=ya(e)?D.after(d):D.before(d),s)},mr=e=>({next:t=>zc(Dt.Forwards,t,e),prev:t=>zc(Dt.Backwards,t,e)}),Jh=e=>D.isTextPosition(e)?0===e.offset():$n(e.getNode()),eb=e=>{if(D.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return $n(e.getNode(!0))},tb=(e,t)=>!D.isTextPosition(e)&&!D.isTextPosition(t)&&e.getNode()===t.getNode(!0),Sn=(e,t,n)=>{const r=mr(t);return C.from(e?r.next(n):r.prev(n))},wa=(e,t,n)=>Sn(e,t,n).bind(r=>{return cr(n,r,t)&&(a=n,s=r,e?!tb(a,s)&&(D.isTextPosition(i=a)||!vt(i.getNode()))&&eb(a)&&Jh(s):!tb(s,a)&&Jh(a)&&eb(s))?Sn(e,t,r):C.some(r);var a,s,i}),nb=(e,t,n,r)=>wa(e,t,n).bind(o=>r(o)?nb(e,t,o,r):C.some(o)),Ea=(e,t)=>{const n=e?t.firstChild:t.lastChild;return W(n)?C.some(D(n,e?0:n.data.length)):n?$n(n)?C.some(e?D.before(n):vt(r=n)?D.before(r):D.after(r)):((o,a,s)=>{const i=o?D.before(s):D.after(s);return Sn(o,a,i)})(e,t,n):C.none();var r},mn=oe(Sn,!0),pn=oe(Sn,!1),Jt=oe(Ea,!0),zn=oe(Ea,!1),jc="_mce_caret",An=e=>ue(e)&&e.id===jc,Mo=(e,t)=>{let n=t;for(;n&&n!==e;){if(An(n))return n;n=n.parentNode}return null},rb=e=>Pe(e,"name"),ob=e=>G.isArray(e.start),il=e=>!(!rb(e)&&se(e.forward))||e.forward,ab=(e,t)=>(ue(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),JS=(e,t)=>zn(e).fold(qe,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),sb=(e,t,n)=>!(t.hasChildNodes()||!Mo(e,t)||(((r,o)=>{var a;const s=(null!==(a=r.ownerDocument)&&void 0!==a?a:document).createTextNode(Lt);r.appendChild(s),o.setStart(s,0),o.setEnd(s,0)})(t,n),0)),ib=(e,t,n,r)=>{const o=n[t?"start":"end"],a=e.getRoot();if(o){let s=a,i=o[0];for(let l=o.length-1;s&&l>=1;l--){const d=s.childNodes;if(sb(a,s,r))return!0;if(o[l]>d.length-1)return!!sb(a,s,r)||JS(s,r);s=d[o[l]]}W(s)&&(i=Math.min(o[0],s.data.length)),ue(s)&&(i=Math.min(o[0],s.childNodes.length)),t?r.setStart(s,i):r.setEnd(s,i)}return!0},Hc=e=>W(e)&&e.data.length>0,lb=(e,t,n)=>{const r=e.get(n.id+"_"+t),o=null==r?void 0:r.parentNode,a=n.keep;if(r&&o){let s,i;if("start"===t?a?r.hasChildNodes()?(s=r.firstChild,i=1):Hc(r.nextSibling)?(s=r.nextSibling,i=0):Hc(r.previousSibling)?(s=r.previousSibling,i=r.previousSibling.data.length):(s=o,i=e.nodeIndex(r)+1):(s=o,i=e.nodeIndex(r)):a?r.hasChildNodes()?(s=r.firstChild,i=1):Hc(r.previousSibling)?(s=r.previousSibling,i=r.previousSibling.data.length):(s=o,i=e.nodeIndex(r)):(s=o,i=e.nodeIndex(r)),!a){const l=r.previousSibling,d=r.nextSibling;let c;for(G.each(G.grep(r.childNodes),u=>{W(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=e.get(n.id+"_"+t);)e.remove(c,!0);if(W(d)&&W(l)&&!Ge.browser.isOpera()){const u=l.data.length;l.appendData(d.data),e.remove(d),s=l,i=u}}return C.some(D(s,i))}return C.none()},eA=(e,t,n)=>((r,o,a=!1)=>{return 2===o?uh(wn,a,r):3===o?(s=>{const i=s.getRng();return{start:ah(s.dom.getRoot(),D.fromRangeStart(i)),end:ah(s.dom.getRoot(),D.fromRangeEnd(i)),forward:s.isForward()}})(r):o?{rng:(s=r).getRng(),forward:s.isForward()}:fh(r,!1);var s})(e,t,n),tA=(e,t)=>{((n,r)=>{const o=n.dom;if(r){if(ob(r))return((a,s)=>{const i=a.createRng();return ib(a,!0,s,i)&&ib(a,!1,s,i)?C.some({range:i,forward:il(s)}):C.none()})(o,r);if(te(r.start))return((a,s)=>{const i=C.from(sh(a.getRoot(),s.start)),l=C.from(sh(a.getRoot(),s.end));return Xt(i,l,(d,c)=>{const u=a.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:il(s)}})})(o,r);if(Pe(r,"id"))return((a,s)=>{const i=lb(a,"start",s),l=lb(a,"end",s);return Xt(i,l.or(i),(d,c)=>{const u=a.createRng();return u.setStart(ab(a,d.container()),d.offset()),u.setEnd(ab(a,c.container()),c.offset()),{range:u,forward:il(s)}})})(o,r);if(rb(r))return((a,s)=>C.from(a.select(s.name)[s.index]).map(i=>{const l=a.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((a=>Pe(a,"rng"))(r))return C.some({range:r.rng,forward:il(r)})}return C.none()})(e,t).each(({range:n,forward:r})=>{e.setRng(n,r)})},Nn=e=>ue(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),ll=(db=Bt,e=>db===e);var db;const ka=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),qc=e=>!ka(e)&&!ll(e)&&!Kd(e),Vc=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},cb=(e,t)=>{const n=Zt(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Ae(cn(e,a=>{const s=Zi(a);return s?[_(s)]:[]}),us)},_a=e=>cb(Vc(e.selection.getSel()),_(e.getBody())),Ds=(e,t)=>os(e,"table",t),ub=e=>Dd(e).fold(X([e]),t=>[e].concat(ub(t))),Wc=e=>Id(e).fold(X([e]),t=>"br"===Ve(t)?bo(t).map(n=>[e].concat(Wc(n))).getOr([]):[e].concat(Wc(t))),Gc=(e,t)=>Xt((n=>{const r=n.startContainer,o=n.startOffset;return W(r)?0===o?C.some(_(r)):C.none():C.from(r.childNodes[o]).map(_)})(t),(n=>{const r=n.endContainer,o=n.endOffset;return W(r)?o===r.data.length?C.some(_(r)):C.none():C.from(r.childNodes[o-1]).map(_)})(t),(n,r)=>{const o=_t(ub(e),oe(Xe,n)),a=_t(Wc(e),oe(Xe,r));return o.isSome()&&a.isSome()}).getOr(!1),Kc=(e,t,n,r)=>{const o=n,a=new Rt(n,o),s=Ga(e.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Ke(["td","th","table"],d.toLowerCase()));let i=n;do{if(W(i)&&0!==G.trim(i.data).length)return void(r?t.setStart(i,0):t.setEnd(i,i.data.length));if(s[i.nodeName])return void(r?t.setStartBefore(i):"BR"===i.nodeName?t.setEndBefore(i):t.setEndAfter(i))}while(i=r?a.next():a.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},dl=e=>{const t=e.selection.getSel();return M(t)&&t.rangeCount>0},Yc=(e,t)=>{const n=_a(e);n.length>0?U(n,r=>{const o=r.dom,a=e.dom.createRng();a.setStartBefore(o),a.setEndAfter(o),t(a,!0)}):t(e.selection.getRng(),!1)},mb=(e,t,n)=>{const r=fh(e,t);n(r),e.moveToBookmark(r)},Is=e=>ke(null==e?void 0:e.nodeType),Xc=e=>ue(e)&&!Nn(e)&&!An(e)&&!ko(e),fb=(e,t,n)=>{const{selection:r,dom:o}=e,a=r.getNode(),s=ft(a);mb(r,!0,()=>{t()}),s&&ft(a)&&o.isChildOf(a,e.getBody())?e.selection.select(a):n(r.getStart())&&nA(o,r)},nA=(e,t)=>{var n,r;const o=t.getRng(),{startContainer:a,startOffset:s}=o;if(!((i,l)=>{if(Xc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(e,t.getNode())&&ue(a)){const i=a.childNodes,l=e.getRoot();let d;if(s<i.length){const c=i[s];d=new Rt(c,null!==(n=e.getParent(c,e.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new Rt(c,null!==(r=e.getParent(c,e.isBlock))&&void 0!==r?r:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===e.getContentEditable(c))return;if(W(c)&&!Qc(c))return o.setStart(c,0),void t.setRng(o)}}},gb=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(ue(e)||!Qc(e))return e}},Zc=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||So(e,t),xa=(e,t,n)=>e.schema.isValidChild(t,n),Qc=(e,t=!1)=>{if(M(e)&&W(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Gr(n)}return!1},pb=(e,t)=>{const n=e.dom;return Xc(t)&&"false"===n.getContentEditable(t)&&((r,o)=>{const a="[data-mce-cef-wrappable]",s=Qx(r),i=Xa(s)?a:`${a},${s}`;return Gn(_(o),i)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},Jr=(e,t)=>Ce(e)?e(t):(M(t)&&(e=e.replace(/%(\w+)/g,(n,r)=>t[r]||n)),e),Jc=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),eu=(e,t)=>{if(ne(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=gs(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},cl=(e,t,n)=>{const r=e.getStyle(t,n);return eu(r,n)},hb=(e,t)=>{let n;return e.getParent(t,r=>!!ue(r)&&(n=e.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},ul=(e,t,n)=>e.getParents(t,n,e.getRoot()),tu=(e,t,n)=>{const r=e.formatter.get(t);return M(r)&&ct(r,n)},fr=e=>na(e,"block"),Rn=e=>na(e,"selector"),Tt=e=>na(e,"inline"),nu=e=>Rn(e)&&!1!==e.expand&&!Tt(e),bb=e=>(t=>{const n=[];let r=t;for(;r;){if(W(r)&&r.data!==Lt||r.childNodes.length>1)return[];ue(r)&&n.push(r),r=r.firstChild}return n})(e).length>0,ru=e=>An(e.dom)&&bb(e.dom),Sa=Nn,vb=ul,yb=Qc,rA=Zc,Cb=(e,t)=>{let n=t;for(;n;){if(ue(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},wb=(e,t,n,r)=>{const o=t.data;if(e){for(let a=n;a>0;a--)if(r(o.charAt(a-1)))return a}else for(let a=n;a<o.length;a++)if(r(o.charAt(a)))return a;return-1},oA=(e,t,n)=>wb(e,t,n,r=>ll(r)||ka(r)),aA=(e,t,n)=>wb(e,t,n,qc),Eb=(e,t,n,r,o,a)=>{let s;const i=e.getParent(n,e.isBlock)||t,l=(d,c,u)=>{const m=Bo(e);return C.from((o?m.backwards:m.forwards)(d,c,(f,h)=>Sa(f.parentNode)?-1:(s=f,u(o,f,h)),i))};return l(n,r,oA).bind(d=>a?l(d.container,d.offset+(o?-1:0),aA):C.some(d)).orThunk(()=>s?C.some({container:s,offset:o?0:s.length}):C.none())},kb=(e,t,n,r,o)=>{const a=r[o];W(r)&&Xa(r.data)&&a&&(r=a);const s=vb(e,r);for(let i=0;i<s.length;i++)for(let l=0;l<t.length;l++){const d=t[l];if((!M(d.collapsed)||d.collapsed===n.collapsed)&&Rn(d)&&e.is(s[i],d.selector))return s[i]}return r},_b=(e,t,n,r)=>{var o;let a=n;const s=e.getRoot(),i=t[0];if(fr(i)&&(a=i.wrapper?null:e.getParent(n,i.block,s)),!a){const l=null!==(o=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:s;a=e.getParent(W(n)?n.parentNode:n,d=>d!==s&&rA(e.schema,d),l)}if(a&&fr(i)&&i.wrapper&&(a=vb(e,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a&&a[r]&&!e.isBlock(a[r])&&(a=a[r],!Jc(a,"br")););return a||n},xb=(e,t,n,r)=>{const o=n.parentNode;return!M(n[r])&&(!(o!==t&&!ne(o)&&!e.isBlock(o))||xb(e,t,o,r))},ml=(e,t,n,r,o)=>{let a=n;const s=o?"previousSibling":"nextSibling",i=e.getRoot();if(W(n)&&!yb(n)&&(o?r>0:r<n.data.length))return n;for(;a;){if(!t[0].block_expand&&e.isBlock(a))return a;for(let d=a[s];d;d=d[s]){const c=W(d)&&!xb(e,i,d,s);if(!Sa(d)&&(!vt(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!yb(d,c))return a}if(a===i||a.parentNode===i){n=a;break}a=a.parentNode}var l;return n},Sb=e=>Sa(e.parentNode)||Sa(e),Fo=(e,t,n,r=!1)=>{let{startContainer:o,startOffset:a,endContainer:s,endOffset:i}=t;const l=n[0];return ue(o)&&o.hasChildNodes()&&(o=Xr(o,a),W(o)&&(a=0)),ue(s)&&s.hasChildNodes()&&(s=Xr(s,t.collapsed?i:i-1),W(s)&&(i=s.data.length)),o=Cb(e,o),s=Cb(e,s),Sb(o)&&(o=Sa(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,W(o)&&(a=t.collapsed?o.length:0)),Sb(s)&&(s=Sa(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,W(s)&&(i=t.collapsed?0:s.length)),t.collapsed&&(Eb(e,e.getRoot(),o,a,!0,r).each(({container:d,offset:c})=>{o=d,a=c}),Eb(e,e.getRoot(),s,i,!1,r).each(({container:d,offset:c})=>{s=d,i=c})),(Tt(l)||l.block_expand)&&(Tt(l)&&W(o)&&0!==a||(o=ml(e,n,o,a,!0)),Tt(l)&&W(s)&&i!==s.data.length||(s=ml(e,n,s,i,!1))),nu(l)&&(o=kb(e,n,t,o,"previousSibling"),s=kb(e,n,t,s,"nextSibling")),(fr(l)||Rn(l))&&(o=_b(e,n,o,"previousSibling"),s=_b(e,n,s,"nextSibling"),fr(l)&&(e.isBlock(o)||(o=ml(e,n,o,a,!0)),e.isBlock(s)||(s=ml(e,n,s,i,!1)))),ue(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),ue(s)&&s.parentNode&&(i=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:i}},Ms=(e,t,n)=>{var r;const o=t.startOffset,a=Xr(t.startContainer,o),s=t.endOffset,i=Xr(t.endContainer,s-1),l=g=>{const b=g[0];W(b)&&b===a&&o>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===s&&g.length>0&&v===i&&W(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>e.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let E=g,w=E.parentNode;E&&E!==b;E=w){w=E.parentNode;const k=d(E===g?E:E[y],y);k.length&&(v||k.reverse(),n(l(k)))}};if(a===i)return n(l([a]));const m=null!==(r=e.findCommonAncestor(a,i))&&void 0!==r?r:e.getRoot();if(e.isChildOf(a,i))return u(a,m,!0);if(e.isChildOf(i,a))return u(i,m);const p=c(a,m)||a,f=c(i,m)||i;u(a,p,!0);const h=d(p===a?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},sA=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Ab=(e,t,n,r,o,a)=>{const{uid:s=t,...i}=n;sa(e,vs()),$t(e,`${ha()}`,s),$t(e,`${To()}`,r);const{attributes:l={},classes:d=[]}=o(s,i);if(Sr(e,l),c=e,U(d,m=>{sa(c,m)}),a){d.length>0&&$t(e,`${Cs()}`,d.join(","));const c=Me(l);c.length>0&&$t(e,`${ws()}`,c.join(","))}var c},Nb=(e,t,n,r,o)=>{const a=Ot("span",e);return Ab(a,t,n,r,o,!1),a},Rb=e=>{const t=(()=>{const a={};return{register:(s,i)=>{a[s]={name:s,settings:i}},lookup:s=>ut(a,s).map(i=>i.settings),getNames:()=>Me(a)}})();((a,s)=>{const i=To(),l=c=>C.from(c.attr(i)).bind(s.lookup),d=c=>{var u,m;c.attr(ha(),null),c.attr(To(),null),c.attr(ys(),null);const p=C.from(c.attr(ws())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(Cs())).map(b=>b.split(",")).getOr([]);U(p,b=>c.attr(b,null));const h=null!==(m=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=ta(h,[vs()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(Cs(),null),c.attr(ws(),null)};a.serializer.addTempAttr(ys()),a.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():d(u))})})})(e,t);const n=((a,s)=>{const i=Pt({}),l=()=>({listeners:[],previous:Yr()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f(ut(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{U(Up(a,p),h=>{f?$t(h,ys(),"true"):zt(h,ys())})},m=Cc(()=>{const p=F(s.getNames());U(p,f=>{c(f,h=>{const g=h.previous.get();return Mp(a,C.some(f)).fold(()=>{g.each(b=>{var v;d(v=f,y=>{U(y.listeners,E=>E(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var E,w,k;oa(g,b)||(g.each(E=>u(E,!1)),w=b,k=y,d(E=v,A=>{U(A.listeners,T=>T(!0,E,{uid:w,nodes:ze(k,O=>O.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return a.on("remove",()=>{m.cancel()}),a.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(e,t),r=Ti("span"),o=a=>{U(a,s=>{r(s)?Br(s):(i=>{Ja(i,vs()),zt(i,`${ha()}`),zt(i,`${To()}`),zt(i,`${ys()}`);const l=Ar(i,`${ws()}`).map(u=>u.split(",")).getOr([]),d=Ar(i,`${Cs()}`).map(u=>u.split(",")).getOr([]);var c;U(l,u=>zt(i,u)),c=i,U(d,u=>{Ja(c,u)}),zt(i,`${Cs()}`),zt(i,`${ws()}`)})(s)})};return{register:(a,s)=>{t.register(a,s)},annotate:(a,s)=>{t.lookup(a).each(i=>{var l,d,c,u;d=a,c=i,u=s,(l=e).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=_a(l).length>0,h=Es("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=Fo(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=Nb(l.getDoc(),h,u,d,c.decorate);Pi(g,Bt),m.getRng().insertNode(g.dom),m.select(g.dom)}else mb(m,!1,()=>{Yc(l,g=>{((e,t,n,r,o,a)=>{const s=[],i=Nb(e.getDoc(),n,a,r,o),l=Yr(),d=()=>{l.clear()},c=m=>{U(m,u)},u=m=>{switch(p=e,f=m,h="span",g=Ve(m),Fn(f).fold(()=>"skipping",b=>{return"br"===g||_n(v=f)&&Ui(v)===Lt?"valid":(v=>yn(v)&&Pd(v,vs()))(f)?"existing":An(f.dom)?"caret":ct(sA,v=>Gn(f,v))?"valid-block":xa(p,h,g)&&xa(p,Ve(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=jt(m);c(p),d();break}case"valid-block":d(),Ab(m,n,a,r,o,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=Oo(i);return s.push(f),l.set(f),f});qg(m,p);break}}var p,f,h,g};Ms(e.dom,t,m=>{d(),(p=>{const f=ze(p,_);c(f)})(m)})})(l,g,h,d,c.decorate,u)})})})})},annotationChanged:(a,s)=>{n.addListener(a,s)},remove:a=>{Mp(e,C.some(a)).each(({elements:s})=>{const i=e.selection.getBookmark();o(s),e.selection.moveToBookmark(i)})},removeAll:a=>{const s=e.selection.getBookmark();ge($p(e,a),(i,l)=>{o(i)}),e.selection.moveToBookmark(s)},getAll:a=>{const s=$p(e,a);return nt(s,i=>ze(i,l=>l.dom))}}},Fs=e=>({getBookmark:oe(eA,e),moveToBookmark:oe(tA,e)});Fs.isBookmarkNode=Nn;const Tb=(e,t,n)=>!n.collapsed&&ct(n.getClientRects(),r=>{return s=t,(a=e)>=(o=r).left&&a<=o.right&&s>=o.top&&s<=o.bottom;var o,a,s}),Ob=(e,t,n)=>{e.dispatch(t,n)},Bb=(e,t,n,r)=>{e.dispatch("FormatApply",{format:t,node:n,vars:r})},Lb=(e,t,n,r)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:r})},Pb=(e,t)=>e.dispatch("SetContent",t),Db=(e,t)=>e.dispatch("GetContent",t),Ib=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ae={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ae.metaKeyPressed(e),metaKeyPressed:e=>Ge.os.isMacOS()||Ge.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Uo="data-mce-selected",Mb=Math.abs,fl=Math.round,ou={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Fb=(e,t)=>{const n=t.dom,r=t.getDoc(),o=document,a=t.getBody();let s,i,l,d,c,u,m,p,f,h,g,b,v,y,E;const w=re=>M(re)&&(tp(re)||n.is(re,"figure.image")),k=re=>lr(re)||n.hasClass(re,"mce-preview-object"),A=re=>{const de=re.target;((Ne,N)=>{if("longpress"===(R=Ne).type||0===R.type.indexOf("touch")){const R=Ne.touches[0];return w(Ne.target)&&!Tb(R.clientX,R.clientY,N)}var R;return w(Ne.target)&&!Tb(Ne.clientX,Ne.clientY,N)})(re,t.selection.getRng())&&!re.isDefaultPrevented()&&t.selection.select(de)},T=re=>n.hasClass(re,"mce-preview-object")&&M(re.firstElementChild)?[re,re.firstElementChild]:n.is(re,"figure.image")?[re.querySelector("img")]:[re],O=re=>{const de=Rh(t);return!!de&&"false"!==re.getAttribute("data-mce-resize")&&re!==t.getBody()&&(n.hasClass(re,"mce-preview-object")&&M(re.firstElementChild)?Gn(_(re.firstElementChild),de):Gn(_(re),de))},P=(re,de,Ne)=>{if(M(Ne)){const N=T(re);U(N,R=>{R.style[de]||!t.schema.isValid(R.nodeName.toLowerCase(),de)?n.setStyle(R,de,Ne):n.setAttrib(R,de,""+Ne)})}},x=(re,de,Ne)=>{P(re,"width",de),P(re,"height",Ne)},S=re=>{let de,Ne,N,R,I;de=re.screenX-u,Ne=re.screenY-m,b=de*d[2]+p,v=Ne*d[3]+f,b=b<5?5:b,v=v<5?5:v,N=(w(s)||k(s))&&!1!==qx(t)?!ae.modifierPressed(re):ae.modifierPressed(re),N&&(Mb(de)>Mb(Ne)?(v=fl(b*h),b=fl(v/h)):(b=fl(v/h),v=fl(b*h))),x(i,b,v),R=d.startPos.x+de,I=d.startPos.y+Ne,R=R>0?R:0,I=I>0?I:0,n.setStyles(l,{left:R,top:I,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),de=a.scrollWidth-y,Ne=a.scrollHeight-E,de+Ne!==0&&n.setStyles(l,{left:R-de,top:I-Ne}),g||(t.dispatch("ObjectResizeStart",{target:s,width:p,height:f,origin:"corner-"+d.name}),g=!0)},B=()=>{const re=g;g=!1,re&&(P(s,"width",b),P(s,"height",v)),n.unbind(r,"mousemove",S),n.unbind(r,"mouseup",B),o!==r&&(n.unbind(o,"mousemove",S),n.unbind(o,"mouseup",B)),n.remove(i),n.remove(l),n.remove(c),$(s),re&&(t.dispatch("ObjectResized",{target:s,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(s,"style",n.getAttrib(s,"style"))),t.nodeChanged()},$=re=>{Ee();const de=n.getPos(re,a),Ne=de.x,N=de.y,R=re.getBoundingClientRect(),I=R.width||R.right-R.left,z=R.height||R.bottom-R.top;s!==re&&(K(),s=re,b=v=0);const q=t.dispatch("ObjectSelected",{target:re});O(re)&&!q.isDefaultPrevented()?ge(ou,(ce,ye)=>{let Oe=n.get("mceResizeHandle"+ye);Oe&&n.remove(Oe),Oe=n.add(a,"div",{id:"mceResizeHandle"+ye,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ye+"-resize; margin:0; padding:0"}),n.bind(Oe,"mousedown",Re=>{Re.stopImmediatePropagation(),Re.preventDefault(),(Qe=>{const me=T(s)[0];var Ie;u=Qe.screenX,m=Qe.screenY,p=me.clientWidth,f=me.clientHeight,h=f/p,d=ce,d.name=ye,d.startPos={x:I*ce[0]+Ne,y:z*ce[1]+N},y=a.scrollWidth,E=a.scrollHeight,c=n.add(a,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=k(Ie=s)?n.create("img",{src:Ge.transparentSrc}):Ie.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:Ne,top:N,margin:0}),x(i,I,z),i.removeAttribute(Uo),a.appendChild(i),n.bind(r,"mousemove",S),n.bind(r,"mouseup",B),o!==r&&(n.bind(o,"mousemove",S),n.bind(o,"mouseup",B)),l=n.add(a,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(Re)}),ce.elm=Oe,n.setStyles(Oe,{left:I*ce[0]+Ne-Oe.offsetWidth/2,top:z*ce[1]+N-Oe.offsetHeight/2})}):K(!1)},ee=Xi($,0),K=(re=!0)=>{ee.cancel(),Ee(),s&&re&&s.removeAttribute(Uo),ge(ou,(de,Ne)=>{const N=n.get("mceResizeHandle"+Ne);N&&(n.unbind(N),n.remove(N))})},be=(re,de)=>n.isChildOf(re,de),pe=re=>{if(g||t.removed||t.composing)return;const de="mousedown"===re.type?re.target:e.getNode(),Ne=yo(_(de),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(R=>R.dom).filter(R=>n.isEditable(R.parentElement)||"IMG"===R.nodeName&&n.isEditable(R)).getOrUndefined(),N=M(Ne)?n.getAttrib(Ne,Uo,"1"):"1";if(U(n.select(`img[${Uo}],hr[${Uo}]`),R=>{R.removeAttribute(Uo)}),M(Ne)&&be(Ne,a)&&t.hasFocus()){Te();const R=e.getStart(!0);if(be(R,Ne)&&be(e.getEnd(!0),Ne))return n.setAttrib(Ne,Uo,N),void ee.throttle(Ne)}K()},Ee=()=>{ge(ou,re=>{re.elm&&(n.unbind(re.elm),delete re.elm)})},Te=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Te(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",pe),t.on("keyup compositionend",re=>{s&&"TABLE"===s.nodeName&&pe(re)}),t.on("hide blur",K),t.on("contextmenu longpress",A,!0)}),t.on("remove",Ee),{isResizable:O,showResizeRect:$,hideResizeRect:K,updateResizeRect:pe,destroy:()=>{ee.cancel(),s=i=c=null}}},Ub=(e,t,n)=>{const r=e.document.createRange();var o,a;return o=r,t.fold(a=>{o.setStartBefore(a.dom)},(a,s)=>{o.setStart(a.dom,s)},a=>{o.setStartAfter(a.dom)}),a=r,n.fold(i=>{a.setEndBefore(i.dom)},(i,l)=>{a.setEnd(i.dom,l)},i=>{a.setEndAfter(i.dom)}),r},au=(e,t,n,r,o)=>{const a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(r.dom,o),a},Us=dr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),$b=(e,t,n)=>t(_(n.startContainer),n.startOffset,_(n.endContainer),n.endOffset),zb=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),lA=document.caretPositionFromPoint?(e,t,n)=>{var r,o;return C.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind(a=>{if(null===a.offsetNode)return C.none();const s=e.dom.createRange();return s.setStart(a.offsetNode,a.offset),s.collapse(),C.some(s)})}:document.caretRangeFromPoint?(e,t,n)=>{var r,o;return C.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))}:C.none,su=dr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ir={before:su.before,on:su.on,after:su.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(ht,ht,ht)},gl=dr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Aa={domRange:gl.domRange,relative:gl.relative,exact:gl.exact,exactFromRange:e=>gl.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=e.match({domRange:r=>_(r.startContainer),relative:(r,o)=>Ir.getStart(r),exact:(r,o,a,s)=>r});return ns(t)},range:zb},pl=(e,t)=>{const n=Ve(e);return"input"===n?Ir.after(e):Ke(["br","img"],n)?0===t?Ir.before(e):Ir.after(e):Ir.on(e,t)},dA=(e,t)=>{const n=e.fold(Ir.before,pl,Ir.after),r=t.fold(Ir.before,pl,Ir.after);return Aa.relative(n,r)},jb=(e,t,n,r)=>{const o=pl(e,t),a=pl(n,r);return Aa.relative(o,a)},iu=(e,t)=>{const n=(t||document).createDocumentFragment();return U(e,r=>{n.appendChild(r.dom)}),_(n)},Hb=(e,t,n)=>{return(r=ns(_(n)).dom,o=e,a=t,((s,i,l)=>{const d=_(s.document);return lA(d,i,l).map(c=>zb(_(c.startContainer),c.startOffset,_(c.endContainer),c.endOffset))})(r,o,a)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,a},lu=(e,t)=>M(e)&&M(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,qb=(e,t,n)=>null!==((r,o,a)=>{let s=r;for(;s&&s!==o;){if(a(s))return s;s=s.parentNode}return null})(e,t,n),uA=(e,t,n)=>qb(e,t,r=>r.nodeName===n),mA=(e,t)=>xn(e)&&!qb(e,t,An),Vb=(e,t,n)=>{const r=t.parentNode;if(r){const o=new Rt(t,e.getParent(r,e.isBlock)||e.getRoot());let a;for(;a=o[n?"prev":"next"]();)if(vt(a))return!0}return!1},du=(e,t,n,r,o)=>{const a=e.getRoot(),s=e.schema.getNonEmptyElements(),i=o.parentNode;let l,d;if(!i)return C.none();const c=e.getParent(i,e.isBlock)||a;if(r&&vt(o)&&t&&e.isEmpty(c))return C.some(D(i,e.nodeIndex(o)));const u=new Rt(o,c);for(;d=u[r?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||mA(d,a))return C.none();if(W(d)&&d.data.length>0)return uA(d,a,"A")?C.none():C.some(D(d,r?d.data.length:0));if(e.isBlock(d)||s[d.nodeName.toLowerCase()])return C.none();l=d}return qr(l)?C.none():n&&l?C.some(D(l,0)):C.none()},Wb=(e,t,n,r)=>{const o=e.getRoot();let a,s=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const d=ue(i)&&l===i.childNodes.length,c=e.schema.getNonEmptyElements();let u=n;if(xn(i))return C.none();if(ue(i)&&l>i.childNodes.length-1&&(u=!1),ls(i)&&(i=o,l=0),i===o){if(u&&(a=i.childNodes[l>0?l-1:0],a)&&(xn(a)||c[a.nodeName]||Pr(a)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=W(i)&&d?i.data.length:0,!t&&i===o.lastChild&&Pr(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(ft(f))return!0;f=f.parentNode}return!1})(o,i)||xn(i)||Gd(i))return C.none();if(i.hasChildNodes()&&!Pr(i)){a=i;const m=new Rt(i,o);do{if(ft(a)||xn(a)){s=!1;break}if(W(a)&&a.data.length>0){l=u?0:a.data.length,i=a,s=!0;break}if(c[a.nodeName.toLowerCase()]&&!N_(a)){l=e.nodeIndex(a),i=a.parentNode,u||l++,s=!0;break}}while(a=u?m.next():m.prev())}}}return t&&(W(i)&&0===l&&du(e,d,t,!0,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),ue(i)&&(a=i.childNodes[l],a||(a=i.childNodes[l-1]),!a||!vt(a)||"A"===(null===(f=a.previousSibling)||void 0===f?void 0:f.nodeName)||Vb(e,a,!1)||Vb(e,a,!0)||du(e,d,t,!0,a).each(m=>{i=m.container(),l=m.offset(),s=!0}))),u&&!t&&W(i)&&l===i.data.length&&du(e,d,t,!1,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),s&&i?C.some(D(i,l)):C.none();var f},hl=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),o=D.fromRangeStart(t);return Wb(e,n,!0,r).each(a=>{n&&D.isAbove(o,a)||r.setStart(a.container(),a.offset())}),n||Wb(e,n,!1,r).each(a=>{r.setEnd(a.container(),a.offset())}),n&&r.collapse(!0),lu(t,r)?C.none():C.some(r)},bl=(e,t)=>e.splitText(t),vl=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;if(t===r&&W(t)){if(n>0&&n<t.data.length)if(r=bl(t,n),t=r.previousSibling,o>n){o-=n;const a=bl(r,o).previousSibling;t=r=a,o=a.data.length,n=0}else o=0}else if(W(t)&&n>0&&n<t.data.length&&(t=bl(t,n),n=0),W(r)&&o>0&&o<r.data.length){const a=bl(r,o).previousSibling;r=a,o=a.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},$o=e=>({walk:(t,n)=>Ms(e,t,n),split:vl,expand:(t,n={type:"word"})=>{if("word"===n.type){const r=Fo(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return t},normalize:t=>hl(e,t).fold(qe,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});$o.compareRanges=lu,$o.getCaretRangeFromPoint=Hb,$o.getSelectedNode=Zi,$o.getNode=Xr;const fA=((e,t)=>{const n=o=>{const a=(s=>{const i=s.dom;return da(s)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(a<=0||null===a){const s=ir(o,e);return parseFloat(s)||0}return a},r=(o,a)=>Kt(a,(s,i)=>{const l=ir(o,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?s:s+d},0);return{set:(o,a)=>{if(!ke(a)&&!a.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+a);const s=o.dom;ss(s)&&(s.style[e]=a+"px")},get:n,getOuter:n,aggregate:r,max:(o,a,s)=>{const i=r(o,s);return a>i?a-i:0}}})("height"),Gb=()=>_(document),Kb=(e,t)=>e.view(t).fold(X([]),n=>{const r=e.owner(n),o=Kb(e,r);return[n].concat(o)});var gA=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?C.none():C.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(_)},owner:e=>Rr(e)});const cu=e=>"textarea"===Ve(e),Yb=(e,t)=>{const n=(o=>{const a=o.dom.ownerDocument,s=a.body,i=a.defaultView,l=a.documentElement;if(s===o.dom)return ua(s.offsetLeft,s.offsetTop);const d=Di(null==i?void 0:i.pageYOffset,l.scrollTop),c=Di(null==i?void 0:i.pageXOffset,l.scrollLeft),u=Di(l.clientTop,s.clientTop),m=Di(l.clientLeft,s.clientLeft);return Hd(o).translate(c-m,d-u)})(e),r=fA.get(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},Xb=(e,t,n,r)=>{hA(e,(o,a)=>pA(e,t,n,r),n)},Zb=(e,t,n,r,o)=>{const a={elm:r.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",a).isDefaultPrevented()||(n(e,t,qd(t).top,r,o),e.dispatch("AfterScrollIntoView",a))},pA=(e,t,n,r)=>{_(e.getBody());const a=_(e.getDoc()),s=((i,l)=>{const d=((u,m)=>{const p=jt(u);if(0===p.length||cu(u))return{element:u,offset:m};if(m<p.length&&!cu(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return cu(f)?{element:u,offset:m}:"img"===Ve(f)?{element:f,offset:1}:_n(f)?{element:f,offset:Ui(f).length}:{element:f,offset:jt(f).length}}})(i,l),c=ts('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return gn(d.element,c),Yb(c,()=>mt(c))})(_(n.startContainer),n.startOffset);Zb(e,a,t,s,r),s.cleanup()},Qb=(e,t,n,r)=>{const o=_(e.getDoc());Zb(e,o,n,Yb(_(t),we),r)},hA=(e,t,n)=>{const r=n.startContainer,o=n.startOffset,a=n.endContainer,s=n.endOffset;t(_(r),_(a));const i=e.dom.createRng();i.setStart(r,o),i.setEnd(a,s),e.selection.setRng(n)},uu=(e,t,n,r,o)=>{const a=t.pos;if(r)Gg(a.left,a.top,o);else{const s=a.top-n+t.height;Gg(-e.getBody().getBoundingClientRect().left,s,o)}},Jb=(e,t,n,r,o,a)=>{const s=r+n,i=o.pos.top,l=o.bottom,d=l-i>=r;i<n?uu(e,o,r,!1!==a,t):i>s?uu(e,o,r,d?!1!==a:!0===a,t):l>s&&!d&&uu(e,o,r,!0===a,t)},e0=(e,t,n,r,o)=>{const a=ns(t).dom.innerHeight;Jb(e,t,n,a,r,o)},t0=(e,t,n,r,o)=>{const a=ns(t).dom.innerHeight;Jb(e,t,n,a,r,o);const s=(l=>{const d=Gb(),c=qd(d),u=((f,h)=>{const g=h.owner(f);return Kb(h,g)})(l,gA),m=Hd(l),p=co(u,(f,h)=>{const g=Hd(h);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return ua(p.left+m.left+c.left,p.top+m.top+c.top)})(r.element),i=Xg(window);s.top<i.y?Kg(r.element,!1!==o):s.top>i.bottom&&Kg(r.element,!0===o)},bA=(e,t,n)=>Xb(e,e0,t,n),vA=(e,t,n)=>Qb(e,t,e0,n),yA=(e,t,n)=>Xb(e,t0,t,n),CA=(e,t,n)=>Qb(e,t,t0,n),$s=(e,t,n)=>{(e.inline?bA:yA)(e,t,n)},n0=(e,t=!1)=>e.dom.focus({preventScroll:t}),r0=e=>{const t=Hr(e).dom;return e.dom===t.activeElement},mu=(e=Gb())=>C.from(e.dom.activeElement).map(_),o0=(e,t)=>{const n=_n(t)?Ui(t).length:jt(t).length+1;return e>n?n:e<0?0:e},wA=e=>Aa.range(e.start,o0(e.soffset,e.start),e.finish,o0(e.foffset,e.finish)),a0=(e,t)=>!Ii(t.dom)&&(Nr(e,t)||Xe(e,t)),s0=e=>t=>a0(e,t.start)&&a0(e,t.finish),EA=e=>Aa.range(_(e.startContainer),e.startOffset,_(e.endContainer),e.endOffset),kA=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),C.some(t)}catch{return C.none()}},fu=e=>{const t=e.inline||Ge.browser.isFirefox()?(n=_(e.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?C.from(o.getRangeAt(0)):C.none()).map(EA)})(ns(n).dom).filter(s0(n))):C.none();var n;e.bookmark=t.isSome()?t:e.bookmark},gu=e=>(e.bookmark?e.bookmark:C.none()).bind(t=>{return n=_(e.getBody()),C.from(t).filter(s0(n)).map(wA);var n}).bind(kA),i0={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Tn={setEditorTimeout:(e,t,n)=>{return ke(o=n)||(o=0),setTimeout(()=>{e.removed||t()},o);var o},setEditorInterval:(e,t,n)=>{const r=(ke(a=n)||(a=0),setInterval(()=>{e.removed?clearInterval(r):t()},a));var a;return r}};let Na;const pu=it.DOM,hu=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},yl=(e,t)=>{const n=Jx(e);return null!==pu.getParent(t,o=>{return ue(a=o)&&i0.isEditorUIElement(a)||!!n&&e.dom.is(o,n);var a})},bu=e=>{try{const t=Hr(_(e.getElement()));return mu(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},_A=(e,t)=>{const n=t.editor;(o=>{const a=Xi(()=>{fu(o)},0);o.on("init",()=>{var s,d;o.inline&&((s,i)=>{const l=()=>{i.throttle()};it.DOM.bind(document,"mouseup",l),s.on("remove",()=>{it.DOM.unbind(document,"mouseup",l)})})(o,a),d=a,(s=o).on("mouseup touchend",c=>{d.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||fu(s)})}),o.on("remove",()=>{a.cancel()})})(n);const r=(o,a)=>{PS(o)&&!0!==o.inline&&a(_(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=e.focusedEditor;hu(bu(n))&&r(n,sa),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Tn.setEditorTimeout(n,()=>{const o=e.focusedEditor;hu(bu(n))&&o===n||r(n,Ja),yl(n,bu(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Na||(Na=o=>{const a=e.activeEditor;a&&Mg(o).each(s=>{s.ownerDocument===document&&(s===document.body||yl(a,s)||e.focusedEditor!==a||(a.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},pu.bind(document,"focusin",Na))},xA=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Na&&(pu.unbind(document,"focusin",Na),Na=null)},l0=(e,t)=>{var n,r,o;(n=_(e.getBody()),r=t,(o=r,o.collapsed?C.from(Xr(o.startContainer,o.startOffset)).map(_):C.none()).bind(o=>O_(o)?C.some(o):Nr(n,o)?C.none():C.some(n))).bind(n=>Jt(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},vu=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},zo=e=>{return e.inline?(t=>{const n=t.getBody();return n&&(r=_(n),r0(r)||(o=r,mu(Hr(o)).filter(a=>o.dom.contains(a.dom))).isSome());var r,o})(e):M((t=e).iframeElement)&&r0(_(t.iframeElement));var t},d0=e=>zo(e)||(t=>{const n=Hr(_(t.getElement()));return mu(n).filter(r=>!hu(r.dom)&&yl(t,r.dom)).isSome()})(e),yu=e=>e.editorManager.setActive(e),c0=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),u0=(e,t,n,r,o)=>{const s=n?t.startOffset:t.endOffset;return C.from(n?t.startContainer:t.endContainer).map(_).map(i=>r&&t.collapsed?i:la(i,o(i,s)).getOr(i)).bind(i=>yn(i)?C.some(i):Fn(i).filter(yn)).map(i=>i.dom).getOr(e)},m0=(e,t,n=!1)=>u0(e,t,!0,n,(r,o)=>Math.min(Md(r),o)),f0=(e,t,n=!1)=>u0(e,t,!1,n,(r,o)=>o>0?o-1:o),g0=(e,t)=>{const n=e;for(;e&&W(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Cu=(e,t)=>ze(t,n=>{const r=e.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),SA=["img","br"],p0=e=>{return np(e).filter(n=>0!==n.trim().length||n.indexOf(Bt)>-1).isSome()||Ke(SA,Ve(e))||Ri(n=e)&&"false"===Cn(n,"contenteditable");var n},h0="[data-mce-autocompleter]",b0=e=>as(e,h0),NA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Cl=(e,t,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){let a=e[o];if(a)return a;for(let s=e.parent;s&&s!==t;s=s.parent)if(a=s[o],a)return a}},RA=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!Gr(n))return!1;const r=e.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},v0=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class rn{static create(t,n){const r=new rn(t,NA[t]||1);return n&&ge(n,(o,a)=>{r.attr(a,o)}),r}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const r=this;if(!te(t))return M(t)&&ge(t,(a,s)=>{r.attr(s,a)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(t in o.map){delete o.map[t];let a=o.length;for(;a--;)if(o[a].name===t)return o.splice(a,1),r}return r}if(t in o.map){let a=o.length;for(;a--;)if(o[a].name===t){o[a].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,r}return o.map[t]}}clone(){const t=this,n=new rn(t.name,t.type),r=t.attributes;if(r){const o=[];o.map={};for(let a=0,s=r.length;a<s;a++){const i=r[a];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const r=n.next;t.insert(n,t,!0),n=r}t.remove()}remove(){const t=this,n=t.parent,r=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const r=n.lastChild;return r?(r.next=t,t.prev=r,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,r){t.parent&&t.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,r=[];for(let o=n.firstChild;o;o=Cl(o,n))o.name===t&&r.push(o);return r}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Cl(o,t))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},r){var o;const a=this;let s=a.firstChild;if(v0(a))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(t[s.name]||v0(s))return!1}if(8===s.type||3===s.type&&!RA(s)||3===s.type&&s.parent&&n[s.parent.name]&&Gr(null!==(o=s.value)&&void 0!==o?o:"")||r&&r(s))return!1}while(s=Cl(s,a));return!0}walk(t){return Cl(this,null,t)}}const TA=G.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),y0=e=>te(e.nodeValue)&&e.nodeValue.includes(Lt),C0=e=>(0===e.length?"":`${ze(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',w0=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>y0(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),E0=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(y0(t)){const n=t.parentNode;return n&&Pe(TA,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),OA=e=>null!==w0(e).nextNode(),BA=e=>null!==E0(e).nextNode(),LA=(e,t)=>null!==t.querySelector(C0(e)),PA=(e,t)=>{U(t.querySelectorAll(C0(e)),n=>{const r=_(n);"all"===Cn(r,"data-mce-bogus")?mt(r):U(e,o=>{Za(r,o)&&zt(r,o)})})},k0=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},DA=Et(k0,w0),IA=Et(k0,E0),_0=(e,t)=>{const n=[{condition:oe(LA,t),action:oe(PA,t)},{condition:OA,action:DA},{condition:BA,action:IA}];let r=e,o=!1;return U(n,({condition:a,action:s})=>{a(r)&&(o||(r=e.cloneNode(!0),o=!0),s(r))}),r},x0=e=>{const t=Zt(e,"[data-mce-bogus]");U(t,n=>{"all"===Cn(n,"data-mce-bogus")?mt(n):_o(n)?(gn(n,ia("\ufeff")),mt(n)):Br(n)})},S0=e=>{const t=Zt(e,"input");U(t,n=>{zt(n,"name")})},A0=G.makeMap,N0=e=>{const t=[],n=(e=e||{}).indent,r=A0(e.indent_before||""),o=A0(e.indent_after||""),a=No.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="xhtml"!==e.element_format;return{start:(i,l,d)=>{if(n&&r[i]&&t.length>0){const c=t[t.length-1];c.length>0&&"\n"!==c&&t.push("\n")}if(t.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];t.push(" ",m.name,'="',a(m.value,!0),'"')}if(t[t.length]=!d||s?">":" />",d&&n&&o[i]&&t.length>0){const c=t[t.length-1];c.length>0&&"\n"!==c&&t.push("\n")}},end:i=>{let l;t.push("</",i,">"),n&&o[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&"\n"!==l&&t.push("\n"))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:a(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?t.push("<?",i," ",a(l),"?>"):t.push("<?",i,"?>"),n&&t.push("\n")},doctype:i=>{t.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},eo=(e={},t=Kr())=>{const n=N0(e);return e.validate=!("validate"in e)||e.validate,{serialize:r=>{const o=e.validate,a={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{s(l)}while(l=l.next)}};n.reset();const s=i=>{var l;const d=a[i.type];if(d)d(i);else{const c=i.name,u=c in t.getVoidElements();let m=i.attributes;if(o&&m&&m.length>1){const p=[];p.map={};const f=t.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),xo(c))te(i.value)&&n.text(i.value,!0),n.end(c);else if(!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{s(p)}while(p=p.next)}n.end(c)}}};return 1!==r.type||e.inner?3===r.type?a[3](r):a[11](r):s(r),n.getContent()}}},R0=new Set;U(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{R0.add(e)});const T0=["font","text-decoration","text-emphasis"],wu=(e,t)=>Me(e.parseStyle(e.getAttrib(t,"style"))),FA=(e,t,n)=>{const r=wu(e,t),o=wu(e,n),a=s=>{var i,l;const d=null!==(i=e.getStyle(t,s))&&void 0!==i?i:"",c=null!==(l=e.getStyle(n,s))&&void 0!==l?l:"";return rr(d)&&rr(c)&&d!==c};return ct(r,s=>{const i=l=>ct(l,d=>d===s);if(!i(o)&&i(T0)){const l=Ae(o,d=>ct(T0,c=>Ut(d,c)));return ct(l,a)}return a(s)})},O0=(e,t,n)=>C.from(n.container()).filter(W).exists(r=>{const o=e?0:-1;return t(r.data.charAt(n.offset()+o))}),Eu=oe(O0,!0,ka),ku=oe(O0,!1,ka),UA=e=>{const t=e.container();return W(t)&&(0===t.data.length||zi(t.data)&&Fs.isBookmarkNode(t.parentNode))},to=(e,t)=>n=>Mc(e?0:-1,n).filter(t).isSome(),B0=e=>tp(e)&&"block"===ir(_(e),"display"),L0=e=>{return ft(e)&&!(ue(t=e)&&"all"===t.getAttribute("data-mce-bogus"));var t},$A=to(!0,B0),zA=to(!1,B0),zs=to(!0,lr),js=to(!1,lr),P0=to(!0,Pr),D0=to(!1,Pr),no=to(!0,L0),ro=to(!1,L0),I0=(e,t)=>{return o=qe,Nr(r=t,n=e)?Lg(n,a=>o(a)||Xe(a,r)).slice(0,-1):[];var n,r,o},Mr=(e,t)=>[e].concat(I0(e,t)),_u=(e,t,n)=>nb(e,t,n,UA),M0=(e,t,n)=>{return _t(Mr(_(t.container()),e),(r=n,o=>r.isBlock(Ve(o))));var r},F0=(e,t,n,r)=>_u(e,t.dom,n).forall(o=>M0(t,n,r).fold(()=>!cr(o,n,t.dom),a=>!cr(o,n,t.dom)&&Nr(a,_(o.container())))),U0=(e,t,n,r)=>M0(t,n,r).fold(()=>_u(e,t.dom,n).forall(o=>!cr(o,n,t.dom)),o=>_u(e,o.dom,n).isNone()),xu=oe(U0,!1),$0=oe(U0,!0),jA=oe(F0,!1),HA=oe(F0,!0),qA=e=>ol(e).exists(_o),wl=(e,t,n,r)=>{const o=Ae(Mr(_(n.container()),t),s=>r.isBlock(Ve(s))),a=Q(o).getOr(t);return Sn(e,a.dom,n).filter(qA)},Su=(e,t,n)=>ol(t).exists(_o)||wl(!0,e,t,n).isSome(),Au=(e,t,n)=>{return(r=t,C.from(r.getNode(!0)).map(_)).exists(_o)||wl(!1,e,t,n).isSome();var r},VA=oe(wl,!1),WA=oe(wl,!0),z0=e=>D.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),j0=(e,t,n)=>{const r=Ae(Mr(_(t.container()),e),o=>n.isBlock(Ve(o)));return Q(r).getOr(e)},H0=(e,t,n)=>z0(t)?ku(t):ku(t)||pn(j0(e,t,n).dom,t).exists(ku),q0=(e,t,n)=>z0(t)?Eu(t):Eu(t)||mn(j0(e,t,n).dom,t).exists(Eu),Nu=e=>ol(e).bind(t=>vo(t,yn)).exists(t=>{return n=ir(t,"white-space"),Ke(["pre","pre-wrap"],n);var n}),V0=(e,t)=>n=>{return r=new Rt(n,e)[t](),M(r)&&ft(r)&&Hh(r);var r},W0=(e,t,n)=>{return!Nu(t)&&(a=n,pn((r=e).dom,o=t).isNone()||mn(r.dom,o).isNone()||xu(r,o,a)||$0(r,o,a)||Au(r,o,a)||Su(r,o,a)||H0(e,t,n)||q0(e,t,n));var r,o,a},Hs=(e,t,n)=>!Nu(t)&&(xu(e,t,n)||jA(e,t,n)||Au(e,t,n)||H0(e,t,n)||((r,o)=>{const a=pn(r.dom,o).getOr(o),s=V0(r.dom,"prev");return o.isAtStart()&&(s(o.container())||s(a.container()))})(e,t)),qs=(e,t,n)=>!Nu(t)&&($0(e,t,n)||HA(e,t,n)||Su(e,t,n)||q0(e,t,n)||((r,o)=>{const a=mn(r.dom,o).getOr(o),s=V0(r.dom,"next");return o.isAtEnd()&&(s(o.container())||s(a.container()))})(e,t)),Ru=(e,t,n)=>Hs(e,t,n)||qs(e,(r=>{const o=r.container(),a=r.offset();return W(o)&&a<o.data.length?D(o,a+1):r})(t),n),G0=(e,t)=>ll(e.charAt(t)),K0=(e,t)=>ka(e.charAt(t)),Y0=(e,t,n,r)=>{const o=t.data,a=D(t,0);return n||!G0(o,0)||Ru(e,a,r)?!!(n&&K0(o,0)&&Hs(e,a,r))&&(t.data=Bt+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},X0=(e,t,n,r)=>{const o=t.data,a=D(t,o.length-1);return n||!G0(o,o.length-1)||Ru(e,a,r)?!!(n&&K0(o,o.length-1)&&qs(e,a,r))&&(t.data=o.slice(0,-1)+Bt,!0):(t.data=o.slice(0,-1)+" ",!0)},Z0=(e,t,n,r)=>{if(0===n)return;const o=_(e),a=Tr(o,d=>r.isBlock(Ve(d))).getOr(o),s=e.data.slice(t,t+n),i=t+n>=e.data.length&&qs(a,D(e,e.data.length),r),l=0===t&&Hs(a,D(e,0),r);e.replaceData(t,n,cp(s,4,l,i))},El=(e,t,n)=>{const r=e.data.slice(t),o=r.length-n_(r).length;Z0(e,t,o,n)},Tu=(e,t,n)=>{const r=e.data.slice(0,t),o=r.length-rg(r).length;Z0(e,t-o,o,n)},Ou=(e,t,n,r,o=!0)=>{const a=rg(e.data).length,s=o?e:t,i=o?t:e;return o?s.appendData(i.data):s.insertData(0,i.data),mt(_(i)),r&&El(s,a,n),s},KA=(e,t)=>((n,r)=>{const o=n.container(),a=n.offset();return!D.isTextPosition(n)&&o===r.parentNode&&a>D.before(r).offset()})(t,e)?D(t.container(),t.offset()-1):t,Q0=e=>{return $n(e.previousSibling)?C.some(W(t=e.previousSibling)?D(t,t.data.length):D.after(t)):e.previousSibling?zn(e.previousSibling):C.none();var t},J0=e=>{return $n(e.nextSibling)?C.some(W(t=e.nextSibling)?D(t,0):D.before(t)):e.nextSibling?Jt(e.nextSibling):C.none();var t},ev=(e,t,n)=>{n.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},XA=(e,t)=>t&&Pe(e.schema.getBlockElements(),Ve(t)),jo=(e,t,n,r=!0,o=!1)=>{const a=((e,t,n)=>{return(r=e,o=t,a=n,r?(s=o,J0(i=a).orThunk(()=>Q0(i)).orThunk(()=>{return mn(l=s,D.after(d=i)).orThunk(()=>pn(l,D.before(d)));var l,d})):((s,i)=>Q0(i).orThunk(()=>J0(i)).orThunk(()=>{return l=s,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>pn(l,D.before(c))).orThunk(()=>mn(l,D.after(d)));var l,d}))(o,a)).map(oe(KA,n));var r,o,a,s,i})(t,e.getBody(),n.dom),s=Tr(n,oe(XA,e),(i=e.getBody(),d=>d.dom===i));var i;const l=((d,c,u,m)=>{const p=bo(d).filter(_n),f=rs(d).filter(_n);return mt(d),(h=p,g=f,b=c,v=(y,E,w)=>{const k=y.dom,A=E.dom,T=k.data.length;return Ou(k,A,u,m),w.container()===A?D(k,T):w},h.isSome()&&g.isSome()&&b.isSome()?C.some(v(h.getOrDie(),g.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(m&&(p.each(y=>Tu(y.dom,y.dom.length,u)),f.each(y=>El(y.dom,0,u))),c));var h,g,b,v})(n,a,e.schema,(c=n,Pe(e.schema.getTextInlineElements(),Ve(c))));var c;e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(d=>((c,u)=>{if(yt(c)){const m=ts('<br data-mce-bogus="1">');return u?U(jt(c),p=>{ru(p)||mt(p)}):ca(c),St(c,m),C.some(D.before(m.dom))}return C.none()})(d,o)).fold(()=>{r&&ev(e,t,l)},d=>{r&&ev(e,t,C.some(d))})},ZA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ho=(e,t)=>Gn(_(t),Hx(e))&&!So(e.schema,t)&&e.dom.isEditable(t),tv=e=>{var t,n;return"rtl"===it.DOM.getStyle(e,"direction",!0)||(n=null!==(t=e.textContent)&&void 0!==t?t:"",ZA.test(n))},oo=(e,t,n)=>{const r=(o=e,a=t,Ae(it.DOM.getParents(n.container(),"*",a),o));var o,a;return C.from(r[r.length-1])},On=(e,t)=>{const n=t.container(),r=t.offset();return e?Wr(n)?W(n.nextSibling)?D(n.nextSibling,0):D.after(n):Zd(t)?D(n,r+1):t:Wr(n)?W(n.previousSibling)?D(n.previousSibling,n.previousSibling.data.length):D.before(n):Qd(t)?D(n,r-1):t},nv=oe(On,!0),rv=oe(On,!1),ov=(e,t)=>{const n=r=>r.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Bu=e=>ov(e,"Delete"),QA=e=>rp(e)||cs(e),kl=(e,t)=>{return Nr(e,t)?vo(t,QA,(n=e,r=>oa(Fn(r),n,Xe))):C.none();var n},Lu=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},av=(e,t,n)=>Xt(Jt(n),zn(n),(r,o)=>{const a=On(!0,r),s=On(!1,o),i=On(!1,t);return e?mn(n,i).exists(l=>l.isEqual(s)&&t.isEqual(a)):pn(n,i).exists(l=>l.isEqual(a)&&t.isEqual(s))}).getOr(!0),sv=e=>{var t;return(8===kg(t=e)||"#comment"===Ve(t)?bo(e):Id(e)).bind(sv).orThunk(()=>C.some(e))},iv=(e,t,n,r=!0)=>{var o;t.deleteContents();const a=sv(n).getOr(n),s=_(null!==(o=e.dom.getParent(a.dom,e.dom.isBlock))&&void 0!==o?o:n.dom);if(s.dom===e.getBody()?Lu(e,r):yt(s)&&(Vr(s),r&&e.selection.setCursorLocation(s.dom,0)),!Xe(n,s)){const l=oa(Fn(s),n)?[]:Fn(i=s).map(jt).map(d=>Ae(d,c=>!Xe(i,c))).getOr([]);U(l.concat(jt(n)),d=>{Xe(d,s)||Nr(d,s)||!yt(d)||mt(d)})}var i},lv=(e,t)=>Ug(e,t).isSome(),Pu=e=>Zt(e,"td,th"),dv=(e,t)=>Ds(_(e),t),Du=(e,t)=>({start:e,end:t}),Vs=dr([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),_l=(e,t)=>yo(_(e),"td,th",t),cv=e=>!Xe(e.start,e.end),uv=(e,t)=>Ds(e.start,t).bind(n=>Ds(e.end,t).bind(r=>aa(Xe(n,r),n))),Iu=e=>t=>uv(t,e).map(n=>({rng:t,table:n,cells:Pu(n)})),mv=(e,t,n,r)=>{if(n.collapsed||!e.forall(cv))return C.none();if(t.isSameTable){const o=e.bind(Iu(r));return C.some({start:o,end:o})}{const o=_l(n.startContainer,r),a=_l(n.endContainer,r),s=o.bind((l=r,d=>Ds(d,l).bind(c=>he(Pu(c)).map(u=>Du(d,u))))).bind(Iu(r)),i=a.bind((l=>d=>Ds(d,l).bind(c=>Q(Pu(c)).map(u=>Du(u,d))))(r)).bind(Iu(r));return C.some({start:s,end:i})}var l},fv=(e,t)=>uo(e,n=>Xe(n,t)),Mu=e=>Xt(fv(e.cells,e.rng.start),fv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),gv=(e,t)=>{const{startTable:n,endTable:r}=t,o=e.cloneRange();return n.each(a=>o.setStartAfter(a.dom)),r.each(a=>o.setEndBefore(a.dom)),o},pv=e=>U(e,t=>{zt(t,"contenteditable"),Vr(t)}),Fu=(e,t,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Uu(e,o,t,!1).each(a=>a())},hv=e=>{const t=_a(e),n=_(e.selection.getNode());Fi(n.dom)&&yt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&ct(t,r=>Xe(r,n))&&$t(n,"data-mce-selected","1")},bv=(e,t,n)=>C.some(()=>{const r=e.selection.getRng(),o=n.bind(({rng:a,isStartInTable:s})=>{const i=C.from((d=e).dom.getParent(s?a.endContainer:a.startContainer,d.dom.isBlock)).map(_);var d;a.deleteContents(),((d,c,u)=>{u.each(m=>{c?mt(m):(Vr(m),d.selection.setCursorLocation(m.dom,0))})})(e,s,i.filter(yt));const l=s?t[0]:t[t.length-1];return Fu(e,l,r,s),yt(l)?C.none():C.some(s?t.slice(1):t.slice(0,-1))}).getOr(t);pv(o),hv(e)}),tN=(e,t,n,r)=>C.some(()=>{const o=e.selection.getRng(),a=t[0],s=n[n.length-1];Fu(e,a,o,!0),Fu(e,s,o,!1);const i=yt(a)?t:t.slice(1),l=yt(s)?n:n.slice(0,-1);pv(i.concat(l)),r.deleteContents(),hv(e)}),Uu=(e,t,n,r=!0)=>C.some(()=>{iv(e,t,n,r)}),nN=(e,t)=>C.some(()=>jo(e,!1,t)),vv=(e,t)=>_t(Mr(t,e),us),$u=(e,t)=>_t(Mr(t,e),Ti("caption")),xl=(e,t)=>C.some(()=>{Vr(t),e.selection.setCursorLocation(t.dom,0)}),yv=(e,t)=>e?P0(t):D0(t),zu=(e,t)=>{const n=_(e.selection.getStart(!0)),r=_a(e);return e.selection.isCollapsed()&&0===r.length?((e,t,n)=>{const r=_(e.getBody());return $u(r,n).fold(()=>((o,a,s,i)=>{const l=D.fromRangeStart(o.selection.getRng());return vv(s,i).bind(d=>{return yt(d)?xl(o,d):(u=s,p=d,f=l,wa(a,o.getBody(),f).bind(h=>vv(u,_(h.getNode())).bind(g=>Xe(g,p)?C.none():C.some(we))));var u,p,f})})(e,t,r,n).orThunk(()=>aa(((o,a)=>{const s=D.fromRangeStart(o.selection.getRng());return yv(a,s)||Sn(a,o.getBody(),s).exists(i=>yv(a,i))})(e,t),we)),o=>((a,s,i,l)=>{const d=D.fromRangeStart(a.selection.getRng());return yt(l)?xl(a,l):(u=i,p=l,f=d,wa(m=s,(c=a).getBody(),f).fold(()=>C.some(we),h=>{return b=m,v=f,y=h,Jt((g=p).dom).bind(E=>zn(g.dom).map(w=>b?v.isEqual(E)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(E))).getOr(!0)?((g,b)=>xl(g,b))(c,p):((g,b,v)=>$u(g,_(v.getNode())).fold(()=>C.some(we),y=>aa(!Xe(y,b),we)))(u,p,h);var g,b,v,y}));var c,u,m,p,f})(e,t,r,o))})(e,t,n):((o,a,s)=>{const i=_(o.getBody()),l=o.selection.getRng();return 0!==s.length?bv(o,s,C.none()):(d=o,u=l,$u(c=i,a).fold(()=>{return p=d,((e,t)=>{const n=(a=e,s=>Xe(a,s)),r=((a,s)=>{const i=_l(a.startContainer,s),l=_l(a.endContainer,s);return Xt(i,l,Du)})(t,n),o=((a,s)=>{const i=dv(a.startContainer,s),l=dv(a.endContainer,s),d=i.isSome(),c=l.isSome(),u=Xt(i,l,Xe).getOr(!1);return Xt((m={startTable:i,endTable:l,isStartInTable:d,isEndInTable:c,isSameTable:u,isMultiTable:!u&&d&&c}).startTable,m.endTable,(p,f)=>{const h=lv(p,b=>Xe(b,f)),g=lv(f,b=>Xe(b,p));return h||g?{...m,startTable:h?C.none():m.startTable,endTable:g?C.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m);var m})(t,n);var a;return((a,s,i)=>a.exists(l=>{return c=i,!cv(d=l)&&uv(d,c).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&Gc(l.start,s);var d,c}))(r,t,n)?r.map(a=>Vs.singleCellTable(t,a.start)):o.isMultiTable?((a,s,i,l)=>mv(a,s,i,l).bind(({start:d,end:c})=>{const u=d.bind(Mu).getOr([]),m=c.bind(Mu).getOr([]);if(u.length>0&&m.length>0){const p=gv(i,s);return C.some(Vs.multiTable(u,m,p))}return C.none()}))(r,o,t,n):((a,s,i,l)=>mv(a,s,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=s,u=Mu(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(Vs.fullTable(d.table));if(u.length>0){if(c)return C.some(Vs.partialTable(u,C.none()));{const m=gv(i,s);return C.some(Vs.partialTable(u,C.some({...s,rng:m})))}}return C.none()}))(r,o,t,n)})(c,u).bind(g=>g.fold(oe(Uu,p),oe(nN,p),oe(bv,p),oe(tN,p)));var p},p=>xl(d,p)));var d,c,u})(e,n,r)},qo=(e,t)=>{let n=t;for(;n&&n!==e;){if(Un(n)||ft(n))return n;n=n.parentNode}return null},oN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],aN=G.each,ju=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=o=>ct(oN,a=>Ut(o,a))||n.has(o);return{compare:(o,a)=>{if(o.nodeName!==a.nodeName||o.nodeType!==a.nodeType)return!1;const s=l=>{const d={};return aN(t.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||r(u)||(d[u]=t.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(Pe(l,c)){const u=d[c];if(J(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(Pe(d,c))return!1;return!0};return!(ue(o)&&ue(a)&&(!i(s(o),s(a))||!i(t.parseStyle(t.getAttrib(o,"style")),t.parseStyle(t.getAttrib(a,"style"))))||Nn(o)||Nn(a))},isAttributeInternal:r}},Cv=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),wv=(e,t,n,r)=>{const o=n.name;for(let a=0,s=e.length;a<s;a++){const i=e[a];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let a=0,s=t.length;a<s;a++){const i=t[a],l=i.name;if(l in n.attributes.map){const d=r.attributes[l];d?d.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},Ev=(e,t)=>{const n=(r,o)=>{ge(r,a=>{const s=Se(a.nodes);U(a.filter.callbacks,i=>{for(let l=s.length-1;l>=0;l--){const d=s[l];(o?void 0!==d.attr(a.filter.name):d.name===a.filter.name)&&!ne(d.parent)||s.splice(l,1)}s.length>0&&i(s,a.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},kv=(e,t,n,r={})=>{const o=((a,s,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)wv(a,s,u,l)})(i),l})(e,t,n);Ev(o,r)},Hu=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){const o=new rn("br",1);t.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new rn("#text",3)).value=Bt},_v=(e,t)=>{const n=null==e?void 0:e.firstChild;return M(n)&&n===e.lastChild&&n.name===t},Ws=(e,t,n,r)=>r.isEmpty(t,n,o=>((a,s)=>{const i=a.getElementRule(s.name);return!0===(null==i?void 0:i.paddEmpty)})(e,o)),sN=e=>{let t;for(let n=e;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(t=n)}return C.from(t)},qu=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const o of r)n&&!t.isValidChild(n.name,o.name)&&qu(o,t,n);e.unwrap()}},Vu=(e,t,n,r=we)=>{const o=t.getTextBlockElements(),a=t.getNonEmptyElements(),s=t.getWhitespaceElements(),i=G.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<e.length;c++){const u=e[c];let m,p,f;if(!u.parent||l.has(u))continue;if(o[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&o[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!t.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(Wu(t,u,m))qu(u,t);else{h.reverse(),p=h[0].clone(),r(p);let g=p;for(let b=0;b<h.length-1;b++){t.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),r(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}Ws(t,a,s,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(Ws(t,a,s,m)||_v(m,"br"))&&m.empty().remove()}else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new rn("ul",1);r(b),u.wrap(b);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){const g=new rn("div",1);r(g),u.wrap(g)}else qu(u,t)}}},Wu=(e,t,n=t.parent)=>{return!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&("a"!==t.name||!((r,o)=>{let a=r;for(;a;){if("a"===a.name)return!0;a=a.parent}return!1})(n))&&(r=n,"summary"!==r.name||!Cv(t)||(null==n?void 0:n.firstChild)===t&&(null==n?void 0:n.lastChild)===t));var r},Gu=e=>e.collapsed?e:(t=>{const n=D.fromRangeStart(t),r=D.fromRangeEnd(t),o=t.commonAncestorContainer;return Sn(!1,o,r).map(a=>!cr(n,r,o)&&cr(n,a,o)?((s,i,l,d)=>{const c=document.createRange();return c.setStart(s,i),c.setEnd(l,d),c})(n.container(),n.offset(),a.container(),a.offset()):t).getOr(t)})(e),Ku=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},xv=(e,t)=>{const n=D.after(e),r=mr(t).prev(n);return r?r.toRange():null},cN=["pre"],Yu=Fi,uN=(e,t,n)=>{var r,o;const a=e.selection,s=e.dom,i=e.parser,l=n.merge,d=eo({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=wn(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);let u=a.getRng();const m=u.startContainer,p=e.getBody();var y,E;m===p&&a.isCollapsed()&&s.isBlock(p.firstChild)&&(y=e,M(E=p.firstChild)&&!y.schema.getVoidElements()[E.nodeName])&&s.isEmpty(p.firstChild)&&(u=s.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),a.setRng(u)),a.isCollapsed()||(y=>{const E=y.dom,w=Gu(y.selection.getRng());y.selection.setRng(w);const k=E.getParent(w.startContainer,Yu);var A,T,O;A=E,T=w,M(O=k)&&O===A.getParent(T.endContainer,Yu)&&Gc(_(O),T)?Uu(y,w,_(k)):w.startContainer===w.endContainer&&w.endOffset-w.startOffset==1&&W(w.startContainer.childNodes[w.startOffset])?w.deleteContents():y.getDoc().execCommand("Delete",!1)})(e);const f=a.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(t,h);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,a)=>{const s=o.getNonEmptyElements();return M(a)&&(a.isEmpty(s)||(l=a,o.getBlockElements()[l.name]&&M((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===Bt)(l.firstChild)));var l,d})(e,r)&&(r=null==r?void 0:r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(e.schema,g)&&((y,E)=>!!Ku(y,E))(s,f))return u=((e,t,n,r)=>{const o=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(t,e,r),a=Ku(t,n.startContainer),s=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||M(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((r=t.firstChild).data===Bt||vt(r)))?e.slice(0,-1):e;var r,t,n})(Ae(null!==(l=null==(i=o.firstChild)?void 0:i.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var i,l;const d=t.getRoot(),c=u=>{const m=D.fromRangeStart(n),p=mr(t.getRoot()),f=1===u?p.prev(m):p.next(m),h=null==f?void 0:f.getNode();return!h||Ku(t,h)!==a};return a?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&G.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=D.before(h),v=mr(g).next(b);return v?v.toRange():null})(u,p)})(a,s,d):c(2)?(u=a,p=d,t.insertAfter((m=s).reverse(),u),xv(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),E=v.cloneRange();return y.setStartBefore(b),E.setEndAfter(b),[y.cloneContents(),E.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),G.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),xv(m[m.length-1],p)})(a,s,d,n):null;var u,m,p})(d,s,a.getRng(),g),u&&a.setRng(u),t;!0===n.paste&&((y,E,w,k)=>{var A;const T=E.firstChild,O=E.lastChild,P=T===("bookmark"===O.attr("data-mce-type")?O.prev:O),x=Ke(cN,T.name);if(P&&x){const S="false"!==T.attr("contenteditable"),B=(null===(A=y.getParent(w,y.isBlock))||void 0===A?void 0:A.nodeName.toLowerCase())===T.name,$=C.from(qo(k,w)).forall(Un);return S&&B&&$}return!1})(s,g,f,e.getBody())&&(null===(r=g.firstChild)||void 0===r||r.unwrap()),(y=>{let E=y;for(;E=E.walk();)1===E.type&&E.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!s.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(e._selectionOverrides.showBlockCaretContainer(f),h.invalid||((y,E,w)=>{var k;return ct(w.children(),Cv)&&"SUMMARY"===(null===(k=y.getParent(E,y.isBlock))||void 0===k?void 0:k.nodeName)})(s,f,g)){e.selection.setContent(c);let y,E=a.getNode();const w=e.getBody();for(ls(E)?E=y=w:y=E;y&&y!==w;)E=y,y=y.parentNode;t=E===w?w.innerHTML:s.getOuterHTML(E);const k=i.parse(t),A=(S=>{for(let B=S;B;B=B.walk())if("mce_marker"===B.attr("id"))return C.some(B);return C.none()})(k),T=A.bind(sN).getOr(k);A.each(S=>S.replace(g));const O=g.children(),P=null!==(o=g.parent)&&void 0!==o?o:k;g.unwrap();const x=Ae(O,S=>Wu(e.schema,S,P));Vu(x,e.schema,T),kv(i.getNodeFilters(),i.getAttributeFilters(),k),t=d.serialize(k),E===w?s.setHTML(w,t):s.setOuterHTML(E,t)}else t=d.serialize(g),((y,E,w)=>{var k;if("all"===w.getAttribute("data-mce-bogus"))null===(k=w.parentNode)||void 0===k||k.insertBefore(y.dom.createFragment(E),w);else{const A=w.firstChild;!A||A===w.lastChild&&"BR"===A.nodeName?y.dom.setHTML(w,E):y.selection.setContent(E,{no_events:!0})}})(e,t,f);var v;return((y,E)=>{const w=y.schema.getTextInlineElements(),k=y.dom;if(E){const A=y.getBody(),T=ju(y);G.each(k.select("*[data-mce-fragment]"),O=>{if(M(w[O.nodeName.toLowerCase()])&&Wn(wu(k,O),S=>!R0.has(S)))for(let P=O.parentElement;M(P)&&P!==A&&!FA(k,O,P);P=P.parentElement)if(T.compare(P,O)){k.remove(O,!0);break}})}})(e,l),((y,E)=>{var w,k,A;let T;const O=y.dom,P=y.selection;if(!E)return;P.scrollIntoView(E);const x=qo(y.getBody(),E);if(x&&"false"===O.getContentEditable(x))return O.remove(E),void P.select(x);let S=O.createRng();const B=E.previousSibling;if(W(B)){S.setStart(B,null!==(k=null===(w=B.nodeValue)||void 0===w?void 0:w.length)&&void 0!==k?k:0);const ee=E.nextSibling;W(ee)&&(B.appendData(ee.data),null===(A=ee.parentNode)||void 0===A||A.removeChild(ee))}else S.setStartBefore(E),S.setEndBefore(E);const $=O.getParent(E,O.isBlock);if(O.remove(E),$&&O.isEmpty($)){const ee=Yu($);ca(_($)),S.setStart($,0),S.setEnd($,0),ee||$.getAttribute("data-mce-fragment")||!(T=(K=>{let be=D.fromRangeStart(K);return be=mr(y.getBody()).next(be),null==be?void 0:be.toRange()})(S))?O.add($,O.create("br",ee?{}:{"data-mce-bogus":"1"})):(S=T,O.remove($))}P.setRng(S)})(e,s.get("mce_marker")),v=e.getBody(),G.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,E,w)=>{C.from(y.getParent(E,"td,th")).map(_).each(k=>{return T=w,void Id(A=k).each(O=>{bo(O).each(P=>{T.isBlock(Ve(A))&&_o(O)&&T.isBlock(Ve(P))&&mt(O)})});var A,T})})(s,a.getStart(),e.schema),((y,E,w)=>{const k=Lg(_(w),A=>Xe(A,_(E)));Y(k,k.length-2).filter(yn).fold(()=>rc(y,E),A=>rc(y,A.dom))})(e.schema,e.getBody(),a.getStart()),t},Sl=e=>e instanceof rn,Xu=(e,t,n)=>{var r;e.dom.setHTML(e.getBody(),t),!0!==n&&zo(r=e)&&Jt(r.getBody()).each(o=>{const a=o.getNode(),s=Pr(a)?Jt(a).getOr(o):o;r.selection.setRng(s.toRange())})},Sv=e=>Ce(e)?e:qe,Zu=(e,t,n)=>{const r=t(e),o=Sv(n);return r.orThunk(()=>o(e)?C.none():((a,s,i)=>{let l=a.dom;const d=Sv(i);for(;l.parentNode;){l=l.parentNode;const c=_(l),u=s(c);if(u.isSome())return u;if(d(c))break}return C.none()})(e,t,o))},Qu=Jc,Av=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const a=r[o];if(Rn(a)&&!1===a.inherit&&e.dom.is(t,a.selector))return!0}return!1},Ju=(e,t,n,r,o)=>{const a=e.dom.getRoot();if(t===a)return!1;const s=e.dom.getParent(t,i=>!!Av(e,i,n)||i.parentNode===a||!!gr(e,i,n,r,!0));return!!gr(e,s,n,r,o)},Al=(e,t,n)=>!(!Tt(n)||!Qu(t,n.inline))||!(!fr(n)||!Qu(t,n.block))||!!Rn(n)&&ue(t)&&e.is(t,n.selector),Nv=(e,t,n,r,o,a)=>{const s=n[r],i="attributes"===r;if(Ce(n.onmatch))return n.onmatch(t,n,r);if(s)if(Zf(s)){for(let l=0;l<s.length;l++)if(i?e.getAttrib(t,s[l]):cl(e,t,s[l]))return!0}else for(const l in s)if(Pe(s,l)){const d=i?e.getAttrib(t,l):cl(e,t,l),c=Jr(s[l],a),u=ne(d)||Xa(d);if(u&&ne(c))continue;if(o&&u&&!n.exact||(!o||n.exact)&&!Qu(d,eu(c,l)))return!1}return!0},gr=(e,t,n,r,o)=>{const a=e.formatter.get(n),s=e.dom;if(a&&ue(t))for(let i=0;i<a.length;i++){const l=a[i];if(Al(e.dom,t,l)&&Nv(s,t,l,"attributes",o,r)&&Nv(s,t,l,"styles",o,r)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!e.dom.hasClass(t,Jr(d[c],r)))return;return l}}},em=(e,t,n,r,o)=>{if(r)return Ju(e,r,t,n,o);if(r=e.selection.getNode(),Ju(e,r,t,n,o))return!0;const a=e.selection.getStart();return!(a===r||!Ju(e,a,t,n,o))},Gs=Lt,Rv=e=>{if(e){const t=new Rt(e,e);for(let n=t.current();n;n=t.next())if(W(n))return n}return null},tm=e=>{const t=Ot("span");return Sr(t,{id:jc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&St(t,ia(Gs)),t},nm=(e,t,n)=>{const r=e.dom,o=e.selection;if(bb(t))jo(e,!1,_(t),n,!0);else{const a=o.getRng(),s=r.getParent(t,r.isBlock),i=a.startContainer,l=a.startOffset,d=a.endContainer,c=a.endOffset,u=(m=>{const p=Rv(m);return p&&p.data.charAt(0)===Gs&&p.deleteData(0,1),p})(t);r.remove(t,!0),i===u&&l>0&&a.setStart(u,l-1),d===u&&c>0&&a.setEnd(u,c-1),s&&r.isEmpty(s)&&Vr(_(s)),o.setRng(a)}},rm=(e,t,n)=>{const r=e.dom,o=e.selection;if(t)nm(e,t,n);else if(!(t=Mo(e.getBody(),o.getStart())))for(;t=r.get(jc);)nm(e,t,n)},Tv=(e,t)=>(e.appendChild(t),t),Ov=(e,t)=>{var n;const r=co(e,(a,s)=>Tv(a,s.cloneNode(!1)),t),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Tv(r,o.createTextNode(Gs))},Bv=e=>{const t=tm(!1),n=Ov(e,t.dom);return{caretContainer:t,caretPosition:D(n,0)}},Lv=(e,t)=>{const{caretContainer:n,caretPosition:r}=Bv(t);return gn(_(e),n),mt(_(e)),r},Pv=(e,t)=>{if(An(t.dom))return!1;const n=e.schema.getTextInlineElements();return Pe(n,Ve(t))&&!An(t.dom)&&!ko(t.dom)},Ks={},Dv=Kn(["pre"]);((e,t)=>{Ks[e]||(Ks[e]=[]),Ks[e].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=Ae(Ae(r,Dv),(a=r,s=>{const i=s.previousSibling;return Dv(i)&&Ke(a,i)}));U(o,a=>{((s,i)=>{const l=_(i),d=Rr(l).dom;mt(l),wo(_(s),[Ot("br",d),Ot("br",d),...jt(l)])})(a.previousSibling,a)})}var a})})("pre");const Iv=["fontWeight","fontStyle","color","fontSize","fontFamily"],Mv=(e,t)=>{const n=e.get(t);return H(n)?_t(n,r=>{return Tt(r)&&"span"===r.inline&&Ue((o=r).styles)&&ct(Me(o.styles),a=>Ke(Iv,a));var o}):C.none()},Fv=(e,t)=>pn(t,D.fromRangeStart(e)).isNone(),Uv=(e,t)=>!1===mn(t,D.fromRangeEnd(e)).exists(n=>!vt(n.getNode())||mn(t,n).isSome()),$v=e=>t=>R_(t)&&e.isEditable(t),zv=e=>Ae(e.getSelectedBlocks(),$v(e.dom)),om=G.each,am=e=>ue(e)&&!Nn(e)&&!An(e)&&!ko(e),jv=(e,t)=>{for(let n=e;n;n=n[t]){if(W(n)&&rr(n.data))return e;if(ue(n)&&!Nn(n))return n}return e},Hv=(e,t,n)=>{const r=ju(e),o=Lr(t)&&e.dom.isEditable(t),a=Lr(n)&&e.dom.isEditable(n);if(o&&a){const s=jv(t,"previousSibling"),i=jv(n,"nextSibling");if(r.compare(s,i)){for(let l=s.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,s.appendChild(d)}return e.dom.remove(i),G.each(G.grep(i.childNodes),l=>{s.appendChild(l)}),s}}return n},qv=(e,t,n,r)=>{var o;if(r&&!1!==t.merge_siblings){const a=null!==(o=Hv(e,gb(r),r))&&void 0!==o?o:r;Hv(e,a,gb(a,!0))}},sm=(e,t,n)=>{om(e.childNodes,r=>{am(r)&&(t(r)&&n(r),r.hasChildNodes()&&sm(r,t,n))})},Vv=(e,t)=>n=>!(!n||!cl(e,n,t)),Wv=(e,t,n)=>r=>{var o,a;e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=e,"SPAN"===(a=r).nodeName&&0===o.getAttribs(a).length&&o.remove(a,!0)},Vo=dr([{keep:[]},{rename:["name"]},{removed:[]}]),fN=/^(src|href|style)$/,im=G.each,Nl=Jc,Gv=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Kv=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(ue(r)){const a=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>a?a:o]}return W(r)&&n&&o>=r.data.length&&(r=new Rt(r,e.getBody()).next()||r),W(r)&&!n&&0===o&&(r=new Rt(r,e.getBody()).prev()||r),r},Yv=(e,t)=>{const n=t?"firstChild":"lastChild",r=e[n];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[n]||r:e},lm=(e,t,n,r)=>{var o;const a=e.create(n,r);return null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t),a.appendChild(t),a},Xv=(e,t,n,r,o)=>{const a=_(t),s=_(e.create(r,o)),i=n?Dg(a):Pg(a);return wo(s,i),n?(gn(a,s),zd(s,a)):(Or(a,s),St(s,a)),s.dom},Zv=(e,t,n)=>{const r=t.parentNode;let o;const a=e.dom,s=Qt(e);var i;fr(n)&&r===a.getRoot()&&(n.list_block&&Nl(t,n.list_block)||U(Se(t.childNodes),i=>{xa(e,s,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=lm(a,i,s),a.setAttribs(o,As(e))):o=null})),Rn(i=n)&&Tt(i)&&oa(ut(i,"mixed"),!0)&&!Nl(n.inline,t)||a.remove(t,!0)},Qv=(e,t,n)=>ke(e)?{name:t,value:null}:{name:e,value:Jr(t,n)},Jv=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},ey=(e,t,n,r,o)=>{let a=!1;im(n.styles,(s,i)=>{const{name:l,value:d}=Qv(i,s,r),c=eu(d,l);(n.remove_similar||V(d)||!ue(o)||Nl(cl(e,o,l),c))&&e.setStyle(t,l,""),a=!0}),a&&Jv(e,t)},ty=(e,t,n,r,o)=>{const a=e.dom,s=ju(e),i=e.schema;if(Tt(t)&&ac(i,t.inline)&&So(i,r)&&r.parentElement===e.getBody())return Zv(e,r,t),Vo.removed();if(!t.ceFalseOverride&&r&&"false"===a.getContentEditableParent(r)||r&&!Al(a,r,t)&&(!t.links||"A"!==r.nodeName))return Vo.keep();const l=r,d=t.preserve_attributes;if(Tt(t)&&"all"===t.remove&&H(d)){const c=Ae(a.getAttribs(l),u=>Ke(d,u.name.toLowerCase()));if(a.removeAllAttribs(l),U(c,u=>a.setAttrib(l,u.name,u.value)),c.length>0)return Vo.rename("span")}if("all"!==t.remove){ey(a,l,t,n,o),im(t.attributes,(u,m)=>{const{name:p,value:f}=Qv(m,u,n);if(t.remove_similar||V(f)||!ue(o)||Nl(a.getAttrib(o,p),f)){if("class"===p){const h=a.getAttrib(l,p);if(h){let g="";if(U(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void a.setAttrib(l,p,g)}}if(fN.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&Kn(["li"])(l)&&"none"===a.getStyle(l,"list-style-type"))return l.removeAttribute(p),void a.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),im(t.classes,u=>{u=Jr(u,n),ue(o)&&!a.hasClass(o,u)||a.removeClass(l,u)});const c=a.getAttribs(l);for(let u=0;u<c.length;u++)if(!s.isAttributeInternal(c[u].nodeName))return Vo.keep()}return"none"!==t.remove?(Zv(e,l,t),Vo.removed()):Vo.keep()},gN=(e,t,n,r)=>ty(e,t,n,r,r).fold(X(r),o=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,o)),X(null)),ny=(e,t,n,r,o)=>{(r||e.selection.isEditable())&&((a,s,i,l,d)=>{const c=a.formatter.get(s),u=c[0],m=a.dom,p=a.selection,f=y=>{const E=((w,k,A,T,O)=>{let P;return k.parentNode&&U(ul(w.dom,k.parentNode).reverse(),x=>{if(!P&&ue(x)&&"_start"!==x.id&&"_end"!==x.id){const S=gr(w,x,A,T,O);S&&!1!==S.split&&(P=x)}}),P})(a,y,s,i,d);return((w,k,A,T,O,P,x,S)=>{var B,$;let ee,K;const be=w.dom;if(A){const pe=A.parentNode;for(let Ee=T.parentNode;Ee&&Ee!==pe;Ee=Ee.parentNode){let Te=be.clone(Ee,!1);for(let re=0;re<k.length&&(Te=gN(w,k[re],S,Te),null!==Te);re++);Te&&(ee&&Te.appendChild(ee),K||(K=Te),ee=Te)}x.mixed&&be.isBlock(A)||(T=null!==(B=be.split(A,T))&&void 0!==B?B:T),ee&&K&&(null===($=O.parentNode)||void 0===$||$.insertBefore(ee,O),K.appendChild(O),Tt(x)&&qv(w,x,0,ee))}return T})(a,c,E,y,y,0,u,i)},h=y=>ct(c,E=>Ys(a,E,i,y,y)),g=y=>{const E=Se(y.childNodes),w=h(y)||ct(c,A=>Al(m,y,A)),k=y.parentNode;if(!w&&M(k)&&nu(u)&&h(k),u.deep&&E.length)for(let A=0;A<E.length;A++)g(E[A]);U(["underline","line-through","overline"],A=>{ue(y)&&a.dom.getStyle(y,"text-decoration")===A&&y.parentNode&&hb(m,y.parentNode)===A&&Ys(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:A}},void 0,y)})},b=y=>{const E=m.get(y?"_start":"_end");if(E){let w=E[y?"firstChild":"lastChild"];return Nn(k=w)&&ue(k)&&("_start"===k.id||"_end"===k.id)&&(w=w[y?"firstChild":"lastChild"]),W(w)&&0===w.data.length&&(w=y?E.previousSibling||E.nextSibling:E.nextSibling||E.previousSibling),m.remove(E,!0),w}var k;return null},v=y=>{let E,w,k=Fo(m,y,c,y.collapsed);if(u.split){if(k=vl(k),E=Kv(a,k,!0),w=Kv(a,k),E!==w){if(E=Yv(E,!0),w=Yv(w,!1),Gv(m,E,w)){const T=C.from(E.firstChild).getOr(E);return f(Xv(m,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(Gv(m,w,E)){const T=C.from(w.lastChild).getOr(w);return f(Xv(m,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}E=lm(m,E,"span",{id:"_start","data-mce-type":"bookmark"}),w=lm(m,w,"span",{id:"_end","data-mce-type":"bookmark"});const A=m.createRng();A.setStartAfter(E),A.setEndBefore(w),Ms(m,A,T=>{U(T,O=>{Nn(O)||Nn(O.parentNode)||f(O)})}),f(E),f(w),E=b(!0),w=b()}else E=w=f(E);k.startContainer=E.parentNode?E.parentNode:E,k.startOffset=m.nodeIndex(E),k.endContainer=w.parentNode?w.parentNode:w,k.endOffset=m.nodeIndex(w)+1}Ms(m,k,A=>{U(A,g)})};if(l){if(Is(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);Lb(a,s,l,i)}else p.isCollapsed()&&Tt(u)&&!_a(a).length?((e,t,n,r)=>{const o=e.dom,a=e.selection;let s=!1;const i=e.formatter.get(t);if(!i)return;const l=a.getRng(),d=l.startContainer,c=l.startOffset;let u=d;W(d)&&(c!==d.data.length&&(s=!0),u=u.parentNode);const m=[];let p;for(;u;){if(gr(e,u,t,n,r)){p=u;break}u.nextSibling&&(s=!0),m.push(u),u=u.parentNode}if(p)if(s){const f=a.getBookmark();l.collapse(!0);let h=Fo(o,l,i,!0);h=vl(h),e.formatter.remove(t,n,h,r),a.moveToBookmark(f)}else{const f=Mo(e.getBody(),p),h=M(f)?o.getParents(p.parentNode,dt,f):[],g=tm(!1).dom;((y,E,w)=>{var k,A;const T=y.dom,O=T.getParent(w,oe(Zc,y.schema));O&&T.isEmpty(O)?null===(k=w.parentNode)||void 0===k||k.replaceChild(E,w):((P=>{const x=Zt(P,"br"),S=Ae((B=>{const $=[];let ee=B.dom;for(;ee;)$.push(_(ee)),ee=ee.lastChild;return $})(P).slice(-1),_o);x.length===S.length&&U(S,mt)})(_(w)),T.isEmpty(w)?null===(A=w.parentNode)||void 0===A||A.replaceChild(E,w):T.insertAfter(E,w))})(e,g,null!=f?f:p);const b=((y,E,w,k,A,T)=>{const O=y.formatter,P=y.dom,x=Ae(Me(O.get()),B=>B!==k&&!Yt(B,"removeformat")),S=(B=y,$=w,Kt(x,(K,be)=>{const pe=tu(B,be,re=>{const de=Ne=>Ce(Ne)||Ne.length>1&&"%"===Ne.charAt(0);return ct(["styles","attributes"],Ne=>ut(re,Ne).exists(N=>{const R=H(N)?N:xd(N);return ct(R,de)}))});return B.formatter.matchNode($,be,{},pe)?K.concat([be]):K},[]));var B,$;if(Ae(S,B=>!(($,ee,K)=>{const be=["inline","block","selector","attributes","styles","classes"],pe=Ee=>Ga(Ee,(Te,re)=>ct(be,de=>de===re));return tu($,ee,Ee=>{const Te=pe(Ee);return tu($,K,re=>{const de=pe(re);return((Ne,N,R=He)=>fe(R).eq(Ne,N))(Te,de)})})})(y,B,k)).length>0){const B=w.cloneNode(!1);return P.add(E,B),O.remove(k,A,B,T),P.remove(B),C.some(B)}return C.none()})(e,g,p,t,n,r),v=Ov([...m,...b.toArray(),...h],g);f&&nm(e,f,M(f)),a.setCursorLocation(v,1),o.isEmpty(p)&&o.remove(p)}})(a,s,i,d):(fb(a,()=>Yc(a,v),y=>Tt(u)&&em(a,s,i,y)),a.nodeChanged()),y=a,w=i,"removeformat"===(E=s)?U(zv(y.selection),k=>{U(Iv,A=>y.dom.setStyle(k,A,"")),Jv(y.dom,k)}):Mv(y.formatter,E).each(k=>{U(zv(y.selection),A=>ey(y.dom,A,k,w,null))}),Lb(a,s,l,i);var y,E,w})(e,t,n,r,o)},Ys=(e,t,n,r,o)=>ty(e,t,n,r,o).fold(qe,a=>(e.dom.rename(r,a),!0),dt),ry=G.each,Rl=G.each,oy=(e,t,n,r)=>{if(Rl(n.styles,(o,a)=>{e.setStyle(t,a,Jr(o,r))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},pN=(e,t,n,r)=>{const o=e.formatter.get(t),a=o[0],s=!r&&e.selection.isCollapsed(),i=e.dom,l=e.selection,d=(f,h=a)=>{Ce(h.onformat)&&h.onformat(f,h,n,r),oy(i,f,h,n),Rl(h.attributes,(g,b)=>{i.setAttrib(f,b,Jr(g,n))}),Rl(h.classes,g=>{const b=Jr(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return Rl(f,b=>!(!Rn(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!M(b.collapsed)||b.collapsed===s)&&i.is(h,b.selector)&&!An(h)&&(d(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=a.inline||a.block,E=(f=>{if(te(f)){const h=i.create(f);return d(h),h}return null})(y);Ms(f,h,w=>{let k;const A=T=>{let O=!1,P=v,x=!1;const S=T.parentNode,B=S.nodeName.toLowerCase(),$=f.getContentEditable(T);M($)&&(P=v,v="true"===$,O=!0,x=pb(e,T));const ee=v&&!O;if(vt(T)&&!((K,be,pe,Ee)=>{if(Zx(K)&&Tt(be)&&pe.parentNode){const Te=Ap(K.schema),re=((e,t)=>((n,r)=>{const o=n.dom;return o.parentNode?(a=_(o.parentNode),_t(a.dom.childNodes,i=>(a=>!Xe(n,a)&&r(a))(_(i))).map(_)):C.none();var a})(e,t).isSome())(_(pe),de=>An(de.dom));return na(Te,Ee)&&yt(_(pe.parentNode),!1)&&!re}return!1})(e,a,T,B))return k=null,void(fr(a)&&f.remove(T));if(K=T,fr(be=a)&&!0===be.wrapper&&gr(e,K,t,n))k=null;else{if(((K,be,pe)=>{const Ee=fr(Te=a)&&!0!==Te.wrapper&&Zc(e.schema,K)&&xa(e,be,y);var Te;return pe&&Ee})(T,B,ee)){const K=f.rename(T,y);return d(K),b.push(K),void(k=null)}if(Rn(a)){let K=c(o,T);if(!K&&M(S)&&nu(a)&&(K=c(o,S)),!Tt(a)||K)return void(k=null)}M(E)&&((K,be,pe,Ee)=>{const Te=K.nodeName.toLowerCase(),re=xa(e,y,Te)&&xa(e,be,y),de=!g&&W(K)&&zi(K.data),Ne=An(K),N=!Tt(a)||!f.isBlock(K);return(pe||Ee)&&re&&!de&&!Ne&&N})(T,B,ee,x)?(k||(k=f.clone(E,!1),S.insertBefore(k,T),b.push(k)),x&&O&&(v=P),k.appendChild(T)):(k=null,U(Se(T.childNodes),A),O&&(v=P),k=null)}var K,be};U(w,A)}),!0===a.links&&U(b,w=>{const k=A=>{"A"===A.nodeName&&d(A,a),U(Se(A.childNodes),k)};k(w)}),U(b,w=>{const k=(A=>{let T=0;return U(A.childNodes,O=>{var P;M(P=O)&&W(P)&&0===P.length||Nn(O)||T++}),T})(w);var A;!(b.length>1)&&f.isBlock(w)||0!==k?(Tt(a)||fr(a)&&a.wrapper)&&(a.exact||1!==k||(w=_t((A=w).childNodes,Xc).filter(O=>"false"!==f.getContentEditable(O)&&Al(f,O,a)).map(O=>{const P=f.clone(O,!1);return d(P),f.replace(P,A,!0),f.remove(O,!0),P}).getOr(A)),((A,T,O,P)=>{ry(T,x=>{var S,B,$;Tt(x)&&ry(A.dom.select(x.inline,P),S=>{am(S)&&Ys(A,x,O,S,x.exact?S:null)}),S=A.dom,$=P,(B=x).clear_child_styles&&om(S.select(B.links?"*:not(a)":"*",$),K=>{am(K)&&S.isEditable(K)&&om(B.styles,(be,pe)=>{S.setStyle(K,pe,"")})})})})(e,o,n,w),((A,T,O,P,x)=>{const S=x.parentNode;gr(A,S,O,P)&&Ys(A,T,P,x)||T.merge_with_parents&&S&&A.dom.getParent(S,B=>!!gr(A,B,O,P)&&(Ys(A,T,P,x),!0))})(e,a,t,n,w),((A,T,O,P)=>{if(T.styles&&T.styles.backgroundColor){const x=Vv(A,"fontSize");sm(P,S=>x(S)&&A.isEditable(S),Wv(A,"backgroundColor",Jr(T.styles.backgroundColor,O)))}})(f,a,n,w),((A,T,O,P)=>{const x=S=>{if(Lr(S)&&ue(S.parentNode)&&A.isEditable(S)){const B=hb(A,S.parentNode);A.getStyle(S,"color")&&B?A.setStyle(S,"text-decoration",B):A.getStyle(S,"text-decoration")===B&&A.setStyle(S,"text-decoration",null)}};T.styles&&(T.styles.color||T.styles.textDecoration)&&(G.walk(P,x,"childNodes"),x(P))})(f,a,0,w),((A,T,O,P)=>{if(Tt(T)&&("sub"===T.inline||"sup"===T.inline)){const x=Vv(A,"fontSize");sm(P,B=>x(B)&&A.isEditable(B),Wv(A,"fontSize",""));const S=Ae(A.select("sup"===T.inline?"sub":"sup",P),A.isEditable);A.remove(S,!0)}})(f,a,0,w),qv(e,a,0,w)):f.remove(w,!0)})},p=Is(r)?r:l.getNode();if("false"===i.getContentEditable(p)&&!pb(e,p))return c(o,r=p),void Bb(e,t,r,n);if(a){if(r)if(Is(r)){if(!c(o,r)){const f=i.createRng();f.setStartBefore(r),f.setEndAfter(r),m(i,Fo(i,f,o),!0)}}else m(i,r,!0);else s&&Tt(a)&&!_a(e).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const E=v.getRng();let w=E.startOffset;const k=E.startContainer.nodeValue;b=Mo(f.getBody(),v.getStart());const A=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&w>0&&w<k.length&&A.test(k.charAt(w))&&A.test(k.charAt(w-1))){const P=v.getBookmark();E.collapse(!0);let x=Fo(f.dom,E,y);x=vl(x),f.formatter.apply(h,g,x),v.moveToBookmark(P)}else{let P=b?Rv(b):null;b&&(null==P?void 0:P.data)===Gs||(T=f.getDoc(),O=tm(!0).dom,b=T.importNode(O,!0),P=b.firstChild,E.insertNode(b),w=1),f.formatter.apply(h,g,b),v.setCursorLocation(P,w)}var T,O})(e,t,n):(l.setRng(Gu(l.getRng())),fb(e,()=>{Yc(e,(f,h)=>{const g=h?f:Fo(i,f,o);m(i,g,!1)})},dt),e.nodeChanged()),Mv(e.formatter,t).each(f=>{var h;U(Ae((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return Fv(v,b[0])&&Uv(v,b[0])?b:[];{const y=Q(b).filter(k=>Fv(v,k)).toArray(),E=he(b).filter(k=>Uv(v,k)).toArray(),w=b.slice(1,-1);return y.concat(w).concat(E)}})(h=e.selection),$v(h.dom)),h=>oy(i,h,f,n))});h=e,Pe(Ks,f=t)&&U(Ks[f],g=>{g(h)})}var f,h;Bb(e,t,r,n)},ay=(e,t,n,r)=>{(r||e.selection.isEditable())&&pN(e,t,n,r)},sy=e=>Pe(e,"vars"),iy=e=>e.selection.getStart(),ly=(e,t,n,r,o)=>Ei(t,a=>{const s=e.formatter.matchNode(a,n,null!=o?o:{},r);return!J(s)},a=>!!Av(e,a,n)||!r&&M(e.formatter.matchNode(a,n,o,!0))),dy=(e,t)=>{const n=null!=t?t:iy(e);return Ae(ul(e.dom,n),r=>ue(r)&&!ko(r))},cy=(e,t,n)=>{const r=dy(e,t);ge(n,(o,a)=>{const s=i=>{const l=ly(e,r,a,i.similar,sy(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(t);sy(i)?i.callback(d,{node:c,format:a,parents:r}):U(i.callbacks,u=>u(d,{node:c,format:a,parents:r}))}};U([o.withSimilar,o.withoutSimilar],s),U(o.withVars,s)})},uy=G.explode,my=()=>{const e={};return{addFilter:(t,n)=>{U(uy(t),r=>{Pe(e,r)||(e[r]={name:r,callbacks:[]}),e[r].callbacks.push(n)})},getFilters:()=>xd(e),removeFilter:(t,n)=>{U(uy(t),r=>{if(Pe(e,r))if(M(n)){const o=e[r],a=Ae(o.callbacks,s=>s!==n);a.length>0?o.callbacks=a:delete e[r]}else delete e[r]})}}},fy=(e,t,n)=>{t.addNodeFilter("br",(r,o,a)=>{const s=G.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();s.body=1;const d=c=>c.name in s||ic(n,c);for(let c=0,u=r.length;c<u;c++){let m=r[c],p=m.parent;if(p&&d(p)&&m===p.lastChild){let f=m.prev;for(;f;){const h=f.name;if("span"!==h||"bookmark"!==f.attr("data-mce-type")){"br"===h&&(m=null);break}f=f.prev}if(m&&(m.remove(),Ws(n,i,l,p))){const h=n.getElementRule(p.name);h&&(h.removeEmpty?p.remove():h.paddEmpty&&Hu(e,a,d,p))}}else{let f=m;for(;p&&p.firstChild===f&&p.lastChild===f&&(f=p,!s[p.name]);)p=p.parent;if(f===p){const h=new rn("#text",3);h.value=Bt,m.replace(h)}}}})},dm=e=>{const[t,...n]=e.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const a=";base64"===o[2],s=a?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return C.some({type:o[1],data:s,base64Encoded:a})}return C.none()},gy=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch{return C.none()}const o=new Uint8Array(r.length);for(let a=0;a<o.length;a++)o[a]=r.charCodeAt(a);return C.some(new Blob([o],{type:e}))},py=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(e)});let bN=0;const hy=(e,t,n)=>dm(e).bind(({data:r,type:o,base64Encoded:a})=>{if(t&&!a)return C.none();{const s=a?r:btoa(r);return n(s,o)}}),by=(e,t,n)=>{const r=e.create("blobid"+bN++,t,n);return e.add(r),r},vy=(e,t,n=!1)=>hy(t,n,(r,o)=>C.from(e.getByData(r,o)).orThunk(()=>gy(o,r).map(a=>by(e,a,r)))),cm=(e,t)=>Ut(e,`${t}/`),{entries:yy,setPrototypeOf:Cy,isFrozen:yN,getPrototypeOf:CN,getOwnPropertyDescriptor:wN}=Object;let{freeze:hn,seal:jn,create:wy}=Object,{apply:um,construct:mm}=typeof Reflect<"u"&&Reflect;hn||(hn=function(e){return e}),jn||(jn=function(e){return e}),um||(um=function(e,t,n){return e.apply(t,n)}),mm||(mm=function(e,t){return new e(...t)});const Tl=Bn(Array.prototype.forEach),Ey=Bn(Array.prototype.pop),Xs=Bn(Array.prototype.push),Ol=Bn(String.prototype.toLowerCase),fm=Bn(String.prototype.toString),ky=Bn(String.prototype.match),Zs=Bn(String.prototype.replace),EN=Bn(String.prototype.indexOf),kN=Bn(String.prototype.trim),Qn=Bn(Object.prototype.hasOwnProperty),bn=Bn(RegExp.prototype.test),Qs=(_y=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mm(_y,t)});var _y;function Bn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return um(e,t,r)}}function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ol;Cy&&Cy(e,null);let r=t.length;for(;r--;){let o=t[r];if("string"==typeof o){const a=n(o);a!==o&&(yN(t)||(t[r]=a),o=a)}e[o]=!0}return e}function _N(e){for(let t=0;t<e.length;t++)Qn(e,t)||(e[t]=null);return e}function Wo(e){const t=wy(null);for(const[n,r]of yy(e))Qn(e,n)&&(t[n]=Array.isArray(r)?_N(r):r&&"object"==typeof r&&r.constructor===Object?Wo(r):r);return t}function Js(e,t){for(;null!==e;){const n=wN(e,t);if(n){if(n.get)return Bn(n.get);if("function"==typeof n.value)return Bn(n.value)}e=CN(e)}return function(){return null}}const xy=hn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),gm=hn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pm=hn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xN=hn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hm=hn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),SN=hn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Sy=hn(["#text"]),Ay=hn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),bm=hn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ny=hn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Bl=hn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),AN=jn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),NN=jn(/<%[\w\W]*|[\w\W]*%>/gm),RN=jn(/\${[\w\W]*}/gm),TN=jn(/^data-[\-\w.\u00B7-\uFFFF]/),ON=jn(/^aria-[\-\w]+$/),Ry=jn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),BN=jn(/^(?:\w+script|data):/i),LN=jn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ty=jn(/^html$/i),PN=jn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Oy=Object.freeze({__proto__:null,MUSTACHE_EXPR:AN,ERB_EXPR:NN,TMPLIT_EXPR:RN,DATA_ATTR:TN,ARIA_ATTR:ON,IS_ALLOWED_URI:Ry,IS_SCRIPT_OR_DATA:BN,ATTR_WHITESPACE:LN,DOCTYPE_NAME:Ty,CUSTOM_ELEMENT:PN});const DN=function(){return typeof window>"u"?null:window};var By=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DN();const n=L=>e(L);if(n.version="3.1.7",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;let{document:r}=t;const o=r,a=o.currentScript,{DocumentFragment:s,HTMLTemplateElement:i,Node:l,Element:d,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:f}=t,h=d.prototype,g=Js(h,"cloneNode"),b=Js(h,"remove"),v=Js(h,"nextSibling"),y=Js(h,"childNodes"),E=Js(h,"parentNode");if("function"==typeof i){const L=r.createElement("template");L.content&&L.content.ownerDocument&&(r=L.content.ownerDocument)}let w,k="";const{implementation:A,createNodeIterator:T,createDocumentFragment:O,getElementsByTagName:P}=r,{importNode:x}=o;let S={};n.isSupported="function"==typeof yy&&"function"==typeof E&&A&&void 0!==A.createHTMLDocument;const{MUSTACHE_EXPR:B,ERB_EXPR:$,TMPLIT_EXPR:ee,DATA_ATTR:K,ARIA_ATTR:be,IS_SCRIPT_OR_DATA:pe,ATTR_WHITESPACE:Ee,CUSTOM_ELEMENT:Te}=Oy;let{IS_ALLOWED_URI:re}=Oy,de=null;const Ne=rt({},[...xy,...gm,...pm,...hm,...Sy]);let N=null;const R=rt({},[...Ay,...bm,...Ny,...Bl]);let I=Object.seal(wy(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,q=null,ce=!0,ye=!0,Oe=!1,Re=!0,Qe=!1,me=!0,Ie=!1,$e=!1,Be=!1,Fe=!1,At=!1,ve=!1,je=!0,wt=!1,Ht=!0,Nt=!1,It={},an=null;const en=rt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let In=null;const Mt=rt({},["audio","video","img","source","image","track"]);let io=null;const Ha=rt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yr="http://www.w3.org/1998/Math/MathML",lo="http://www.w3.org/2000/svg",er="http://www.w3.org/1999/xhtml";let qn=er,Cr=!1,qa=null;const Vn=rt({},[yr,lo,er],fm);let wr=null;const ea=["application/xhtml+xml","text/html"];let Ft=null,Va=null;const CB=r.createElement("form"),zk=function(L){return L instanceof RegExp||L instanceof Function},Yf=function(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Va||Va!==L){if(L&&"object"==typeof L||(L={}),L=Wo(L),wr=-1===ea.indexOf(L.PARSER_MEDIA_TYPE)?"text/html":L.PARSER_MEDIA_TYPE,Ft="application/xhtml+xml"===wr?fm:Ol,de=Qn(L,"ALLOWED_TAGS")?rt({},L.ALLOWED_TAGS,Ft):Ne,N=Qn(L,"ALLOWED_ATTR")?rt({},L.ALLOWED_ATTR,Ft):R,qa=Qn(L,"ALLOWED_NAMESPACES")?rt({},L.ALLOWED_NAMESPACES,fm):Vn,io=Qn(L,"ADD_URI_SAFE_ATTR")?rt(Wo(Ha),L.ADD_URI_SAFE_ATTR,Ft):Ha,In=Qn(L,"ADD_DATA_URI_TAGS")?rt(Wo(Mt),L.ADD_DATA_URI_TAGS,Ft):Mt,an=Qn(L,"FORBID_CONTENTS")?rt({},L.FORBID_CONTENTS,Ft):en,z=Qn(L,"FORBID_TAGS")?rt({},L.FORBID_TAGS,Ft):{},q=Qn(L,"FORBID_ATTR")?rt({},L.FORBID_ATTR,Ft):{},It=!!Qn(L,"USE_PROFILES")&&L.USE_PROFILES,ce=!1!==L.ALLOW_ARIA_ATTR,ye=!1!==L.ALLOW_DATA_ATTR,Oe=L.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=!1!==L.ALLOW_SELF_CLOSE_IN_ATTR,Qe=L.SAFE_FOR_TEMPLATES||!1,me=!1!==L.SAFE_FOR_XML,Ie=L.WHOLE_DOCUMENT||!1,Fe=L.RETURN_DOM||!1,At=L.RETURN_DOM_FRAGMENT||!1,ve=L.RETURN_TRUSTED_TYPE||!1,Be=L.FORCE_BODY||!1,je=!1!==L.SANITIZE_DOM,wt=L.SANITIZE_NAMED_PROPS||!1,Ht=!1!==L.KEEP_CONTENT,Nt=L.IN_PLACE||!1,re=L.ALLOWED_URI_REGEXP||Ry,qn=L.NAMESPACE||er,I=L.CUSTOM_ELEMENT_HANDLING||{},L.CUSTOM_ELEMENT_HANDLING&&zk(L.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(I.tagNameCheck=L.CUSTOM_ELEMENT_HANDLING.tagNameCheck),L.CUSTOM_ELEMENT_HANDLING&&zk(L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(I.attributeNameCheck=L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),L.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(I.allowCustomizedBuiltInElements=L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe&&(ye=!1),At&&(Fe=!0),It&&(de=rt({},Sy),N=[],!0===It.html&&(rt(de,xy),rt(N,Ay)),!0===It.svg&&(rt(de,gm),rt(N,bm),rt(N,Bl)),!0===It.svgFilters&&(rt(de,pm),rt(N,bm),rt(N,Bl)),!0===It.mathMl&&(rt(de,hm),rt(N,Ny),rt(N,Bl))),L.ADD_TAGS&&(de===Ne&&(de=Wo(de)),rt(de,L.ADD_TAGS,Ft)),L.ADD_ATTR&&(N===R&&(N=Wo(N)),rt(N,L.ADD_ATTR,Ft)),L.ADD_URI_SAFE_ATTR&&rt(io,L.ADD_URI_SAFE_ATTR,Ft),L.FORBID_CONTENTS&&(an===en&&(an=Wo(an)),rt(an,L.FORBID_CONTENTS,Ft)),Ht&&(de["#text"]=!0),Ie&&rt(de,["html","head","body"]),de.table&&(rt(de,["tbody"]),delete z.tbody),L.TRUSTED_TYPES_POLICY){if("function"!=typeof L.TRUSTED_TYPES_POLICY.createHTML)throw Qs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof L.TRUSTED_TYPES_POLICY.createScriptURL)throw Qs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=L.TRUSTED_TYPES_POLICY,k=w.createHTML("")}else void 0===w&&(w=function(De,_e){if("object"!=typeof De||"function"!=typeof De.createPolicy)return null;let at=null;const gt="data-tt-policy-suffix";_e&&_e.hasAttribute(gt)&&(at=_e.getAttribute(gt));const Je="dompurify"+(at?"#"+at:"");try{return De.createPolicy(Je,{createHTML:Wt=>Wt,createScriptURL:Wt=>Wt})}catch{return console.warn("TrustedTypes policy "+Je+" could not be created."),null}}(f,a)),null!==w&&"string"==typeof k&&(k=w.createHTML(""));hn&&hn(L),Va=L}},jk=rt({},["mi","mo","mn","ms","mtext"]),Hk=rt({},["annotation-xml"]),wB=rt({},["title","style","font","a","script"]),qk=rt({},[...gm,...pm,...xN]),Vk=rt({},[...hm,...SN]),Er=function(L){Xs(n.removed,{element:L});try{E(L).removeChild(L)}catch{b(L)}},wi=function(L,De){try{Xs(n.removed,{attribute:De.getAttributeNode(L),from:De})}catch{Xs(n.removed,{attribute:null,from:De})}if(De.removeAttribute(L),"is"===L&&!N[L])if(Fe||At)try{Er(De)}catch{}else try{De.setAttribute(L,"")}catch{}},Wk=function(L){let De=null,_e=null;if(Be)L="<remove></remove>"+L;else{const Je=ky(L,/^[\r\n\t ]+/);_e=Je&&Je[0]}"application/xhtml+xml"===wr&&qn===er&&(L='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+L+"</body></html>");const at=w?w.createHTML(L):L;if(qn===er)try{De=(new p).parseFromString(at,wr)}catch{}if(!De||!De.documentElement){De=A.createDocument(qn,"template",null);try{De.documentElement.innerHTML=Cr?k:at}catch{}}const gt=De.body||De.documentElement;return L&&_e&&gt.insertBefore(r.createTextNode(_e),gt.childNodes[0]||null),qn===er?P.call(De,Ie?"html":"body")[0]:Ie?De.documentElement:gt},Gk=function(L){return T.call(L.ownerDocument||L,L,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Kk=function(L){return L instanceof m&&("string"!=typeof L.nodeName||"string"!=typeof L.textContent||"function"!=typeof L.removeChild||!(L.attributes instanceof u)||"function"!=typeof L.removeAttribute||"function"!=typeof L.setAttribute||"string"!=typeof L.namespaceURI||"function"!=typeof L.insertBefore||"function"!=typeof L.hasChildNodes)},Yk=function(L){return"function"==typeof l&&L instanceof l},$r=function(L,De,_e){S[L]&&Tl(S[L],at=>{at.call(n,De,_e,Va)})},Xk=function(L){let De=null;if($r("beforeSanitizeElements",L,null),Kk(L))return Er(L),!0;const _e=Ft(L.nodeName);if($r("uponSanitizeElement",L,{tagName:_e,allowedTags:de}),L.hasChildNodes()&&!Yk(L.firstElementChild)&&bn(/<[/\w]/g,L.innerHTML)&&bn(/<[/\w]/g,L.textContent)||7===L.nodeType||me&&8===L.nodeType&&bn(/<[/\w]/g,L.data))return Er(L),!0;if(!de[_e]||z[_e]){if(!z[_e]&&Qk(_e)&&(I.tagNameCheck instanceof RegExp&&bn(I.tagNameCheck,_e)||I.tagNameCheck instanceof Function&&I.tagNameCheck(_e)))return!1;if(Ht&&!an[_e]){const at=E(L)||L.parentNode,gt=y(L)||L.childNodes;if(gt&&at)for(let Je=gt.length-1;Je>=0;--Je){const Wt=g(gt[Je],!0);Wt.__removalCount=(L.__removalCount||0)+1,at.insertBefore(Wt,v(L))}}return Er(L),!0}return L instanceof d&&!function(at){let gt=E(at);gt&&gt.tagName||(gt={namespaceURI:qn,tagName:"template"});const Je=Ol(at.tagName),Wt=Ol(gt.tagName);return!!qa[at.namespaceURI]&&(at.namespaceURI===lo?gt.namespaceURI===er?"svg"===Je:gt.namespaceURI===yr?"svg"===Je&&("annotation-xml"===Wt||jk[Wt]):Boolean(qk[Je]):at.namespaceURI===yr?gt.namespaceURI===er?"math"===Je:gt.namespaceURI===lo?"math"===Je&&Hk[Wt]:Boolean(Vk[Je]):at.namespaceURI===er?!(gt.namespaceURI===lo&&!Hk[Wt])&&!(gt.namespaceURI===yr&&!jk[Wt])&&!Vk[Je]&&(wB[Je]||!qk[Je]):!("application/xhtml+xml"!==wr||!qa[at.namespaceURI]))}(L)?(Er(L),!0):"noscript"!==_e&&"noembed"!==_e&&"noframes"!==_e||!bn(/<\/no(script|embed|frames)/i,L.innerHTML)?(Qe&&3===L.nodeType&&(De=L.textContent,Tl([B,$,ee],at=>{De=Zs(De,at," ")}),L.textContent!==De&&(Xs(n.removed,{element:L.cloneNode()}),L.textContent=De)),$r("afterSanitizeElements",L,null),!1):(Er(L),!0)},Zk=function(L,De,_e){if(je&&("id"===De||"name"===De)&&(_e in r||_e in CB))return!1;if((!ye||q[De]||!bn(K,De))&&(!ce||!bn(be,De)))if(!N[De]||q[De]){if(!(Qk(L)&&(I.tagNameCheck instanceof RegExp&&bn(I.tagNameCheck,L)||I.tagNameCheck instanceof Function&&I.tagNameCheck(L))&&(I.attributeNameCheck instanceof RegExp&&bn(I.attributeNameCheck,De)||I.attributeNameCheck instanceof Function&&I.attributeNameCheck(De))||"is"===De&&I.allowCustomizedBuiltInElements&&(I.tagNameCheck instanceof RegExp&&bn(I.tagNameCheck,_e)||I.tagNameCheck instanceof Function&&I.tagNameCheck(_e))))return!1}else if(!io[De]&&!bn(re,Zs(_e,Ee,""))&&("src"!==De&&"xlink:href"!==De&&"href"!==De||"script"===L||0!==EN(_e,"data:")||!In[L])&&(!Oe||bn(pe,Zs(_e,Ee,"")))&&_e)return!1;return!0},Qk=function(L){return"annotation-xml"!==L&&ky(L,Te)},Jk=function(L){$r("beforeSanitizeAttributes",L,null);const{attributes:De}=L;if(!De)return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N};let at=De.length;for(;at--;){const gt=De[at],{name:Je,namespaceURI:Wt,value:zr}=gt,kr=Ft(Je);let sn="value"===Je?zr:kN(zr);const kB=sn;if(_e.attrName=kr,_e.attrValue=sn,_e.keepAttr=!0,_e.forceKeepAttr=void 0,$r("uponSanitizeAttribute",L,_e),sn=_e.attrValue,_e.forceKeepAttr)continue;if(!_e.keepAttr){wi(Je,L);continue}if(!Re&&bn(/\/>/i,sn)){wi(Je,L);continue}Qe&&Tl([B,$,ee],t_=>{sn=Zs(sn,t_," ")});const e_=Ft(L.nodeName);if(Zk(e_,kr,sn))if(!wt||"id"!==kr&&"name"!==kr||(wi(Je,L),sn="user-content-"+sn),me&&bn(/((--!?|])>)|<\/(style|title)/i,sn))wi(Je,L);else{if(w&&"object"==typeof f&&"function"==typeof f.getAttributeType&&!Wt)switch(f.getAttributeType(e_,kr)){case"TrustedHTML":sn=w.createHTML(sn);break;case"TrustedScriptURL":sn=w.createScriptURL(sn)}if(sn!==kB)try{Wt?L.setAttributeNS(Wt,Je,sn):L.setAttribute(Je,sn),Kk(L)?Er(L):Ey(n.removed)}catch{}}else wi(Je,L)}$r("afterSanitizeAttributes",L,null)},EB=function L(De){let _e=null;const at=Gk(De);for($r("beforeSanitizeShadowDOM",De,null);_e=at.nextNode();)$r("uponSanitizeShadowNode",_e,null),Xk(_e)||(_e.content instanceof s&&L(_e.content),Jk(_e));$r("afterSanitizeShadowDOM",De,null)};return n.sanitize=function(L){let De=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_e=null,at=null,gt=null,Je=null;if(Cr=!L,Cr&&(L="\x3c!--\x3e"),"string"!=typeof L&&!Yk(L)){if("function"!=typeof L.toString)throw Qs("toString is not a function");if("string"!=typeof(L=L.toString()))throw Qs("dirty is not a string, aborting")}if(!n.isSupported)return L;if($e||Yf(De),n.removed=[],"string"==typeof L&&(Nt=!1),Nt){if(L.nodeName){const kr=Ft(L.nodeName);if(!de[kr]||z[kr])throw Qs("root node is forbidden and cannot be sanitized in-place")}}else if(L instanceof l)_e=Wk("\x3c!----\x3e"),at=_e.ownerDocument.importNode(L,!0),1===at.nodeType&&"BODY"===at.nodeName||"HTML"===at.nodeName?_e=at:_e.appendChild(at);else{if(!Fe&&!Qe&&!Ie&&-1===L.indexOf("<"))return w&&ve?w.createHTML(L):L;if(_e=Wk(L),!_e)return Fe?null:ve?k:""}_e&&Be&&Er(_e.firstChild);const Wt=Gk(Nt?L:_e);for(;gt=Wt.nextNode();)Xk(gt)||(gt.content instanceof s&&EB(gt.content),Jk(gt));if(Nt)return L;if(Fe){if(At)for(Je=O.call(_e.ownerDocument);_e.firstChild;)Je.appendChild(_e.firstChild);else Je=_e;return(N.shadowroot||N.shadowrootmode)&&(Je=x.call(o,Je,!0)),Je}let zr=Ie?_e.outerHTML:_e.innerHTML;return Ie&&de["!doctype"]&&_e.ownerDocument&&_e.ownerDocument.doctype&&_e.ownerDocument.doctype.name&&bn(Ty,_e.ownerDocument.doctype.name)&&(zr="<!DOCTYPE "+_e.ownerDocument.doctype.name+">\n"+zr),Qe&&Tl([B,$,ee],kr=>{zr=Zs(zr,kr," ")}),w&&ve?w.createHTML(zr):zr},n.setConfig=function(){Yf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),$e=!0},n.clearConfig=function(){Va=null,$e=!1},n.isValidAttribute=function(L,De,_e){Va||Yf({});const at=Ft(L),gt=Ft(De);return Zk(at,gt,_e)},n.addHook=function(L,De){"function"==typeof De&&(S[L]=S[L]||[],Xs(S[L],De))},n.removeHook=function(L){if(S[L])return Ey(S[L])},n.removeHooks=function(L){S[L]&&(S[L]=[])},n.removeAllHooks=function(){S={}},n}();const Ly=G.each,IN=G.trim,MN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],FN={ftp:21,http:80,https:443,mailto:25},UN=["img","video"],Py=(e,t,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?(a=n,(M(o=e.allow_svg_data_urls)?!o:!M(a)||!Ke(UN,a))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,a};class Hn{static parseDataUri(t){let n;const r=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(t,n,r={}){if(r.allow_script_urls)return!0;{const o=No.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!Py(r,o,n)}}static getDocumentBaseUrl(t){var n;let r;return r=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(t,n={}){this.path="",this.directory="",t=IN(t),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);const a=0===t.indexOf("//");if(0!==t.indexOf("/")||a||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=r?r.path:new Hn(document.location.href).directory;if(""===(null==r?void 0:r.protocol))t="//mce_host"+o.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);s&&Ly(MN,(i,l)=>{let d=s[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),o[i]=d}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),a&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new Hn(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let a=this.toRelPath(this.path,n.path);return n.query&&(a+="?"+n.query),n.anchor&&(a+="#"+n.anchor),a}toAbsolute(t,n){const r=new Hn(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?FN[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let r,o,a=0,s="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){a=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){a=r+1;break}if(1===a)return n;for(r=0,o=i.length-(a-1);r<o;r++)s+="../";for(r=a-1,o=l.length;r<o;r++)s+=r!==a-1?"/"+l[r]:l[r];return s}toAbsPath(t,n){let r=0;const o=/\/$/.test(n)?"/":"",a=t.split("/"),s=n.split("/"),i=[];Ly(a,u=>{u&&i.push(u)});const l=[];for(let u=s.length-1;u>=0;u--)0!==s[u].length&&"."!==s[u]&&(".."!==s[u]?r>0?r--:l.push(s[u]):r++);const d=i.length-r;let c;return c=d<=0?mo(l).join("/"):i.slice(0,d).join("/")+"/"+mo(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),o&&c.lastIndexOf("/")!==c.length-1&&(c+=o),c}getURI(t=!1){let n;return this.source&&!t||(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const $N=G.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),vm="data-mce-type";let Dy=0;const Iy=(e,t,n,r,o)=>{var a,s,i,l;const d=t.validate,c=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(a=e.nodeValue)&&void 0!==a?a:"")&&(e.nodeValue=" "+e.nodeValue);const u=null!==(s=null==o?void 0:o.tagName)&&void 0!==s?s:e.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(M(o)&&(o.allowedTags[u]=!0));if(1!==e.nodeType||"body"===u)return;const m=_(e),p=Za(m,vm),f=Cn(m,"data-mce-bogus");if(!p&&te(f))return void("all"===f?mt(m):Br(m));const h=n.getElementRule(u);if(!d||h){if(M(o)&&(o.allowedTags[u]=!0),d&&h&&!p){if(U(null!==(i=h.attributesForced)&&void 0!==i?i:[],g=>{$t(m,g.name,"{$uid}"===g.value?"mce_"+Dy++:g.value)}),U(null!==(l=h.attributesDefault)&&void 0!==l?l:[],g=>{Za(m,g.name)||$t(m,g.name,"{$uid}"===g.value?"mce_"+Dy++:g.value)}),h.attributesRequired&&!ct(h.attributesRequired,g=>Za(m,g))||h.removeEmptyAttrs&&(g=>{const b=g.dom.attributes;return null==b||0===b.length})(m))return void Br(m);h.outputName&&h.outputName!==u&&((g,b)=>{const v=((E,w)=>{const k=Ot(w),A=xg(E);return Sr(k,A),k})(g,b);Or(g,v);const y=jt(g);wo(v,y),mt(g)})(m,h.outputName)}}else Pe(c,u)?mt(m):Br(m)},My=(e,t,n,r,o,a)=>"html"!==n&&!xo(r)||!(o in $N&&Py(e,a,r))&&(!e.validate||t.isValid(r,o)||Ut(o,"data-")||Ut(o,"aria-")),Fy=(e,t)=>e.hasAttribute(vm)&&("id"===t||"class"===t||"style"===t),Uy=(e,t)=>e in t.getBoolAttrs(),zN=(e,t,n,r)=>{const{attributes:o}=e;for(let a=o.length-1;a>=0;a--){const s=o[a],i=s.name,l=s.value;My(t,n,r,e.tagName.toLowerCase(),i,l)||Fy(e,i)?Uy(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},HN=e=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`)};return By().sanitize(e,n),e.innerHTML},$y=G.makeMap,zy=G.extend,jy=(e,t,n,r)=>{const o=e.name,a=o in n&&"title"!==o&&"textarea"!==o&&"noscript"!==o,s=t.childNodes;for(let i=0,l=s.length;i<l;i++){const d=s[i],c=new rn(d.nodeName.toLowerCase(),d.nodeType);if(ue(d)){const u=d.attributes;for(let m=0,p=u.length;m<p;m++){const f=u[m];c.attr(f.name,f.value)}xo(c.name)&&(r(d),c.value=d.innerHTML)}else W(d)?(c.value=d.data,a&&(c.raw=!0)):(qr(d)||S_(d)||A_(d))&&(c.value=d.data);xo(c.name)||jy(c,d,n,r),e.append(c)}},Ra=(e={},t=Kr())=>{const n=my(),r=my(),o={validate:!0,root_name:"body",sanitize:!0,...e},a=new DOMParser,s=((h,g)=>{const b=(()=>{let v=[];const y=()=>v[v.length-1];return{track:E=>{tc(E)&&v.push(E);let w=y();return w&&!w.contains(E)&&(v.pop(),w=y()),up(w)},current:()=>up(y()),reset:()=>{v=[]}}})();if(h.sanitize){const v=((e,t,n)=>{const r=By();return r.addHook("uponSanitizeElement",(o,a)=>{Iy(o,e,t,n.track(o),a)}),r.addHook("uponSanitizeAttribute",(o,a)=>{((s,i,l,d,c)=>{const u=s.tagName.toLowerCase(),{attrName:m,attrValue:p}=c;c.keepAttr=My(i,l,d,u,m,p),c.keepAttr?(c.allowedAttributes[m]=!0,Uy(m,l)&&(c.attrValue=m),i.allow_svg_data_urls&&Ut(p,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Fy(s,m)&&(c.forceKeepAttr=!0)})(o,e,t,n.current(),a)}),r})(h,g,b);return{sanitizeHtmlElement:(E,w)=>{v.sanitize(E,((k,A)=>{const T={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return T.PARSER_MEDIA_TYPE=A,k.allow_script_urls?T.ALLOWED_URI_REGEXP=/.*/:k.allow_html_data_urls&&(T.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),T})(h,w)),v.removed=[],b.reset()},sanitizeNamespaceElement:HN}}return{sanitizeHtmlElement:(v,y)=>{const E=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=E.nextNode();){const k=b.track(w);Iy(w,h,g,k),ue(w)&&zN(w,h,g,k)}b.reset()},sanitizeNamespaceElement:we}})(o,t),l=n.getFilters,u=r.getFilters,p=(h,g)=>{const b=te(g.attr(vm)),v=1===g.type&&!Pe(h,g.name)&&!ic(t,g)&&!xo(g.name);return 3===g.type||v&&!b},f={schema:t,addAttributeFilter:r.addFilter,getAttributeFilters:u,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=o.validate,y=null!==(b=g.context)&&void 0!==b?b:o.root_name,E=((B,$,ee="html")=>{const K="xhtml"===ee?"application/xhtml+xml":"text/html",be=Pe(t.getSpecialElements(),$.toLowerCase()),pe=be?`<${$}>${B}</${$}>`:B,Te=a.parseFromString("xhtml"===ee?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${pe}</body></html>`:`<body>${pe}</body>`,K).body;return s.sanitizeHtmlElement(Te,K),be?Te.firstChild:Te})(h,y,g.format);rc(t,E);const w=new rn(y,11);jy(w,E,t.getSpecialElements(),s.sanitizeNamespaceElement),E.innerHTML="";const[k,A]=((B,$,ee,K)=>{const be=ee.validate,pe=$.getNonEmptyElements(),Ee=$.getWhitespaceElements(),Te=zy($y("script,style,head,html,body,title,meta,param"),$.getBlockElements()),re=Ap($),de=/[ \t\r\n]+/g,Ne=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,R=q=>{let ce=q.parent;for(;M(ce);){if(ce.name in Ee)return!0;ce=ce.parent}return!1},I=q=>q.name in Te||ic($,q)||xo(q.name)&&q.parent===B,z=(q,ce)=>!M(ce?q.prev:q.next)&&!ne(q.parent)&&I(q.parent)&&(q.parent!==B||!0===K.isRootContent);return[q=>{var ce,Oe,Re;if(3===q.type&&!R(q)){let ye=null!==(ce=q.value)&&void 0!==ce?ce:"";ye=ye.replace(de," "),Re=I,(M(Oe=q.prev)&&(Re(Oe)||"br"===Oe.name)||z(q,!0))&&(ye=ye.replace(Ne,"")),0===ye.length?q.remove():q.value=ye}},q=>{var ce,Re,Qe;if(1===q.type){const ye=$.getElementRule(q.name);if(be&&ye){const Oe=Ws($,pe,Ee,q);ye.paddInEmptyBlock&&Oe&&(Re=>{let Qe=Re;for(;M(Qe);){if(Qe.name in re)return Ws($,pe,Ee,Qe);Qe=Qe.parent}return!1})(q)?Hu(ee,K,I,q):ye.removeEmpty&&Oe?I(q)?q.remove():q.unwrap():ye.paddEmpty&&(Oe||_v(Re=q,"#text")&&(null===(Qe=null==Re?void 0:Re.firstChild)||void 0===Qe?void 0:Qe.value)===Bt)&&Hu(ee,K,I,q)}}else if(3===q.type&&!R(q)){let ye=null!==(ce=q.value)&&void 0!==ce?ce:"";(q.next&&I(q.next)||z(q,!1))&&(ye=ye.replace(N,"")),0===ye.length?q.remove():q.value=ye}}]})(w,t,o,g),T=[],P={nodes:{},attributes:{}},x=B=>wv(l(),u(),B,P);if(((B,$,ee)=>{const K=[];for(let be=B,pe=be;be;pe=be,be=be.walk()){const Ee=be;U($,Te=>Te(Ee)),ne(Ee.parent)&&Ee!==B?be=pe:K.push(Ee)}for(let be=K.length-1;be>=0;be--){const pe=K[be];U(ee,Ee=>Ee(pe))}})(w,[k,x],[A,v?B=>{return ee=T,void(Wu(t,$=B)&&ee.push($));var $,ee}:we]),T.reverse(),v&&T.length>0)if(g.context){const{pass:B,fail:$}=kn(T,ee=>ee.parent===w);Vu($,t,w,x),g.invalid=B.length>0}else Vu(T,t,w,x);const S=((B,$)=>{var ee;const K=null!==(ee=$.forced_root_block)&&void 0!==ee?ee:B.forced_root_block;return!1===K?"":!0===K?"p":K})(o,g);return S&&("body"===w.name||g.isRootContent)&&((B,$)=>{const ee=zy($y("script,style,head,html,body,title,meta,param"),t.getBlockElements()),K=/^[ \t\r\n]+/,be=/[ \t\r\n]+$/;let pe=B.firstChild,Ee=null;const Te=re=>{var de,Ne;re&&(pe=re.firstChild,pe&&3===pe.type&&(pe.value=null===(de=pe.value)||void 0===de?void 0:de.replace(K,"")),pe=re.lastChild,pe&&3===pe.type&&(pe.value=null===(Ne=pe.value)||void 0===Ne?void 0:Ne.replace(be,"")))};if(t.isValidChild(B.name,$.toLowerCase())){for(;pe;){const re=pe.next;p(ee,pe)?(Ee||(Ee=new rn($,1),Ee.attr(o.forced_root_block_attrs),B.insert(Ee,pe)),Ee.append(pe)):(Te(Ee),Ee=null),pe=re}Te(Ee)}})(w,S),g.invalid||Ev(P,g),w}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&fy(t,e,n),e.addAttributeFilter("href",o=>{let a=o.length;const s=i=>{const l=i?G.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(c=>c.length>0).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;a--;){const i=o[a];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",s(i.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let a,s,i,l,d=o.length;for(;d--;)if(l=o[d],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,a=l.lastChild;a&&i;)s=a.prev,i.insert(a,l),a=s}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let a,s,i=o.length;for(;i--;)if(a=o[i],s=a.parent,s&&("ul"===s.name||"ol"===s.name))if(a.prev&&"li"===a.prev.name)a.prev.append(a);else{const l=new rn("li",1);l.attr("style","list-style-type: none"),a.wrap(l)}});const r=n.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",o=>{var a;let s=o.length;for(;s--;){const i=o[s],l=null!==(a=i.attr("class"))&&void 0!==a?a:"",d=G.explode(l," ");let c="";for(let u=0;u<d.length;u++){const m=d[u];let p=!1,f=r["*"];f&&f[m]&&(p=!0),f=r[i.name],!p&&f&&f[m]&&(p=!0),p&&(c&&(c+=" "),c+=m)}c.length||(c=null),i.attr("class",c)}}),((o,a)=>{const{blob_cache:s}=a;if(s){const i=l=>{const d=l.attr("src");var c;(c=l).attr("src")===Ge.transparentSrc||M(c.attr("data-mce-placeholder"))||(c=>M(c.attr("data-mce-bogus")))(l)||ne(d)||vy(s,d,!0).each(c=>{l.attr("src",c.blobUri())})};o.addAttributeFilter("src",l=>U(l,i))}})(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",o=>U(o,a=>{a.replace(((s,i,l,d,c)=>{let u;u=J(s)?"iframe":cm(s,"image")?"img":cm(s,"video")?"video":cm(s,"audio")?"audio":"iframe";const m=new rn(u,1);return m.attr("audio"===u?{src:i}:{src:i,width:l,height:d}),"audio"!==u&&"video"!==u||m.attr("controls",""),"iframe"===u&&c&&m.attr("sandbox",""),m})(a.attr("type"),a.attr("object"===a.name?"data":"src"),a.attr("width"),a.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",o=>U(o,a=>a.attr("sandbox","")))})(f,o),(g=o).inline_styles&&((e,t,n)=>{var r;const o=gc();var a,s,i;t.convert_fonts_to_spans&&(a=e,s=o,i=G.explode(null!==(r=t.font_size_legacy_values)&&void 0!==r?r:""),a.addNodeFilter("font",l=>{U(l,d=>{const c=s.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),m&&(c["font-family"]=m),p&&Ai(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",s.serialize(c)),f=d,U(["color","face","size"],g=>{f.attr(g,null)})})})),((a,s,i)=>{a.addNodeFilter("strike",l=>{const d="html4"!==s.type;U(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(e,n,o)})(f,g,t),f;var g},Hy=(e,t,n)=>{const r=Sl(a=e)?eo({validate:!1}).serialize(a):a,o=t(r);var a;if(o.isDefaultPrevented())return o;if(Sl(e)){if(o.content!==r){const a=Ra({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:a}}return{...o,content:e}}return o},qy=(e,t)=>{if(t.no_events)return un.value(t);{const n=e.dispatch("BeforeGetContent",t);return n.isDefaultPrevented()?un.error(Db(e,{content:"",...n}).content):un.value(n)}},Vy=(e,t,n)=>n.no_events?t:Hy(t,o=>Db(e,{...n,content:o}),{sanitize:Pc(e),sandbox_iframes:Dc(e)}).content,ym=(e,t)=>{if(t.no_events)return un.value(t);{const n=Hy(t.content,r=>{return o=e,a={...t,content:r},o.dispatch("BeforeSetContent",a);var o,a},{sanitize:Pc(e),sandbox_iframes:Dc(e)});return n.isDefaultPrevented()?(Pb(e,n),un.error(void 0)):un.value(n)}},Cm=(e,t,n)=>{n.no_events||Pb(e,{...n,content:t})},wm=(e,t,n)=>({element:e,width:t,rows:n}),Wy=(e,t)=>({element:e,cells:t}),qN=(e,t)=>({x:e,y:t}),Gy=(e,t)=>Ar(e,t).bind(Ai).getOr(1),VN=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},Ky=e=>Kt(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),Yy=(e,t)=>{const n=e.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let a=0;a<o.length;a++)if(Xe(o[a],t))return C.some(qN(a,r))}return C.none()},Xy=(e,t,n,r,o)=>{const a=[],s=e.rows;for(let i=n;i<=o;i++){const l=s[i].cells,d=t<r?l.slice(t,r+1):l.slice(r,t+1);a.push(Wy(s[i].element,d))}return a},WN=e=>((t,n)=>{const r=Oo(t.element),o=Ot("tbody");return wo(o,n),St(r,o),r})(e,ze(e.rows,n=>{const r=ze(n.cells,a=>{const s=Hp(a);return zt(s,"colspan"),zt(s,"rowspan"),s}),o=Oo(n.element);return wo(o,r),o})),Zy=()=>iu([]),Ll=(e,t)=>t>=0&&t<e.length&&ka(e.charAt(t)),Qy=e=>wn(e.innerText),Jy=e=>ue(e)?e.outerHTML:W(e)?No.encodeRaw(e.data,!1):qr(e)?"\x3c!--"+e.data+"--\x3e":"",ZN=po(()=>document.implementation.createHTMLDocument("undo")),Pl=e=>{const t=e.serializer.getTempAttrs(),n=_0(e.getBody(),t);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Ae(ze(Se(n.childNodes),Et(wn,Jy)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:wn(n.innerHTML),bookmark:null,beforeBookmark:null}},Em=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((n,r)=>{let o=0;U(n,a=>{var s,i;0===a[0]?o++:1===a[0]?(((s,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);s.hasChildNodes()&&l<s.childNodes.length?s.insertBefore(d,s.childNodes[l]):s.appendChild(d)})(r,a[1],o),o++):2===a[0]&&(i=o,(s=r).hasChildNodes()&&i<s.childNodes.length&&s.removeChild(s.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,a=new Array(o),s=new Array(o),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===r[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,r[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===r[h-m];)++h;return{start:u,end:h,diag:m}},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let E,w,k,A,T;for(a[1+y]=u,s[1+y]=m+1,E=0;E<=y;++E){for(w=-E;w<=E;w+=2){for(k=w+y,a[k]=w===-E||w!==E&&a[k-1]<a[k+1]?a[k+1]:a[k-1]+1,A=a[k],T=A-u+p-w;A<m&&T<f&&n[A]===r[T];)a[k]=++A,++T;if(b%2!=0&&b-E<=w&&w<=b+E&&s[k-b]<=a[k])return l(s[k-b],w+u-p,m,f)}for(w=b-E;w<=b+E;w+=2){for(k=w+y-b,s[k]=w===b-E||w!==b+E&&s[k+1]<=s[k-1]?s[k+1]-1:s[k-1],A=s[k]-1,T=A-u+p-w;A>=u&&T>=p&&n[A]===r[T];)s[k]=A--,T--;if(b%2==0&&-E<=w&&w<=E&&s[k]<=a[k+b])return l(s[k],w+u-p,m,f)}}return null},c=[];return i(0,n.length,0,r.length,c),c})(ze(Se(t.childNodes),Jy),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!M(r)||!ob(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},km=e=>"fragmented"===e.type?e.fragments.join(""):e.content,eC=e=>{const t=Ot("body",ZN());return Pi(t,km(e)),U(Zt(t,"*[data-mce-bogus]"),Br),Vg(t)},_m=(e,t)=>{return!(!e||!t)&&(r=t,!(km(e)!==km(r))||((n,r)=>eC(n)===eC(r))(e,t));var r},xm=e=>0===e.get(),Dl=(e,t,n)=>{xm(n)&&(e.typing=t)},tC=(e,t)=>{e.typing&&(Dl(e,!1,t),e.add())},nC=e=>({init:{bindEvents:we},undoManager:{beforeChange:(t,n)=>{return r=e,a=n,void(xm(t)&&a.set(Nc(r.selection)));var r,a},add:(t,n,r,o,a,s)=>((i,l,d,c,u,m,p)=>{const f=Pl(i),h=G.extend(m||{},f);if(!xm(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&_m(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=oS(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=Nc(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(e,t,n,r,o,a,s),undo:(t,n,r)=>((o,a,s,i)=>{let l;return a.typing&&(a.add(),a.typing=!1,Dl(a,!1,s)),i.get()>0&&(i.set(i.get()-1),l=a.data[i.get()],Em(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(e,t,n,r),redo:(t,n)=>((r,o,a)=>{let s;return o.get()<a.length-1&&(o.set(o.get()+1),s=a[o.get()],Em(r,s,!1),r.setDirty(!0),r.dispatch("Redo",{level:s})),s})(e,t,n),clear:(t,n)=>{return r=e,a=n,(o=t).data=[],a.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,a},reset:t=>{return(n=t).clear(),void n.add();var n},hasUndo:(t,n)=>{return r=e,o=t,n.get()>0||o.typing&&o.data[0]&&!_m(Pl(r),o.data[0]);var r,o},hasRedo:(t,n)=>{return r=t,n.get()<r.data.length-1&&!r.typing;var r},transact:(t,n,r)=>{return s=r,tC(o=t,n),o.beforeChange(),o.ignore(s),o.add();var o,s},ignore:(t,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(t,n),extra:(t,n,r,o)=>((a,s,i,l,d)=>{if(s.transact(l)){const c=s.data[i.get()].bookmark,u=s.data[i.get()-1];Em(a,u,!0),s.transact(d)&&(s.data[i.get()-1].beforeBookmark=c)}})(e,t,n,r,o)},formatter:{match:(t,n,r,o)=>em(e,t,n,r,o),matchAll:(t,n)=>((r,o,a)=>{const s=[],i={},l=r.selection.getStart();return r.dom.getParent(l,d=>{for(let c=0;c<o.length;c++){const u=o[c];!i[u]&&gr(r,d,u,a)&&(i[u]=!0,s.push(u))}},r.dom.getRoot()),s})(e,t,n),matchNode:(t,n,r,o)=>gr(e,t,n,r,o),canApply:t=>((n,r)=>{const o=n.formatter.get(r),a=n.dom;if(o&&n.selection.isEditable()){const s=n.selection.getStart(),i=ul(a,s);for(let l=o.length-1;l>=0;l--){const d=o[l];if(!Rn(d))return!0;for(let c=i.length-1;c>=0;c--)if(a.is(i[c],d.selector))return!0}}return!1})(e,t),closest:t=>((n,r)=>{const o=a=>Xe(a,_(n.getBody()));return C.from(n.selection.getStart(!0)).bind(a=>Zu(_(a),s=>xt(r,i=>{return gr(n,s.dom,d=i)?C.some(d):C.none();var d}),o)).getOrNull()})(e,t),apply:(t,n,r)=>ay(e,t,n,r),remove:(t,n,r,o)=>ny(e,t,n,r,o),toggle:(t,n,r)=>((o,a,s,i)=>{const l=o.formatter.get(a);l&&(!em(o,a,s,i)||"toggle"in l[0]&&!l[0].toggle?ay(o,a,s,i):ny(o,a,s,i))})(e,t,n,r),formatChanged:(t,n,r,o,a)=>{return((m,p,f,h,g,b)=>{const v=p.get();U(f.split(","),y=>{const E=ut(v,y).getOrThunk(()=>{const k={withSimilar:{state:Pt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Pt(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=k,k}),w=()=>{const k=dy(m);return ly(m,k,y,g,b).isSome()};if(J(b)){const k=g?E.withSimilar:E.withoutSimilar;k.callbacks.push(h),1===k.callbacks.length&&k.state.set(w())}else E.withVars.push({state:Pt(w()),similar:g,vars:b,callback:h})}),p.set(v)})(e,i=t,l=n,d=r,o,a),{unbind:()=>((m,p,f)=>{const h=m.get();U(p.split(","),g=>ut(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:Ae(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:Ae(b.withoutSimilar.callbacks,v=>v!==f)},withVars:Ae(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:t=>{return r=t,C.from((n=e).getBody()).fold(X("tree"===r.format?new rn("body",11):""),o=>((e,t,n)=>{let r;return r="raw"===t.format?G.trim(wn(_0(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?((o,a)=>{const s=o.getDoc(),i=Hr(_(o.getBody())),l=Ot("div",s);$t(l,"data-mce-bogus","all"),Bi(l,{position:"fixed",left:"-9999999px",top:"0"}),Pi(l,a.innerHTML),x0(l),S0(l);const d=Fd(u=i)?u:_(Rr(u).dom.body);var u;St(d,l);const c=wn(l.dom.innerText);return mt(l),c})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((o,a)=>{const s=Qt(o),i=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${s}>[\r\n]*|<br \\/>[\r\n]*)$`);return a.replace(i,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!$i(_(n))&&te(r)?G.trim(r):r})(n,r,o));var n,r},setContent:(t,n)=>{return o=t,a=n,C.from((r=e).getBody()).map(s=>Sl(o)?((i,l,d,c)=>{kv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=eo({validate:!1},i.schema).serialize(d),m=wn($i(_(l))?u:G.trim(u));return Xu(i,m,c.no_selection),{content:d,html:m}})(r,s,o,a):((i,l,d,c)=>{if(0===(d=wn(d)).length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=Qt(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,As(i),d)):d||(d=u),Xu(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=eo({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=$i(_(l))?d:G.trim(d);return Xu(i,u,c.no_selection),{content:u,html:u}}})(r,s,o,a)).getOr({content:o,html:Sl(a.content)?"":a.content});var r,o,a},insertContent:(t,n)=>uN(e,t,n),addVisual:t=>((n,r)=>{const o=n.dom,a=M(r)?r:n.getBody();U(o.select("table,a",a),s=>{switch(s.nodeName){case"TABLE":const i=cS(n),l=o.getAttrib(s,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(s,i):o.addClass(s,i);break;case"A":if(!o.getAttrib(s,"href")){const d=o.getAttrib(s,"name")||s.id,c=Lh(n);d&&n.hasVisual?o.addClass(s,c):o.removeClass(s,c)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((r,o,a={})=>{const s=(i=a,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return qy(r,s).fold(ht,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(k=>k.nodeName).getOr("div").toLowerCase(),b=_(m.cloneContents());x0(b),S0(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=Qy(v),E=wn(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),Ll(E,0)||Ll(E,E.length-1)){const w=f.getOr(h),k=Qy(w),A=k.indexOf(y);return-1===A?y:(Ll(k,A-1)?" ":"")+y+(Ll(k,A+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=Cu(m,Vc(g)),v=p.contextual?((e,t,n)=>{const r=cb(t,e);return r.length>0?((e,t)=>{return(n=e,r=t[0],os(r,"table",oe(Xe,n))).bind(n=>{const r=t[0],o=t[t.length-1],a=(s=>{const i=wm(Oo(s),0,[]);return U(Zt(s,"tr"),(l,d)=>{U(Zt(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=Gy(g,"rowspan"),v=Gy(g,"colspan"),y=m.rows;for(let E=f;E<f+b;E++){y[E]||(y[E]=Wy(Hp(h),[]));for(let w=p;w<p+v;w++)y[E].cells[w]=E===f&&w===p?g:Oo(g)}})(i,((m,p,f)=>{for(;VN(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),wm(i.element,Ky(i.rows),i.rows)})(n);return(s=a,i=r,l=o,Yy(s,i).bind(d=>Yy(s,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?Xy(u,f,h,g,b):Xy(u,f,b,g,h);return wm(u.element,Ky(v),v)})(s,d,c)))).map(s=>iu([WN(s)]));var s,i,l}).getOrThunk(Zy);var n,r})(e,r):(o=e,s=n,(a=t).length>0&&a[0].collapsed?Zy():(i=o,d=s,((c,u)=>{const m=Kt(u,(p,f)=>(St(f,p),f),c);return u.length>0?iu([m]):m})(_((l=a[0]).cloneContents()),((e,t,n)=>{const r=_(t.commonAncestorContainer),o=Mr(r,e),a=Ae(o,l=>n.isWrapper(Ve(l))),s=(d=t,_t(l=o,c=>"li"===Ve(c)&&Gc(c,d)).fold(X([]),c=>{return(u=l,_t(u,m=>"ul"===Ve(m)||"ol"===Ve(m))).map(u=>{const m=Ot(Ve(u)),p=Ga($d(u),(f,h)=>Ut(h,"list-style"));return Bi(m,p),[Ot("li"),m]}).getOr([]);var u})),i=a.concat(s.length?s:(l=>cs(l)?Fn(l).filter(Xd).fold(X([]),d=>[l,d]):Xd(l)?[l]:[])(r));var l,d;return ze(i,Oo)})(i,l,d))));var o,a,s,i,l,d})(_(m.getBody()),b,m.schema).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(r,i);return Vy(r,l,i)})})(e,t,n)},autocompleter:{addDecoration:t=>((e,t)=>{if(b0(_(e.getBody())).isNone()){const r=ts('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());St(r,_(t.extractContents())),t.insertNode(r.dom),Fn(r).each(o=>o.dom.normalize()),(n=r,((o,a)=>{const s=i=>{const l=jt(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(a(c))return C.some(c);const u=s(c);if(u.isSome())return u}return C.none()};return s(o)})(n,p0)).map(o=>{var a;e.selection.setCursorLocation(o.dom,"img"===Ve(a=o)?1:np(a).fold(()=>jt(a).length,s=>s.length))})}var n})(e,t),removeDecoration:()=>{return t=e,n=_(e.getBody()),b0(n).each(r=>{const o=t.selection.getBookmark();Br(r),t.selection.moveToBookmark(o)});var t,n}},raw:{getModel:()=>C.none()}}),pr=e=>Pe(e.plugins,"rtc"),Sm=e=>e.rtcInstance?e.rtcInstance:nC(e),Ct=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},rC=e=>Ct(e).init.bindEvents(),oC=e=>0===e.dom.length?(mt(e),C.none()):C.some(e),aC=(e,t,n,r,o)=>{e.bind(a=>((r?Tu:El)(a.dom,r?a.dom.length:0,o),t.filter(_n).map(s=>((i,l,d,c,u)=>{const m=i.dom,p=l.dom,f=c?m.length:p.length;c?(Ou(m,p,u,!1,!c),d.setStart(p,f)):(Ou(p,m,u,!1,!c),d.setEnd(p,f))})(a,s,n,r,o)))).orThunk(()=>{return(s=t,i=r,s.filter(l=>Fs.isBookmarkNode(l.dom)).bind(i?rs:bo)).or(t).filter(_n).map(s=>((i,l,d)=>{Fn(i).each(c=>{const u=i.dom;l&&Hs(c,D(u,0),d)?El(u,0,d):!l&&qs(c,D(u,u.length),d)&&Tu(u,u.length,d)})})(s,r,o));var s,i})},sC=(e,t,n)=>{if(Pe(e,t)){const r=Ae(e[t],o=>o!==n);0===r.length?delete e[t]:e[t]=r}},iC=e=>!(!e||!e.ownerDocument)&&Nr(_(e.ownerDocument),_(e)),lC=(e,t,n,r)=>{let o,a;const{selectorChangedWithUnbind:s}=((g,b)=>{let v,y;const E=(k,A)=>_t(A,T=>g.is(T,k)),w=k=>g.getParents(k,void 0,g.getRoot());return{selectorChangedWithUnbind:(k,A)=>(v||(v={},y={},b.on("NodeChange",T=>{const O=T.element,P=w(O),x={};ge(v,(S,B)=>{E(B,P).each($=>{y[B]||(U(S,ee=>{ee(!0,{node:$,selector:B,parents:P})}),y[B]=S),x[B]=S})}),ge(y,(S,B)=>{x[B]||(delete y[B],U(S,$=>{$(!1,{node:O,selector:B,parents:P})}))})})),v[k]||(v[k]=[]),v[k].push(A),E(k,w(b.selection.getStart())).each(()=>{y[k]=v[k]}),{unbind:()=>{sC(v,k,A),sC(y,k,A)}})}})(e,r),i=(g,b)=>((v,y,E={})=>{const w=(k=E,A=y,{format:"html",...k,set:!0,selection:!0,content:A});var k,A;ym(v,w).each(k=>{const A=((O,P)=>{if("raw"!==P.format){const x=O.selection.getRng(),S=O.dom.getParent(x.commonAncestorContainer,O.dom.isBlock),B=S?{context:S.nodeName.toLowerCase()}:{},$=O.parser.parse(P.content,{forced_root_block:!1,...B,...P});return eo({validate:!1},O.schema).serialize($)}return P.content})(v,k),T=v.selection.getRng();((O,P,x)=>{const S=C.from(P.firstChild).map(_),B=C.from(P.lastChild).map(_);O.deleteContents(),O.insertNode(P);const $=S.bind(bo).filter(_n).bind(oC),ee=B.bind(rs).filter(_n).bind(oC);aC($,S,O,!0,x),aC(ee,B,O,!1,x),O.collapse(!1)})(T,T.createContextualFragment(A),v.schema),v.selection.setRng(T),$s(v,T),Cm(v,A,k)})})(r,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let g;const b=(y,E,w)=>{try{return E.compareBoundaryPoints(y,w)}catch{return-1}},v=t.document;if(M(r.bookmark)&&!zo(r)){const y=gu(r);if(y.isSome())return y.map(E=>Cu(r,[E])[0]).getOr(v.createRange())}try{const y=d();y&&!Ii(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=Cu(r,[g])[0])}catch{}if(g||(g=v.createRange()),ls(g.startContainer)&&g.collapsed){const y=e.getRoot();g.setStart(y,0),g.setEnd(y,0)}return o&&a&&(0===b(g.START_TO_START,g,o)&&0===b(g.END_TO_END,g,o)?g=a:(o=null,a=null)),g},u=(g,b)=>{if(!((y=g)&&iC(y.startContainer)&&iC(y.endContainer)))return;var y;const v=d();if(g=r.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){a=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),o=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&null!=v&&v.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}r.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=null==g?void 0:g.anchorNode,v=null==g?void 0:g.focusNode;if(!g||!b||!v||Ii(b)||Ii(v))return!0;const y=e.createRng(),E=e.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),E.setStart(v,g.focusOffset),E.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,E)<=0},p={dom:e,win:t,serializer:n,editor:r,expand:(g={type:"word"})=>u($o(e).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=e.createRng();M(g)&&M(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(Kc(e,v,r.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return E=v.format?v.format:"html",w=v,Ct(b).selection.getContent(E,w);var E,w})(r,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=e,y=g,E=b,C.from(y).bind(w=>C.from(w.parentNode).map(k=>{const A=v.nodeIndex(w),T=v.createRng();return T.setStart(k,A),T.setEnd(k,A+1),E&&(Kc(v,T,w,!0),Kc(v,T,w,!1)),T}))).each(u),g;var v,y,E},isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{const g=c(),b=r.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?Wn(b,v=>e.isEditable(v.parentElement)):c0(e,g)},isForward:m,setNode:g=>(i(e.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const E=b.startOffset,w=b.endOffset;let k=b.commonAncestorContainer;b.collapsed||(v===y&&w-E<2&&v.hasChildNodes()&&(k=v.childNodes[E]),W(v)&&W(y)&&(v=v.length===E?g0(v.nextSibling,!0):v.parentNode,y=0===w?g0(y.previousSibling,!1):y.parentNode,v&&v===y&&(k=v)));const A=W(k)?k.parentNode:k;return Lr(A)?A:g})(r.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>m0(r.getBody(),c(),g),getEnd:g=>f0(r.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,E,w)=>{const k=[],A=v.getRoot(),T=v.getParent(E||m0(A,y,y.collapsed),v.isBlock),O=v.getParent(w||f0(A,y,y.collapsed),v.isBlock);if(T&&T!==A&&k.push(T),T&&O&&T!==O){let P;const x=new Rt(T,A);for(;(P=x.next())&&P!==O;)v.isBlock(P)&&k.push(P)}return O&&T!==O&&O!==A&&k.push(O),k})(e,c(),g,b),normalize:()=>{const g=c(),b=d();if(!(Vc(b).length>1)&&dl(r)){const v=hl(e,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(s(g,b),p),selectorChangedWithUnbind:s,getScrollContainer:()=>{let g,b=e.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;M(g)?((v=r).inline?vA:CA)(v,g,b):$s(r,c(),b)},placeCaretAt:(g,b)=>u(Hb(g,b,r.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?D.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{t=o=a=null,h.destroy()}},f=Fs(p),h=Fb(p,r);return p.bookmarkManager=f,p.controlSelection=h,p},QN=(e,t,n)=>{-1===G.inArray(t,n)&&(e.addAttributeFilter(n,(r,o)=>{let a=r.length;for(;a--;)r[a].attr(o,null)}),t.push(n))},dC=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:it.DOM,a=t&&t.schema?t.schema:Kr(r),s=Ra(r,a);return l=r,d=o,(i=s).addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!zi(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=null!==(m=null==g?void 0:g.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&0===(null==p?void 0:p.indexOf("[CDATA["))?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==p?void 0:p.indexOf("mce:protected "))&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{U(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&fy(l,i,i.schema),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=(f=i,b=h=d,M(g=p=t)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const E=g.dom;let w=b.cloneNode(!0);const k=document.implementation;if(k.createHTMLDocument){const A=k.createHTMLDocument("");G.each("BODY"===w.nodeName?w.childNodes:[w],T=>{A.body.appendChild(A.importNode(T,!0))}),w="BODY"!==w.nodeName?A.body.firstChild:A.body,y=E.doc,E.doc=A}return T={...v,node:w},g.dispatch("PreProcess",T),y&&(E.doc=y),w;var T})(p,f,h):f),u=((p,f,h)=>{const g=wn(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||$i(_(f))?g:G.trim(g)})(o,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=w=>"br"===(null==w?void 0:w.name),E=v.lastChild;if(y(E)){const w=E.prev;y(w)&&(E.remove(),w.remove())}})(b),b})(s,u,d);var p,f,h,g,b;return"tree"===d.format?m:((p,f,h,g,b)=>{var w;return((y,E,w)=>{return!E.no_events&&y?(A=y,T={...E,content:w},A.dispatch("PostProcess",T)).content:w;var A,T})(p,b,(w=g,eo(f,h).serialize(w)))})(t,r,a,m,d)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:oe(QN,s,n),getTempAttrs:X(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var i,l,d})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Am=(e,t,n={})=>{const r=(o=n,a=t,{format:"html",...o,set:!0,content:a});var o,a;return ym(e,r).map(o=>{const a=(i=o.content,l=o,Sm(e).editor.setContent(i,l));var i,l;return Cm(e,a.html,o),a.content}).getOr(t)},eR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),tR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),nR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),cC=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],uC=(e,t)=>{const n=Ae(t,r=>Pe(e,r));return F(n)},mC=(e,t)=>{const n=G.makeMap(e.plugins," "),r=Ae(t,o=>Pe(n,o));return F(r)},iR=e=>_t(cC,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),Il=it.DOM,Ml=e=>C.from(e).each(t=>t.destroy()),Fl=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Pe(e,t)}})(),Ta=nn.ModelManager,fC=(e,t)=>t.dom[e],gC=(e,t)=>parseInt(ir(t,e),10),lR=oe(fC,"clientWidth"),dR=oe(fC,"clientHeight"),cR=oe(gC,"margin-top"),uR=oe(gC,"margin-left"),pC=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},r=()=>C.from(t[0]),o=()=>{U(t,l=>{l.reposition()})},a=l=>{uo(t,d=>d===l).each(d=>{t.splice(d,1)})},s=(l,d=!0)=>{return e.removed||!(u=(c=e).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(_)).map(da).getOr(!1)?{}:(d&&e.dispatch("BeforeOpenNotification",{notification:l}),_t(t,c=>{return!((u=n().getArgs(c)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{e.editorManager.setActive(e);const c=n().open(l,()=>{a(c),o(),d0(e)&&r().fold(()=>e.focus(),u=>n0(_(u.getEl())))});return(u=>{t.push(u)})(c),o(),e.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=X(t);return(l=e).on("SkinLoaded",()=>{const d=Wx(l);d&&s({text:d,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{U(t.slice(),d=>{n().close(d)})}),{open:s,close:()=>{r().each(l=>{n().close(l),a(l),o()})},getNotifications:i};var l},Oa=nn.PluginManager,Go=nn.ThemeManager,hC=e=>{let t=[];const n=()=>{const s=e.theme;return s&&s.getWindowManagerImpl?s.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(s,i)=>(...l)=>i?i.apply(s,l):void 0,o=s=>{e.dispatch("CloseWindow",{dialog:s}),t=Ae(t,i=>i!==s),0===t.length&&e.focus()},a=s=>{e.editorManager.setActive(e),fu(e),e.ui.show();const i=s();return t.push(l=i),e.dispatch("OpenWindow",{dialog:l}),i;var l};return e.on("remove",()=>{U(t,s=>{n().close(s)})}),{open:(s,i)=>a(()=>n().open(s,i,o)),openUrl:s=>a(()=>n().openUrl(s,o)),alert:(s,i,l)=>{const d=n();d.alert(s,r(l||d,i))},confirm:(s,i,l)=>{const d=n();d.confirm(s,r(l||d,i))},close:()=>{C.from(t[t.length-1]).each(s=>{n().close(s),o(s)})}}},bC=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Ul=(e,t)=>{e._skinLoaded?bC(e,t):e.on("SkinLoaded",()=>{bC(e,t)})},ei=(e,t,n)=>{Ob(e,t,{message:n}),console.error(n)},ti=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,$l=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Nm=e=>"content/"+e+"/content.css",vC=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`;return ze(t,o=>tinymce.Resource.has(Nm(o))?o:/^[a-z0-9\-]+$/i.test(o)&&!e.inline?`${n}/${o}/${r}`:e.documentBaseURI.toAbsolute(o))},yC=()=>{let e={};const t=(r,o)=>({status:r,resultUri:o}),n=r=>r in e;return{hasBlobUri:n,getResultUri:r=>{const o=e[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===e[r].status,isUploaded:r=>!!n(r)&&2===e[r].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,o)=>{e[r]=t(2,o)},removeFailed:r=>{delete e[r]},destroy:()=>{e={}}}};let fR=0;const CC=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),wC=(e,t)=>((e,t)=>{const n={},r=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",t.url),m.withCredentials=t.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&te(f.location)?c((g=f.location,(h=t.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),o=Ce(t.handler)?t.handler:r,a=(l,d)=>({url:d,blobInfo:l,status:!0}),s=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{G.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return t.url||o!==r?(u=d,c=G.grep(c=l,m=>!e.isUploaded(m.blobUri())),Promise.all(G.map(c,m=>{return e.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=o,h=u,e.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=we)},E=k=>{y(),e.markUploaded(p.blobUri(),k),i(p.blobUri(),a(p,k)),g(a(p,k))},w=k=>{y(),e.removeFailed(p.blobUri()),i(p.blobUri(),s(p,k)),g(s(p,k))};v=k=>{k<0||k>100||C.from(b).orThunk(()=>C.from(h).map(ln)).each(A=>{b=A,A.progressBar.value(k)})},f(p,v).then(E,k=>{w(te(k)?{message:k}:k)})}catch(y){g(s(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(t,{url:Lx(e),basePath:Px(e),credentials:Dx(e),handler:Ix(e)}),EC={remove_similar:!0,inherit:!1},Ba={selector:"td,th",...EC},hR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ba},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ba},tablecellbordercolor:{styles:{borderColor:"%value"},...Ba},tablecellclass:{classes:["%value"],...Ba},tableclass:{selector:"table",classes:["%value"],...EC},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ba},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ba}},bR=X(hR),zl=G.each,Ln=it.DOM,Rm=e=>M(e)&&Ue(e),kC=(e,t)=>{const n=t&&t.schema||Kr({}),r=s=>{const i=te(s)?{name:s,classes:[],attrs:{}}:s,l=Ln.create(i.name);return d=l,(c=i).classes.length>0&&Ln.addClass(d,c.classes.join(" ")),Ln.setAttribs(d,c.attrs),l;var d,c},o=(s,i,l)=>{let d;const c=i[0],u=Rm(c)?c.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=null==b?void 0:b.parentsRequired;return!(!v||!v.length)&&(g&&Ke(v,g)?g:v[0])})(s,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return s;const p=d?r(d):Ln.create("div");p.appendChild(s),l&&G.each(l,h=>{const g=r(h);p.insertBefore(g,s)});const f=Rm(d)?d.siblings:void 0;return o(p,i,f)},a=Ln.create("div");if(e.length>0){const s=e[0],i=r(s),l=Rm(s)?s.siblings:void 0;a.appendChild(o(i,e.slice(1),l))}return a},vR=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=G.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,a,s,i)=>{switch(o){case"#":n.attrs.id=a;break;case".":n.classes.push(a);break;case":":-1!==G.inArray("checked disabled enabled read-only required".split(" "),a)&&(n.attrs[a]=a)}if("["===s){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},yR=(e,t)=>{let n="",r=Xx(e);if(""===r)return"";const o=p=>te(p)?p.replace(/%(\w+)/g,""):"",a=(p,f)=>Ln.getStyle(null!=f?f:e.getBody(),p,!0);if(te(t)){const p=e.formatter.get(t);if(!p)return"";t=p[0]}if("preview"in t){const p=t.preview;if(!1===p)return"";r=p||r}let s,i=t.block||t.inline||"span";const l=te(d=t.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),G.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=G.map(p.split(/(?:~\+|~|\+)/),vR),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,s=kC(l,e)):s=kC([i],e);const c=Ln.select(i,s)[0]||s.firstChild;zl(t.styles,(p,f)=>{const h=o(p);h&&Ln.setStyle(c,f,h)}),zl(t.attributes,(p,f)=>{const h=o(p);h&&Ln.setAttrib(c,f,h)}),zl(t.classes,p=>{const f=o(p);Ln.hasClass(c,f)||Ln.addClass(c,f)}),e.dispatch("PreviewFormats"),Ln.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);const u=a("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return zl(r.split(" "),p=>{let f=a(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=a(p),"#ffffff"===gs(f).toLowerCase())||"color"===p&&"#000000"===gs(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),e.dispatch("AfterPreviewFormats"),Ln.remove(s),n},_C=e=>{const t=(r=>{const o={},a=(s,i)=>{s&&(te(s)?(H(i)||(i=[i]),U(i,l=>{J(l.deep)&&(l.deep=!Rn(l)),J(l.split)&&(l.split=!Rn(l)||Tt(l)),J(l.remove)&&Rn(l)&&!Tt(l)&&(l.remove="none"),Rn(l)&&Tt(l)&&(l.mixed=!0,l.block_expand=!0),te(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[s]=i):ge(s,(l,d)=>{a(d,l)}))};return a((s=>{const i=s.dom,l=s.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>ue(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{G.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=null==c?void 0:c.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return G.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(r)),a(bR()),a(Yx(r)),{get:s=>M(s)?o[s]:o,has:s=>Pe(o,s),register:a,unregister:s=>(s&&o[s]&&delete o[s],o)}})(e),n=Pt({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(r=e).on("mouseup keydown",o=>{var a;((s,i,l)=>{const d=s.selection,c=s.getBody();rm(s,null,l),8!==i&&46!==i||!d.isCollapsed()||d.getStart().innerHTML!==Gs||rm(s,Mo(c,d.getStart()),!0),37!==i&&39!==i||rm(s,Mo(c,d.getStart()),!0)})(r,o.keyCode,(a=r.selection.getRng().endContainer,W(a)&&Rd(a.data,Bt)))}),pr(e)||((r,o)=>{r.set({}),o.on("NodeChange",a=>{cy(o,a.element,r.get())}),o.on("FormatApply FormatRemove",a=>{const s=C.from(a.node).map(i=>Is(i)?i:i.startContainer).bind(i=>ue(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>iy(o));cy(o,s,r.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,o,a)=>{var i,l,d;i=r,l=o,d=a,Ct(e).formatter.apply(i,l,d)},remove:(r,o,a,s)=>{var l,d,c,u;l=r,d=o,c=a,u=s,Ct(e).formatter.remove(l,d,c,u)},toggle:(r,o,a)=>{var i,l,d;i=r,l=o,d=a,Ct(e).formatter.toggle(i,l,d)},match:(r,o,a,s)=>{return l=r,d=o,c=a,u=s,Ct(e).formatter.match(l,d,c,u);var l,d,c,u},closest:r=>{return a=r,Ct(e).formatter.closest(a);var a},matchAll:(r,o)=>{return s=r,i=o,Ct(e).formatter.matchAll(s,i);var s,i},matchNode:(r,o,a,s)=>{return l=r,d=o,c=a,u=s,Ct(e).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:r=>{return a=r,Ct(e).formatter.canApply(a);var a},formatChanged:(r,o,a,s)=>{return l=n,d=r,c=o,u=a,m=s,Ct(e).formatter.formatChanged(l,d,c,u,m);var l,d,c,u,m},getCssText:oe(yR,e)};var r},xC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},SC=e=>{const t=Yr(),n=Pt(0),r=Pt(0),o={data:[],typing:!1,beforeChange:()=>{var s,i;s=n,i=t,Ct(e).undoManager.beforeChange(s,i)},add:(a,s)=>{return l=o,d=r,c=n,u=t,m=a,p=s,Ct(e).undoManager.add(l,d,c,u,m,p);var l,d,c,u,m,p},dispatchChange:()=>{e.setDirty(!0);const a=Pl(e);a.bookmark=Nc(e.selection),e.dispatch("change",{level:a,lastLevel:Y(o.data,r.get()).getOrUndefined()})},undo:()=>{return s=o,i=n,l=r,Ct(e).undoManager.undo(s,i,l);var s,i,l},redo:()=>{return s=r,i=o.data,Ct(e).undoManager.redo(s,i);var s,i},clear:()=>{var s,i;s=o,i=r,Ct(e).undoManager.clear(s,i)},reset:()=>{var s;s=o,Ct(e).undoManager.reset(s)},hasUndo:()=>{return s=o,i=r,Ct(e).undoManager.hasUndo(s,i);var s,i},hasRedo:()=>{return s=o,i=r,Ct(e).undoManager.hasRedo(s,i);var s,i},transact:a=>{return i=o,l=n,d=a,Ct(e).undoManager.transact(i,l,d);var i,l,d},ignore:a=>{var i,l;i=n,l=a,Ct(e).undoManager.ignore(i,l)},extra:(a,s)=>{var l,d,c,u;l=o,d=r,c=a,u=s,Ct(e).undoManager.extra(l,d,c,u)}};return pr(e)||((a,s,i)=>{const l=Pt(!1),d=c=>{Dl(s,!1,i),s.add({},c)};a.on("init",()=>{s.add()}),a.on("BeforeExecCommand",c=>{xC(c.command)||(tC(s,i),s.beforeChange())}),a.on("ExecCommand",c=>{xC(c.command)||d(c)}),a.on("ObjectResizeStart cut",()=>{s.beforeChange()}),a.on("SaveContent ObjectResized blur",d),a.on("dragend",d),a.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=Ge.os.isMacOS()&&"Meta"===c.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey||m)&&(d(),a.nodeChanged()),46!==u&&8!==u||a.nodeChanged(),l.get()&&s.typing&&!_m(Pl(a),s.data[0])&&(a.isDirty()||a.setDirty(!0),a.dispatch("TypingUndo"),l.set(!1),a.nodeChanged())}),a.on("keydown",c=>{const u=c.keyCode;if(!c.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||s.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((Ge.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&s.beforeChange()):(s.beforeChange(),Dl(s,!0,i),s.add({},c),void l.set(!0));s.typing&&d(c)}}),a.on("mousedown",c=>{s.typing&&d(c)}),a.on("input",c=>{var u,m;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(m=c).inputType||"insertFromDrop"===m.inputType)&&d(c)}),a.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||a.nodeChanged()})})(e,o,n),(a=e).addShortcut("meta+z","","Undo"),a.addShortcut("meta+y,meta+shift+z","","Redo"),o;var a},CR=[9,27,ae.HOME,ae.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ae.DOWN,ae.UP,ae.LEFT,ae.RIGHT].concat(Ge.browser.isFirefox()?[224]:[]),AC="data-mce-placeholder",NC=e=>"keydown"===e.type||"keyup"===e.type,RC=e=>{const t=e.keyCode;return t===ae.BACKSPACE||t===ae.DELETE},wR=(e,t)=>({from:e,to:t}),Tm=(e,t)=>{const n=_(e),r=_(t.container());return kl(n,r).map(o=>({block:o,position:t}))},TC=(e,t)=>vo(t,n=>us(n)||Un(n.dom),n=>Xe(n,e)).filter(yn).getOr(e),OC=(e,t)=>{const n=((r,o)=>{const a=jt(r);return uo(a,s=>o.isBlock(Ve(s))).fold(X(a),s=>a.slice(0,s))})(e,t);return U(n,mt),n},BC=(e,t)=>{const n=Mr(t,e);return _t(n.reverse(),r=>yt(r)).each(mt)},ER=(e,t,n,r,o)=>{if(yt(n))return Vr(n),Jt(n.dom);0===Ae(Pg(o),s=>!yt(s)).length&&yt(t)&&gn(o,Ot("br"));const a=pn(n.dom,D.before(o.dom));return U(OC(t,r),s=>{gn(o,s)}),BC(e,t),a},kR=(e,t,n,r)=>{if(yt(n)){if(yt(t)){const s=co((i=>{const l=(d,c)=>Dd(d).fold(()=>c,u=>r.isInline(Ve(u))?l(u,c.concat(Oo(u))):c);return l(i,[])})(n),(i,l)=>(qg(i,l),l),ms());ca(t),St(t,s)}return mt(n),Jt(t.dom)}const o=zn(n.dom);return U(OC(t,r),a=>{St(n,a)}),BC(e,t),o},LC=(e,t)=>{Ea(e,t.dom).bind(n=>C.from(n.getNode())).map(_).filter(_o).each(mt)},PC=(e,t,n,r)=>{return LC(!0,t),LC(!1,n),(o=t,a=n,Nr(a,o)?((s,i)=>{const l=Mr(i,s);return C.from(l[l.length-1])})(a,o):C.none()).fold(oe(kR,e,t,n,r),oe(ER,e,t,n,r));var o,a},DC=(e,t,n,r,o)=>t?PC(e,r,n,o):PC(e,n,r,o),Om=(e,t)=>{const n=_(e.getBody());return(o=n.dom,a=t,s=e.selection.getRng(),s.collapsed?((i,l,d)=>{const c=Tm(i,D.fromRangeStart(d)),u=c.bind(m=>Sn(l,i,m.position).bind(p=>Tm(i,p).map(f=>{return h=i,g=l,vt((b=f).position.getNode())&&!yt(b.block)?Ea(!1,b.block.dom).bind(v=>v.isEqual(b.position)?Sn(g,h,v).bind(y=>Tm(h,y)):C.some(b)).getOr(b):b;var h,g,b})));return Xt(c,u,wR).filter(m=>{return!Xe((p=m).from.block,p.to.block)&&((p,f)=>{const h=_(p);return Xe(TC(h,f.from.block),TC(h,f.to.block))})(i,m)&&(p=>!1===ft(p.from.block.dom)&&!1===ft(p.to.block.dom))(m)&&(p=>{const f=h=>rp(h)||oc(h.dom);return f(p.from.block)&&f(p.to.block)})(m);var p})})(o,a,s):C.none()).map(o=>()=>{DC(n,t,o.from.block,o.to.block,e.schema).each(a=>{e.selection.setRng(a.toRange())})});var o,a,s},IC=(e,t)=>{const n=_(t),r=oe(Xe,e);return Tr(n,us,r).isSome()},Bm=(e,t)=>e.selection.isCollapsed()?C.none():(e=>{const t=_(e.getBody());return((n,r)=>{const o=pn(n.dom,D.fromRangeStart(r)).isNone(),a=mn(n.dom,D.fromRangeEnd(r)).isNone();return!(IC(s=n,(i=r).startContainer)||IC(s,i.endContainer))&&o&&a;var s,i})(t,e.selection.getRng())?(n=e,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r,o)=>{const a=r.getRng();return Xt(kl(n,_(a.startContainer)),kl(n,_(a.endContainer)),(s,i)=>Xe(s,i)?C.none():C.some(()=>{a.deleteContents(),DC(n,!0,s,i,o).each(l=>{r.setRng(l.toRange())})})).getOr(C.none())})(t,e.selection,e.schema);var n})(e),Fr=(e,t,n,r,o)=>C.from(t._selectionOverrides.showCaret(e,n,r,o)),ni=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?C.none():C.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(t)),Lm=(e,t,n)=>t.collapsed?((r,o,a)=>{const s=Fc(1,r.getBody(),o),i=D.fromRangeStart(s),l=i.getNode();if(Rs(l))return Fr(1,r,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Rs(d))return Fr(1,r,d,!1,!1);const c=qo(r.dom.getRoot(),i.getNode());return Rs(c)?Fr(1,r,c,!1,a):C.none()})(e,t,n).getOr(t):t,xR=e=>no(e)||zs(e),SR=e=>ro(e)||js(e),MC=(e,t,n,r,o,a)=>{var s,i;Fr(r,e,a.getNode(!o),o,!0).each(s=>{if(t.collapsed){const i=t.cloneRange();o?i.setEnd(s.startContainer,s.startOffset):i.setStart(s.endContainer,s.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(s)}),s=e.dom,W(i=n)&&0===i.data.length&&s.remove(i)},Pm=(e,t)=>((n,r)=>{const o=n.selection.getRng();if(!W(o.commonAncestorContainer))return C.none();const a=r?Dt.Forwards:Dt.Backwards,s=mr(n.getBody()),i=oe(Uc,r?s.next:s.prev),l=r?xR:SR,d=Ps(a,n.getBody(),o),c=i(d),u=c&&On(r,c);if(!u||!al(d,u))return C.none();if(l(u))return C.some(()=>MC(n,o,d.getNode(),a,r,u));const m=i(u);return m&&l(m)&&al(u,m)?C.some(()=>MC(n,o,d.getNode(),a,r,m)):C.none()})(e,t),Dm=(e,t)=>{const n=e.getBody();return t?Jt(n).filter(no):zn(n).filter(ro)},Im=e=>{const t=e.selection.getRng();return!t.collapsed&&(Dm(e,!0).exists(n=>n.isEqual(D.fromRangeStart(t)))||Dm(e,!1).exists(n=>n.isEqual(D.fromRangeEnd(t))))},Pn=dr([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),FC=(e,t,n,r)=>Sn(t,e,n).bind(o=>{return a=o.getNode(),M(a)&&(us(_(a))||cs(_(a)))||((s,i,l,d,c)=>{const u=m=>c.isInline(m.nodeName.toLowerCase())&&!cr(l,d,s);return Kh(!i,l).fold(()=>Kh(i,d).fold(qe,u),u)})(e,t,n,o,r)?C.none():t&&ft(o.getNode())||!t&&ft(o.getNode(!0))?((s,i,l,d)=>{const c=d.getNode(!i);return kl(_(s),_(l.getNode())).map(u=>yt(u)?Pn.remove(u.dom):Pn.moveToElement(c)).orThunk(()=>C.some(Pn.moveToElement(c)))})(e,t,n,o):t&&ro(n)||!t&&no(n)?C.some(Pn.moveToPosition(o)):C.none();var a}),UC=(e,t)=>C.from(qo(e.getBody(),t)),$C=e=>{const t=e.dom,n=e.selection,r=qo(e.getBody(),n.getNode());if(Un(r)&&t.isBlock(r)&&t.isEmpty(r)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(o),n.setRng(D.before(o).toRange())}return!0},Mm=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return UC(e,n).filter(ft).fold(()=>((r,o,a,s)=>{const i=Fc(o?1:-1,r,a),l=D.fromRangeStart(i),d=_(r);return!o&&ro(l)?C.some(Pn.remove(l.getNode(!0))):o&&no(l)?C.some(Pn.remove(l.getNode())):!o&&no(l)&&Au(d,l,s)?VA(d,l,s).map(c=>Pn.remove(c.getNode())):o&&ro(l)&&Su(d,l,s)?WA(d,l,s).map(c=>Pn.remove(c.getNode())):(c=r,p=s,((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return ue(g)&&g.getAttribute("data-mce-caret")===b})(u=o,m=l)?(f=u,h=m.getNode(!u),ne(h)?C.none():f&&ft(h.nextSibling)?C.some(Pn.moveToElement(h.nextSibling)):!f&&ft(h.previousSibling)?C.some(Pn.moveToElement(h.previousSibling)):C.none()).orThunk(()=>FC(c,u,m,p)):FC(c,u,m,p).bind(f=>((h,g,b)=>b.fold(v=>C.some(Pn.remove(v)),v=>C.some(Pn.moveToElement(v)),v=>cr(g,v,h)?C.none():C.some(Pn.moveToPosition(v))))(c,m,f)));var c,u,m,p,f,h})(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>{return r.fold((o=e,a=t,s=>(o._selectionOverrides.hideFakeCaret(),jo(o,a,_(s)),!0)),((o,a)=>s=>{const i=a?D.before(s):D.after(s);return o.selection.setRng(i.toRange()),!0})(e,t),(o=>a=>(o.selection.setRng(a.toRange()),!0))(e));var o,a}),()=>C.some(we))})(e,t):((n,r)=>{const o=n.selection.getNode();return ft(o)&&!Fi(o)?UC(n,o.parentNode).filter(ft).fold(()=>C.some(()=>{var a;a=_(n.getBody()),U(Zt(a,".mce-offscreen-selection"),mt),jo(n,r,_(n.selection.getNode())),Lu(n)}),()=>C.some(we)):Im(n)?C.some(()=>{iv(n,n.selection.getRng(),_(n.getBody()))}):C.none()})(e,t),Fm=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=D.fromRangeStart(n.selection.getRng());return Sn(r,n.getBody(),o).filter(a=>r?$A(a):zA(a)).bind(a=>Mc(r?0:-1,a)).map(a=>()=>n.selection.select(a))})(e,t):C.none(),La=W,zC=e=>La(e)&&e.data[0]===Lt,jC=e=>La(e)&&e.data[e.data.length-1]===Lt,HC=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Lt)},jl=(e,t)=>e?(n=>{var r;if(La(n.previousSibling))return jC(n.previousSibling)||n.previousSibling.appendData(Lt),n.previousSibling;if(La(n))return zC(n)||n.insertData(0,Lt),n;{const o=HC(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(t):(n=>{var r,o;if(La(n.nextSibling))return zC(n.nextSibling)||n.nextSibling.insertData(0,Lt),n.nextSibling;if(La(n))return jC(n)||n.appendData(Lt),n;{const a=HC(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(a,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(a),a}})(t),NR=oe(jl,!0),RR=oe(jl,!1),qC=(e,t)=>W(e.container())?jl(t,e.container()):jl(t,e.getNode()),VC=(e,t)=>{const n=t.get();return n&&e.container()===n&&Wr(n)},Um=(e,t)=>t.fold(n=>{Do(e.get());const r=NR(n);return e.set(r),C.some(D(r,r.length-1))},n=>Jt(n).map(r=>{if(VC(r,e)){const o=e.get();return D(o,1)}{Do(e.get());const o=qC(r,!0);return e.set(o),D(o,1)}}),n=>zn(n).map(r=>{if(VC(r,e)){const o=e.get();return D(o,o.length-1)}{Do(e.get());const o=qC(r,!1);return e.set(o),D(o,o.length-1)}}),n=>{Do(e.get());const r=RR(n);return e.set(r),C.some(D(r,1))}),WC=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return C.none()},on=dr([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),GC=(e,t)=>Qr(t,e)||e,TR=(e,t,n)=>{const r=nv(n),o=GC(t,r.container());return oo(e,o,r).fold(()=>mn(o,r).bind(oe(oo,e,o)).map(a=>on.before(a)),C.none)},OR=(e,t)=>null===Mo(e,t),KC=(e,t,n)=>oo(e,t,n).filter(oe(OR,t)),BR=(e,t,n)=>{const r=rv(n);return KC(e,t,r).bind(o=>pn(o,r).isNone()?C.some(on.start(o)):C.none())},LR=(e,t,n)=>{const r=nv(n);return KC(e,t,r).bind(o=>mn(o,r).isNone()?C.some(on.end(o)):C.none())},PR=(e,t,n)=>{const r=rv(n),o=GC(t,r.container());return oo(e,o,r).fold(()=>pn(o,r).bind(oe(oo,e,o)).map(a=>on.after(a)),C.none)},YC=e=>!tv($m(e)),hr=(e,t,n)=>WC([TR,BR,LR,PR],[e,t,n]).filter(YC),$m=e=>e.fold(ht,ht,ht,ht),XC=e=>e.fold(X("before"),X("start"),X("end"),X("after")),Hl=e=>e.fold(on.before,on.before,on.after,on.after),zm=e=>e.fold(on.start,on.start,on.end,on.end),DR=(e,t,n,r,o,a)=>Xt(oo(t,n,r),oo(t,n,o),(s,i)=>s!==i&&((l,d,c)=>{const u=Qr(d,l),m=Qr(c,l);return M(u)&&u===m})(n,s,i)?on.after(e?s:i):a).getOr(a),IR=(e,t)=>e.fold(dt,n=>{return o=t,!(XC(r=n)===XC(o)&&$m(r)===$m(o));var r,o}),MR=(e,t)=>e?t.fold(Et(C.some,on.start),C.none,Et(C.some,on.after),C.none):t.fold(C.none,Et(C.some,on.before),C.none,Et(C.some,on.end)),ZC=(e,t,n)=>{const r=e?1:-1;return t.setRng(D(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var br;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(br||(br={}));const ql=(e,t)=>e===Dt.Backwards?mo(t):t,FR=(e,t,n)=>e===Dt.Forwards?t.next(n):t.prev(n),UR=(e,t,n,r)=>vt(r.getNode(t===Dt.Forwards))?br.Br:!1===cr(n,r)?br.Block:br.Wrap,QC=(e,t,n,r)=>{const o=mr(n);let a=r;const s=[];for(;a;){const i=FR(t,o,a);if(!i)break;if(vt(i.getNode(!1)))return t===Dt.Forwards?{positions:ql(t,s).concat([i]),breakType:br.Br,breakAt:C.some(i)}:{positions:ql(t,s),breakType:br.Br,breakAt:C.some(i)};if(i.isVisible()){if(e(a,i)){const l=UR(0,t,a,i);return{positions:ql(t,s),breakType:l,breakAt:C.some(i)}}s.push(i),a=i}else a=i}return{positions:ql(t,s),breakType:br.Eol,breakAt:C.none()}},JC=(e,t,n,r)=>t(n,r).breakAt.map(o=>{const a=t(n,o).positions;return e===Dt.Backwards?a.concat(o):[o].concat(a)}).getOr([]),jm=(e,t)=>Kt(e,(n,r)=>n.fold(()=>C.some(r),o=>Xt(Q(o.getClientRects()),Q(r.getClientRects()),(a,s)=>{const i=Math.abs(t-a.left);return Math.abs(t-s.left)<=i?r:o}).or(n)),C.none()),Vl=(e,t)=>Q(t.getClientRects()).bind(n=>jm(e,n.left)),ri=oe(QC,D.isAbove,-1),oi=oe(QC,D.isBelow,1),ew=oe(JC,-1,ri),tw=oe(JC,1,oi),nw=(e,t)=>ri(e,t).breakAt.isNone(),rw=(e,t)=>oi(e,t).breakAt.isNone(),$R=(e,t)=>Vl(ew(e,t),t),zR=(e,t)=>Vl(tw(e,t),t),jR=ft,ow=(e,t)=>Math.abs(e.left-t),aw=(e,t)=>Math.abs(e.right-t),sw=(e,t)=>Si(e,(n,r)=>{const o=Math.min(ow(n,t),aw(n,t)),a=Math.min(ow(r,t),aw(r,t));return a===o&&na(r,"node")&&jR(r.node)||a<o?r:n}),HR=e=>{const t=n=>ze(n,r=>{const o=Lo(r);return o.node=e,o});if(ue(e))return t(e.getClientRects());if(W(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},iw=e=>cn(e,HR);var ai;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(ai||(ai={}));const lw=(e,t,n,r,o,a)=>{let s=0;const i=[],l=u=>{let m=iw([u]);-1===e&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&t(f,go(i))&&s++,f.line=s,o(f))return!0;i.push(f)}}return!1},d=go(a.getClientRects());if(!d)return i;const c=a.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=Os(h,u,lp,m);)if(p(h))return})(e,r,l,c)),i},qR=oe(lw,ai.Up,ks,_s),VR=oe(lw,ai.Down,_s,ks),dw=e=>go(e.getClientRects()),cw=e=>t=>t.line>e,Hm=e=>t=>t.line===e,Ur=(e,t)=>{e.selection.setRng(t),$s(e,e.selection.getRng())},qm=(e,t,n)=>C.some(Lm(e,t,n)),uw=(e,t,n,r,o,a)=>{const s=t===Dt.Forwards,i=mr(e.getBody()),l=oe(Uc,s?i.next:i.prev),d=s?r:o;if(!n.collapsed){const f=Zi(n);if(a(f))return Fr(t,e,f,t===Dt.Backwards,!1);if(Im(e)){const h=n.cloneRange();return h.collapse(t===Dt.Backwards),C.from(h)}}const c=Ps(t,e.getBody(),n);if(d(c))return ni(e,c.getNode(!s));let u=l(c);const m=ap(n);if(!u)return m?C.some(n):C.none();if(u=On(s,u),d(u))return Fr(t,e,u.getNode(!s),s,!1);const p=l(u);return p&&d(p)&&al(u,p)?Fr(t,e,p.getNode(!s),s,!1):m?qm(e,u.toRange(),!1):C.none()},mw=(e,t,n,r,o,a)=>{const s=Ps(t,e.getBody(),n),i=go(s.getClientRects()),l=t===ai.Down,d=e.getBody();if(!i)return C.none();if(Im(e)){const h=l?D.fromRangeEnd(n):D.fromRangeStart(n);return(l?zR:$R)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?VR:qR)(d,cw(1),s),u=Ae(c,Hm(1)),m=i.left,p=sw(u,m);if(p&&a(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return Fr(t,e,p.node,h<g,!1)}let f;if(f=r(s)?s.getNode():o(s)?s.getNode(!0):Zi(n),f){const h=((b,v,y,E)=>{const w=mr(v);let k,A,T,O;const P=[];let x=0;1===b?(k=w.next,A=_s,T=ks,O=D.after(E)):(k=w.prev,A=ks,T=_s,O=D.before(E));const S=dw(O);do{if(!O.isVisible())continue;const B=dw(O);if(T(B,S))continue;P.length>0&&A(B,go(P))&&x++;const $=Lo(B);if($.position=O,$.line=x,y($))return P;P.push($)}while(O=k(O));return P})(t,d,cw(1),f);let g=sw(Ae(h,Hm(1)),m);if(g||(g=go(Ae(h,Hm(0))),g))return qm(e,g.position.toRange(),!1)}return 0===u.length?Vm(e,l).filter(l?o:r).map(h=>Lm(e,h.toRange(),!1)):C.none()},Vm=(e,t)=>{const n=e.selection.getRng(),r=t?D.fromRangeEnd(n):D.fromRangeStart(n),o=(a=r.container(),s=e.getBody(),Tr(_(a),i=>WS(i.dom),i=>i.dom===s).map(i=>i.dom).getOr(s));var a,s;if(t){const i=oi(o,r);return he(i.positions)}{const i=ri(o,r);return Q(i.positions)}},fw=(e,t,n)=>Vm(e,t).filter(n).exists(r=>(e.selection.setRng(r.toRange()),!0)),Wl=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},gw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},pw=(e,t,n)=>Um(t,n).map(r=>(Wl(e,r),n)),hw=(e,t,n)=>!!Ns(e)&&((e,t,n)=>{const r=e.getBody(),o=((a,s,i)=>{const l=D.fromRangeStart(a);if(a.collapsed)return l;{const d=D.fromRangeEnd(a);return i?pn(s,d).getOr(d):mn(s,l).getOr(l)}})(e.selection.getRng(),r,n);return((a,s,i,l)=>{const d=On(a,l),c=hr(s,i,d);return hr(s,i,d).bind(oe(MR,a)).orThunk(()=>((u,m,p,f,h)=>{const g=On(u,h);return Sn(u,p,g).map(oe(On,u)).fold(()=>f.map(Hl),b=>hr(m,p,b).map(oe(DR,u,m,p,g,b)).filter(oe(IR,f))).filter(YC)})(a,s,i,c,l))})(n,oe(Ho,e),r,o).bind(a=>pw(e,t,a))})(e,t,n).isSome(),bw=(e,t,n)=>!!Ns(t)&&((r,o)=>{const a=o.selection.getRng(),s=r?D.fromRangeEnd(a):D.fromRangeStart(a);return!!Ce(o.selection.getSel().modify)&&(r&&Zd(s)?ZC(!0,o.selection,s):!(r||!Qd(s))&&ZC(!1,o.selection,s))})(e,t),KR=oe(bw,!0),YR=oe(bw,!1),Gl=(e,t,n)=>{if(Ns(e)){const r=Vm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?D.fromRangeEnd(o):D.fromRangeStart(o)});return hr(oe(Ho,e),e.getBody(),r).exists(o=>{const a=Hl(o);return Um(n,a).exists(s=>(Wl(e,s),!0))})}return!1},vw=(e,t)=>n=>Um(t,n).map(r=>()=>Wl(e,r)),yw=(e,t,n,r)=>{const o=e.getBody(),a=oe(Ho,e);e.undoManager.ignore(()=>{e.selection.setRng(((s,i)=>{const l=document.createRange();return l.setStart(s.container(),s.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),Bu(e),hr(a,o,D.fromRangeStart(e.selection.getRng())).map(zm).bind(vw(e,t)).each(dn)}),e.nodeChanged()},Wm=(e,t,n)=>{if(e.selection.isCollapsed()&&Ns(e)){const r=D.fromRangeStart(e.selection.getRng());return((o,a,s,i)=>{const l=(u=o.getBody(),m=i.container(),Qr(m,u)||u),d=oe(Ho,o),c=hr(d,l,i);var u,m;return c.bind(u=>s?u.fold(X(C.some(zm(u))),C.none,X(C.some(Hl(u))),C.none):u.fold(C.none,X(C.some(Hl(u))),C.none,X(C.some(zm(u))))).map(vw(o,a)).getOrThunk(()=>{const u=wa(s,l,i),m=u.bind(p=>hr(d,l,p));return Xt(c,m,()=>oo(d,l,i).bind(p=>{return Xt(Jt(f=p),zn(f),(h,g)=>{const b=On(!0,h),v=On(!1,g);return mn(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{jo(o,s,_(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{s?yw(o,a,i,p):yw(o,a,p,i)})))})})(e,t,n,r)}return C.none()},Cw=(e,t)=>{const n=_(e.getBody()),r=_(e.selection.getStart()),o=Mr(r,n);return uo(o,t).fold(X(o),a=>o.slice(0,a))},XR=e=>1===Md(e),ww=(e,t)=>{const n=oe(Pv,e);return cn(t,r=>n(r)?[r.dom]:[])},Ew=e=>{const t=Cw(n=e,r=>n.schema.isBlock(Ve(r)));var n;return ww(e,t)},kw=(e,t)=>{const n=e.selection.getStart(),r=((o,a)=>{const s=a.parentElement;return vt(a)&&!V(s)&&o.dom.isEmpty(s)})(e,n)||ru(_(n))?Lv(n,t):((o,a)=>{const{caretContainer:s,caretPosition:i}=Bv(a);return o.insertNode(s.dom),i})(e.selection.getRng(),t);e.selection.setRng(r.toRange())},_w=e=>W(e.startContainer),Gm=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=Ae(Cw(r=e,o=>r.schema.isBlock(Ve(o))||Md(o)>1),XR);var r;return he(n).bind(r=>{const o=D.fromRangeStart(e.selection.getRng());return av(t,o,r.dom)&&!ru(r)?C.some(()=>((a,s,i,l)=>{const d=ww(s,l);if(0===d.length)jo(s,a,i);else{const c=Lv(i.dom,d);s.selection.setRng(c.toRange())}})(t,e,r,n)):C.none()})})(e,t):(n=>{if((e=>{const t=e.selection.getRng();return 0===(n=t).startOffset&&_w(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!V(o)&&Pv(n,_(o))})(e,t)&&(n=>{return(o=>{const a=o.startContainer.parentNode,s=o.endContainer.parentNode;return!V(a)&&!V(s)&&a.isEqualNode(s)})(r=n)&&(o=>{const a=o.endContainer;return o.endOffset===(W(a)?a.length:a.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(t);var n})(n)){const r=Ew(n);return C.some(()=>{Bu(n),((o,a)=>{const s=ta(a,Ew(o));s.length>0&&kw(o,s)})(n,r)})}return C.none()})(e),si=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(_w(n)||t.dom.isEmpty(n.startContainer))&&!((e,t)=>Tr(e,n=>An(n.dom),n=>t.isBlock(Ve(n))).isSome())(_((r=t).selection.getStart()),r.schema);var r})(e)&&kw(e,[]),!0),Km=(e,t,n)=>M(n)?C.some(()=>{e._selectionOverrides.hideFakeCaret(),jo(e,t,_(n))}):C.none(),Ym=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=r?zs:js,s=Ps(r?Dt.Forwards:Dt.Backwards,n.getBody(),n.selection.getRng());return o(s)?Km(n,r,s.getNode(!r)):C.from(On(r,s)).filter(i=>o(i)&&al(s,i)).bind(i=>Km(n,r,i.getNode(!r)))})(e,t):((n,r)=>{const o=n.selection.getNode();return lr(o)?Km(n,r,o):C.none()})(e,t),Xm=e=>Ai(null!=e?e:"").getOr(0),xw=(e,t)=>(e||"table"===Ve(t)?"margin":"padding")+("rtl"===ir(t,"direction")?"-right":"-left"),Sw=e=>{const t=Nw(e);return!e.mode.isReadOnly()&&(t.length>1||(n=e,Wn(t,o=>{const a=xw(Ah(n),o),s=Li(o,a).map(Xm).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&s>0})));var n},Aw=e=>Xd(e)||cs(e),Nw=e=>Ae(jd(e.selection.getSelectedBlocks()),t=>!Aw(t)&&!Fn(t).exists(Aw)&&vo(t,n=>Un(n.dom)||ft(n.dom)).exists(n=>Un(n.dom))),Rw=(e,t)=>{var n,r;const{dom:o}=e,a=Ux(e),s=null!==(r=null===(n=/[a-z%]+$/i.exec(a))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=Xm(a),l=Ah(e);U(Nw(e),d=>{((c,u,m,p,f,h)=>{const g=xw(m,_(h)),b=Xm(c.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else c.setStyle(h,g,b+p+f)})(o,t,l,i,s,d.dom)})},Tw=e=>Rw(e,"outdent"),Ow=e=>{if(e.selection.isCollapsed()&&Sw(e)){const t=e.dom,n=e.selection.getRng(),r=D.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(null!==o&&xu(_(o),r,e.schema))return C.some(()=>Tw(e))}return C.none()},Bw=(e,t,n)=>xt([Ow,Mm,Pm,(r,o)=>Wm(r,t,o),Om,zu,Fm,Ym,Bm,Gm],r=>r(e,n)).filter(r=>e.selection.isEditable()),Lw=e=>void 0===e.touches||1!==e.touches.length?C.none():C.some(e.touches[0]),Zm=(e,t)=>Pe(e,t.nodeName),tT=(e,t)=>!!W(t)||!!ue(t)&&!(Zm(e.getBlockElements(),t)||Nn(t)||So(e,t)||tc(t)),nT=(e,t)=>{if(W(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Zm(e,t.nextSibling)||tc(t.nextSibling)}return!1},Pw=e=>e.dom.create(Qt(e),As(e)),rT=e=>{const t=e.dom,n=e.selection,r=e.schema,o=r.getBlockElements(),a=n.getStart(),s=e.getBody();let i,l,d=!1;const c=Qt(e);if(!a||!ue(a))return;const u=s.nodeName.toLowerCase();if(!r.isValidChild(u,c.toLowerCase())||(y=o,E=s,ct(I0(_(a),_(E)),k=>Zm(y,k.dom))))return;var y,E;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:g}=m,b=zo(e);let v=s.firstChild;for(;v;)if(ue(v)&&G_(r,v),tT(r,v)){if(nT(o,v)){l=v,v=v.nextSibling,t.remove(l);continue}i||(i=Pw(e),s.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(p,f),m.setEnd(h,g),n.setRng(m),e.nodeChanged())},Dw=(e,t,n)=>{const r=_(Pw(e)),o=ms();St(r,o),n(t,r);const a=document.createRange();return a.setStartBefore(o.dom),a.setEndBefore(o.dom),a},Iw=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),oT=(e,t,n)=>function(r){const o=arguments,a=o[o.length-2],s=a>0?t.charAt(a-1):"";if('"'===s)return r;if(">"===s){const i=t.lastIndexOf("<",a);if(-1!==i&&-1!==t.substring(i,a).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},aT=(e,t)=>Wn(e,n=>{const r=t.match(n);return null!==r&&r[0].length===t.length}),Mw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Jd(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},sT=(e,t)=>{const n=as(_(e.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Mw(e,n)):void(op(n)&&(Mw(e,n),e.undoManager.add()))},Fw=ft,Uw=(e,t,n)=>{const r=mr(e.getBody()),o=oe(Uc,1===t?r.next:r.prev);if(n.collapsed){const a=e.dom.getParent(n.startContainer,"PRE");if(!a)return;if(!o(D.fromRangeStart(n))){const s=_((i=>{const l=i.dom.create(Qt(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));1===t?Or(_(a),s):gn(_(a),s),e.selection.select(s.dom,!0),e.selection.collapse()}}},$w=(e,t)=>((n,r)=>{const o=r?Dt.Forwards:Dt.Backwards,a=n.selection.getRng();return(s=o,i=n,l=a,uw(i,s,l,no,ro,Fw)).orThunk(()=>(Uw(n,o,a),C.none()));var s,i,l})(e,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return tv(o)?!r:r})(e.selection,t)).exists(n=>(Ur(e,n),!0)),zw=(e,t)=>((n,r)=>{const o=r?1:-1,a=n.selection.getRng();return(s=o,i=n,l=a,mw(i,s,l,d=>no(d)||P0(d),d=>ro(d)||D0(d),Fw)).orThunk(()=>(Uw(n,o,a),C.none()));var s,i,l})(e,t).exists(n=>(Ur(e,n),!0)),jw=(e,t)=>fw(e,t,t?ro:no),Kl=(e,t)=>Dm(e,!t).map(n=>{const r=n.toRange(),o=e.selection.getRng();return t?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(Ur(e,n),!0)),iT=e=>Ke(["figcaption"],Ve(e)),Hw=(e,t)=>!!e.selection.isCollapsed()&&((n,r)=>{const o=_(n.getBody()),a=D.fromRangeStart(n.selection.getRng());return((s,i,l)=>{const d=oe(Xe,i);return vo(_(s.container()),c=>l.isBlock(Ve(c)),d).filter(iT)})(a,o,n.schema).exists(()=>{if(s=o,l=a,r?rw(s.dom,l):nw(s.dom,l)){const s=Dw(n,o,r?St:zd);return n.selection.setRng(s),!0}var s,l;return!1})})(e,t),qw=(e,t)=>{return n=e,t?C.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((a,s)=>{const i=a.selection.getRng(),l=D.fromRangeStart(i);return!(a.getBody().lastChild!==s||!rw(s,l)||(a.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):C.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>C.from(n.dom.getParent(o,"details")).map(a=>((s,i,l)=>{const d=s.selection.getRng(),c=D.fromRangeStart(d);return!(s.getBody().firstChild!==i||!nw(l,c)||(s.execCommand("InsertNewBlockBefore"),0))})(n,a,o))).getOr(!1);var n},Vw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Ww=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,xe=(e,...t)=>()=>e.apply(null,t),ii=(e,t)=>{return _t((r=t,cn(ze(e,a=>({...Vw,...a})),o=>Ww(o,r)?[o]:[])),n=>n.action());var r},Gw=(e,t)=>{return xt((r=t,cn(ze(e,a=>({...Vw,...a})),o=>Ww(o,r)?[o]:[])),n=>n.action());var r},Kw=(e,t)=>{const n=t?Dt.Forwards:Dt.Backwards,r=e.selection.getRng();return uw(e,n,r,zs,js,lr).exists(o=>(Ur(e,o),!0))},Yw=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return mw(e,n,r,zs,js,lr).exists(o=>(Ur(e,o),!0))},Xw=(e,t)=>fw(e,t,t?js:zs),Zw=dr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),li={...Zw,none:e=>Zw.none(e)},Qw=(e,t,n)=>cn(jt(e),r=>Gn(r,t)?n(r)?[r]:[]:Qw(r,t,n)),Jw=(e,t)=>yo(e,"table",t),Qm=(e,t,n,r,o=dt)=>{const a=1===r;if(!a&&n<=0)return li.first(e[0]);if(a&&n>=e.length-1)return li.last(e[e.length-1]);{const s=n+r,i=e[s];return o(i)?li.middle(t,i):Qm(e,t,s,r,o)}},eE=(e,t)=>Jw(e,t).bind(n=>{const r=Qw(n,"th,td",dt);return uo(r,o=>Xe(e,o)).map(o=>({index:o,all:r}))}),tE=(e,t,n,r,o)=>{const a=Zt(_(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Kt(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(Ae((i=e,cn(a,d=>{const c={left:(u=Lo(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>t(i,o)),r,o).map(i=>i.cell)},lT=oe(tE,e=>e.bottom,(e,t)=>e.y<t),dT=oe(tE,e=>e.top,(e,t)=>e.y>t),nE=(e,t,n)=>{const r=e(t,n);return(o=r).breakType===br.Wrap&&0===o.positions.length||!vt(n.getNode())&&(o=>o.breakType===br.Br&&1===o.positions.length)(r)?!((o,a,s)=>s.breakAt.exists(i=>o(a,i).breakAt.isSome()))(e,t,r):r.breakAt.isNone();var o},cT=oe(nE,ri),uT=oe(nE,oi),mT=(e,t,n,r)=>{const o=e.selection.getRng(),a=t?1:-1;return!(!jh()||!((s,i,l)=>{const d=D.fromRangeStart(i);return Ea(!s,l).exists(c=>c.isEqual(d))})(t,o,n)||(Fr(a,e,n,!t,!1).each(s=>{Ur(e,s)}),0))},rE=(e,t,n)=>{const r=((a,s)=>{const i=s.getNode(a);return Pr(i)?C.some(i):C.none()})(!!t,n),o=!1===t;r.fold(()=>Ur(e,n.toRange()),a=>Ea(o,e.getBody()).filter(s=>s.isEqual(n)).fold(()=>Ur(e,n.toRange()),s=>{return i=t,d=a,void(l=e).undoManager.transact(()=>{const c=i?Or:gn,u=Dw(l,_(d),c);Ur(l,u)});var i,l,d}))},fT=(e,t,n,r)=>{const o=e.selection.getRng(),a=D.fromRangeStart(o),s=e.getBody();if(!t&&cT(r,a)){const i=(l=s,(u=d=n,m=c=a,Q(m.getClientRects()).bind(p=>lT(u,p.left,p.top)).bind(p=>{return Vl(zn(f=p).map(h=>ri(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>Q(c.getClientRects()).bind(u=>jm(ew(l,D.before(d)),u.left))).getOr(D.before(d)));return rE(e,t,i),!0}var l,d,c,u,m;if(t&&uT(r,a)){const i=((l,d,c)=>((u,m)=>he(m.getClientRects()).bind(p=>dT(u,p.left,p.top)).bind(p=>{return Vl(Jt(f=p).map(h=>[h].concat(oi(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>Q(c.getClientRects()).bind(u=>jm(tw(l,D.after(d)),u.left))).getOr(D.after(d)))(s,n,a);return rE(e,t,i),!0}return!1},oE=(e,t,n)=>C.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>C.from(e.dom.getParent(r,"table")).map(o=>n(e,t,o,r))).getOr(!1),aE=(e,t)=>oE(e,t,mT),Jm=(e,t)=>oE(e,t,fT),sE=(e,t,n)=>n.fold(C.none,C.none,(r,o)=>{return(a=o,Ug(a,p0)).map(s=>{return(e=>{const t=Aa.getWin(e).dom,n=(o,a,s,i)=>au(t,o,a,s,i),r=e.match({domRange:a=>{const s=_(a.startContainer),i=_(a.endContainer);return jb(s,a.startOffset,i,a.endOffset)},relative:dA,exact:jb});return((o,a)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>Us.rtl(_(c.endContainer),c.endOffset,_(c.startContainer),c.startOffset)).getOrThunk(()=>$b(0,Us.ltr,d)):$b(0,Us.ltr,d)})(0,(i=o,a.match({domRange:d=>({ltr:X(d),rtl:C.none}),relative:(d,c)=>({ltr:po(()=>Ub(i,d,c)),rtl:po(()=>C.some(Ub(i,c,d)))}),exact:(d,c,u,m)=>({ltr:po(()=>au(i,d,c,u,m)),rtl:po(()=>C.some(au(i,u,m,d,c)))})})))})(t,r).match({ltr:n,rtl:n})})(Aa.exact(i=s,0,i,0));var i});var a},r=>(e.execCommand("mceTableInsertRowAfter"),iE(e,t,r))),iE=(e,t,n)=>{return sE(e,t,(o=Co,eE(r=n,void 0).fold(()=>li.none(r),a=>Qm(a.all,r,a.index,1,o))));var r,o},gT=(e,t,n)=>{return sE(e,t,(o=Co,eE(r=n,void 0).fold(()=>li.none(),a=>Qm(a.all,r,a.index,-1,o))));var r,o},lE=(e,t)=>{const n=["table","li","dl"],r=_(e.getBody()),o=s=>{const i=Ve(s);return Xe(s,r)||Ke(n,i)},a=e.selection.getRng();return(s=_(t?a.endContainer:a.startContainer),i=o,((l,d,c=qe)=>c(d)?C.none():Ke(l,Ve(d))?C.some(d):os(d,l.join(","),u=>Gn(u,"table")||c(u)))(["td","th"],s,i)).map(s=>(Jw(s,o).each(i=>{e.model.table.clearSelectedCells(i.dom)}),e.selection.collapse(!t),(t?iE:gT)(e,o,s).each(i=>{e.selection.setRng(i)}),!0)).getOr(!1);var s,i},Jn=(e,t)=>({container:e,offset:t}),Yl=it.DOM,Xl=e=>t=>e===t?-1:0,ef=(e,t,n)=>{if(W(e)&&t>=0)return C.some(Jn(e,t));{const r=Bo(Yl);return C.from(r.backwards(e,t,Xl(e),n)).map(o=>Jn(o.container,o.container.data.length))}},tf=(e,t,n)=>{if(!W(e))return C.none();if(t>=0&&t<=e.data.length)return C.some(Jn(e,t));{const o=Bo(Yl);return C.from(o.backwards(e,t,Xl(e),n)).bind(a=>tf(a.container,t+a.container.data.length,n))}},dE=(e,t,n)=>{if(!W(e))return C.none();const r=e.data;if(t<=r.length)return C.some(Jn(e,t));{const o=Bo(Yl);return C.from(o.forwards(e,t,Xl(e),n)).bind(a=>dE(a.container,t-r.length,n))}},nf=(e,t,n,r,o)=>{const a=Bo(e,(s=e,i=>s.isBlock(i)||Ke(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===s.getContentEditable(i)));var s;return C.from(a.backwards(t,n,r,o))},cE=e=>wn(e.toString().replace(/\u00A0/g," ")),uE=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),rf=(e,t)=>e.substring(t.length),mE=(e,t,n,r=0)=>{return(o=_(t.startContainer),yo(o,h0)).fold(()=>((a,s,i,l=0)=>{if(!(d=s).collapsed||!W(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=a.getParent(s.startContainer,a.isBlock)||a.getRoot();return nf(a,s.startContainer,s.startOffset,(m,p,f)=>(c.text=f+c.text,c.offset+=p,((h,g,b)=>{let v;const y=b.charAt(0);for(v=g-1;v>=0;v--){const E=h.charAt(v);if(uE(E))return C.none();if(y===E&&Yt(h,b,v,g))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(m=>{const p=s.cloneRange();if(p.setStart(m.container,m.offset),p.setEnd(s.endContainer,s.endOffset),p.collapsed)return C.none();const f=cE(p);return 0!==f.lastIndexOf(i)||rf(f,i).length<l?C.none():C.some({text:rf(f,i),range:p,trigger:i})})})(e,t,n,r),a=>{const s=e.createRng();s.selectNode(a.dom);const i=cE(s);return C.some({range:s,text:rf(i,n),trigger:n})});var o},fE=e=>{if(3===e.nodeType)return Jn(e,e.data.length);{const t=e.childNodes;return t.length>0?fE(t[t.length-1]):Jn(e,t.length)}},gE=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?gE(n[t],0):n.length>0&&1===e.nodeType&&n.length===t?fE(n[n.length-1]):Jn(e,t)},pE=(e,t,n,r={})=>{var o;const a=t(),s=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=Ae(a.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=e.dom,u=>{const m=gE(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return nf(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!uE(v)}).isSome()})(c,m)};var c})(n.range,s,n.text));if(0===i.length)return C.none();const l=Promise.all(ze(i,d=>d.fetch(n.text,d.maxResults,r).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var vr;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(vr||(vr={}));const of=(e,t,n)=>e.stype===vr.Error?t(e.serror):n(e.svalue),Pa=e=>({stype:vr.Value,svalue:e}),di=e=>({stype:vr.Error,serror:e}),pT=of,af=e=>Ue(e)&&Me(e).length>100?" removed due to size":JSON.stringify(e,null,2),Zl=(e,t)=>di([{path:e,getErrorInfo:t}]),hE=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const o=t[r];for(const a in o)Pe(o,a)&&(n[a]=e(n[a],o[a]))}return n},sf=hE((e,t)=>lt(e)&&lt(t)?sf(e,t):t),bE=(hE((e,t)=>t),e=>({tag:"defaultedThunk",process:X(e)})),vE=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},lf=e=>({extract:(t,n)=>{return(r=e(n)).stype===vr.Error?Zl(t,X(r.serror)):r;var r},toString:X("val")}),vT=lf(Pa),yE=(e,t,n,r)=>r(ut(e,t).getOrThunk(()=>n(e))),yT=(e,t,n,r,o)=>{const a=i=>o.extract(t.concat([r]),i),s=i=>i.fold(()=>Pa(C.none()),l=>{return(c=o.extract(t.concat([r]),l)).stype===vr.Value?{stype:vr.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(e.tag){case"required":return i=t,c=a,ut(l=n,d=r).fold(()=>{return m=d,p=l,Zl(i,()=>'Could not find valid *required* value for "'+m+'" in '+af(p));var m,p},c);case"defaultedThunk":return yE(n,r,e.process,a);case"option":return((i,l,d)=>d(ut(i,l)))(n,r,s);case"defaultedOptionThunk":return((i,l,d,c)=>c(ut(i,l).map(u=>!0===u?d(i):u)))(n,r,e.process,s);case"mergeWithThunk":return yE(n,r,X({}),i=>{const l=sf(e.process(n),i);return a(l)})}var i,l,d,c},df=e=>({extract:(t,n)=>((r,o,a)=>{const s={},i=[];for(const l of a)vE(l,(d,c,u,m)=>{const p=yT(u,r,o,d,m);pT(p,f=>{i.push(...f)},f=>{s[c]=f})},(d,c)=>{s[d]=c(o)});return i.length>0?di(i):Pa(s)})(t,n,e),toString:()=>"obj{\n"+ze(e,n=>vE(n,(r,o,a,s)=>r+" -> "+s.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),CE=e=>({extract:(t,n)=>(e=>{const t=(r=>{const o=[],a=[];return U(r,s=>{of(s,i=>a.push(i),i=>o.push(i))}),{values:o,errors:a}})(e);return t.errors.length>0?(n=t.errors,Et(di,ki)(n)):Pa(t.values);var n})(ze(n,(o,a)=>e.extract(t.concat(["["+a+"]"]),o))),toString:()=>"array("+e.toString()+")"}),wE=(e,t)=>((e,t)=>({extract:(n,r)=>ut(r,e).fold(()=>{return a=e,Zl(n,()=>'Choice schema did not contain choice key: "'+a+'"');var a},o=>{return a=n,s=r,ut(i=t,l=o).fold(()=>{return c=i,u=l,Zl(a,()=>'The chosen schema: "'+u+'" did not exist in branches: '+af(c));var c,u},d=>d.extract(a.concat(["branch: "+l]),s));var a,s,i,l}),toString:()=>"chooseOn("+e+"). Possible values: "+Me(t)}))(e,nt(t,df)),wT=X(vT),Ql=(e,t)=>lf(n=>{const r=typeof n;return e(n)?Pa(n):di(`Expected type: ${t} but got: ${r}`)}),ET=Ql(ke,"number"),Jl=Ql(te,"string"),kT=Ql(se,"boolean"),cf=Ql(Ce,"function"),ci=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),EE=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),kE=(e,t)=>ci(e,e,{tag:"required",process:{}},t),_E=e=>kE(e,Jl),xE=e=>kE(e,cf),uf=(e,t)=>ci(e,e,{tag:"option",process:{}},t),ed=e=>uf(e,Jl),Da=(e,t,n)=>ci(e,e,bE(t),n),SE=(e,t)=>Da(e,t,ET),AE=(e,t,n)=>{return Da(e,t,(r=n,o=a=>Ke(r,a)?un.value(a):un.error(`Unsupported value: "${a}", choose one of "${r.join(", ")}".`),lf(a=>o(a).fold(di,Pa))));var r,o},mf=(e,t)=>Da(e,t,kT),ff=(e,t)=>Da(e,t,cf),_T=_E("type"),xT=xE("fetch"),gf=xE("onAction"),ST=ff("onSetup",()=>we),AT=ed("text"),NT=ed("icon"),RT=ed("tooltip"),TT=ed("label"),OT=mf("active",!1),BT=mf("enabled",!0),NE=mf("primary",!1),ui=e=>Da("type",e,Jl),LT=df([_T,_E("trigger"),SE("minChars",1),((e,t)=>ci(e,e,bE(1),wT()))("columns"),SE("maxResults",10),uf("matches",cf),xT,gf,(RE=Jl,Da("highlightOn",[],CE(RE)))]);var RE;const pf=[BT,RT,NT,AT,ST],TE=[OT].concat(pf),PT=[ff("predicate",qe),AE("scope","node",["node","editor"]),AE("position","selection",["node","selection","line"])],DT=pf.concat([ui("contextformbutton"),NE,gf,EE("original",ht)]),IT=TE.concat([ui("contextformbutton"),NE,gf,EE("original",ht)]),MT=pf.concat([ui("contextformbutton")]),FT=TE.concat([ui("contextformtogglebutton")]),UT=wE("type",{contextformbutton:DT,contextformtogglebutton:IT});df([ui("contextform"),ff("initValue",X("")),TT,((e,t)=>ci(e,e,{tag:"required",process:{}},CE(t)))("commands",UT),uf("launch",wE("type",{contextformbutton:MT,contextformtogglebutton:FT}))].concat(PT));const zT=e=>{const t=Yr(),n=Pt(!1),r=t.isSet,o=()=>{r()&&(Ct(e).autocompleter.removeDecoration(),e.dispatch("AutocompleterEnd"),n.set(!1),t.clear())},a=po(()=>(e=>{const t=e.ui.registry.getAll().popups,n=nt(t,a=>{return(s=a,((e,t,n)=>{return r=(i=t.extract([e],s=n)).stype===vr.Error?{stype:vr.Error,serror:(i=>({input:s,errors:i}))(i.serror)}:i,of(r,un.error,un.value);var s,i,r})("Autocompleter",LT,{trigger:s.ch,...s})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:X("... (only showing first ten failures)")}]):d;return ze(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+af(l.input));var l},ht);var s}),r=Xf(_i(n,a=>a.trigger)),o=xd(n);return{dataset:n,triggers:r,lookupByTrigger:a=>Ae(o,s=>s.trigger===a)}})(e)),s=i=>{var l;(l=i,t.get().map(d=>mE(e.dom,e.selection.getRng(),d.trigger).bind(c=>pE(e,a,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),m=d.selection.getRng();return(p=d.dom,f=m,h=u,xt(h.triggers,g=>mE(p,f,g))).bind(p=>pE(d,c,p));var p,f,h})(e,a))).fold(o,l=>{var d,u;d=l.context,r()||(u=d.range,Ct(e).autocompleter.addDecoration(u),t.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{t.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?o():(t.set({...c,matchLength:u.text.length}),n.get()?e.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),e.dispatch("AutocompleterStart",{lookupData:d}))))})})})};e.addCommand("mceAutocompleterReload",(i,l)=>{const d=Ue(l)?l.fetchOptions:{};s(d)}),e.addCommand("mceAutocompleterClose",o),((i,l)=>{const d=Cc(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(e,{cancelIfNecessary:o,load:s})},jT=or().browser.isSafari(),OE=e=>Vr(_(e)),BE=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},td=(e,t)=>C.from(e.getParent(t.container(),"details")),LE=(e,t)=>td(e,t).isSome(),PE=(e,t)=>{const n=t.getNode();J(n)||e.selection.setCursorLocation(n,t.offset())},DE=(e,t,n)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const o=e.dom.select("summary",r)[0];o&&(n?Jt(o):zn(o)).each(a=>PE(e,a))}else PE(e,t)},IE=(e,t,n)=>{const{dom:r,selection:o}=e,a=e.getBody();if("character"===n){const s=D.fromRangeStart(o.getRng()),i=r.getParent(s.container(),r.isBlock),l=td(r,s),d=i&&r.isEmpty(i),c=V(null==i?void 0:i.previousSibling),u=V(null==i?void 0:i.nextSibling);return!!(d&&(t?u:c)&&wa(!t,a,s).exists(m=>LE(r,m)&&!wg(l,td(r,m))))||wa(t,a,s).fold(qe,m=>{const p=td(r,m);if(LE(r,m)&&!wg(l,p)){if(t||DE(e,m,!1),i&&d){if(t&&c||!t&&u)return!0;DE(e,m,t),e.dom.remove(i)}return!0}return!1})}return!1},Ko=(e,t,n)=>{return o=t,a=n,((s,i)=>{const l=C.from(s.getParent(i.startContainer,"details")),d=C.from(s.getParent(i.endContainer,"details"));if(l.isSome()||d.isSome()){const c=l.bind(u=>C.from(s.select("summary",u)[0]));return C.some({startSummary:c,startDetails:l,endDetails:d})}return C.none()})((r=e).dom,r.selection.getRng()).fold(()=>IE(r,o,a),s=>((e,t,n,r)=>{const o=e.selection.getRng(),a=D.fromRangeStart(o),s=e.getBody();return"selection"===r?((i,l)=>{const d=l.startSummary.exists(m=>m.contains(i.startContainer)),c=l.startSummary.exists(m=>m.contains(i.endContainer)),u=l.startDetails.forall(m=>l.endDetails.forall(p=>m!==p));return(d||c)&&!(d&&c)||u})(o,t):n?(i=a,t.startSummary.exists(d=>{return c=i,zn(u=d).exists(m=>vt(m.getNode())&&pn(u,m).exists(p=>p.isEqual(c))||m.isEqual(c));var c,u})||((i,l,d)=>d.startDetails.exists(c=>mn(i,l).forall(u=>!c.contains(u.container()))))(s,a,t)):((i,l)=>l.startSummary.exists(d=>{return c=i,Jt(d).exists(m=>m.isEqual(c));var c}))(a,t)||((i,l)=>l.startDetails.exists(d=>pn(d,i).forall(c=>l.startSummary.exists(u=>!u.contains(i.container())&&u.contains(c.container())))))(a,t);var i})(r,s,o,a)||IE(r,o,a))||jT&&((r,o,a)=>{const s=r.selection,i=s.getNode(),l=s.getRng(),d=D.fromRangeStart(l);return!!T_(i)&&("selection"===a&&BE(l,i)||av(o,d,i)?OE(i):r.undoManager.transact(()=>{const c=s.getSel();let{anchorNode:u,anchorOffset:m,focusNode:p,focusOffset:f}=null!=c?c:{};const h=()=>{M(u)&&M(m)&&M(p)&&M(f)&&(null==c||c.setBaseAndExtent(u,m,p,f))},g=(v,y)=>{U(v.childNodes,E=>{Is(E)&&y.appendChild(E)})},b=r.dom.create("span",{"data-mce-bogus":"1"});g(i,b),i.appendChild(b),h(),"word"!==a&&"line"!==a||null==c||c.modify("extend",o?"right":"left",a),!s.isCollapsed()&&BE(s.getRng(),b)?OE(i):(r.execCommand(o?"ForwardDelete":"Delete"),u=null==c?void 0:c.anchorNode,m=null==c?void 0:c.anchorOffset,p=null==c?void 0:c.focusNode,f=null==c?void 0:c.focusOffset,g(b,i),h()),r.dom.remove(b)}),!0)})(e,t,n)?C.some(we):C.none();var r,o,a},ME=e=>(t,n,r={})=>{const o=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:we,inputType:n},s=Op(new InputEvent(e));return t.dispatch(e,{...s,...a,...r})},mi=ME("input"),nd=ME("beforeinput"),FE=or(),UE=FE.os,$E=UE.isMacOS()||UE.isiOS(),qT=FE.browser.isFirefox(),Ia=(e,t)=>{const n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const a=(s=>{for(;s;){if(ue(s)||W(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null})(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(n.doc.createTextNode(Bt),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const a=new Rt(t,t);let s,i=t;for(;s=a.current();){if(W(s)){o.setStart(s,0),o.setEnd(s,0);break}if(r[s.nodeName.toLowerCase()]){o.setStartBefore(s),o.setEndBefore(s);break}i=s,s=a.next()}s||(o.setStart(i,0),o.setEnd(i,0))}else vt(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),$s(e,o)},fi=(e,t)=>{const n=e.getRoot();let r,o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},hf=e=>C.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),bf=e=>{e.innerHTML='<br data-mce-bogus="1">'},gi=(e,t)=>{Qt(e).toLowerCase()===t.tagName.toLowerCase()&&((n,r,o)=>{const a=n.dom;C.from(o.style).map(a.parseStyle).each(c=>{const u={...$d(_(r)),...c};a.setStyles(r,u)});const s=C.from(o.class).map(c=>c.split(/\s+/)),i=C.from(r.className).map(c=>Ae(c.split(/\s+/),u=>""!==u));Xt(s,i,(c,u)=>{const m=Ae(u,f=>!Ke(c,f)),p=[...c,...m];a.setAttrib(r,"class",p.join(" "))});const l=["style","class"],d=Ga(o,(c,u)=>!Ke(l,u));a.setAttribs(r,d)})(e,t,As(e))},zE=(e,t,n,r,o=!0,a,s)=>{const i=e.dom,l=e.schema,d=Qt(e),c=n?n.nodeName.toUpperCase():"";let u=t;const m=l.getTextInlineElements();let p;p=a||"TABLE"===c||"HR"===c?i.create(a||d,s||{}):n.cloneNode(!1);let f=p;if(o){do{if(m[u.nodeName]){if(An(u)||Nn(u))continue;const h=u.cloneNode(!1);i.setAttrib(h,"id",""),p.hasChildNodes()?(h.appendChild(p.firstChild),p.appendChild(h)):(f=h,p.appendChild(h))}}while((u=u.parentNode)&&u!==r)}else i.setAttrib(p,"style",null),i.setAttrib(p,"class",null);return gi(e,p),bf(f),p},jE=(e,t)=>{const n=null==e?void 0:e.parentNode;return M(n)&&n.nodeName===t},HE=e=>M(e)&&/^(OL|UL|LI)$/.test(e.nodeName),vf=e=>M(e)&&/^(LI|DT|DD)$/.test(e.nodeName),rd=e=>{const t=e.parentNode;return vf(t)?t:e},od=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!ue(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},qE=e=>Kt(_i($d(_(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),VT=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),yf=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Cf=(e,t)=>M(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),wf=(e,t,n)=>W(t)?e?1===n&&t.data.charAt(n-1)===Lt?0:n:n===t.data.length-1&&t.data.charAt(n)===Lt?t.data.length:n:n,VE={insert:(e,t)=>{let n,r,o,a,s=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),d=e.selection.getRng(),c=Qt(e),u=_(d.startContainer),m=la(u,d.startOffset),p=m.exists(O=>Ri(O)&&!Co(O)),f=d.collapsed&&p,h=(O,P)=>zE(e,n,w,E,Rx(e),O,P),g=O=>{const P=wf(O,n,r);if(W(n)&&(O?P>0:P<n.data.length))return!1;if(n.parentNode===w&&s&&!O||O&&ue(n)&&n===w.firstChild)return!0;if(yf(n,"TABLE")||yf(n,"HR"))return s&&!O||!s&&O;const x=new Rt(n,w);let S;for(W(n)&&(O&&0===P?x.prev():O||P!==n.data.length||x.next());S=x.current();){if(ue(S)){if(!S.getAttribute("data-mce-bogus")){const B=S.nodeName.toLowerCase();if(l[B]&&"br"!==B)return!1}}else if(W(S)&&!Gr(S.data))return!1;O?x.prev():x.next()}return!0},b=()=>{let O;return O=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==k?h(c):h(),((P,x)=>{const S=Tx(P);return!ne(x)&&(te(S)?Ke(G.explode(S),x.nodeName.toLowerCase()):S)})(e,a)&&Cf(i,a)&&i.isEmpty(w,void 0,{includeZwsp:!0})?O=i.split(a,w):i.insertAfter(O,w),Ia(e,O),O};hl(i,d).each(O=>{d.setStart(O.startContainer,O.startOffset),d.setEnd(O.endContainer,O.endOffset)}),n=d.startContainer,r=d.startOffset;const v=!(!t||!t.shiftKey),y=!(!t||!t.ctrlKey);ue(n)&&n.hasChildNodes()&&!f&&(s=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=s&&W(n)?n.data.length:0);const E=fi(i,n);if(!E||((O,P)=>{const x=O.dom.getParent(P,"ol,ul,dl");return null!==x&&"false"===O.dom.getContentEditableParent(x)})(e,n))return;v||(n=((O,P,x,S,B)=>{var $,ee;const K=O.dom,be=null!==($=fi(K,S))&&void 0!==$?$:K.getRoot();let pe=K.getParent(S,K.isBlock);if(!pe||!Cf(K,pe)){if(pe=pe||be,!pe.hasChildNodes()){const de=K.create(P);return gi(O,de),pe.appendChild(de),x.setStart(de,0),x.setEnd(de,0),de}let Ee,Te=S;for(;Te&&Te.parentNode!==pe;)Te=Te.parentNode;for(;Te&&!K.isBlock(Te);)Ee=Te,Te=Te.previousSibling;const re=null===(ee=null==Ee?void 0:Ee.parentElement)||void 0===ee?void 0:ee.nodeName;if(Ee&&re&&O.schema.isValidChild(re,P.toLowerCase())){const de=Ee.parentNode,Ne=K.create(P);for(gi(O,Ne),de.insertBefore(Ne,Ee),Te=Ee;Te&&!K.isBlock(Te);){const N=Te.nextSibling;Ne.appendChild(Te),Te=N}x.setStart(S,B),x.setEnd(S,B)}}return S})(e,c,d,n,r));let w=i.getParent(n,i.isBlock)||i.getRoot();a=M(null==w?void 0:w.parentNode)?i.getParent(w.parentNode,i.isBlock):null,o=w?w.nodeName.toUpperCase():"";const k=a?a.nodeName.toUpperCase():"";if("LI"!==k||y||(w=a,a=a.parentNode,o=k),ue(a)&&(O=e,x=w,!v&&x.nodeName.toLowerCase()===Qt(O)&&O.dom.isEmpty(x)&&((S,B,$)=>{let ee=B;for(;ee&&ee!==S&&V(ee.nextSibling);){const be=ee.parentElement;if(!be||(K=be,!Pe(O.schema.getTextBlockElements(),K.nodeName.toLowerCase())))return Gd(be);ee=be}var K;return!1})(O.getBody(),x)))return((O,P,x)=>{var S,B,$;const ee=P(Qt(O)),K=O.dom.getParent(x,Gd);K&&(O.dom.insertAfter(ee,K),Ia(O,ee),(null!==($=null===(B=null===(S=x.parentElement)||void 0===S?void 0:S.childNodes)||void 0===B?void 0:B.length)&&void 0!==$?$:0)>1&&O.dom.remove(x))})(e,h,w);var O,x;if(/^(LI|DT|DD)$/.test(o)&&ue(a)&&i.isEmpty(w))return void((O,P,x,S,B)=>{const $=O.dom,ee=O.selection.getRng(),K=x.parentNode;if(x===O.getBody()||!K)return;var be;HE(be=x)&&HE(be.parentNode)&&(B="LI");const pe=vf(S)?qE(S):void 0;let Ee=vf(S)&&pe?P(B,{style:qE(S)}):P(B);if(od(x,S,!0)&&od(x,S,!1))if(jE(x,"LI")){const Te=rd(x);$.insertAfter(Ee,Te),(null===(de=(re=x).parentNode)||void 0===de?void 0:de.firstChild)===re?$.remove(Te):$.remove(x)}else $.replace(Ee,x);else if(od(x,S,!0))jE(x,"LI")?($.insertAfter(Ee,rd(x)),Ee.appendChild($.doc.createTextNode(" ")),Ee.appendChild(x)):K.insertBefore(Ee,x),$.remove(S);else if(od(x,S,!1))$.insertAfter(Ee,rd(x)),$.remove(S);else{x=rd(x);const Te=ee.cloneRange();Te.setStartAfter(S),Te.setEndAfter(x);const re=Te.extractContents();if("LI"===B&&((de,Ne)=>de.firstChild&&"LI"===de.firstChild.nodeName)(re)){const de=Ae(ze(Ee.children,_),pt(Ti("br")));Ee=re.firstChild,$.insertAfter(re,x),U(de,Ne=>zd(_(Ee),Ne)),pe&&Ee.setAttribute("style",pe)}else $.insertAfter(re,x),$.insertAfter(Ee,x);$.remove(S)}var re,de;Ia(O,Ee)})(e,h,a,w,c);if(!(f||w!==e.getBody()&&Cf(i,w)))return;const A=w.parentNode;let T;if(f)T=h(c),m.fold(()=>{St(u,_(T))},O=>{gn(O,_(T))}),e.selection.setCursorLocation(T,0);else if(ga(w))T=Jd(w),i.isEmpty(w)&&bf(w),gi(e,T),Ia(e,T);else if(g(!1))T=b();else if(g(!0)&&A){T=A.insertBefore(h(),w);const O=_(d.startContainer).dom.hasChildNodes()&&d.collapsed;Ia(e,yf(w,"HR")||O?T:w)}else{const O=(x=>{const S=x.cloneRange();return S.setStart(x.startContainer,wf(!0,x.startContainer,x.startOffset)),S.setEnd(x.endContainer,wf(!1,x.endContainer,x.endOffset)),S})(d).cloneRange();O.setEndAfter(w);const P=O.extractContents();(x=>{U(Zg(_(x),_n),S=>{const B=S.dom;B.nodeValue=wn(B.data)})})(P),(x=>{let S=x;do{W(S)&&(S.data=S.data.replace(/^[\r\n]+/,"")),S=S.firstChild}while(S)})(P),T=P.firstChild,i.insertAfter(P,w),((x,S,B)=>{var $;const ee=[];if(!B)return;let K=B;for(;K=K.firstChild;){if(x.isBlock(K))return;ue(K)&&!S[K.nodeName.toLowerCase()]&&ee.push(K)}let be=ee.length;for(;be--;)K=ee[be],(!K.hasChildNodes()||K.firstChild===K.lastChild&&""===(null===($=K.firstChild)||void 0===$?void 0:$.nodeValue)||VT(x,K))&&x.remove(K)})(i,l,T),((x,S)=>{S.normalize();const B=S.lastChild;(!B||ue(B)&&/^(left|right)$/gi.test(x.getStyle(B,"float",!0)))&&x.add(S,"br")})(i,w),i.isEmpty(w)&&bf(w),T.normalize(),i.isEmpty(T)?(i.remove(T),b()):(gi(e,T),Ia(e,T))}i.setAttrib(T,"id",""),e.dispatch("NewBlock",{newBlock:T})},fakeEventName:"insertParagraph"},WE=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),$s(e,r)},WT=(e,t)=>{const n=Ot("br");gn(_(t),n),e.undoManager.add()},GT=(e,t)=>{KT(e.getBody(),t)||Or(_(t),Ot("br"));const n=Ot("br");Or(_(t),n),WE(e,n.dom,!1),e.undoManager.add()},KT=(e,t)=>{return n=D.after(t),!!vt(n.getNode())||mn(e,D.after(t)).map(r=>vt(r.getNode())).getOr(!1);var n},GE=e=>e&&"A"===e.nodeName&&"href"in e,YT=e=>e.fold(qe,GE,GE,qe),XT=(e,t)=>{t.fold(we,oe(WT,e),oe(GT,e),we)},KE={insert:(e,t)=>{const n=(r=>{const o=oe(Ho,r),a=D.fromRangeStart(r.selection.getRng());return hr(o,r.getBody(),a).filter(YT)})(e);n.isSome()?n.each(oe(XT,e)):((r,o)=>{const s=r.dom,i=r.selection.getRng();let l,d=!1;hl(s,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(ue(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&W(u)?u.data.length:0}let m=s.getParent(u,s.isBlock);const p=m&&m.parentNode?s.getParent(m.parentNode,s.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(m=p),W(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new Rt(b,v);let E;const w=g.getNonEmptyElements();for(;E=y.next();)if(w[E.nodeName.toLowerCase()]||W(E)&&E.length>0)return!0;return!1})(r.schema,u,m||s.getRoot())||(l=s.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=s.create("br"),xc(s,i,l),WE(r,l,d),r.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},YE=(e,t)=>hf(e).filter(n=>t.length>0&&Gn(_(n),t)).isSome(),En=dr([{br:[]},{block:[]},{none:[]}]),ZT=(e,t)=>{return YE(n=e,Nx(n));var n},XE=e=>(t,n)=>hf(t).filter(o=>cs(_(o))).isSome()===e,ZE=(e,t)=>(n,r)=>hf(n).fold(X(""),s=>s.nodeName.toUpperCase())===e.toUpperCase()===t,QT=e=>{const t=fi(e.dom,e.selection.getStart());return ne(t)},pi=e=>ZE("pre",e),ad=e=>(t,n)=>xx(t)===e,JT=(e,t)=>{return YE(n=e,Ax(n));var n},sd=(e,t)=>t,eO=e=>{const t=Qt(e),n=fi(e.dom,e.selection.getStart());return M(n)&&e.schema.isValidChild(n.nodeName,t)},tO=e=>{const t=e.selection.getRng(),n=_(t.startContainer),r=la(n,t.startOffset).map(o=>Ri(o)&&!Co(o));return t.collapsed&&r.getOr(!0)},Dn=(e,t)=>(n,r)=>Kt(e,(o,a)=>o&&a(n,r),!0)?C.some(t):C.none(),id=(e,t,n)=>{t.selection.isCollapsed()||t.execCommand("delete"),M(n)&&nd(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),M(n)&&mi(t,e.fakeEventName))},QE=(e,t)=>{const n=()=>id(KE,e,t),r=()=>id(VE,e,t),o=(a=e,s=t,WC([Dn([ZT],En.none()),Dn([pi(!0),QT],En.none()),Dn([ZE("summary",!0)],En.br()),Dn([pi(!0),ad(!1),sd],En.br()),Dn([pi(!0),ad(!1)],En.block()),Dn([pi(!0),ad(!0),sd],En.block()),Dn([pi(!0),ad(!0)],En.br()),Dn([XE(!0),sd],En.br()),Dn([XE(!0)],En.block()),Dn([JT],En.br()),Dn([sd],En.br()),Dn([eO],En.block()),Dn([tO],En.block())],[a,!(!s||!s.shiftKey)]).getOr(En.none()));var a,s;switch(Sx(e)){case"linebreak":o.fold(n,n,we);break;case"block":o.fold(r,r,we);break;case"invert":o.fold(r,n,we);break;default:o.fold(n,r,we)}},JE=or(),nO=JE.os.isiOS()&&JE.browser.isSafari(),e1=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{QE(e,t)}))},rO=or(),t1=e=>e.stopImmediatePropagation(),n1=e=>e.keyCode===ae.PAGE_UP||e.keyCode===ae.PAGE_DOWN,r1=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",t1,!0):!n&&e.get()&&t.off("NodeChange",t1),e.set(n)},o1=(e,t)=>{const n=t.container(),r=t.offset();return W(n)?(n.insertData(r,e),C.some(D(n,r+e.length))):ol(t).map(o=>{const a=ia(e);return t.isAtEnd()?Or(o,a):gn(o,a),D(a.dom,e.length)})},a1=oe(o1,Bt),s1=oe(o1," "),i1=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},oO=e=>{const t=D.fromRangeStart(e.selection.getRng()),n=_(e.getBody());if(e.selection.isCollapsed()){const r=oe(Ho,e),o=D.fromRangeStart(e.selection.getRng());return hr(r,e.getBody(),o).bind((a=n,s=>s.fold(i=>pn(a.dom,D.before(i)),i=>Jt(i),i=>zn(i),i=>mn(a.dom,D.after(i))))).map(a=>()=>{return(s=n,i=t,l=e.schema,d=>W0(s,d,l)?a1(i):s1(i))(a).each(i1(e));var s,i,l})}var a;return C.none()},aO=e=>{return aa(Ge.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const r=_(e.getBody());var o,a,s;e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),(o=r,a=D.fromRangeStart(e.selection.getRng()),s=e.schema,W0(o,a,s)?a1(a):s1(a)).each(i1(e))});var t,n},sO=e=>IS(e)?[{keyCode:ae.TAB,action:xe(lE,e,!0)},{keyCode:ae.TAB,shiftKey:!0,action:xe(lE,e,!1)}]:[],iO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),zT(e),pr(e))return Pt(null);{const t=(e=>{const t=Pt(null),n=oe(Ho,e);return e.on("NodeChange",r=>{Ns(e)&&(((o,a,s)=>{const i=ze(Zt(_(a.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=Ae(i,o),d=Ae(s,o);U(ta(l,d),oe(gw,!1)),U(ta(d,l),oe(gw,!0))})(n,e.dom,r.parents),((o,a)=>{const s=a.get();if(o.selection.isCollapsed()&&!o.composing&&s){const i=D.fromRangeStart(o.selection.getRng());D.isTextPosition(i)&&!Zd(l=i)&&!Qd(l)&&(Wl(o,((e,t)=>{return D.isTextPosition(t)?(r=t,Ih(n=e)&&r.container()===n?((o,a)=>{const s=Fh(o.data.substr(0,a.offset())),i=Fh(o.data.substr(a.offset()));return(s.text+i.text).length>0?(Uh(o),D(o,a.offset()-s.count)):a})(n,r):$h(n,r)):((n,r)=>r.container()===n.parentNode?((o,a)=>{const s=a.container(),i=((l,d)=>{const c=jr(l,d);return-1===c?C.none():C.some(c)})(Se(s.childNodes),o).map(l=>l<a.offset()?D(s,a.offset()-1):a).getOr(a);return Do(o),i})(n,r):$h(n,r))(e,t);var n,r})(s,i)),a.set(null))}var l})(e,t),((o,a,s,i)=>{if(a.selection.isCollapsed()){const l=Ae(i,o);U(l,d=>{const c=D.fromRangeStart(a.selection.getRng());hr(o,a.getBody(),c).bind(u=>pw(a,s,u))})}})(n,e,t,r.parents))}),t})(e);return(n=e).on("beforeinput",r=>{n.selection.isEditable()&&!ct(r.getTargetRanges(),o=>!c0(n.dom,o))||r.preventDefault()}),(n=>{n.on("keyup compositionstart",oe(sT,n))})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((a,s,i)=>{const l=Ge.os.isMacOS()||Ge.os.isiOS();ii([{keyCode:ae.RIGHT,action:xe($w,a,!0)},{keyCode:ae.LEFT,action:xe($w,a,!1)},{keyCode:ae.UP,action:xe(zw,a,!1)},{keyCode:ae.DOWN,action:xe(zw,a,!0)},...l?[{keyCode:ae.UP,action:xe(Kl,a,!1),metaKey:!0,shiftKey:!0},{keyCode:ae.DOWN,action:xe(Kl,a,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ae.RIGHT,action:xe(aE,a,!0)},{keyCode:ae.LEFT,action:xe(aE,a,!1)},{keyCode:ae.UP,action:xe(Jm,a,!1)},{keyCode:ae.DOWN,action:xe(Jm,a,!0)},{keyCode:ae.UP,action:xe(Jm,a,!1)},{keyCode:ae.UP,action:xe(qw,a,!1)},{keyCode:ae.DOWN,action:xe(qw,a,!0)},{keyCode:ae.RIGHT,action:xe(Kw,a,!0)},{keyCode:ae.LEFT,action:xe(Kw,a,!1)},{keyCode:ae.UP,action:xe(Yw,a,!1)},{keyCode:ae.DOWN,action:xe(Yw,a,!0)},{keyCode:ae.RIGHT,action:xe(hw,a,s,!0)},{keyCode:ae.LEFT,action:xe(hw,a,s,!1)},{keyCode:ae.RIGHT,ctrlKey:!l,altKey:l,action:xe(KR,a,s)},{keyCode:ae.LEFT,ctrlKey:!l,altKey:l,action:xe(YR,a,s)},{keyCode:ae.UP,action:xe(Hw,a,!1)},{keyCode:ae.DOWN,action:xe(Hw,a,!0)}],i).each(d=>{i.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{let o=!1;n.on("keydown",a=>{o=a.keyCode===ae.BACKSPACE,a.isDefaultPrevented()||((s,i,l)=>{const d=l.keyCode===ae.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=s.selection.isCollapsed(),u=c?"character":"selection",m=p=>c?p?"word":"line":"selection";Gw([{keyCode:ae.BACKSPACE,action:xe(Ow,s)},{keyCode:ae.BACKSPACE,action:xe(Mm,s,!1)},{keyCode:ae.DELETE,action:xe(Mm,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Pm,s,!1)},{keyCode:ae.DELETE,action:xe(Pm,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Wm,s,i,!1)},{keyCode:ae.DELETE,action:xe(Wm,s,i,!0)},{keyCode:ae.BACKSPACE,action:xe(zu,s,!1)},{keyCode:ae.DELETE,action:xe(zu,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Ko,s,!1,u)},{keyCode:ae.DELETE,action:xe(Ko,s,!0,u)},...$E?[{keyCode:ae.BACKSPACE,altKey:!0,action:xe(Ko,s,!1,m(!0))},{keyCode:ae.DELETE,altKey:!0,action:xe(Ko,s,!0,m(!0))},{keyCode:ae.BACKSPACE,metaKey:!0,action:xe(Ko,s,!1,m(!1))}]:[{keyCode:ae.BACKSPACE,ctrlKey:!0,action:xe(Ko,s,!1,m(!0))},{keyCode:ae.DELETE,ctrlKey:!0,action:xe(Ko,s,!0,m(!0))}],{keyCode:ae.BACKSPACE,action:xe(Fm,s,!1)},{keyCode:ae.DELETE,action:xe(Fm,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Ym,s,!1)},{keyCode:ae.DELETE,action:xe(Ym,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Bm,s,!1)},{keyCode:ae.DELETE,action:xe(Bm,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Om,s,!1)},{keyCode:ae.DELETE,action:xe(Om,s,!0)},{keyCode:ae.BACKSPACE,action:xe(Gm,s,!1)},{keyCode:ae.DELETE,action:xe(Gm,s,!0)}],l).filter(p=>s.selection.isEditable()).each(p=>{l.preventDefault(),nd(s,d).isDefaultPrevented()||(p(),mi(s,d))})})(n,r,a)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(i=a,l=o,ii([{keyCode:ae.BACKSPACE,action:xe($C,s=n)},{keyCode:ae.DELETE,action:xe($C,s)},...$E?[{keyCode:ae.BACKSPACE,altKey:!0,action:xe(si,s)},{keyCode:ae.DELETE,altKey:!0,action:xe(si,s)},...l?[{keyCode:qT?224:91,action:xe(si,s)}]:[]]:[{keyCode:ae.BACKSPACE,ctrlKey:!0,action:xe(si,s)},{keyCode:ae.DELETE,ctrlKey:!0,action:xe(si,s)}]],i)),o=!1})})(e,t),(n=>{let r=C.none();n.on("keydown",o=>{var a;o.keyCode===ae.ENTER&&(nO&&(a=>{if(!a.collapsed)return!1;const s=a.startContainer;if(W(s)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=s.data.charAt(a.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=C.some((a=n).selection.getBookmark()),a.undoManager.add()):e1(n,o))}),n.on("keyup",o=>{o.keyCode===ae.ENTER&&r.each(()=>{return s=o,(a=n).undoManager.undo(),r.fold(we,i=>a.selection.moveToBookmark(i)),e1(a,s),void(r=C.none());var a,s})})})(e),(n=>{n.on("keydown",r=>{var o,a;r.isDefaultPrevented()||(a=r,Gw([{keyCode:ae.SPACEBAR,action:xe(oO,o=n)},{keyCode:ae.SPACEBAR,action:xe(aO,o)}],a).each(s=>{a.preventDefault(),nd(o,"insertText",{data:" "}).isDefaultPrevented()||(s(),mi(o,"insertText",{data:" "}))}))})})(e),(n=>{n.on("input",r=>{r.isComposing||(o=>{const a=_(o.getBody());o.selection.isCollapsed()&&((e,t,n)=>{const r=t.container();if(!W(r))return C.none();if((o=>{const a=o.container();return W(a)&&Yt(a.data,Bt)})(t)){const o=Y0(e,r,!1,n)||(a=>{const s=a.data,i=(l=>{const d=l.split("");return ze(d,(c,u)=>ll(c)&&u>0&&u<d.length-1&&qc(d[u-1])&&qc(d[u+1])?" ":c).join("")})(s);return i!==s&&(a.data=i,!0)})(r)||X0(e,r,!1,n);return aa(o,t)}if(Ru(e,t,n)){const o=Y0(e,r,!0,n)||X0(e,r,!0,n);return aa(o,t)}return C.none()})(a,D.fromRangeStart(o.selection.getRng()),o.schema).each(s=>{o.selection.setRng(s.toRange())})})(n)})})(e),(n=>{n.on("keydown",r=>{var a;r.isDefaultPrevented()||(a=r,ii([...sO(n)],a).each(s=>{a.preventDefault()}))})})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((a,s,i)=>{const l=Ge.os.isMacOS()||Ge.os.isiOS();ii([{keyCode:ae.END,action:xe(jw,a,!0)},{keyCode:ae.HOME,action:xe(jw,a,!1)},...l?[]:[{keyCode:ae.HOME,action:xe(Kl,a,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ae.END,action:xe(Kl,a,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ae.END,action:xe(Xw,a,!0)},{keyCode:ae.HOME,action:xe(Xw,a,!1)},{keyCode:ae.END,action:xe(Gl,a,!0,s)},{keyCode:ae.HOME,action:xe(Gl,a,!1,s)}],i).each(d=>{i.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{if(rO.os.isMacOS())return;const o=Pt(!1);n.on("keydown",a=>{n1(a)&&r1(o,n,!0)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(l=a,ii([{keyCode:ae.PAGE_UP,action:xe(Gl,s=n,!1,i=r)},{keyCode:ae.PAGE_DOWN,action:xe(Gl,s,!0,i)}],l)),n1(a)&&o.get()&&(r1(o,n,!1),n.nodeChanged())})})(e,t),t}var n};class lO{constructor(t){let n;this.lastPath=[],this.editor=t;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const a=t.selection.getRng(),s={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!==o.type&&lu(s,n)||t.dispatch("SelectionChange"),n=s}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&dl(t)&&!r.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&dl(t)&&("IMG"===t.selection.getNode().nodeName?Tn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!aS(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const a=[];this.editor.dom.getParent(r,s=>s===o||(a.push(s),!1)),this.editor.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const r=this.editor,o=mo(r.dom.getParents(t,dt,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const l1=Es("image"),Ef=Es("event"),ld=e=>t=>{t[Ef]=e},d1=ld(0),dO=ld(2),cO=ld(1),kf=Es("mode"),dd=e=>t=>{t[kf]=e},c1=(e,t)=>dd(t)(e),u1=dd(0),_f=dd(2),mO=dd(1),m1=e=>t=>C.from(t[kf]).exists(r=>r===e),Ma=m1(0),f1=m1(1),fO=["none","copy","link","move"],gO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xf=()=>{const e=new window.DataTransfer;let t="move",n="all";const r={get dropEffect(){return t},set dropEffect(o){Ke(fO,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){(e=>C.from(e[Ef]).exists(n=>0===n))(r)&&Ke(gO,o)&&(n=o)},get items(){return o=r,a=e.items,{...a,get length(){return a.length},add:(s,i)=>{if(Ma(o)){if(!te(s))return a.add(s);if(!J(i))return a.add(s,i)}return null},remove:s=>{Ma(o)&&a.remove(s)},clear:()=>{Ma(o)&&a.clear()}};var o,a},get files(){return f1(r)?Object.freeze({length:0,item:o=>null}):e.files},get types(){return e.types},setDragImage:(o,a,s)=>{Ma(r)&&(r[l1]={image:o,x:a,y:s},e.setDragImage(o,a,s))},getData:o=>f1(r)?"":e.getData(o),setData:(o,a)=>{Ma(r)&&e.setData(o,a)},clearData:o=>{Ma(r)&&e.clearData(o)}};return u1(r),r},g1=(e,t)=>e.setData("text/html",t),p1="x-tinymce/html",cd=X(p1),Sf="\x3c!-- "+p1+" --\x3e",pO=e=>Sf+e,h1=e=>-1!==e.indexOf(Sf),b1="%MCEPASTEBIN%",Af=e=>e.dom.get("mcepastebin"),hO=e=>M(e)&&"mcepastebin"===e.id,v1=e=>e===b1,y1=(e,t)=>(G.each(t,n=>{e=Gt(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),C1=e=>y1(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,r)=>n||r?Bt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),w1=(e,t)=>({content:e,cancelled:t}),Nf=(e,t)=>(e.insertContent(t,{merge:_S(e),paste:!0}),!0),Rf=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),bO=(e,t,n)=>{return!(e.selection.isCollapsed()||!Rf(t)||(r=e,o=t,a=n,r.undoManager.extra(()=>{a(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,a},vO=(e,t,n)=>{return r=e,!(!Rf(o=t)||!ct(Dh(r),a=>Rd(o.toLowerCase(),`.${a.toLowerCase()}`)))&&((r,o,a)=>(r.undoManager.extra(()=>{a(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(e,t,n);var r,o},yO=(e=>{let t=0;return()=>"mceclip"+t++})(),CO=e=>{const t=xf();return g1(t,e),_f(t),t},E1=(e,t,n,r,o)=>{const a=((d,c,u)=>{const m=d.dispatch("PastePreProcess",{content:c,internal:u}),p=((f,h)=>{const g=Ra({sanitize:Pc(f),sandbox_iframes:Dc(f)},f.schema);g.addNodeFilter("meta",v=>{G.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return eo({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return w1(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):w1(p,m.isDefaultPrevented())})(e,t,n);if(!a.cancelled){const s=a.content,i=()=>{return l=e,d=s,void(r||!xS(l)?Nf(l,d):(u=l,m=d,G.each([bO,vO,Nf],p=>!p(u,m,Nf))));var l,d,u,m};o?nd(e,"insertFromPaste",{dataTransfer:CO(s)}).isDefaultPrevented()||(i(),mi(e,"insertFromPaste")):i()}},ud=(e,t,n,r)=>{const o=n||h1(t);E1(e,t.replace(Sf,""),o,!1,r)},Tf=(e,t,n)=>{const r=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((a,s,i)=>{const l=a.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=_i(p,(g,b)=>b+'="'+No.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(s,i),c="</"+s+">",u=ze(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:ze(u,m=>d+m+c).join("")})(cp(r,AS(e)),Qt(e),As(e));E1(e,o,!1,!0,n)},k1=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},ao=(e,t)=>t in e&&e[t].length>0,_1=e=>ao(e,"text/html")||ao(e,"text/plain"),x1=(e,t,n)=>{const r="paste"===t.type?t.clipboardData:t.dataTransfer;var o;if(nl(e)&&r){const a=((s,i)=>{const l=i.items?cn(Se(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?Se(i.files):[];return Ae(l.length>0?l:d,(c=>{const u=Dh(c);return m=>Ut(m.type,"image/")&&ct(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return G.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(s))})(e,r);if(a.length>0)return t.preventDefault(),(o=a,Promise.all(ze(o,s=>py(s).then(i=>({file:s,uri:i}))))).then(s=>{n&&e.selection.setRng(n),U(s,i=>{var l,d;l=e,dm((d=i).uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,g=h.getByData(p,u),b=null!=g?g:((v,y,E,w)=>{const k=yO(),A=_h(v)&&M(E.name),T=A?((x,S)=>{const B=S.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return M(B)?x.dom.encode(B[1]):void 0})(v,E.name):k,P=y.create(k,E,w,T,A?E.name:void 0);return y.add(P),P})(l,h,f,p);ud(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},Of=(e,t,n,r,o)=>{let a=C1(n);const s=ao(t,cd())||h1(n),i=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),l=Rf(a);(v1(a)||!a.length||i&&!l)&&(r=!0),(r||l)&&(a=ao(t,"text/plain")&&i?t["text/plain"]:(d=>{const c=Kr(),u=Ra({},c);let m="";const p=c.getVoidElements(),f=G.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in c.getVoidElements())){let E=b.firstChild;if(E)do{g(E)}while(E=E.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return d=y1(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(a)),v1(a)||(r?Tf(e,a,o):ud(e,a,s,o))},S1=(e,t,n,r)=>{((o,a,s)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",a),o.setData("text/plain",s),o.setData(cd(),a),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},A1=e=>(t,n)=>{const{dom:r,selection:o}=e,a=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=r.create("div",{contenteditable:"true"},t);r.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(s),r.add(e.getBody(),a);const i=o.getRng();s.focus();const l=r.createRng();l.selectNodeContents(s),o.setRng(l),Tn.setEditorTimeout(e,()=>{o.setRng(i),r.remove(a),n()},0)},N1=e=>({html:pO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),R1=e=>{return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},T1=(e,t)=>{var n,r;return $o.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(r=t.clientY)&&void 0!==r?r:0,e.getDoc())},O1=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},EO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,B1=e=>G.trim(e).replace(EO,gs).toLowerCase(),kO=(e,t,n)=>{const r=ES(e);if(n||"all"===r||!kS(e))return t;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=a.parseStyle(a.decode(d)),m={};for(let f=0;f<o.length;f++){const h=u[o[f]];let g=h,b=a.getStyle(s,o[f],!0);/color/.test(o[f])&&(g=B1(g),b=B1(b)),b!==g&&(m[o[f]]=h)}const p=a.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(a,s,i,l)=>s+' style="'+i+'"'+l)},xO=vt,L1=W,SO=e=>ft(e.dom),P1=e=>t=>Xe(_(e),t),D1=(e,t)=>vo(_(e),SO,P1(t)),I1=(e,t,n)=>{const r=new Rt(e,t),o=n?r.next.bind(r):r.prev.bind(r);let a=e;for(let s=n?e:o();s&&!xO(s);s=o())$n(s)&&(a=s);return a};var Fa;!function(e){e.Before="before",e.After="after"}(Fa||(Fa={}));const NO=(e,t)=>Math.abs(e.left-t),RO=(e,t)=>Math.abs(e.right-t),OO=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Bf=(e,t,n,r)=>{const o=c=>$n(c.node)?C.some(c):ue(c.node)?Bf(Se(c.node.childNodes),t,n,!1):C.none(),a=(c,u)=>{const m=F(c,(p,f)=>u(p,t,n)-u(f,t,n));return xt(m,o).map(p=>{return r&&!W(p.node)&&m.length>1?(f=p,h=m[1],g=u,o(h).filter(b=>Math.abs(g(f,t,n)-g(b,t,n))<2&&W(b.node))).getOr(p):p;var f,h,g})},[s,i]=((e,t)=>{return(n=Ae(e,n=>{return(r=t)>=(o=n).top&&r<=o.bottom;var r,o}),Kt(n,(r,o)=>r.fold(()=>C.some(o),a=>{const s=Math.min(o.left,a.left),i=Math.min(o.top,a.top),l=Math.max(o.right,a.right),d=Math.max(o.bottom,a.bottom);return C.some({top:i,right:l,bottom:d,left:s,width:l-s,height:d-i})}),C.none())).fold(()=>[[],e],n=>{const{pass:r,fail:o}=kn(e,a=>((s,i)=>{const l=(d=s,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(s.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(s,i)&&l>.5})(a,n));return[r,o]});var n})(iw(e),n),{pass:l,fail:d}=kn(i,c=>c.top<n);return a(s,OO).orThunk(()=>a(d,Gp)).orThunk(()=>a(l,Gp))},M1=(e,t,n)=>((r,o,a)=>{const s=_(r),l=((e,t,n)=>C.from(e.dom.elementFromPoint(t,n)).map(es))(Rr(s),o,a).filter(d=>Nr(s,d)).getOr(s);return((d,c,u,m)=>{const p=(f,h)=>{const g=Ae(f.dom.childNodes,pt(b=>ue(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>Bf(g,u,m,!0),b=>{const v=Ae(g,y=>y!==b.dom);return Bf(v,u,m,!0)}).orThunk(()=>(Xe(f,d)?C.none():Oi(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(s,l,o,a)})(e,t,n).filter(r=>Ts(r.node)).map(r=>{return{node:(o=r).node,position:NO(o,a=t)<RO(o,a)?Fa.Before:Fa.After};var o,a}),F1=e=>{var t,n;const r=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,s=o.defaultView;return{top:r.top+(null!==(t=null==s?void 0:s.scrollY)&&void 0!==t?t:0)-a.clientTop,left:r.left+(null!==(n=null==s?void 0:s.scrollX)&&void 0!==n?n:0)-a.clientLeft}},U1=e=>({target:e,srcElement:e}),$1=ft,LO=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})($1,Un),PO=(e,t,n,r)=>{const o=e.dom,a=t.cloneNode(!0);o.setStyles(a,{width:n,height:r}),o.setAttrib(a,"data-mce-selected",null);const s=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),s.appendChild(a),s},md=(e,t)=>n=>()=>{n.scroll({[e]:("left"===e?n.scrollX:n.scrollY)+t,behavior:"smooth"})},z1=md("left",-32),j1=md("left",32),H1=md("top",-32),q1=md("top",32),V1=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},hi=(e,t,n,r,o)=>{"dragstart"===t&&g1(r,e.dom.getOuterHTML(n));const a=((e,t,n,r)=>{const o=((a,s)=>{const i=(l=>{const d=xf(),c=C.from(l[kf]);return _f(l),d1(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=l,C.from(u[l1])).each(u=>d.setDragImage(u.image,u.x,u.y)),U(l.types,u=>{"Files"!==u&&d.setData(u,l.getData(u))}),U(l.files,u=>d.items.add(u)),(u=>C.from(u[Ef]))(l).each(u=>{var m;m=d,ld(u)(m)}),c.each(u=>{c1(l,u),c1(d,u)}),d;var u})(a);return"dragstart"===s?(d1(i),u1(i)):"drop"===s?(dO(i),_f(i)):(cO(i),mO(i)),i})(n,e);return J(r)?((a,s,i)=>{const l=qt("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:a,composedPath:l,initEvent:l,preventDefault:we,stopImmediatePropagation:we,stopPropagation:we,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...U1(s)}})(e,t,o):(a=e,s=r,i=t,l=o,{...s,dataTransfer:l,type:a,...U1(i)});var a,s,i,l})(t,n,r,o);return e.dispatch(t,a)},W1=(e,t,n)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>hi(t,"dragend",r.element,r.dataTransfer),o=>hi(t,"dragend",r.element,r.dataTransfer,o))}),G1(e)},G1=e=>{e.on(t=>{t.intervalId.clear(),V1(t.ghost)}),e.clear()},bi=ft,K1=(e,t)=>qo(e.getBody(),t),MO=e=>{const t=e.selection,n=e.dom,r=e.getBody(),o=((e,t,n,r)=>{const o=Yr();let a,s;const i=Qt(e),l=e.dom,d=()=>{(c=>{var u,m;const p=Zt(_(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(Hi(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,ji(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(t),s&&(Do(s),s=null),o.on(c=>{l.remove(c.caret),o.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(c,u)=>{let m;if(d(),qS(u))return null;if(!n(u))return s=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(Lt),b=p.parentNode;if(f){const v=p.previousSibling;if(fa(v)){if(xn(v))return v;if(Hi(v))return v.splitText(v.data.length-1)}null==b||b.insertBefore(g,p)}else{const v=p.nextSibling;if(fa(v)){if(xn(v))return v;if(ji(v))return v.splitText(1),v}p.nextSibling?null==b||b.insertBefore(g,p.nextSibling):null==b||b.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),Rs(s.nextSibling)?(m.setStart(s,0),m.setEnd(s,0)):(m.setStart(s,1),m.setEnd(s,1)),m;{const p=((g,b,v)=>{var y;const E=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);E.setAttribute("data-mce-caret",v?"before":"after"),E.setAttribute("data-mce-bogus","all"),E.appendChild(ms().dom);const w=b.parentNode;return v?null==w||w.insertBefore(E,b):b.nextSibling?null==w||w.insertBefore(E,b.nextSibling):null==w||w.appendChild(E),E})(i,u,c),f=zh(t,u,c);l.setStyle(p,"top",f.top),s=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(t,h),o.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),a=setInterval(()=>{o.on(g=>{r()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(c=>{const u=zh(t,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(a)}})(e,r,n.isBlock,()=>zo(e)),a="sel-"+n.uniqueId(),s="data-mce-selected";let i;const l=g=>g!==r&&(bi(g)||lr(g))&&n.isChildOf(g,r)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>e.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&t.scrollIntoView(b,-1===g),o.show(v,b)),c=g=>xn(g)||ji(g)||Hi(g),u=g=>c(g.startContainer)||c(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const w=b?1:-1,k=Ps(w,r,g),A=k.getNode(!b);if(M(A)){if(Ts(A))return d(w,A,!!b&&!k.isAtEnd(),!1);if(Wr(A)&&ft(A.nextSibling)){const O=n.createRng();return O.setStart(A,0),O.setEnd(A,0),O}}const T=k.getNode(b);if(M(T)){if(Ts(T))return d(w,T,!b&&!k.isAtEnd(),!1);if(Wr(T)&&ft(T.previousSibling)){const O=n.createRng();return O.setStart(T,1),O.setEnd(T,1),O}}}return null}let v=g.startContainer,y=g.startOffset;const E=g.endOffset;if(W(v)&&0===y&&bi(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!ue(v))return null;if(E===y+1&&v===g.endContainer){const w=v.childNodes[y];if(l(w))return(k=>{const A=k.cloneNode(!0),T=e.dispatch("ObjectSelected",{target:k,targetClone:A});if(T.isDefaultPrevented())return null;const O=((x,S)=>{const B=_(e.getBody()),$=e.getDoc(),ee=as(B,"#"+a).getOrThunk(()=>{const pe=ts('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',$);return $t(pe,"id",a),St(B,pe),pe}),K=n.createRng();ca(ee),wo(ee,[ia(Bt,$),_(S),ia(Bt,$)]),K.setStart(ee.dom.firstChild,1),K.setEnd(ee.dom.lastChild,0),Bi(ee,{top:n.getPos(x,e.getBody()).y+"px"}),n0(ee);const be=t.getSel();return be&&(be.removeAllRanges(),be.addRange(K)),K})(k,T.targetClone),P=_(k);return U(Zt(_(e.getBody()),`*[${s}]`),x=>{Xe(P,x)||zt(x,s)}),n.getAttrib(k,s)||k.setAttribute(s,"1"),i=k,h(),O})(w)}return null},f=()=>{i&&i.removeAttribute(s),as(_(e.getBody()),"#"+a).each(mt),i=null},h=()=>{o.hide()};return pr(e)||(e.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),e.focus())}),e.on("blur NewBlock",f),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",g=>{const b=g.target,v=K1(e,b);bi(v)?(g.preventDefault(),ni(e,v).each(p)):l(b)&&ni(e,b).each(p)},!0),e.on("mousedown",g=>{const b=g.target;if(b!==r&&"HTML"!==b.nodeName&&!n.isChildOf(b,r)||!((y,E,w)=>{const k=_(y.getBody()),A=y.inline?k:_(Rr(k).dom.documentElement),T=((O,P,x,S)=>{const B=P.dom.getBoundingClientRect();return{x:x-(O?B.left+P.dom.clientLeft+uR(P):0),y:S-(O?B.top+P.dom.clientTop+cR(P):0)}})(y.inline,A,E,w);return((O,P,x)=>{const S=lR(O),B=dR(O);return P>=0&&x>=0&&P<=S&&x<=B})(A,T.x,T.y)})(e,g.clientX,g.clientY))return;f(),h();const v=K1(e,b);bi(v)?(g.preventDefault(),ni(e,v).each(p)):M1(r,g.clientX,g.clientY).each(y=>{var E;g.preventDefault(),(E=d(1,y.node,y.position===Fa.Before,!1))&&t.setRng(E),Lr(v)?v.focus():e.getBody().focus()})}),e.on("keypress",g=>{ae.modifierPressed(g)||bi(t.getNode())&&g.preventDefault()}),e.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),e.on("SetSelectionRange",g=>{g.range=(g=>{const b=e.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,E=g.startOffset,w=g.endContainer,k=g.endOffset;return Pe(b,y.nodeName.toLowerCase())?0===E?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,E),Pe(b,w.nodeName.toLowerCase())?0===k?v.setEndBefore(w):v.setEndAfter(w):v.setEnd(w,k),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),e.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,E;u(b)||ue(y=v)&&"mcepastebin"===y.id||h(),M(E=v)&&n.hasClass(E,"mce-offscreen-selection")||f()}),(e=>{const t=Yr(),n=it.DOM,r=document,o=(l=t,d=e,c=>{if(0===c.button){const u=_t(d.dom.getParents(c.target),LO).getOr(null);if(M(u)&&(m=d.dom,p=d.getBody(),$1(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:xf(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:PO(d,u,u.offsetWidth,u.offsetHeight),intervalId:ux(100)})}}var m,p,f}),a=((e,t)=>{const n=Xi((o,a)=>{return i=o,l=a,(s=t)._selectionOverrides.hideFakeCaret(),void M1(s.getBody(),i,l).fold(()=>s.selection.placeCaretAt(i,l),d=>{const c=s._selectionOverrides.showCaret(1,d.node,d.position===Fa.Before,!1);c?s.selection.setRng(c):s.selection.placeCaretAt(i,l)});var s,i,l},0);t.on("remove",n.cancel);const r=e;return o=>e.on(a=>{const s=Math.max(Math.abs(o.screenX-a.screenX),Math.abs(o.screenY-a.screenY));if(!a.dragging&&s>10){const d=hi(t,"dragstart",a.element,a.dataTransfer,o);if(M(d.dataTransfer)&&(a.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;a.dragging=!0,t.focus()}if(a.dragging){const d=o.currentTarget===t.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(a,(m=o,p=(g=u=t).inline?F1(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=F1(g.getContentAreaContainer()),y=(E=>{const w=E.getBody(),k=E.getDoc().documentElement;return E.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||k.scrollLeft,top:w.scrollTop||k.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=a.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,E,w,k)=>{let A=0,T=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(A=m.pageX+p-h),m.pageY+f>g&&(T=m.pageY+f-g),u.style.width=p-A+"px",u.style.height=f-T+"px";const O=y.clientHeight,P=y.clientWidth,x=b+y.getBoundingClientRect().top,S=v+y.getBoundingClientRect().left;w.on(B=>{B.intervalId.clear(),B.dragging&&k&&(b+8>=O?B.intervalId.set(q1(E)):b-8<=0?B.intervalId.set(H1(E)):v+8>=P?B.intervalId.set(j1(E)):v-8<=0?B.intervalId.set(z1(E)):x+16>=window.innerHeight?B.intervalId.set(q1(window)):x-16<=0?B.intervalId.set(H1(window)):S+16>=window.innerWidth?B.intervalId.set(j1(window)):S-16<=0&&B.intervalId.set(z1(window)))})})(a.ghost,c,a.width,a.height,a.maxX,a.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),r,d),n.throttle(o.clientX,o.clientY)}var u,m,g,p,f,h,i,l})})(t,e),s=((l,d)=>c=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(M(f)){const h=f.getRangeAt(0).startContainer;return W(h)?h.parentNode:h}return null})(d.selection),h=u.element,!ne(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==m?m:d.getBody();hi(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);V1(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&Vr(_(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}hi(d,"dragend",d.getBody(),u.dataTransfer,c)}}),G1(l)})(t,e),i=((l,d)=>c=>W1(l,d,C.some(c)))(t,e);var l,d;e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",s),n.bind(r,"mousemove",a),n.bind(r,"mouseup",i),e.on("remove",()=>{n.unbind(r,"mousemove",a),n.unbind(r,"mouseup",i)}),e.on("keydown",l=>{l.keyCode===ae.ESC&&W1(t,e,C.none())})})(g=e),lS(g)&&(b=>{const v=w=>{if(!w.isDefaultPrevented()){const k=w.dataTransfer;k&&(Ke(k.types,"Files")||k.files.length>0)&&(w.preventDefault(),"drop"===w.type&&Ul(b,"Dropped file type is not supported"))}},y=w=>{yl(b,w.target)&&v(w)},E=()=>{const w=it.DOM,k=b.dom,A=document,T=b.inline?b.getBody():b.getDoc(),O=["drop","dragover"];U(O,P=>{w.bind(A,P,y),k.bind(T,P,v)}),b.on("remove",()=>{U(O,P=>{w.unbind(A,P,y),k.unbind(T,P,v)})})};b.on("init",()=>{Tn.setEditorTimeout(b,E,0)})})(g),(g=>{const b=Xi(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=Lm(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(e),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(lr(v)){const y=qo(g.getBody(),v),E=ft(y)?y:v;g.selection.getNode()!==E&&ni(g,E).each(w=>g.selection.setRng(w))}})})})(e)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Jd(g),t.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{o.destroy(),i=null}};var g},FO=(e,t)=>{let n=t;for(let r=e.previousSibling;W(r);r=r.previousSibling)n+=r.data.length;return n},Y1=(e,t,n,r,o)=>{if(W(n)&&(r<0||r>n.data.length))return[];const a=o&&W(n)?[FO(n,r)]:[r];let s=n;for(;s!==t&&s.parentNode;)a.push(e.nodeIndex(s,o)),s=s.parentNode;return s===t?a.reverse():[]},Lf=(e,t,n,r,o,a,s=!1)=>({start:Y1(e,t,n,r,s),end:Y1(e,t,o,a,s)}),X1=(e,t)=>{const n=t.slice(),r=n.pop();return ke(r)?Kt(n,(o,a)=>o.bind(s=>C.from(s.childNodes[a])),C.some(e)).bind(o=>W(o)&&(r<0||r>o.data.length)?C.none():C.some({node:o,offset:r})):C.none()},Z1=(e,t)=>X1(e,t.start).bind(({node:n,offset:r})=>X1(e,t.end).map(({node:o,offset:a})=>{const s=document.createRange();return s.setStart(n,r),s.setEnd(o,a),s})),Ua=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t,W(t.firstChild)&&Gr(t.firstChild.data)),Ua(e,r,n)}},fd=(e,t,n,r=!0)=>{const o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(W(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),W(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),Ua(e,o,n),o!==a&&Ua(e,a,n))},Pf=(e,t)=>C.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Q1=(e,t,n)=>{const r=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:hh(r).concat(e.blockPatterns),inlinePatterns:bh(r).concat(e.inlinePatterns)}},J1=(e,t,n,r)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,r),o.toString()},ek=(e,t,n)=>{((r,o,a)=>{if(W(r)&&0>=r.length)return C.some(Jn(r,0));{const s=Bo(Yl);return C.from(s.forwards(r,0,Xl(r),a)).map(i=>Jn(i.container,0))}})(t,0,t).each(r=>{const o=r.container;dE(o,n.start.length,t).each(i=>{const l=e.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),fd(e,l,d=>d===t)});const a=_(o),s=Ui(a);var i,l;/^\s[^\s]/.test(s)&&(i=a,l=s.slice(1),Yd.set(i,l))})},tk=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),gd=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},nk=(e,t,n)=>{const r=Z1(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,a=r.endContainer,s=0===r.endOffset?a:a.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:t,end:s.parentNode.insertBefore(tk(e,t+"-end"),s),start:l.insertBefore(tk(e,t+"-start"),i)}},rk=(e,t,n)=>{Ua(e,e.get(t.prefix+"-end"),n),Ua(e,e.get(t.prefix+"-start"),n)},Df=e=>0===e.start.length,ok=(e,t,n,r)=>{const o=t.start;var a;return nf(e,r.container,r.offset,(a=o,(s,i)=>{const l=s.data.substring(0,i),d=l.lastIndexOf(a.charAt(a.length-1)),c=l.lastIndexOf(a);return-1!==c?c+a.length:-1!==d?d+1:-1}),n).bind(s=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==d&&s.offset>=d+o.length){const c=e.createRng();return c.setStart(s.container,s.offset-o.length),c.setEnd(s.container,s.offset),C.some(c)}return tf(s.container,s.offset-o.length,n).map(u=>{const m=e.createRng();return m.setStart(u.container,u.offset),m.setEnd(s.container,s.offset),m}).filter(u=>u.toString()===o).orThunk(()=>ok(e,t,n,Jn(s.container,0)))})},UO=(e,t,n,r)=>{const o=e.dom,a=o.getRoot(),s=n.pattern,i=n.position.container,l=n.position.offset;return tf(i,l-n.pattern.end.length,t).bind(d=>{const c=Lf(o,a,d.container,d.offset,i,l,r);if(Df(s))return C.some({matches:[{pattern:s,startRng:c,endRng:c}],position:d});{const u=pd(e,n.remainingPatterns,d.container,d.offset,t,r),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,E=!1)=>{if(0===g.start.length&&!E){const w=h.createRng();return w.setStart(b,v),w.setEnd(b,v),C.some(w)}return ef(b,v,y).bind(w=>ok(h,g,y,w).bind(k=>{var A;return E&&(k.endContainer===w.container&&k.endOffset===w.offset||0===w.offset&&(null===(A=k.endContainer.textContent)||void 0===A?void 0:A.length)===k.endOffset)?C.none():C.some(k)}))})(o,s,p.container,p.offset,t,u.isNone()).map(h=>{const g=((b,v,y,E=!1)=>Lf(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,E))(o,a,h,r);return{matches:m.matches.concat([{pattern:s,startRng:g,endRng:c}]),position:Jn(h.startContainer,h.startOffset)}})}})},pd=(e,t,n,r,o,a)=>{const s=e.dom;return ef(n,r,s.getRoot()).bind(i=>{const l=J1(s,o,n,r);for(let d=0;d<t.length;d++){const c=t[d];if(!Rd(l,c.end))continue;const u=t.slice();u.splice(d,1);const m=UO(e,o,{pattern:c,remainingPatterns:u,position:i},a);if(m.isNone()&&r>0)return pd(e,t,n,r-1,o,a);if(m.isSome())return m}return C.none()})},ak=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?U(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},sk=(e,t,n,r,o,a)=>{var s;return((i,l)=>{const d=Wn(i,c=>ct(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(pd(e,o.inlinePatterns,n,r,t,a).fold(()=>[],i=>i.matches),pd(e,(s=o.inlinePatterns,F(s,(i,l)=>l.end.length-i.end.length)),n,r,t,a).fold(()=>[],i=>i.matches))},ik=(e,t)=>{if(0===t.length)return;const n=e.dom,r=e.selection.getBookmark(),o=((a,s)=>{const i=Es("mce_textpattern"),l=co(s,(d,c)=>{const u=nk(a,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return co(l,(d,c)=>{const u=l.length-d.length-1,m=Df(c.pattern)?c.endMarker:nk(a,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,t);U(o,a=>{const s=n.getParent(a.startMarker.start,n.isBlock),i=l=>l===s;Df(a.pattern)?((l,d,c,u)=>{const m=gd(l.dom,c);fd(l.dom,m,u),ak(l,d,m)})(e,a.pattern,a.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=gd(p,u),h=gd(p,c);fd(p,h,m),fd(p,f,m);const b=gd(p,{prefix:c.prefix,start:c.end,end:u.start});ak(l,d,b)})(e,a.pattern,a.startMarker,a.endMarker,i),rk(n,a.endMarker,i),rk(n,a.startMarker,i)}),e.selection.moveToBookmark(r)},lk=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},If=it.DOM,jO=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Mf=e=>Ga(e,t=>!1===J(t)),dk=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Mf({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:jO(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},ck=e=>{const t=e.options.get;return Mf({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Ff=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,uk=e=>{const t=Ff(e),n=Nh(e),r=e.contentCSS,o=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},a=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let l="";G.each(e.contentStyles,d=>{l+=d+"\r\n"}),e.dom.addStyle(l)}const s=Promise.all(((l,d,c)=>{const{pass:u,fail:m}=kn(d,h=>tinymce.Resource.has(Nm(h))),f=[...u.map(h=>{const g=tinymce.Resource.get(Nm(h));return te(g)?Promise.resolve(Ff(l).loadRawCss(h,g)):Promise.resolve()}),Ff(l).loadAll(m)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(c)])})(e,r,n)).then(a).catch(a),i=zx(e);return i&&((l,d)=>{const c=_(l.getBody()),u=Ud(Hr(c)),m=Ot("style");$t(m,"type","text/css"),St(m,ia(d)),St(u,m),l.on("remove",()=>{mt(m)})})(e,i),s},Uf=e=>{var t;!0!==e.removed&&(pr(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,t.dispatch("Init"),t.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||dl(r)&&r.selection.getStart(!0)!==o||Jt(o).each(a=>{const s=a.getNode(),i=Pr(s)?Jt(s).getOr(a):a;r.selection.setRng(i.toRange())})})(t),t.nodeChanged({initial:!0});const n=fS(t);Ce(n)&&n.call(t,t),(r=>{const o=pS(r);o&&Tn.setEditorTimeout(r,()=>{let a;a=!0===o?r:r.editorManager.get(o),a&&!a.destroyed&&(a.focus(),a.selection.scrollIntoView())},100)})(t)})(e))},mk=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(If.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();var s,i;r.disabled=!0,e.readonly=Oh(e),e._editableRoot=sS(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===If.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=(e=>{const t=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const E=y.id||"blobid"+fR+++(()=>{const T=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+T()+T()+T()})(),w=y.name||E,k=y.blob;var A;return{id:X(E),name:X(w),filename:X(y.filename||w+"."+(A=k.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[A.toLowerCase()]||"dat")),blob:X(k),base64:X(y.base64),blobUri:X(y.blobUri||URL.createObjectURL(k)),uri:X(y.uri)}},b=y=>_t(h,y).getOrUndefined(),v=y=>b(E=>E.id()===y);return{create:(y,E,w,k,A)=>{if(te(y))return g({id:y,name:k,filename:A,blob:E,base64:w});if(Ue(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(E=>E.blobUri()===y),getByData:(y,E)=>b(w=>w.base64()===y&&w.blob().type===E),findFirst:b,removeByUri:y=>{h=Ae(h,E=>E.blobUri()!==y||(URL.revokeObjectURL(E.blobUri()),!1))},destroy:()=>{U(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,r;const o=yC(),a=[],s=h=>g=>e.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===Ge.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),d=(h,g)=>{U(e.undoManager.data,b=>{"fragmented"===b.type?b.fragments=ze(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=wC(e,o)),p().then(s(h=>{const g=ze(h,b=>b.blobInfo);return n.upload(g,CC(e)).then(s(b=>{const v=[];let y=!1;const E=ze(b,(w,k)=>{const{blobInfo:A,image:T}=h[k];let O=!1;return w.status&&Ox(e)?(w.url&&!Yt(T.src,w.url)&&(y=!0),t.removeByUri(T.src),pr(e)||((P,x)=>{const S=e.convertURL(x,"src");var B;d(P.src,x),Sr(_(P),{src:_h(e)?(B=x,B+(-1===B.indexOf("?")?"?":"&")+(new Date).getTime()):x,"data-mce-src":S})})(T,w.url)):w.error&&(w.error.remove&&(d(T.src,Ge.transparentSrc),v.push(T),O=!0),Ul(e,Xn.translate(["Failed to upload image: {0}",w.error.message]))),{element:T,status:w.status,uploadUri:w.url,blobInfo:A,removed:O}});return v.length>0&&!pr(e)?e.undoManager.transact(()=>{U(jd(v),w=>{const k=Fn(w);var A;mt(w),k.each((A=e,T=>{var O,P;(O=A).dom.isEmpty((P=T).dom)&&M(O.schema.getTextBlockElements()[Ve(P)])&&St(T,ts('<br data-mce-bogus="1" />'))})),t.removeByUri(w.dom.src)})}):y&&e.undoManager.dispatchChange(),E}))}))),u=()=>kh(e)?c():Promise.resolve([]),m=h=>Wn(a,g=>g(h)),p=()=>(r||(r=((e,t)=>{const n={};return{findAll:(r,o=dt)=>{const a=Ae((i=r)?Se(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===Ge.transparentSrc)&&(Ut(l,"blob:")?!e.isUploaded(l)&&o(i):!!Ut(l,"data:")&&o(i))}),s=ze(a,i=>{const l=i.src;if(Pe(n,l))return n[l].then(d=>te(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(Ut(u,"blob:")){const h=c.getByUri(u);return M(h)?Promise.resolve(h):(p=u,Ut(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Ut(p,"data:")?(f=p,new Promise((g,b)=>{dm(f).bind(({type:v,data:y,base64Encoded:E})=>gy(v,y,E)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>py(g).then(b=>hy(b,!1,v=>C.some(by(c,g,v))).getOrThunk(m)))}var g,p,f;return Ut(u,"data:")?vy(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(t,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(s)}}})(o,t)),r.findAll(e.getBody(),m).then(s(h=>{const g=Ae(h,b=>te(b)?(Ul(e,b),!1):"blob"!==b.uriType);return pr(e)||U(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=o.getResultUri(b);if(v)return'src="'+v+'"';let y=t.getByUri(b);return y||(y=Kt(e.editorManager.get(),(E,w)=>E||w.editorUpload&&w.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return e.on("SetContent",()=>{kh(e)?u():p()}),e.on("RawSaveContent",h=>{h.content=f(h.content)}),e.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",h=>{U(h,g=>{const b=g.attr("src");if(!b||t.getByUri(b))return;const v=o.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:t,addFilter:h=>{a.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{t.destroy(),o.destroy(),r=n=null}}})(e),e.schema=Kr(ck(e)),e.dom=it(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Mx(e),referrerPolicy:Oc(e),onSetAttrib:s=>{e.dispatch("SetAttrib",s)},force_hex_color:US(e)}),e.parser=(s=>{const i=Ra(dk(s),s.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=s.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,s.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),LS(s)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+s.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=s.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new rn("br",1))}}),i})(e),e.serializer=dC((s=>{const i=s.options.get;return{...dk(s),...ck(s),...Mf({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=lC(e.dom,e.getWin(),e.serializer,e),e.annotator=Rb(e),e.formatter=_C(e),e.undoManager=SC(e),e._nodeChangeDispatcher=new lO(e),e._selectionOverrides=MO(e),(s=>{const i=Yr(),l=Pt(!1),d=Cc(c=>{s.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);s.on("touchstart",c=>{Lw(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),s.on("touchmove",c=>{d.cancel(),Lw(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():s.dispatch("tap",{...c,type:"tap"})})},!0)})(e),(i=s=e).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const d=MS(i);U(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const d=FS(i);U(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})})})(s),(s=>{const i="contenteditable",l=" "+G.trim(OS(s))+" ",d=" "+G.trim(Ph(s))+" ",c=Iw(l),u=Iw(d),m=BS(s);m.length>0&&s.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],oT(f,v,Ph(f)));g.content=v}})(s,m,p)}),s.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),s.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];if(!c(h)&&!u(h))continue;const g=h.attr("data-mce-content");m.length>0&&g?aT(m,g)?(h.name="#text",h.type=3,h.raw=!0,h.value=g):h.remove():h.attr(i,null)}})})(e),pr(e)||((s=>{s.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(e=>{const t=((n,r,o)=>{const a=D.fromRangeStart(n).getNode(),s=(u=r,m=o,vo(_(a),p=>Un(p.dom)||m.isBlock(Ve(p)),P1(u)).getOr(_(u)).dom),i=I1(a,s,!1),l=I1(a,s,!0),d=document.createRange();var u,m;return D1(i,s).fold(()=>{L1(i)?d.setStart(i,0):d.setStartBefore(i)},c=>d.setStartBefore(c.dom)),D1(l,s).fold(()=>{L1(l)?d.setEnd(l,l.data.length):d.setEndAfter(l)},c=>d.setEndAfter(c.dom)),d})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Gu(t))})(s))})})(e),(s=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=RS(i),f=TS(i),{inlinePatterns:bh(p),blockPatterns:hh(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!ae.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((e,t)=>{const n=e.selection.getRng();return Pf(e,n).map(r=>{var o;const a=Math.max(0,n.startOffset),s=Q1(t,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=sk(e,r,n.startContainer,a,s,!0),l=((d,c,u,m)=>{var p;const f=d.dom,h=Qt(d);if(!f.is(c,h))return[];const g=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=F(b,(k,A)=>A.start.length-k.start.length),E=v.replace(Bt," ");return _t(y,w=>0===v.indexOf(w.start)||0===E.indexOf(w.start))})(u.blockPatterns,g).map(b=>G.trim(g).length===b.start.length?[]:[{pattern:b,range:Lf(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(e,r,s);return(l.length>0||i.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Lt,{preserve_zwsp:!0}),ik(e,i),((u,m)=>{if(0===m.length)return;const p=u.selection.getBookmark();U(m,f=>((h,g)=>{const v=g.pattern,y=Z1(h.dom.getRoot(),g.range).getOrDie("Unable to resolve path range");return Pf(h,y).each(E=>{"block-format"===v.type?((w,k)=>{const A=k.get(w);return H(A)&&Q(A).exists(T=>Pe(T,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{ek(h.dom,E,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{ek(h.dom,E,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(e,l);const d=e.selection.getRng(),c=ef(d.startContainer,d.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),c.each(u=>{const m=u.container;"\ufeff"===m.data.charAt(u.offset-1)&&(m.deleteData(u.offset-1,1),Ua(e.dom,m.parentNode,p=>p===e.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const g=f.selection.getRng();Pf(f,g).map(b=>{const v=Math.max(0,g.startOffset-1),y=J1(f.dom,b,g.startContainer,v),E=Q1(h,b,y),w=sk(f,b,g.startContainer,v,E,!1);w.length>0&&f.undoManager.transact(()=>{ik(f,w)})})})(i,p)}};i.on("keyup",p=>{lk(d,p,(f,h)=>f===h.keyCode&&!ae.modifierPressed(h))&&m()}),i.on("keypress",p=>{lk(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&Tn.setEditorTimeout(i,m)})})(s)})(e));const o=iO(e);((e,t)=>{e.addCommand("delete",()=>{var n;Bw(n=e,t,!1).fold(()=>{n.selection.isEditable()&&(Bu(n),Lu(n))},dn)}),e.addCommand("forwardDelete",()=>{var n;Bw(n=e,t,!0).fold(()=>{n.selection.isEditable()&&ov(n,"ForwardDelete")},dn)})})(e,o),(s=>{s.on("NodeChange",oe(rT,s))})(e),(s=>{var i;const l=s.dom,d=Qt(s),c=null!==(i=Vx(s))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(NC(g)){const b=g.keyCode;return!RC(g)&&(ae.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||Ke(CR,b))}return!1})(m))return;const f=s.getBody(),h=!(NC(g=m)&&!(RC(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(yt(_(b),!1)){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var g;(""!==l.getAttrib(f,AC)!==h||p)&&(l.setAttrib(f,AC,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(s,h),s.on(h?"keydown":"keyup",u),s.off(h?"keyup":"keydown",u))};rr(c)&&s.on("init",m=>{u(m,!0),s.on("change SetContent ExecCommand",u),s.on("paste",p=>Tn.setEditorTimeout(s,()=>u(p)))})})(e),(e=>{const t=Pt(!1),n=Pt(SS(e)?"text":"html"),r=(o=>{const a=Pt(null);return{create:()=>((s,i)=>{const{dom:l,selection:d}=s,c=s.getBody();i.set(d.getRng());const u=l.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},b1);Ge.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(o,a),remove:()=>((s,i)=>{const l=s.dom;if(Af(s)){let d;const c=i.get();for(;d=Af(s);)l.remove(d),l.unbind(d);c&&s.selection.setRng(c)}i.set(null)})(o,a),getEl:()=>Af(o),getHtml:()=>(s=>{const i=s.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=Ae(s.getBody().childNodes,hO);U(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(o),getLastRng:a.get}})(e);var o,a,s;o=e,(Ge.browser.isChromium()||Ge.browser.isSafari())&&(s=kO,(a=o).on("PastePreProcess",i=>{i.content=s(a,i.content,i.internal)})),((o,a)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((s,i)=>{"text"===i.get()?(i.set("html"),Ib(s,!1)):(i.set("text"),Ib(s,!0)),s.focus()})(o,a)}),o.addCommand("mceInsertClipboardContent",(s,i)=>{i.html&&ud(o,i.html,i.internal,!1),i.text&&Tf(o,i.text,!1)})})(e,n),(o=>{const a=l=>d=>{l(o,d)},s=yS(o);Ce(s)&&o.on("PastePreProcess",a(s));const i=CS(o);Ce(i)&&o.on("PastePostProcess",a(i))})(e),e.on("PreInit",()=>{(o=>{o.on("cut",(a=>s=>{!s.isDefaultPrevented()&&R1(a)&&a.selection.isEditable()&&S1(s,N1(a),A1(a),()=>{if(Ge.browser.isChromium()||Ge.browser.isFirefox()){const i=a.selection.getRng();Tn.setEditorTimeout(a,()=>{a.selection.setRng(i),a.execCommand("Delete")},0)}else a.execCommand("Delete")})})(o)),o.on("copy",(a=>s=>{!s.isDefaultPrevented()&&R1(a)&&S1(s,N1(a),A1(a),we)})(o))})(e),((o,a)=>{vS(o)&&o.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),nl(o)||o.on("drop",s=>{const i=s.dataTransfer;i&&ct(i.files,d=>/^image\//.test(d.type))&&s.preventDefault()}),o.on("drop",s=>{if(s.isDefaultPrevented())return;const i=T1(o,s);if(ne(i))return;const l=k1(s.dataTransfer),d=ao(l,cd());if((!_1(l)||(f=>{const h=f["text/plain"];return!!h&&0===h.indexOf("file://")})(l))&&x1(o,s,i))return;const c=l[cd()],u=c||l["text/html"]||l["text/plain"],m=((f,h,g,b)=>{const v=f.getParent(g,y=>So(h,y));if(!V(f.getParent(g,"summary")))return!0;if(v&&Pe(b,"text/html")){const y=(new DOMParser).parseFromString(b["text/html"],"text/html").body;return!V(y.querySelector(v.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l),p=a.get();p&&!m||u&&(s.preventDefault(),Tn.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(c||p&&m)&&o.execCommand("Delete"),O1(o,i);const f=C1(u);l["text/html"]?ud(o,f,d,!0):Tf(o,f,!0)})}))}),o.on("dragstart",s=>{a.set(!0)}),o.on("dragover dragend",s=>{nl(o)&&!a.get()&&(s.preventDefault(),O1(o,T1(o,s))),"dragend"===s.type&&a.set(!1)}),(s=>{s.on("input",i=>{const l=d=>V(d.querySelector("summary"));if("deleteByDrag"===i.inputType){const d=Ae(s.dom.select("details"),l);U(d,c=>{vt(c.firstChild)&&c.firstChild.remove();const u=s.dom.create("summary");u.appendChild(ms().dom),c.prepend(u)})}})})(o)})(e,t),((e,t,n)=>{((r,o,a)=>{let s;r.on("keydown",i=>{var l;(ae.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(s=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,Ge.os.isAndroid()&&0===(null===(m=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var c,u,m;const l="text"===a.get()||s;s=!1;const d=k1(i.clipboardData);!_1(d)&&x1(r,i,o.getLastRng()||r.selection.getRng())||(ao(d,"text/html")?(i.preventDefault(),Of(r,d,d["text/html"],l,!0)):ao(d,"text/plain")&&ao(d,"text/uri-list")?(i.preventDefault(),Of(r,d,d["text/plain"],l,!0)):(o.create(),Tn.setEditorTimeout(r,()=>{const c=o.getHtml();o.remove(),Of(r,d,c,l,!1)},0)))})})(e,t,n),(r=>{const o=s=>Ut(s,"webkit-fake-url"),a=s=>Ut(s,"data:");r.parser.addNodeFilter("img",(s,i,l)=>{if(!nl(r)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of s){const c=d.attr("src");te(c)&&!d.attr("data-mce-object")&&c!==Ge.transparentSrc&&(o(c)||!NS(r)&&a(c))&&d.remove()}var c})})(e)})(e,r,n)})})(e);const a=(s=>{const i=s;return(l=s,ut(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=nC(s),C.none()),l=>(i.rtcInstance=(()=>{const d=X(null),c=X("");return{init:{bindEvents:we},undoManager:{beforeChange:we,add:d,undo:d,redo:d,clear:we,reset:we,hasUndo:qe,hasRedo:qe,transact:d,ignore:we,extra:we},formatter:{match:qe,matchAll:X([]),matchNode:X(void 0),canApply:qe,closest:c,apply:we,remove:we,toggle:we,formatChanged:X({unbind:we})},editor:{getContent:c,setContent:X({content:"",html:""}),insertContent:X(""),addVisual:we},selection:{getContent:c},autocompleter:{addDecoration:we,removeDecoration:we},raw:{getModel:X(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>Ue(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,E,w)=>p.transact(w),ignore:(y,E)=>p.ignore(E),extra:(y,E,w,k)=>p.extra(w,k)},formatter:{match:(y,E,w,k)=>f.match(y,u(E),k),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,E,w)=>f.apply(y,u(E)),remove:(y,E,w,k)=>f.remove(y,u(E)),toggle:(y,E,w)=>f.toggle(y,u(E)),formatChanged:(y,E,w,k,A)=>f.formatChanged(E,w,k,A)},editor:{getContent:y=>h.getContent(y),setContent:(y,E)=>({content:h.setContent(y,E),html:""}),insertContent:(y,E)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,E)=>g.getContent(E)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(e);(s=>{const i=s.getDoc(),l=s.getBody();s.dispatch("PreInit"),hS(s)||(i.body.spellcheck=!1,If.setAttrib(l,"spellcheck","false")),s.quirks=(e=>{const t=G.each,n=ae.BACKSPACE,r=ae.DELETE,o=e.dom,a=e.selection,s=e.parser,i=Ge.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=Ge.deviceType.isiPhone()||Ge.deviceType.isiPad(),u=Ge.os.isMacOS()||Ge.os.isiOS(),m=(x,S)=>{try{e.getDoc().execCommand(x,!1,String(S))}catch{}},p=x=>x.isDefaultPrevented(),f=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",x=>{let S;if(x.target===e.getDoc().documentElement)if(S=a.getRng(),e.getBody().focus(),"mousedown"===x.type){if(xn(S.startContainer))return;a.placeCaretAt(x.clientX,x.clientY)}else a.setRng(S)})},g=()=>{Range.prototype.getClientRects||e.on("mousedown",x=>{if(!p(x)&&"HTML"===x.target.nodeName){const S=e.getBody();S.blur(),Tn.setEditorTimeout(e,()=>{S.focus()})}})},b=()=>{const x=Lh(e);e.on("click",S=>{const B=S.target;/^(IMG|HR)$/.test(B.nodeName)&&o.isEditable(B)&&(S.preventDefault(),e.selection.select(B),e.nodeChanged()),"A"===B.nodeName&&o.hasClass(B,x)&&0===B.childNodes.length&&o.isEditable(B.parentNode)&&(S.preventDefault(),a.select(B))})},v=()=>{e.on("keydown",x=>{if(!p(x)&&x.keyCode===n&&a.isCollapsed()&&0===a.getRng().startOffset){const S=a.getNode().previousSibling;if(S&&S.nodeName&&"table"===S.nodeName.toLowerCase())return x.preventDefault(),!1}return!0})},y=()=>{Oh(e)||e.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),Rh(e)||m("enableObjectResizing",!1)})},E=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},k=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",x=>{let S;"HTML"===x.target.nodeName&&(S=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(S),e.selection.normalize(),e.nodeChanged())}))},A=()=>{u&&e.on("keydown",x=>{!ae.metaKeyPressed(x)||x.shiftKey||37!==x.keyCode&&39!==x.keyCode||(x.preventDefault(),e.selection.getSel().modify("move",37===x.keyCode?"backward":"forward","lineboundary"))})},T=()=>{e.on("click",x=>{let S=x.target;do{if("A"===S.tagName)return void x.preventDefault()}while(S=S.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",x=>{x.preventDefault()})})},P=we;return pr(e)?(d&&(h(),b(),O(),f(),c&&(w(),k(),T())),l&&(g(),y(),E(),A())):(e.on("keydown",x=>{if(p(x)||x.keyCode!==ae.BACKSPACE)return;let S=a.getRng();const B=S.startContainer,$=S.startOffset,ee=o.getRoot();let K=B;if(S.collapsed&&0===$){for(;K.parentNode&&K.parentNode.firstChild===K&&K.parentNode!==ee;)K=K.parentNode;"BLOCKQUOTE"===K.nodeName&&(e.formatter.toggle("blockquote",void 0,K),S=o.createRng(),S.setStart(B,0),S.setEnd(B,0),a.setRng(S))}}),(()=>{const x=S=>{const B=o.create("body"),$=S.cloneContents();return B.appendChild($),a.serializer.serialize(B,{format:"html"})};e.on("keydown",S=>{const B=S.keyCode;if(!p(S)&&(B===r||B===n)&&e.selection.isEditable()){const $=e.selection.isCollapsed(),ee=e.getBody();if($&&!yt(_(ee))||!$&&!(K=>{const be=x(K),pe=o.createRng();return pe.selectNode(e.getBody()),be===x(pe)})(e.selection.getRng()))return;S.preventDefault(),e.setContent(""),ee.firstChild&&o.isBlock(ee.firstChild)?e.selection.setCursorLocation(ee.firstChild,0):e.selection.setCursorLocation(ee,0),e.nodeChanged()}})})(),Ge.windowsPhone||e.on("keyup focusin mouseup",x=>{ae.modifierPressed(x)||(S=>{const B=S.getBody(),$=S.selection.getRng();return $.startContainer===$.endContainer&&$.startContainer===B&&0===$.startOffset&&$.endOffset===B.childNodes.length})(e)||a.normalize()},!0),d&&(h(),b(),e.on("init",()=>{m("DefaultParagraphSeparator",Qt(e))}),O(),v(),s.addNodeFilter("br",x=>{let S=x.length;for(;S--;)"Apple-interchange-newline"===x[S].attr("class")&&x[S].remove()}),c?(w(),k(),T()):f()),l&&(e.on("keydown",x=>{if(!p(x)&&x.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(a.isCollapsed()&&0===a.getRng().startOffset){const S=a.getNode(),B=S.previousSibling;if("HR"===S.nodeName)return o.remove(S),void x.preventDefault();B&&B.nodeName&&"hr"===B.nodeName.toLowerCase()&&(o.remove(B),x.preventDefault())}}}),g(),(()=>{const x=()=>{const B=o.getAttribs(a.getStart().cloneNode(!1));return()=>{const $=a.getStart();$!==e.getBody()&&(o.setAttrib($,"style",null),t(B,ee=>{$.setAttributeNode(ee.cloneNode(!0))}))}},S=()=>!a.isCollapsed()&&o.getParent(a.getStart(),o.isBlock)!==o.getParent(a.getEnd(),o.isBlock);e.on("keypress",B=>{let $;return!(!(p(B)||8!==B.keyCode&&46!==B.keyCode)&&S()&&($=x(),e.getDoc().execCommand("delete",!1),$(),B.preventDefault(),1))}),o.bind(e.getDoc(),"cut",B=>{if(!p(B)&&S()){const $=x();Tn.setEditorTimeout(e,()=>{$()})}})})(),y(),e.on("SetContent ExecCommand",x=>{"setcontent"!==x.type&&"mceInsertLink"!==x.command||t(o.select("a:not([data-mce-block])"),S=>{var B;let $=S.parentNode;const ee=o.getRoot();if((null==$?void 0:$.lastChild)===S){for(;$&&!o.isBlock($);){if((null===(B=$.parentNode)||void 0===B?void 0:B.lastChild)!==$||$===ee)return;$=$.parentNode}o.add($,"br",{"data-mce-bogus":1})}})}),E(),A(),v(),e.on("drop",x=>{var S;const B=null===(S=x.dataTransfer)||void 0===S?void 0:S.getData("text/html");te(B)&&/^<img[^>]*>$/.test(B)&&e.dispatch("dragend",new window.DragEvent("dragend",x))}))),{refreshContentEditable:P,isHidden:()=>{if(!l||e.removed)return!1;const x=e.selection.getSel();return!x||!x.rangeCount||0===x.rangeCount}}})(s),s.dispatch("PostRender");const d=jx(s);void 0!==d&&(l.dir=d);const c=bS(s);c&&s.on("BeforeSetContent",u=>{G.each(c,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",u=>{s.composing="compositionstart"===u.type})})(e),a.fold(()=>{const s=(i=>{let l=!1;const d=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(d),l=!0,i.setProgressState(!1)}})(e);uk(e).then(()=>{Uf(e),s()})},s=>{e.setProgressState(!0),uk(e).then(()=>{s().then(i=>{e.setProgressState(!1),Uf(e),rC(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),Uf(e),rC(e)})})})},HO=dt,$f=it.DOM,fk=it.DOM,gk=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),pk=e=>{const t=e.getElement();return e.inline?gk(null):(n=>{const r=fk.create("div");return fk.insertAfter(r,n),gk(r,r)})(t)},qO=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const r=G.trim(xh(n)),o=n.ui.registry.getAll().icons,a={...Fl.get("default").icons,...Fl.get(r).icons};ge(a,(s,i)=>{Pe(o,i)||n.ui.registry.addIcon(i,s)})})(e),(n=>{const r=va(n);if(te(r)){const o=Go.get(r);n.theme=o(n,Go.urls[r])||{},Ce(n.theme.init)&&n.theme.init(n,Go.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const r=Bc(n),o=Ta.get(r);n.model=o(n,Ta.urls[r])})(e),(n=>{const r=[];U(tl(n),o=>{((a,s,i)=>{const l=Oa.get(i),d=Oa.urls[i]||a.documentBaseUrl.replace(/\/$/,"");if(i=G.trim(i),l&&-1===G.inArray(s,i)){if(a.plugins[i])return;try{const c=l(a,d)||{};a.plugins[i]=c,Ce(c.init)&&(c.init(a,d),s.push(i))}catch(c){((u,m,p)=>{const f=Xn.translate(["Failed to initialize plugin: {0}",m]);Ob(u,"PluginLoadError",{message:f}),$l(f,p),Ul(u,f)})(a,i,c)}}})(n,r,o.replace(/^\-/,""))})})(e);const t=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,te(va(n))?(o=>{const a=o.theme.renderUI;return a?a():pk(o)})(n):Ce(va(n))?(o=>{const a=o.getElement(),s=va(o)(o,a);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||o.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||o.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:a.offsetHeight,s})(n):pk(n)})(e);var n,r;((n,r)=>{const o={show:C.from(r.show).getOr(we),hide:C.from(r.hide).getOr(we),isEnabled:C.from(r.isEnabled).getOr(dt),setEnabled:a=>{n.mode.isReadOnly()||C.from(r.setEnabled).each(s=>s(a))}};n.ui={...n.ui,...o}})(e,C.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=e).contentCSS=n.contentCSS.concat(vC(r=n,$x(r)),(r=>vC(r,Nh(r)))(n)),e.inline?mk(e):((n,r)=>{((o,a)=>{const s=o.translate("Rich Text Area"),i=Ar(_(o.getElement()),"tabindex").bind(Ai),l=((d,c,u,m)=>{const p=Ot("iframe");return m.each(f=>$t(p,"tabindex",f)),Sr(p,u),Sr(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),sa(p,"tox-edit-area__iframe"),p})(o.id,s,wx(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=a.iframeContainer,o.iframeElement=l,o.iframeHTML=(d=>{let c=Ex(d)+"<html><head>";wh(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=kx(d),m=_x(d),p=d.translate(uS(d));return Eh(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+Eh(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${m}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(o),$f.add(a.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=$f.isHidden(r.editorContainer)),n.getElement().style.display="none",$f.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const a=o.iframeElement,s=()=>{o.contentDocument=a.contentDocument,mk(o)};if(DS(o)||Ge.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),s()}else{const l=((e,t,n,r)=>((o,a,s,i,l)=>{const d=(c=s,u=i,m=>{c(m)&&u((p=>{const f=_(Mg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=Et(g,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:g,kill:b,raw:p}})(m))});var c,u;return o.dom.addEventListener(a,d,!1),{unbind:oe(x_,o,a,d,!1)}})(e,"load",n,()=>{l.unbind(),s()}))(_(a),0,HO);a.srcdoc=o.iframeHTML}})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Yo=it.DOM,hk=e=>"-"===e.charAt(0),bk=(e,t,n)=>C.from(t).filter(r=>rr(r)&&!Fl.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:C.some(r)})),vk=or().deviceType,yk=vk.isPhone(),WO=vk.isTablet(),vi=e=>{if(ne(e))return[];{const t=H(e)?e:e.split(/[ ,]/),n=ze(t,ra);return Ae(n,rr)}},zf=(e,t)=>Pe(e.sections(),t),KO=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ut(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),YO=(e,t)=>{var n;const r=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?G.extend({},e.external_plugins,r):r},QO=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((o,a,s,i)=>{const l=_(o.getRoot());return s=Hs(l,D.fromRangeStart(a),i)?s.replace(/^ /,"&nbsp;"):s.replace(/^&nbsp;/," "),qs(l,D.fromRangeEnd(a),i)?s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t,e.schema):t},hd=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const a=G.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:a}}return{content:o,details:{}}})(t);ym(e,{...r,content:QO(e,n),format:"html",set:!1,selection:!0}).each(o=>{const a=(i=o.content,l=r,Sm(e).editor.insertContent(i,l));var i,l;Cm(e,a,o),e.addVisual()})}},JO={"font-size":"size","font-family":"face"},eB=Ti("font"),Ck=e=>(t,n)=>C.from(n).map(_).filter(yn).bind(r=>{return(o=e,a=t,s=r.dom,Zu(_(s),i=>{return Li(l=i,o).orThunk(()=>eB(l)?ut(JO,o).bind(d=>Ar(l,d)):C.none());var l},i=>Xe(_(a),i))).or(((o,a)=>C.from(it.DOM.getStyle(a,o,!0)))(e,r.dom));var o,a,s}).getOr(""),tB=Ck("font-size"),nB=Et(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Ck("font-family")),rB=e=>Jt(e.getBody()).bind(t=>{const n=t.container();return C.from(W(n)?n.parentNode:n)}),jf=(e,t)=>{return n=e,r=tr(C.some,t),(o=n,C.from(o.selection.getRng()).bind(a=>{const s=o.getBody();return a.startContainer===s&&0===a.startOffset?C.none():C.from(o.selection.getStart(!0))})).orThunk(oe(rB,n)).map(_).filter(yn).bind(r);var n,r,o},wk=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=G.explode(e.options.get("font_size_style_values")),o=G.explode(e.options.get("font_size_classes"));return o.length>0?o[n-1]||t:r[n-1]||t}return t}return t},oB=e=>{const t=e.split(/\s*,\s*/);return ze(t,n=>-1===n.indexOf(" ")||Ut(n,'"')||Ut(n,"'")?n:`'${n}'`).join(",")},Ek=(e,t)=>{const n=e.dom,r=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),a=t?r.startContainer:r.endContainer,s=fi(n,a);if(!s||!s.isContentEditable)return;const i=t?gn:Or,l=Qt(e);((d,c,u,m)=>{const p=d.dom,f=g=>p.isBlock(g)&&g.parentElement===u,h=f(c)?c:p.getParent(m,f,u);return C.from(h).map(_)})(e,o,s,a).each(d=>{const c=zE(e,a,d.dom,s,!1,l);i(d,_(c)),e.selection.setCursorLocation(c,0),e.dispatch("NewBlock",{newBlock:c}),mi(e,"insertParagraph")})},sB=["toggleview"],kk=e=>Ke(sB,e.toLowerCase());class _k{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,r,o){const a=this.editor,s=t.toLowerCase(),i=null==o?void 0:o.skip_focus;if(a.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||i?gu(d=a).each(c=>d.selection.setRng(c)):a.focus()),a.dispatch("BeforeExecCommand",{command:t,ui:n,value:r}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[s];return!!Ce(l)&&(l(s,n,r),a.dispatch("ExecCommand",{command:t,ui:n,value:r}),!0)}queryCommandState(t){if(!kk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),r=this.commands.state[n];return!!Ce(r)&&r(n)}queryCommandValue(t){if(!kk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),r=this.commands.value[n];return Ce(r)?r(n):""}addCommands(t,n="exec"){const r=this.commands;ge(t,(o,a)=>{U(a.toLowerCase().split(","),s=>{r[n][s]=o})})}addCommand(t,n,r){const o=t.toLowerCase();this.commands.exec[o]=(a,s,i)=>n.call(null!=r?r:this.editor,s,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,r){this.commands.state[t.toLowerCase()]=()=>n.call(null!=r?r:this.editor)}addQueryValueHandler(t,n,r){this.commands.value[t.toLowerCase()]=()=>n.call(null!=r?r:this.editor)}}const Xo="data-mce-contenteditable",Hf=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},bd=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Zo=e=>e.readonly,xk=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Zo(e)&&U(t,n=>{n.attr(Xo,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Xo,t=>{Zo(e)&&U(t,n=>{n.attr("contenteditable",n.attr(Xo))})}),e.serializer.addTempAttr(Xo)},iB=["copy"],lB=G.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class qf{static isNative(t){return!!lB[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||qe}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const r=t.toLowerCase(),o=pc(r,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const a=this.bindings[r];if(a)for(let s=0,i=a.length;s<i;s++){const l=a[s];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,n,r,o){if(!1===n&&(n=qe),n){const a={func:n,removed:!1};o&&G.extend(a,o);const s=t.toLowerCase().split(" ");let i=s.length;for(;i--;){const l=s[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=r?[a,...d]:[...d,a],this.bindings[l]=d}}return this}off(t,n){if(t){const r=t.toLowerCase().split(" ");let o=r.length;for(;o--;){const a=r[o];let s=this.bindings[a];if(!a)return ge(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(s){if(n){const i=kn(s,l=>l.func===n);s=i.fail,this.bindings[a]=s,U(i.pass,l=>{l.removed=!0})}else s.length=0;s.length||(this.toggleEvent(t,!1),delete this.bindings[a])}}}else ge(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,r){return this.on(t,n,r,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const yi=e=>(e._eventDispatcher||(e._eventDispatcher=new qf({scope:e,toggleEvent:(t,n)=>{qf.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Vf={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return pc(e.toLowerCase(),null!=t?t:{},r);const o=yi(r).dispatch(e,t);if(!1!==n&&r.parent){let a=r.parent();for(;a&&!o.isPropagationStopped();)a.dispatch(e,o,!1),a=a.parent?a.parent():void 0}return o},on(e,t,n){return yi(this).on(e,t,n)},off(e,t){return yi(this).off(e,t)},once(e,t){return yi(this).once(e,t)},hasEventListeners(e){return yi(this).has(e)}},vd=it.DOM;let Qo;const yd=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Th(e);return n?(e.eventRoot||(e.eventRoot=vd.select(n)[0]),e.eventRoot):e.getBody()},Sk=(e,t,n)=>{var r;(r=e).hidden||Zo(r)?Zo(e)&&((r,o)=>{if("click"!==o.type||ae.metaKeyPressed(o))Ke(iB,o.type)&&r.dispatch(o.type,o);else{const a=_(o.target);(s=r,i=a,yo(i,"a",l=>Xe(l,_(s.getBody()))).bind(l=>Ar(l,"href"))).each(s=>{if(o.preventDefault(),/^#/.test(s)){const i=r.dom.select(`${s},[name="${ng(s,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var s,i})(e,n):e.dispatch(t,n)},Ak=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=yd(e,t);if(Th(e)){if(Qo||(Qo={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Qo&&(ge(Qo,(o,a)=>{e.dom.unbind(yd(e,a))}),Qo=null)})),Qo[t])return;const r=o=>{const a=o.target,s=e.editorManager.get();let i=s.length;for(;i--;){const l=s[i].getBody();(l===a||vd.isChildOf(a,l))&&Sk(s[i],t,o)}};Qo[t]=r,vd.bind(n,t,r)}else{const r=o=>{Sk(e,t,o)};vd.bind(n,t,r),e.delegates[t]=r}},Nk={...Vf,bindPendingEventDelegates(){const e=this;G.each(e._pendingNativeEvents,t=>{Ak(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?Ak(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(yd(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(ge(e.delegates,(r,o)=>{e.dom.unbind(yd(e,o),o,r)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},dB=e=>te(e)?{value:e.split(/[ ,]/),valid:!0}:We(e,te)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Rk=(e,t)=>e+(Xa(t.message)?"":`. ${t.message}`),Tk=e=>e.valid,Wf=(e,t,n="")=>{const r=t(e);return se(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},cB=["design","readonly"],Ok=(e,t,n,r)=>{const o=n[t.get()],a=n[r];try{a.activate()}catch(s){return void console.error(`problem while activating editor mode ${r}:`,s)}var s;o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&((s,i)=>{const l=_(s.getBody());var d,c,u;u=i,Pd(d=l,c="mce-content-readonly")&&!u?Ja(d,c):u&&sa(d,c),i?(s.selection.controlSelection.hideResizeRect(),s._selectionOverrides.hideFakeCaret(),(d=>{C.from(d.selection.getNode()).each(c=>{c.removeAttribute("data-mce-selected")})})(s),s.readonly=!0,bd(l,!1),U(Zt(l,'*[contenteditable="true"]'),d=>{$t(d,Xo,"true"),bd(d,!1)})):(s.readonly=!1,s.hasEditableRoot()&&bd(l,!0),U(Zt(l,`*[${Xo}="true"]`),d=>{zt(d,Xo),bd(d,!0)}),Hf(s,"StyleWithCSS",!1),Hf(s,"enableInlineTableEditing",!1),Hf(s,"enableObjectResizing",!1),d0(s)&&s.focus(),(d=>{d.selection.setRng(d.selection.getRng())})(s),s.nodeChanged())})(e,a.editorReadOnly),t.set(r),(s=e).dispatch("SwitchMode",{mode:r})},Gf=G.each,Kf=G.explode,uB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Bk=G.makeMap("alt,ctrl,shift,meta,access"),mB=e=>{const t={},n=Ge.os.isMacOS()||Ge.os.isiOS();Gf(Kf(e.toLowerCase(),"+"),a=>{a in Bk?t[a]=!0:/^[0-9]{2,}$/.test(a)?t.keyCode=parseInt(a,10):(t.charCode=a.charCodeAt(0),t.keyCode=uB[a]||a.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let o;for(o in Bk)t[o]?r.push(o):t[o]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Lk{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(Gf(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,r,o){const a=this,s=a.normalizeCommandFunc(r);return Gf(Kf(G.trim(t)),i=>{const l=a.createShortcut(i,n,s,o);a.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,r=t;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:G.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,n,r,o){const a=G.map(Kf(t,">"),mB);return a[a.length-1]=G.extend(a[a.length-1],{func:r,scope:o||this.editor}),G.extend(a[0],{desc:this.editor.translate(n),subpatterns:a.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const fB=()=>{const e=(()=>{const t={},n={},r={},o={},a={},s={},i={},l={},d=(c,u)=>(m,p)=>{c[m.toLowerCase()]={...p,type:u}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(s,"contexttoolbar"),addContextForm:d(s,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>o[c.toLowerCase()]=u,getAll:()=>({buttons:t,menuItems:n,icons:o,popups:r,contextMenus:a,contextToolbars:s,sidebars:i,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Jo=it.DOM,Pk=G.extend,gB=G.each;class Cd{constructor(t,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,Pk(this,Nk);const o=this;this.id=t,this.hidden=!1;const a=((e,t,n,r,o)=>{var a;const s=e?{mobile:KO(null!==(a=o.mobile)&&void 0!==a?a:{},t)}:{},i=((e,t)=>{const n=((a,s)=>{const i={},l={};return Wa(a,(d,c)=>Ke(e,c),Mn(i),Mn(l)),{t:i,f:l}})(t);return o=n.f,{sections:X(n.t),options:X(o)};var o})(["mobile"],sf(s,o)),l=G.extend(n,r,i.options(),e&&zf(i,"mobile")?((d,c,u={})=>{const m=d.sections(),p=ut(m,c).getOr({});return G.extend({},u,p)})(i,"mobile"):{},{external_plugins:YO(r,i.options())});return((d,c,u,m)=>{const p=vi(u.forced_plugins),f=vi(m.plugins),h=zf(v=c,"mobile")?v.sections().mobile:{},g=((v,y,E,w)=>v&&zf(y,"mobile")?w:E)(d,c,f,h.plugins?vi(h.plugins):f),b=((v,y)=>[...vi(v),...vi(y)])(p,g);var v;return G.extend(m,{forced_plugins:p,plugins:b})})(e,i,r,l)})(yk||WO,yk,f=n,r.defaultOptions,f);var f;this.options=((p,f)=>{const h={},g={},b=(y,E,w)=>{const k=Wf(E,w);return Tk(k)?(g[y]=k.value,!0):(console.warn(Rk(`Invalid value passed for the ${y} option`,k)),!1)},v=y=>Pe(h,y);return{register:(y,E)=>{const w=te(E.processor)?(A=>{const T=(()=>{switch(A){case"array":return H;case"boolean":return se;case"function":return Ce;case"number":return ke;case"object":return Ue;case"string":return te;case"string[]":return dB;case"object[]":return O=>We(O,Ue);case"regexp":return O=>Gt(O,RegExp);default:return dt}})();return O=>Wf(O,T,`The value must be a ${A}.`)})(E.processor):E.processor,k=((A,T,O)=>{if(!J(T)){const P=Wf(T,O);if(Tk(P))return P.value;console.error(Rk(`Invalid default value passed for the "${A}" option`,P))}})(y,E.default,w);h[y]={...E,default:k,processor:w},ut(g,y).orThunk(()=>ut(f,y)).each(A=>b(y,A,w))},isRegistered:v,get:y=>ut(g,y).orThunk(()=>ut(h,y).map(E=>E.default)).getOrUndefined(),set:(y,E)=>{if(v(y)){const w=h[y];return w.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,E,w.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const E=v(y);return E&&delete g[y],E},isSet:y=>Pe(g,y)}})(0,a),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:Ch(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:Ch(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=te(h)&&rr(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=Ke(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>se(h)||te(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||te(h)||We(h,te);return g?te(h)?{value:ze(h.split(","),ra),valid:g}:H(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Lc(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=te(h)||We(h,te);return g?{value:H(h)?h:ze(h.split(","),ra),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=se(h)||te(h);return g?!1===h||Rc.isiPhone()||Rc.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!yx}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||te(h)||Ce(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||te(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:Tc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:Tc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:Tc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>te(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>We(h,Ue)||!1===h?{value:vh(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return Ce(h)?{value:(g=h,b=>{const v=g(b);return vh(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>We(h,yh)?{value:h,valid:!0}:yh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=Ke(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=Ke(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),f("force_hex_color",{processor:h=>{const g=["always","rgb_only","off"],b=Ke(g,h);return b?{value:h,valid:b}:{valid:!1,message:`Must be one of: ${g.join(", ")}.`}},default:"off"}),f("sandbox_iframes",{processor:"boolean",default:!1}),f("convert_unsafe_embeds",{processor:"boolean",default:!1}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:Xn.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:Cx.getAttrib(p.getElement(),"placeholder")})})})(o);const s=this.options.get;s("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=(e=>{const t=uC(e,eR),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),F(t)})(h),v=(e=>mC(e,nR))(g),y=v.length>0,E=b.length>0,w="mobile"===g.theme;if(y||E||w){const k="\n- ",A=w?`\n\nThemes:${k}mobile`:"",T=y?`\n\nPlugins:${k}${v.join(k)}`:"",O=E?`\n\nOptions:${k}${b.join(k)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+A+T+O)}})(p,f),((h,g)=>{const b=(e=>uC(e,tR))(h),v=(e=>mC(e,cC.map(t=>t.name)))(g),y=v.length>0,E=b.length>0;if(y||E){const w="\n- ",k=y?`\n\nPlugins:${w}${v.map(iR).join(w)}`:"",A=E?`\n\nOptions:${w}${b.join(w)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+k+A)}})(p,f)})(n,a);const i=s("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=s("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const d=Oc(o);d&&(Dr.ScriptLoader._setReferrerPolicy(d),it.DOM.styleSheetLoader._setReferrerPolicy(d));const c=Bh(o);M(c)&&it.DOM.styleSheetLoader._setContentCssCors(c),nn.languageLoad=s("language_load"),nn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Hn(wh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Lc(o),this.hasVisual=dS(o),this.shortcuts=new Lk(this),this.editorCommands=new _k(this),(e=>{var t;(e=>{(t=>{const n=r=>()=>{U("left,center,right,justify".split(","),o=>{r!==o&&t.formatter.remove("align"+o)}),"none"!==r&&(t.formatter.toggle("align"+r,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=r=>()=>{const o=t.selection,a=o.isCollapsed()?[t.dom.getParent(o.getNode(),t.dom.isBlock)]:o.getSelectedBlocks();return ct(a,s=>M(t.formatter.matchNode(s,r)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)})(e),(t=e).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=t.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let a=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ge.os.isMacOS()||Ge.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:a,type:"error"})}}}),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let a=0;t.dom.getParent(t.selection.getNode(),s=>!ue(s)||a++!==o||(t.selection.select(s),!1),t.getBody())},mceSelectNode:(n,r,o)=>{t.selection.select(o)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),Un);if(n){const r=t.dom.createRng();r.selectNodeContents(n),t.selection.setRng(r)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{hd(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{hd(t,t.dom.encode(o))},insertHTML:(n,r,o)=>{hd(t,o)},mceInsertContent:(n,r,o)=>{hd(t,o)},mceSetContent:(n,r,o)=>{t.setContent(o)},mceReplaceContent:(n,r,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(wS(t))}})})(e),(t=>{const n=(r,o,a)=>{const s=te(a)?{href:a}:a,i=t.dom.getParent(t.selection.getNode(),"a");Ue(s)&&te(s.href)&&(s.href=s.href.replace(/ /g,"%20"),i&&s.href||t.formatter.remove("link"),s.href&&t.formatter.apply("link",s,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{Rw(t,"indent")},Outdent:()=>{Tw(t)}}),t.editorCommands.addCommands({Outdent:()=>Sw(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{Ek(t,!0)},InsertNewBlockAfter:()=>{Ek(t,!1)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{id(VE,t)},mceInsertNewLine:(n,r,o)=>{QE(t,o)},InsertLineBreak:(n,r,o)=>{id(KE,t)}})})(e),(t=>{var n;(n=t).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const a=o.parentNode;if(a&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)){const s=n.selection.getBookmark();n.dom.split(a,o),n.selection.moveToBookmark(s)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(t)})(e),(t=>{(n=>{const r=(o,a)=>{n.formatter.toggle(o,a),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,a,s)=>{r(o,{value:s})},BackColor:(o,a,s)=>{r("hilitecolor",{value:s})},FontName:(o,a,s)=>{((i,l)=>{const d=wk(i,l);i.formatter.toggle("fontname",{value:oB(d)}),i.nodeChanged()})(n,s)},FontSize:(o,a,s)=>{var i;(i=n).formatter.toggle("fontsize",{value:wk(i,s)}),i.nodeChanged()},LineHeight:(o,a,s)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(s)}),i.nodeChanged()},Lang:(o,a,s)=>{var i;r(o,{value:s.code,customValue:null!==(i=s.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,a,s)=>{r(te(s)?s:"p")},mceToggleFormat:(o,a,s)=>{r(s)}})})(t),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return jf(o=n,a=>nB(o.getBody(),a.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return jf(o=n,a=>tB(o.getBody(),a.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return jf(o=n,a=>{const s=_(o.getBody());return Zu(a,l=>Li(l,"line-height"),oe(Xe,s)).getOrThunk(()=>{const l=parseFloat(ir(a,"line-height")),d=parseFloat(ir(a,"font-size"));return String(l/d)})}).getOr("");var o})})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const a=null!=o?o:t.selection.getNode();if(a!==t.getBody()){const s=t.selection.getBookmark();t.dom.remove(a,!0),t.selection.moveToBookmark(s)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,r,o)=>{var a;(a=t).removed||(!0===o?yu(a):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),M(i.bookmark)&&!zo(i)&&gu(i).each(m=>{i.selection.setRng(m),c=m});const u=(m=i,p=l.getNode(),m.dom.getParent(p,f=>"true"===m.dom.getContentEditable(f)));var m,p;if(u&&i.dom.isChildOf(u,d))return vu(u),l0(i,c),void yu(i);i.inline||(Ge.browser.isOpera()||vu(d),i.getWin().focus()),(Ge.browser.isFirefox()||i.inline)&&(vu(d),l0(i,c)),yu(i)})(a))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)})(this);const u=s("cache_suffix");u&&(Ge.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:fB(),styleSheetLoader:void 0,show:we,hide:we,setEnabled:we,isEnabled:dt},this.mode=(p=>{const f=Pt("design"),h=Pt({design:{activate:we,deactivate:we,editorReadOnly:!1},readonly:{activate:we,deactivate:we,editorReadOnly:!0}});return(g=p).serializer?xk(g):g.on("PreInit",()=>{xk(g)}),(g=>{g.on("ShowCaret",b=>{Zo(g)&&b.preventDefault()}),g.on("ObjectSelected",b=>{Zo(g)&&b.preventDefault()})})(p),{isReadOnly:()=>Zo(p),set:g=>((b,v,y,E)=>{if(E!==y.get()){if(!Pe(v,E))throw new Error(`Editor mode '${E}' is invalid`);b.initialized?Ok(b,y,v,E):b.on("init",()=>Ok(b,y,v,E))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,E)=>{if(Ke(cB,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...E,deactivate:()=>{try{E.deactivate()}catch(w){console.error(`problem while deactivating editor mode ${y}:`,w)}}}}})(h.get(),g,b))}};var g})(o),r.dispatch("SetupEditor",{editor:this});const m=mS(o);Ce(m)&&m.call(o,o)}render(){(t=>{const n=t.id;Xn.setCode(Sh(t));const r=()=>{Yo.unbind(window,"ready",r),t.render()};if(!Ro.Event.domLoaded)return void Yo.bind(window,"ready",r);if(!t.getElement())return;const o=_(t.getElement()),a=xg(o);var l;t.on("remove",()=>{_r(o.dom.attributes,i=>zt(o,i.name)),Sr(o,a)}),t.ui.styleSheetLoader=vp.forElement(o,{contentCssCors:Bh(l=t),referrerPolicy:Oc(l)}),Lc(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const s=t.getElement().form||Yo.getParent(n,"form");s&&(t.formElement=s,eS(t)&&!Vd(t.getElement())&&(Yo.insertAfter(Yo.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},Yo.bind(s,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!tS(t)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),s._mceOldSubmit(s)))),t.windowManager=hC(t),t.notificationManager=pC(t),"xml"===t.options.get("encoding")&&t.on("GetContent",i=>{i.save&&(i.content=Yo.encode(i.content))}),nS(t)&&t.on("submit",()=>{t.initialized&&t.save()}),rS(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((e,t)=>{const n=Dr.ScriptLoader,r=()=>{!e.removed&&(o=>{const a=va(o);return!te(a)||M(Go.get(a))})(e)&&(o=>{const a=Bc(o);return M(Ta.get(a))})(e)&&qO(e)};((o,a)=>{const s=va(o);if(te(s)&&!hk(s)&&!Pe(Go.urls,s)){const i=Gx(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${s}/theme${a}.js`;Go.load(s,l).catch(()=>{ei(o,"ThemeLoadError",ti("theme",l,s))})}})(e,t),((o,a)=>{const s=Bc(o);if("plugin"!==s&&!Pe(Ta.urls,s)){const i=Kx(o),l=te(i)?o.documentBaseURI.toAbsolute(i):`models/${s}/model${a}.js`;Ta.load(s,l).catch(()=>{ei(o,"ModelLoadError",ti("model",l,s))})}})(e,t),((o,a)=>{const s=Sh(a),i=Fx(a);if(!Xn.hasCode(s)&&"en"!==s){const l=rr(i)?i:`${a.editorManager.baseURL}/langs/${s}.js`;o.add(l).catch(()=>{ei(a,"LanguageLoadError",ti("language",l,s))})}})(n,e),((o,a,s)=>{const i=bk(a,"default",s),l=(d=a,C.from(Bx(d)).filter(rr).map(c=>({url:c,name:C.none()}))).orThunk(()=>bk(a,xh(a),""));var d;U((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{o.add(d.url).catch(()=>{var c,u,m;c=a,u=d.url,m=d.name.getOrUndefined(),ei(c,"IconsLoadError",ti("icons",u,m))})})})(n,e,t),((o,a)=>{const s=(i,l)=>{Oa.load(i,l).catch(()=>{ei(o,"PluginLoadError",ti("plugin",l,i))})};ge(iS(o),(i,l)=>{s(l,i),o.options.set("plugins",tl(o).concat(l))}),U(tl(o),i=>{!(i=G.trim(i))||Oa.urls[i]||hk(i)||s(i,`plugins/${i}/plugin${a}.js`)})})(e,t),n.loadQueue().then(r,r)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return zo(this)}translate(t){return Xn.translate(t)}getParam(t,n,r){const o=this.options;return o.isRegistered(t)||(M(r)?o.register(t,{processor:r,default:n}):o.register(t,{processor:dt,default:n})),o.isSet(t)||J(n)?o.get(t):n}hasPlugin(t,n){return!(!Ke(tl(this),t)||n&&void 0===Oa.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,r){this.editorCommands.addCommand(t,n,r)}addQueryStateHandler(t,n,r){this.editorCommands.addQueryStateHandler(t,n,r)}addQueryValueHandler(t,n,r){this.editorCommands.addQueryValueHandler(t,n,r)}addShortcut(t,n,r,o){this.shortcuts.add(t,n,r,o)}execCommand(t,n,r,o){return this.editorCommands.execCommand(t,n,r,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Jo.show(t.getContainer()),Jo.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Jo.hide(t.getContainer()),Jo.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...t,load:!0},a=Vd(r)?r.value:r.innerHTML,s=n.setContent(a,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),s}return""}save(t={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...t,save:!0,element:r};let a=n.getContent(o);const s={...o,content:a};if(s.no_events||n.dispatch("SaveContent",s),"raw"===s.format&&n.dispatch("RawSaveContent",s),a=s.content,Vd(r))r.value=a;else{!t.is_removing&&n.inline||(r.innerHTML=a);const i=Jo.getParent(n.id,"form");i&&gB(i.elements,l=>l.name!==n.id||(l.value=a,!1))}return s.element=o.element=r=null,!1!==s.set_dirty&&n.setDirty(!1),a}setContent(t,n){return Am(this,t,n)}getContent(t){return((n,r={})=>{const o=(a=r,s=r.format?r.format:"html",{...a,format:s,get:!0,getInner:!0});var a,s;return qy(n,o).fold(ht,a=>{const s=(l=a,Sm(n).editor.getContent(l));var l;return Vy(n,s,a)})})(this,t)}insertContent(t,n){n&&(t=Pk({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?Am(this,this.startContent,{format:"raw"}):Am(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Jo.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Jo.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const r=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:null==r?void 0:r.body)&&void 0!==n?n:null}convertURL(t,n,r){const o=this,a=o.options.get,s=gS(o);if(Ce(s))return s.call(o,t,r,!0,n);if(!a("convert_urls")||"link"===r||Ue(r)&&"LINK"===r.nodeName||0===t.indexOf("file:")||0===t.length)return t;const i=new Hn(t);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?t:a("relative_urls")?o.documentBaseURI.toRelative(t):t=o.documentBaseURI.toAbsolute(t,a("remove_script_host"))}addVisual(t){((n,r)=>{var a;a=r,Ct(this).editor.addVisual(a)})(0,t)}setEditableRoot(t){var n,r;(n=this)._editableRoot!==(r=t)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:r}=t,o=t.getBody(),a=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&M(null==a?void 0:a.nextSibling)&&Il.remove(a.nextSibling),t.dispatch("remove"),t.editorManager.remove(t),!t.inline&&o&&Il.setStyle((s=t).id,"display",s.orgDisplay),(s=>{s.dispatch("detach")})(t),Il.remove(t.getContainer()),Ml(n),Ml(r),t.destroy()}var s})(this)}destroy(t){((n,r)=>{const{selection:o,dom:a}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Ml(o),Ml(a)),(s=>{const i=s.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),Il.unbind(i,"submit reset",s.formEventDelegate))})(n),(s=>{const i=s;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=s.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const $a=it.DOM,wd=G.each;let Ed,Dk=!1,fn=[];const kd=e=>{const t=e.type;wd(so.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},Ik=e=>{if(e!==Dk){const t=it.DOM;e?(t.bind(window,"resize",kd),t.bind(window,"scroll",kd)):(t.unbind(window,"resize",kd),t.unbind(window,"scroll",kd)),Dk=e}},Mk=e=>{const t=fn;return fn=Ae(fn,n=>e!==n),so.activeEditor===e&&(so.activeEditor=fn.length>0?fn[0]:null),so.focusedEditor===e&&(so.focusedEditor=null),t.length!==fn.length},pB="CSS1Compat"!==document.compatMode,so={...Vf,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.5",releaseDate:"TBD",i18n:Xn,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",r=Hn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const s=document.getElementsByTagName("script");for(let i=0;i<s.length;i++){const l=s[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var a;e.baseURL=new Hn(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Hn(e.baseURL),e.suffix=n,(a=e).on("AddEditor",oe(_A,a)),a.on("RemoveEditor",oe(xA,a))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;void 0!==r&&ge(r,(o,a)=>{nn.PluginManager.urls[a]=o})},init(e){const t=this;let n;const r=G.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=s=>{n=s};const a=()=>{let s=0;const i=[];let l;var d;$a.unbind(window,"ready",a),(d=>{const c=e.onpageload;c&&c.apply(t,[])})(),l=((d,c)=>{const u=[],m=Ce(c)?p=>ct(u,f=>c(f,p)):p=>Ke(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];m(h)||u.push(h)}return u})((d=e,Ge.browser.isIE()||Ge.browser.isEdge()?($l("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):pB?($l("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):te(d.selector)?$a.select(d.selector):M(d.target)?[d.target]:[])),G.each(l,d=>{var c;(c=t.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(Mk(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=G.grep(l,d=>!t.get(d.id)),0===l.length?o([]):wd(l,d=>{e.inline&&d.tagName.toLowerCase()in r?$l("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new Cd(c,u,t);i.push(p),p.on("init",()=>{++s===l.length&&o(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=ut(c,"name").filter(m=>!$a.get(m)).getOrThunk($a.uniqueId),c.setAttribute("id",u)),u})(d),e,d)})};return $a.bind(window,"ready",a),new Promise(s=>{n?s(n):o=i=>{s(i)}})},get(e){return 0===arguments.length?fn.slice(0):te(e)?_t(fn,t=>t.id===e).getOr(null):ke(e)&&fn[e]?fn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&fn.push(e),Ik(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Ed||(Ed=r=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Ed))),e},createEditor(e,t){return this.add(new Cd(e,t,this))},remove(e){const t=this;let n;if(e){if(!te(e))return n=e,V(t.get(n.id))?null:(Mk(n)&&t.dispatch("RemoveEditor",{editor:n}),0===fn.length&&window.removeEventListener("beforeunload",Ed),n.remove(),Ik(fn.length>0),n);wd($a.select(e),r=>{n=t.get(r.id),n&&t.remove(n)})}else for(let r=fn.length-1;r>=0;r--)t.remove(fn[r])},execCommand(e,t,n){var r;const o=this,a=Ue(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(e){case"mceAddEditor":return o.get(a)||new Cd(a,n.options,o).render(),!0;case"mceRemoveEditor":{const s=o.get(a);return s&&s.remove(),!0}case"mceToggleEditor":{const s=o.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{wd(fn,e=>{e.save()})},addI18n:(e,t)=>{Xn.add(e,t)},translate:e=>Xn.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Hn(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Hn(this.baseURL)}};so.setup();const hB=(()=>{const e=Yr();return{FakeClipboardItem:t=>({items:t,types:Me(t),getType:n=>ut(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),Fk=Math.min,za=Math.max,_d=Math.round,Uk=(e,t,n)=>{let r=t.x,o=t.y;const a=e.w,s=e.h,i=t.w,l=t.h,d=(n||"").split("");return"b"===d[0]&&(o+=l),"r"===d[1]&&(r+=i),"c"===d[0]&&(o+=_d(l/2)),"c"===d[1]&&(r+=_d(i/2)),"b"===d[3]&&(o-=s),"r"===d[4]&&(r-=a),"c"===d[3]&&(o-=_d(s/2)),"c"===d[4]&&(r-=_d(a/2)),ja(r,o,a,s)},ja=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),bB={inflate:(e,t,n)=>ja(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:Uk,findBestRelativePosition:(e,t,n,r)=>{for(let o=0;o<r.length;o++){const a=Uk(e,t,r[o]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return r[o]}return null},intersect:(e,t)=>{const n=za(e.x,t.x),r=za(e.y,t.y),o=Fk(e.x+e.w,t.x+t.w),a=Fk(e.y+e.h,t.y+t.h);return o-n<0||a-r<0?null:ja(n,r,o-n,a-r)},clamp:(e,t,n)=>{let r=e.x,o=e.y,a=e.x+e.w,s=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,d=za(0,t.x-r),c=za(0,t.y-o),u=za(0,a-i),m=za(0,s-l);return r+=d,o+=c,n&&(a+=d,s+=c,r-=u,o-=m),a-=u,s-=m,ja(r,o,a-r,s-o)},create:ja,fromClientRect:e=>ja(e.left,e.top,e.width,e.height)},vB=(()=>{const e={},t={},n={};return{load:(r,o)=>{const a=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==e[r])return e[r];{const i=new Promise((l,d)=>{const c=((u,m,p=1e3)=>{let f=!1,h=null;const g=y=>(...E)=>{f||(f=!0,null!==h&&(clearTimeout(h),h=null),y.apply(null,E))},b=g(u),v=g(m);return{start:(...y)=>{f||null!==h||(h=setTimeout(()=>v.apply(null,y),p))},resolve:b,reject:v}})(l,d);t[r]=c.resolve,Dr.ScriptLoader.loadScript(o).then(()=>c.start(s),()=>c.reject(a))});return e[r]=i,i}},add:(r,o)=>{void 0!==t[r]&&(t[r](o),delete t[r]),e[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete e[r]}}})();let Ci;try{const e="__storage_test__";Ci=window.localStorage,Ci.setItem(e,e),Ci.removeItem(e)}catch{Ci=(()=>{let t={},n=[];const r={getItem:o=>t[o]||null,setItem:(o,a)=>{n.push(o),t[o]=String(a)},key:o=>n[o],removeItem:o=>{n=n.filter(a=>a===o),delete t[o]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const yB={geom:{Rect:bB},util:{Delay:Tn,Tools:G,VK:ae,URI:Hn,EventDispatcher:qf,Observable:Vf,I18n:Xn,LocalStorage:Ci,ImageUploader:e=>{const t=yC(),n=wC(e,t);return{upload:(r,o=!0)=>n.upload(r,o?CC(e):void 0)}}},dom:{EventUtils:Ro,TreeWalker:Rt,TextSeeker:Bo,DOMUtils:it,ScriptLoader:Dr,RangeUtils:$o,Serializer:dC,StyleSheetLoader:bp,ControlSelection:Fb,BookmarkManager:Fs,Selection:lC,Event:Ro.Event},html:{Styles:gc,Entities:No,Node:rn,Schema:Kr,DomParser:Ra,Writer:N0,Serializer:eo},Env:Ge,AddOnManager:nn,Annotator:Rb,Formatter:_C,UndoManager:SC,EditorCommands:_k,WindowManager:hC,NotificationManager:pC,EditorObservable:Nk,Shortcuts:Lk,Editor:Cd,FocusManager:i0,EditorManager:so,DOM:it.DOM,ScriptLoader:Dr.ScriptLoader,PluginManager:Oa,ThemeManager:Go,ModelManager:Ta,IconManager:Fl,Resource:vB,FakeClipboard:hB,trim:G.trim,isArray:G.isArray,is:G.is,toArray:G.toArray,makeMap:G.makeMap,each:G.each,map:G.map,grep:G.grep,inArray:G.inArray,extend:G.extend,walk:G.walk,resolve:G.resolve,explode:G.explode,_addCacheSuffix:G._addCacheSuffix},$k=G.extend(so,yB);(e=>{window.tinymce=e,window.tinyMCE=e})($k),(e=>{if("object"==typeof module)try{module.exports=e}catch{}})($k)}();var _self=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Prism=function(j){var Z=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,le=0,Le={},fe={manual:j.Prism&&j.Prism.manual,disableWorkerMessageHandler:j.Prism&&j.Prism.disableWorkerMessageHandler,util:{encode:function H(V){return V instanceof He?new He(V.type,H(V.content),V.alias):Array.isArray(V)?V.map(H):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(H){return Object.prototype.toString.call(H).slice(8,-1)},objId:function(H){return H.__id||Object.defineProperty(H,"__id",{value:++le}),H.__id},clone:function H(V,se){var J,ne;switch(se=se||{},fe.util.type(V)){case"Object":if(ne=fe.util.objId(V),se[ne])return se[ne];for(var M in se[ne]=J={},V)V.hasOwnProperty(M)&&(J[M]=H(V[M],se));return J;case"Array":return ne=fe.util.objId(V),se[ne]?se[ne]:(se[ne]=J=[],V.forEach(function(Ce,ke){J[ke]=H(Ce,se)}),J);default:return V}},getLanguage:function(H){for(;H;){var V=Z.exec(H.className);if(V)return V[1].toLowerCase();H=H.parentElement}return"none"},setLanguage:function(H,V){H.className=H.className.replace(RegExp(Z,"gi"),""),H.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&"SCRIPT"===document.currentScript.tagName)return document.currentScript;try{throw new Error}catch(J){var H=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(J.stack)||[])[1];if(H){var V=document.getElementsByTagName("script");for(var se in V)if(V[se].src==H)return V[se]}return null}},isActive:function(H,V,se){for(var J="no-"+V;H;){var ne=H.classList;if(ne.contains(V))return!0;if(ne.contains(J))return!1;H=H.parentElement}return!!se}},languages:{plain:Le,plaintext:Le,text:Le,txt:Le,extend:function(H,V){var se=fe.util.clone(fe.languages[H]);for(var J in V)se[J]=V[J];return se},insertBefore:function(H,V,se,J){var ne=(J=J||fe.languages)[H],M={};for(var Ce in ne)if(ne.hasOwnProperty(Ce)){if(Ce==V)for(var ke in se)se.hasOwnProperty(ke)&&(M[ke]=se[ke]);se.hasOwnProperty(Ce)||(M[Ce]=ne[Ce])}var We=J[H];return J[H]=M,fe.languages.DFS(fe.languages,function(we,Et){Et===We&&we!=H&&(this[we]=M)}),M},DFS:function H(V,se,J,ne){ne=ne||{};var M=fe.util.objId;for(var Ce in V)if(V.hasOwnProperty(Ce)){se.call(V,Ce,V[Ce],J||Ce);var ke=V[Ce],We=fe.util.type(ke);"Object"!==We||ne[M(ke)]?"Array"===We&&!ne[M(ke)]&&(ne[M(ke)]=!0,H(ke,se,Ce,ne)):(ne[M(ke)]=!0,H(ke,se,null,ne))}}},plugins:{},highlightAll:function(H,V){fe.highlightAllUnder(document,H,V)},highlightAllUnder:function(H,V,se){var J={callback:se,container:H,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};fe.hooks.run("before-highlightall",J),J.elements=Array.prototype.slice.apply(J.container.querySelectorAll(J.selector)),fe.hooks.run("before-all-elements-highlight",J);for(var M,ne=0;M=J.elements[ne++];)fe.highlightElement(M,!0===V,J.callback)},highlightElement:function(H,V,se){var J=fe.util.getLanguage(H),ne=fe.languages[J];fe.util.setLanguage(H,J);var M=H.parentElement;M&&"pre"===M.nodeName.toLowerCase()&&fe.util.setLanguage(M,J);var ke={element:H,language:J,grammar:ne,code:H.textContent};function We(Et){ke.highlightedCode=Et,fe.hooks.run("before-insert",ke),ke.element.innerHTML=ke.highlightedCode,fe.hooks.run("after-highlight",ke),fe.hooks.run("complete",ke),se&&se.call(ke.element)}if(fe.hooks.run("before-sanity-check",ke),(M=ke.element.parentElement)&&"pre"===M.nodeName.toLowerCase()&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!ke.code)return fe.hooks.run("complete",ke),void(se&&se.call(ke.element));if(fe.hooks.run("before-highlight",ke),ke.grammar)if(V&&j.Worker){var we=new Worker(fe.filename);we.onmessage=function(Et){We(Et.data)},we.postMessage(JSON.stringify({language:ke.language,code:ke.code,immediateClose:!0}))}else We(fe.highlight(ke.code,ke.grammar,ke.language));else We(fe.util.encode(ke.code))},highlight:function(H,V,se){var J={code:H,grammar:V,language:se};if(fe.hooks.run("before-tokenize",J),!J.grammar)throw new Error('The language "'+J.language+'" has no grammar.');return J.tokens=fe.tokenize(J.code,J.grammar),fe.hooks.run("after-tokenize",J),He.stringify(fe.util.encode(J.tokens),J.language)},tokenize:function(H,V){var se=V.rest;if(se){for(var J in se)V[J]=se[J];delete V.rest}var ne=new Ze;return ot(ne,ne.head,H),tt(H,ne,V,ne.head,0),function Gt(H){for(var V=[],se=H.head.next;se!==H.tail;)V.push(se.value),se=se.next;return V}(ne)},hooks:{all:{},add:function(H,V){var se=fe.hooks.all;se[H]=se[H]||[],se[H].push(V)},run:function(H,V){var se=fe.hooks.all[H];if(se&&se.length)for(var ne,J=0;ne=se[J++];)ne(V)}},Token:He};function He(H,V,se,J){this.type=H,this.content=V,this.alias=se,this.length=0|(J||"").length}function et(H,V,se,J){H.lastIndex=V;var ne=H.exec(se);if(ne&&J&&ne[1]){var M=ne[1].length;ne.index+=M,ne[0]=ne[0].slice(M)}return ne}function tt(H,V,se,J,ne,M){for(var Ce in se)if(se.hasOwnProperty(Ce)&&se[Ce]){var ke=se[Ce];ke=Array.isArray(ke)?ke:[ke];for(var We=0;We<ke.length;++We){if(M&&M.cause==Ce+","+We)return;var we=ke[We],Et=we.inside,tr=!!we.lookbehind,X=!!we.greedy,ht=we.alias;if(X&&!we.pattern.global){var nr=we.pattern.toString().match(/[imsuy]*$/)[0];we.pattern=RegExp(we.pattern.source,nr+"g")}for(var oe=we.pattern||we,pt=J.next,qt=ne;pt!==V.tail&&!(M&&qt>=M.reach);qt+=pt.value.length,pt=pt.next){var ln=pt.value;if(V.length>H.length)return;if(!(ln instanceof He)){var qe,dn=1;if(X){if(!(qe=et(oe,qt,H,tr))||qe.index>=H.length)break;var vn=qe.index,dt=qe.index+qe[0].length,C=qt;for(C+=pt.value.length;vn>=C;)C+=(pt=pt.next).value.length;if(qt=C-=pt.value.length,pt.value instanceof He)continue;for(var kt=pt;kt!==V.tail&&(C<dt||"string"==typeof kt.value);kt=kt.next)dn++,C+=kt.value.length;dn--,ln=H.slice(qt,C),qe.index-=qt}else if(!(qe=et(oe,0,ln,tr)))continue;var bt=qe[0],jr=ln.slice(0,vn=qe.index),Ke=ln.slice(vn+bt.length),ct=qt+ln.length;M&&ct>M.reach&&(M.reach=ct);var ze=pt.prev;if(jr&&(ze=ot(V,ze,jr),qt+=jr.length),tn(V,ze,dn),pt=ot(V,ze,new He(Ce,Et?fe.tokenize(bt,Et):bt,ht,bt)),Ke&&ot(V,pt,Ke),dn>1){var _r={cause:Ce+","+We,reach:ct};tt(H,V,se,pt.prev,qt,_r),M&&_r.reach>M.reach&&(M.reach=_r.reach)}}}}}}function Ze(){var H={value:null,prev:null,next:null},V={value:null,prev:H,next:null};H.next=V,this.head=H,this.tail=V,this.length=0}function ot(H,V,se){var J=V.next,ne={value:se,prev:V,next:J};return V.next=ne,J.prev=ne,H.length++,ne}function tn(H,V,se){for(var J=V.next,ne=0;ne<se&&J!==H.tail;ne++)J=J.next;V.next=J,J.prev=V,H.length-=ne}if(j.Prism=fe,He.stringify=function H(V,se){if("string"==typeof V)return V;if(Array.isArray(V)){var J="";return V.forEach(function(We){J+=H(We,se)}),J}var ne={type:V.type,content:H(V.content,se),tag:"span",classes:["token",V.type],attributes:{},language:se},M=V.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(ne.classes,M):ne.classes.push(M)),fe.hooks.run("wrap",ne);var Ce="";for(var ke in ne.attributes)Ce+=" "+ke+'="'+(ne.attributes[ke]||"").replace(/"/g,"&quot;")+'"';return"<"+ne.tag+' class="'+ne.classes.join(" ")+'"'+Ce+">"+ne.content+"</"+ne.tag+">"},!j.document)return j.addEventListener&&(fe.disableWorkerMessageHandler||j.addEventListener("message",function(H){var V=JSON.parse(H.data),se=V.language,ne=V.immediateClose;j.postMessage(fe.highlight(V.code,fe.languages[se],se)),ne&&j.close()},!1)),fe;var te=fe.util.currentScript();function Ue(){fe.manual||fe.highlightAll()}if(te&&(fe.filename=te.src,te.hasAttribute("data-manual")&&(fe.manual=!0)),!fe.manual){var lt=document.readyState;"loading"===lt||"interactive"===lt&&te&&te.defer?document.addEventListener("DOMContentLoaded",Ue):window.requestAnimationFrame?window.requestAnimationFrame(Ue):window.setTimeout(Ue,16)}return fe}(_self);typeof module<"u"&&module.exports&&(module.exports=Prism),typeof global<"u"&&(global.Prism=Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(j){"entity"===j.type&&(j.attributes.title=j.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(Z,le){var Le={};Le["language-"+le]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[le]},Le.cdata=/^<!\[CDATA\[|\]\]>$/i;var fe={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Le}};fe["language-"+le]={pattern:/[\s\S]+/,inside:Prism.languages[le]};var He={};He[Z]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return Z}),"i"),lookbehind:!0,greedy:!0,inside:fe},Prism.languages.insertBefore("markup","cdata",He)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(j,Z){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+j+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Z,"language-"+Z],inside:Prism.languages[Z]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(j){var Z=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;j.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+Z.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Z.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Z.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+Z.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Z,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},j.languages.css.atrule.inside.rest=j.languages.css;var le=j.languages.markup;le&&(le.tag.addInlined("style","css"),le.tag.addAttribute("style","css"))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,function(){if(!(typeof Prism>"u"||typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var Le={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},fe="data-src-status",He="loading",Ze="pre[data-src]:not(["+fe+'="loaded"]):not(['+fe+'="'+He+'"])';Prism.hooks.add("before-highlightall",function(te){te.selector+=", "+Ze}),Prism.hooks.add("before-sanity-check",function(te){var Ue=te.element;if(Ue.matches(Ze)){te.code="",Ue.setAttribute(fe,He);var lt=Ue.appendChild(document.createElement("CODE"));lt.textContent="Loading\u2026";var H=Ue.getAttribute("data-src"),V=te.language;if("none"===V){var se=(/\.(\w+)$/.exec(H)||[,"none"])[1];V=Le[se]||se}Prism.util.setLanguage(lt,V),Prism.util.setLanguage(Ue,V);var J=Prism.plugins.autoloader;J&&J.loadLanguages(V),function ot(te,Ue,lt){var H=new XMLHttpRequest;H.open("GET",te,!0),H.onreadystatechange=function(){4==H.readyState&&(H.status<400&&H.responseText?Ue(H.responseText):lt(H.status>=400?function(te,Ue){return"\u2716 Error "+te+" while fetching file: "+Ue}(H.status,H.statusText):"\u2716 Error: File does not exist or is empty"))},H.send(null)}(H,function(ne){Ue.setAttribute(fe,"loaded");var M=function tn(te){var Ue=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(te||"");if(Ue){var lt=Number(Ue[1]),V=Ue[3];return Ue[2]?V?[lt,Number(V)]:[lt,void 0]:[lt,lt]}}(Ue.getAttribute("data-range"));if(M){var Ce=ne.split(/\r\n?|\n/g),ke=M[0],We=null==M[1]?Ce.length:M[1];ke<0&&(ke+=Ce.length),ke=Math.max(0,Math.min(ke-1,Ce.length)),We<0&&(We+=Ce.length),We=Math.max(0,Math.min(We,Ce.length)),ne=Ce.slice(ke,We).join("\n"),Ue.hasAttribute("data-start")||Ue.setAttribute("data-start",String(ke+1))}lt.textContent=ne,Prism.highlightElement(lt)},function(ne){Ue.setAttribute(fe,"failed"),lt.textContent=ne})}}),Prism.plugins.fileHighlight={highlight:function(Ue){for(var V,lt=(Ue||document).querySelectorAll(Ze),H=0;V=lt[H++];)Prism.highlightElement(V)}};var Gt=!1;Prism.fileHighlight=function(){Gt||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),Gt=!0),Prism.plugins.fileHighlight.highlight.apply(this,arguments)}}}(),Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean,function(j){var Z=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,le="\\b(?!<keyword>)\\w+(?:\\s*\\.\\s*\\w+)*\\b".replace(/<keyword>/g,function(){return Z.source});j.languages.cpp=j.languages.extend("c",{"class-name":[{pattern:RegExp("(\\b(?:class|concept|enum|struct|typename)\\s+)(?!<keyword>)\\w+".replace(/<keyword>/g,function(){return Z.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:Z,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),j.languages.insertBefore("cpp","string",{module:{pattern:RegExp('(\\b(?:import|module)\\s+)(?:"(?:\\\\(?:\r\n|[^])|[^"\\\\\r\n])*"|<[^<>\r\n]*>|'+"<mod-name>(?:\\s*:\\s*<mod-name>)?|:\\s*<mod-name>".replace(/<mod-name>/g,function(){return le})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),j.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:j.languages.cpp}}}}),j.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),j.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:j.languages.extend("cpp",{})}}),j.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},j.languages.cpp["base-clause"])}(Prism),Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python,Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(j){"entity"===j.type&&(j.attributes.title=j.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(j,Z){var le={};le["language-"+Z]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[Z]},le.cdata=/^<!\[CDATA\[|\]\]>$/i;var Le={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:le}};Le["language-"+Z]={pattern:/[\s\S]+/,inside:Prism.languages[Z]};var fe={};fe[j]={pattern:RegExp("(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[^])*?(?=</__>)".replace(/__/g,function(){return j}),"i"),lookbehind:!0,greedy:!0,inside:Le},Prism.languages.insertBefore("markup","cdata",fe)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(j,Z){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp("(^|[\"'\\s])(?:"+j+")\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))","i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Z,"language-"+Z],inside:Prism.languages[Z]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(j){var Z=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;j.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:[^;{\\s\"']|\\s+(?!\\s)|"+Z.source+")*?(?:;|(?=\\s*\\{))"),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Z.source+"|(?:[^\\\\\r\n()\"']|\\\\[^])*)\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Z.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+Z.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Z,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},j.languages.css.atrule.inside.rest=j.languages.css;var le=j.languages.markup;le&&(le.tag.addInlined("style","css"),le.tag.addAttribute("style","css"))}(Prism),function(j){function Z(C,kt){return C.replace(/<<(\d+)>>/g,function(vn,bt){return"(?:"+kt[+bt]+")"})}function le(C,kt,vn){return RegExp(Z(C,kt),vn||"")}function Le(C,kt){for(var vn=0;vn<kt;vn++)C=C.replace(/<<self>>/g,function(){return"(?:"+C+")"});return C.replace(/<<self>>/g,"[^\\s\\S]")}var fe="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",He="class enum interface record struct",et="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",tt="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function Ze(C){return"\\b(?:"+C.trim().replace(/ /g,"|")+")\\b"}var ot=Ze(He),tn=RegExp(Ze(fe+" "+He+" "+et+" "+tt)),Gt=Ze(He+" "+et+" "+tt),te=Ze(fe+" "+He+" "+tt),Ue=Le("<(?:[^<>;=+\\-*/%&|^]|<<self>>)*>",2),lt=Le("\\((?:[^()]|<<self>>)*\\)",2),H="@?\\b[A-Za-z_]\\w*\\b",V=Z("<<0>>(?:\\s*<<1>>)?",[H,Ue]),se=Z("(?!<<0>>)<<1>>(?:\\s*\\.\\s*<<1>>)*",[Gt,V]),J="\\[\\s*(?:,\\s*)*\\]",ne=Z("<<0>>(?:\\s*(?:\\?\\s*)?<<1>>)*(?:\\s*\\?)?",[se,J]),M=Z("[^,()<>[\\];=+\\-*/%&|^]|<<0>>|<<1>>|<<2>>",[Ue,lt,J]),Ce=Z("\\(<<0>>+(?:,<<0>>+)+\\)",[M]),ke=Z("(?:<<0>>|<<1>>)(?:\\s*(?:\\?\\s*)?<<2>>)*(?:\\s*\\?)?",[Ce,se,J]),We={keyword:tn,punctuation:/[<>()?,.:[\]]/},we="'(?:[^\r\n'\\\\]|\\\\.|\\\\[Uux][\\da-fA-F]{1,8})'",Et='"(?:\\\\.|[^\\\\"\r\n])*"';j.languages.csharp=j.languages.extend("clike",{string:[{pattern:le("(^|[^$\\\\])<<0>>",['@"(?:""|\\\\[^]|[^\\\\"])*"(?!")']),lookbehind:!0,greedy:!0},{pattern:le("(^|[^@$\\\\])<<0>>",[Et]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:le("(\\busing\\s+static\\s+)<<0>>(?=\\s*;)",[se]),lookbehind:!0,inside:We},{pattern:le("(\\busing\\s+<<0>>\\s*=\\s*)<<1>>(?=\\s*;)",[H,ke]),lookbehind:!0,inside:We},{pattern:le("(\\busing\\s+)<<0>>(?=\\s*=)",[H]),lookbehind:!0},{pattern:le("(\\b<<0>>\\s+)<<1>>",[ot,V]),lookbehind:!0,inside:We},{pattern:le("(\\bcatch\\s*\\(\\s*)<<0>>",[se]),lookbehind:!0,inside:We},{pattern:le("(\\bwhere\\s+)<<0>>",[H]),lookbehind:!0},{pattern:le("(\\b(?:is(?:\\s+not)?|as)\\s+)<<0>>",[ne]),lookbehind:!0,inside:We},{pattern:le("\\b<<0>>(?=\\s+(?!<<1>>|with\\s*\\{)<<2>>(?:\\s*[=,;:{)\\]]|\\s+(?:in|when)\\b))",[ke,te,H]),inside:We}],keyword:tn,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),j.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),j.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:le("([(,]\\s*)<<0>>(?=\\s*:)",[H]),lookbehind:!0,alias:"punctuation"}}),j.languages.insertBefore("csharp","class-name",{namespace:{pattern:le("(\\b(?:namespace|using)\\s+)<<0>>(?:\\s*\\.\\s*<<0>>)*(?=\\s*[;{])",[H]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:le("(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<<0>>)*(?=\\s*\\))",[lt]),lookbehind:!0,alias:"class-name",inside:We},"return-type":{pattern:le("<<0>>(?=\\s+(?:<<1>>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))",[ke,se]),inside:We,alias:"class-name"},"constructor-invocation":{pattern:le("(\\bnew\\s+)<<0>>(?=\\s*[[({])",[ke]),lookbehind:!0,inside:We,alias:"class-name"},"generic-method":{pattern:le("<<0>>\\s*<<1>>(?=\\s*\\()",[H,Ue]),inside:{function:le("^<<0>>",[H]),generic:{pattern:RegExp(Ue),alias:"class-name",inside:We}}},"type-list":{pattern:le("\\b((?:<<0>>\\s+<<1>>|record\\s+<<1>>\\s*<<5>>|where\\s+<<2>>)\\s*:\\s*)(?:<<3>>|<<4>>|<<1>>\\s*<<5>>|<<6>>)(?:\\s*,\\s*(?:<<3>>|<<4>>|<<6>>))*(?=\\s*(?:where|[{;]|=>|$))",[ot,V,H,ke,tn.source,lt,"\\bnew\\s*\\(\\s*\\)"]),lookbehind:!0,inside:{"record-arguments":{pattern:le("(^(?!new\\s*\\()<<0>>\\s*)<<1>>",[V,lt]),lookbehind:!0,greedy:!0,inside:j.languages.csharp},keyword:tn,"class-name":{pattern:RegExp(ke),greedy:!0,inside:We},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var tr=Et+"|"+we,X=Z("/(?![*/])|//[^\r\n]*[\r\n]|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>",[tr]),ht=Le(Z("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[X]),2),nr="\\b(?:assembly|event|field|method|module|param|property|return|type)\\b",oe=Z("<<0>>(?:\\s*\\(<<1>>*\\))?",[se,ht]);j.languages.insertBefore("csharp","class-name",{attribute:{pattern:le("((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<<0>>\\s*:\\s*)?<<1>>(?:\\s*,\\s*<<1>>)*(?=\\s*\\])",[nr,oe]),lookbehind:!0,greedy:!0,inside:{target:{pattern:le("^<<0>>(?=\\s*:)",[nr]),alias:"keyword"},"attribute-arguments":{pattern:le("\\(<<0>>*\\)",[ht]),inside:j.languages.csharp},"class-name":{pattern:RegExp(se),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var pt=":[^}\r\n]+",qt=Le(Z("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[X]),2),ln=Z("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[qt,pt]),dn=Le(Z("[^\"'/()]|/(?!\\*)|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>|\\(<<self>>*\\)",[tr]),2),qe=Z("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[dn,pt]);function dt(C,kt){return{interpolation:{pattern:le("((?:^|[^{])(?:\\{\\{)*)<<0>>",[C]),lookbehind:!0,inside:{"format-string":{pattern:le("(^\\{(?:(?![}:])<<0>>)*)<<1>>(?=\\}$)",[kt,pt]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:j.languages.csharp}}},string:/[\s\S]+/}}j.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:le('(^|[^\\\\])(?:\\$@|@\\$)"(?:""|\\\\[^]|\\{\\{|<<0>>|[^\\\\{"])*"',[ln]),lookbehind:!0,greedy:!0,inside:dt(ln,qt)},{pattern:le('(^|[^@\\\\])\\$"(?:\\\\.|\\{\\{|<<0>>|[^\\\\"{])*"',[qe]),lookbehind:!0,greedy:!0,inside:dt(qe,dn)}],char:{pattern:RegExp(we),greedy:!0}}),j.languages.dotnet=j.languages.cs=j.languages.csharp}(Prism),Prism.languages.csv={value:/[^\r\n,"]+|"(?:[^"]|"")*"(?!")/,punctuation:/,/},function(j){var Z=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],le="(^|[^\\w.])(?:[a-z]\\w*\\s*\\.\\s*)*(?:[A-Z]\\w*\\s*\\.\\s*)*",Le={pattern:RegExp(le+"[A-Z](?:[\\d_A-Z]*[a-z]\\w*)?\\b"),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};j.languages.dart=j.languages.extend("clike",{"class-name":[Le,{pattern:RegExp(le+"[A-Z]\\w*(?=\\s+\\w+\\s*[;,=()])"),lookbehind:!0,inside:Le.inside}],keyword:Z,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),j.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:j.languages.dart}}},string:/[\s\S]+/}},string:void 0}),j.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),j.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":Le,keyword:Z,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})}(Prism),function(j){var Z="(?:[ \t]+(?![ \t])(?:<SP_BS>)?|<SP_BS>)".replace(/<SP_BS>/g,function(){return"\\\\[\r\n](?:\\s|\\\\[\r\n]|#.*(?!.))*(?![\\s#]|\\\\[\r\n])"}),le="\"(?:[^\"\\\\\r\n]|\\\\(?:\r\n|[^]))*\"|'(?:[^'\\\\\r\n]|\\\\(?:\r\n|[^]))*'",Le="--[\\w-]+=(?:<STR>|(?![\"'])(?:[^\\s\\\\]|\\\\.)+)".replace(/<STR>/g,function(){return le}),fe={pattern:RegExp(le),greedy:!0},He={pattern:/(^[ \t]*)#.*/m,lookbehind:!0,greedy:!0};function et(tt,Ze){return tt=tt.replace(/<OPT>/g,function(){return Le}).replace(/<SP>/g,function(){return Z}),RegExp(tt,Ze)}j.languages.docker={instruction:{pattern:/(^[ \t]*)(?:ADD|ARG|CMD|COPY|ENTRYPOINT|ENV|EXPOSE|FROM|HEALTHCHECK|LABEL|MAINTAINER|ONBUILD|RUN|SHELL|STOPSIGNAL|USER|VOLUME|WORKDIR)(?=\s)(?:\\.|[^\r\n\\])*(?:\\$(?:\s|#.*$)*(?![\s#])(?:\\.|[^\r\n\\])*)*/im,lookbehind:!0,greedy:!0,inside:{options:{pattern:et("(^(?:ONBUILD<SP>)?\\w+<SP>)<OPT>(?:<SP><OPT>)*","i"),lookbehind:!0,greedy:!0,inside:{property:{pattern:/(^|\s)--[\w-]+/,lookbehind:!0},string:[fe,{pattern:/(=)(?!["'])(?:[^\s\\]|\\.)+/,lookbehind:!0}],operator:/\\$/m,punctuation:/=/}},keyword:[{pattern:et("(^(?:ONBUILD<SP>)?HEALTHCHECK<SP>(?:<OPT><SP>)*)(?:CMD|NONE)\\b","i"),lookbehind:!0,greedy:!0},{pattern:et("(^(?:ONBUILD<SP>)?FROM<SP>(?:<OPT><SP>)*(?!--)[^ \t\\\\]+<SP>)AS","i"),lookbehind:!0,greedy:!0},{pattern:et("(^ONBUILD<SP>)\\w+","i"),lookbehind:!0,greedy:!0},{pattern:/^\w+/,greedy:!0}],comment:He,string:fe,variable:/\$(?:\w+|\{[^{}"'\\]*\})/,operator:/\\$/m}},comment:He},j.languages.dockerfile=j.languages.docker}(Prism),Prism.languages["excel-formula"]={comment:{pattern:/(\bN\(\s*)"(?:[^"]|"")*"(?=\s*\))/i,lookbehind:!0,greedy:!0},string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},reference:{pattern:/(?:'[^']*'|(?:[^\s()[\]{}<>*?"';,$&]*\[[^^\s()[\]{}<>*?"']+\])?\w+)!/,greedy:!0,alias:"string",inside:{operator:/!$/,punctuation:/'/,sheet:{pattern:/[^[\]]+$/,alias:"function"},file:{pattern:/\[[^[\]]+\]$/,inside:{punctuation:/[[\]]/}},path:/[\s\S]+/}},"function-name":{pattern:/\b[A-Z]\w*(?=\()/i,alias:"builtin"},range:{pattern:/\$?\b(?:[A-Z]+\$?\d+:\$?[A-Z]+\$?\d+|[A-Z]+:\$?[A-Z]+|\d+:\$?\d+)\b/i,alias:"selector",inside:{operator:/:/,cell:/\$?[A-Z]+\$?\d+/i,column:/\$?[A-Z]+/i,row:/\$?\d+/}},cell:{pattern:/\b[A-Z]+\d+\b|\$[A-Za-z]+\$?\d+\b|\b[A-Za-z]+\$\d+\b/,alias:"selector"},number:/(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e[+-]?\d+)?\b/i,boolean:/\b(?:FALSE|TRUE)\b/i,operator:/[-+*/^%=&,]|<[=>]?|>=?/,punctuation:/[[\]();{}|]/},Prism.languages.xlsx=Prism.languages.xls=Prism.languages["excel-formula"],Prism.languages.git={comment:/^#.*/m,deleted:/^[-\u2013].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},function(j){function Z(le,Le){return"___"+le.toUpperCase()+Le+"___"}Object.defineProperties(j.languages["markup-templating"]={},{buildPlaceholders:{value:function(le,Le,fe,He){if(le.language===Le){var et=le.tokenStack=[];le.code=le.code.replace(fe,function(tt){if("function"==typeof He&&!He(tt))return tt;for(var Ze,ot=et.length;-1!==le.code.indexOf(Ze=Z(Le,ot));)++ot;return et[ot]=tt,Ze}),le.grammar=j.languages.markup}}},tokenizePlaceholders:{value:function(le,Le){if(le.language===Le&&le.tokenStack){le.grammar=j.languages[Le];var fe=0,He=Object.keys(le.tokenStack);!function et(tt){for(var Ze=0;Ze<tt.length&&!(fe>=He.length);Ze++){var ot=tt[Ze];if("string"==typeof ot||ot.content&&"string"==typeof ot.content){var tn=He[fe],Gt=le.tokenStack[tn],te="string"==typeof ot?ot:ot.content,Ue=Z(Le,tn),lt=te.indexOf(Ue);if(lt>-1){++fe;var H=te.substring(0,lt),V=new j.Token(Le,j.tokenize(Gt,le.grammar),"language-"+Le,Gt),se=te.substring(lt+Ue.length),J=[];H&&J.push.apply(J,et([H])),J.push(V),se&&J.push.apply(J,et([se])),"string"==typeof ot?tt.splice.apply(tt,[Ze,1].concat(J)):ot.content=J}}else ot.content&&et(ot.content)}return tt}(le.tokens)}}}})}(Prism),function(j){var Z=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,le=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],Le=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,fe=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,He=/[{}\[\](),:;]/;j.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:Z,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:le,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:Le,operator:fe,punctuation:He};var et={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:j.languages.php},tt=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:et}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:et}}];j.languages.insertBefore("php","variable",{string:tt,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:Z,string:tt,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:le,number:Le,operator:fe,punctuation:He}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),j.hooks.add("before-tokenize",function(Ze){/<\?/.test(Ze.code)&&j.languages["markup-templating"].buildPlaceholders(Ze,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}),j.hooks.add("after-tokenize",function(Ze){j.languages["markup-templating"].tokenizePlaceholders(Ze,"php")})}(Prism),function(j){var Z=/\$(?:\w[a-z\d]*(?:_[^\x00-\x1F\s"'\\()$]*)?|\{[^}\s"'\\]+\})/i;Prism.languages.nginx={comment:{pattern:/(^|[\s{};])#.*/,lookbehind:!0,greedy:!0},directive:{pattern:/(^|\s)\w(?:[^;{}"'\\\s]|\\.|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\s+(?:#.*(?!.)|(?![#\s])))*?(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:{string:{pattern:/((?:^|[^\\])(?:\\\\)*)(?:"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')/,lookbehind:!0,greedy:!0,inside:{escape:{pattern:/\\["'\\nrt]/,alias:"entity"},variable:Z}},comment:{pattern:/(\s)#.*/,lookbehind:!0,greedy:!0},keyword:{pattern:/^\S+/,greedy:!0},boolean:{pattern:/(\s)(?:off|on)(?!\S)/,lookbehind:!0},number:{pattern:/(\s)\d+[a-z]*(?!\S)/i,lookbehind:!0},variable:Z}},punctuation:/[{};]/}}(),function(j){j.languages.kotlin=j.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete j.languages.kotlin["class-name"];var Z={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:j.languages.kotlin}};j.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:Z},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:Z},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete j.languages.kotlin.string,j.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),j.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),j.languages.kt=j.languages.kotlin,j.languages.kts=j.languages.kotlin}(Prism),Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json,function(j){var Z=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,le="(?:[a-z]\\w*\\s*\\.\\s*)*(?:[A-Z]\\w*\\s*\\.\\s*)*",Le={pattern:RegExp("(^|[^\\w.])"+le+"[A-Z](?:[\\d_A-Z]*[a-z]\\w*)?\\b"),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};j.languages.java=j.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[Le,{pattern:RegExp("(^|[^\\w.])"+le+"[A-Z]\\w*(?=\\s+\\w+\\s*[;,=()]|\\s*(?:\\[[\\s,]*\\]\\s*)?::\\s*new\\b)"),lookbehind:!0,inside:Le.inside},{pattern:RegExp("(\\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\\s+)"+le+"[A-Z]\\w*\\b"),lookbehind:!0,inside:Le.inside}],keyword:Z,function:[j.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),j.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),j.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":Le,keyword:Z,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp("(\\bimport\\s+)"+le+"(?:[A-Z]\\w*|\\*)(?=\\s*;)"),lookbehind:!0,inside:{namespace:Le.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp("(\\bimport\\s+static\\s+)"+le+"(?:\\w+|\\*)(?=\\s*;)"),lookbehind:!0,alias:"static",inside:{namespace:Le.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp("(\\b(?:exports|import(?:\\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\\s+)(?!<keyword>)[a-z]\\w*(?:\\.[a-z]\\w*)*\\.?".replace(/<keyword>/g,function(){return Z.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism),function(j){var Z={pattern:/((?:^|[^\\$])(?:\\{2})*)\$(?:\w+|\{[^{}]*\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}};j.languages.gradle=j.languages.extend("clike",{string:{pattern:/'''(?:[^\\]|\\[\s\S])*?'''|'(?:\\.|[^\\'\r\n])*'/,greedy:!0},keyword:/\b(?:apply|def|dependencies|else|if|implementation|import|plugin|plugins|project|repositories|repository|sourceSets|tasks|val)\b/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?\d+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.\.(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),j.languages.insertBefore("gradle","string",{shebang:{pattern:/#!.+/,alias:"comment",greedy:!0},"interpolation-string":{pattern:/"""(?:[^\\]|\\[\s\S])*?"""|(["/])(?:\\.|(?!\1)[^\\\r\n])*\1|\$\/(?:[^/$]|\$(?:[/$]|(?![/$]))|\/(?!\$))*\/\$/,greedy:!0,inside:{interpolation:Z,string:/[\s\S]+/}}}),j.languages.insertBefore("gradle","punctuation",{"spock-block":/\b(?:and|cleanup|expect|given|setup|then|when|where):/}),j.languages.insertBefore("gradle","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0,alias:"punctuation"}}),Z.inside.expression.inside=j.languages.gradle}(Prism),function(j){var Z={pattern:/((?:^|[^\\$])(?:\\{2})*)\$(?:\w+|\{[^{}]*\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}};j.languages.groovy=j.languages.extend("clike",{string:{pattern:/'''(?:[^\\]|\\[\s\S])*?'''|'(?:\\.|[^\\'\r\n])*'/,greedy:!0},keyword:/\b(?:abstract|as|assert|boolean|break|byte|case|catch|char|class|const|continue|def|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|in|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|trait|transient|try|void|volatile|while)\b/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?\d+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.\.(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),j.languages.insertBefore("groovy","string",{shebang:{pattern:/#!.+/,alias:"comment",greedy:!0},"interpolation-string":{pattern:/"""(?:[^\\]|\\[\s\S])*?"""|(["/])(?:\\.|(?!\1)[^\\\r\n])*\1|\$\/(?:[^/$]|\$(?:[/$]|(?![/$]))|\/(?!\$))*\/\$/,greedy:!0,inside:{interpolation:Z,string:/[\s\S]+/}}}),j.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(?:and|cleanup|expect|given|setup|then|when|where):/}),j.languages.insertBefore("groovy","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0,alias:"punctuation"}}),Z.inside.expression.inside=j.languages.groovy}(Prism),Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete Prism.languages.go["class-name"],function(j){var Z=Prism.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};Z.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:Z},boolean:Z.boolean,variable:Z.variable}}(),Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),Prism.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),Prism.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),Prism.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),Prism.languages.scss.atrule.inside.rest=Prism.languages.scss,Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(j){j.languages.typescript=j.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),j.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete j.languages.typescript.parameter,delete j.languages.typescript["literal-property"];var Z=j.languages.extend("typescript",{});delete Z["class-name"],j.languages.typescript["class-name"].inside=Z,j.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Z}}}}),j.languages.ts=j.languages.typescript}(Prism),Prism.languages.uri={scheme:{pattern:/^[a-z][a-z0-9+.-]*:/im,greedy:!0,inside:{"scheme-delimiter":/:$/}},fragment:{pattern:/#[\w\-.~!$&'()*+,;=%:@/?]*/,inside:{"fragment-delimiter":/^#/}},query:{pattern:/\?[\w\-.~!$&'()*+,;=%:@/?]*/,inside:{"query-delimiter":{pattern:/^\?/,greedy:!0},"pair-delimiter":/[&;]/,pair:{pattern:/^[^=][\s\S]*/,inside:{key:/^[^=]+/,value:{pattern:/(^=)[\s\S]+/,lookbehind:!0}}}}},authority:{pattern:RegExp("^//(?:[\\w\\-.~!$&'()*+,;=%:]*@)?(?:\\[(?:[0-9a-fA-F:.]{2,48}|v[0-9a-fA-F]+\\.[\\w\\-.~!$&'()*+,;=]+)\\]|[\\w\\-.~!$&'()*+,;=%]*)(?::\\d*)?","m"),inside:{"authority-delimiter":/^\/\//,"user-info-segment":{pattern:/^[\w\-.~!$&'()*+,;=%:]*@/,inside:{"user-info-delimiter":/@$/,"user-info":/^[\w\-.~!$&'()*+,;=%:]+/}},"port-segment":{pattern:/:\d*$/,inside:{"port-delimiter":/^:/,port:/^\d+/}},host:{pattern:/[\s\S]+/,inside:{"ip-literal":{pattern:/^\[[\s\S]+\]$/,inside:{"ip-literal-delimiter":/^\[|\]$/,"ipv-future":/^v[\s\S]+/,"ipv6-address":/^[\s\S]+/}},"ipv4-address":/^(?:(?:[03-9]\d?|[12]\d{0,2})\.){3}(?:[03-9]\d?|[12]\d{0,2})$/}}}},path:{pattern:/^[\w\-.~!$&'()*+,;=%:@/]+/m,inside:{"path-separator":/\//}}},Prism.languages.url=Prism.languages.uri,function(j){var Z=/[*&][^\s[\]{},]+/,le=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,Le="(?:"+le.source+"(?:[ \t]+"+Z.source+")?|"+Z.source+"(?:[ \t]+"+le.source+")?)",fe="(?:[^\\s\\x00-\\x08\\x0e-\\x1f!\"#%&'*,\\-:>?@[\\]`{|}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*".replace(/<PLAIN>/g,function(){return"[^\\s\\x00-\\x08\\x0e-\\x1f,[\\]{}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]"}),He="\"(?:[^\"\\\\\r\n]|\\\\.)*\"|'(?:[^'\\\\\r\n]|\\\\.)*'";function et(tt,Ze){Ze=(Ze||"").replace(/m/g,"")+"m";var ot="([:\\-,[{]\\s*(?:\\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\\]|\\}|(?:[\r\n]\\s*)?#))".replace(/<<prop>>/g,function(){return Le}).replace(/<<value>>/g,function(){return tt});return RegExp(ot,Ze)}j.languages.yaml={scalar:{pattern:RegExp("([\\-:]\\s*(?:\\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\\S[^\r\n]*(?:\\2[^\r\n]+)*)".replace(/<<prop>>/g,function(){return Le})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp("((?:^|[:\\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\\s*:\\s)".replace(/<<prop>>/g,function(){return Le}).replace(/<<key>>/g,function(){return"(?:"+fe+"|"+He+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:et("\\d{4}-\\d\\d?-\\d\\d?(?:[tT]|[ \t]+)\\d\\d?:\\d{2}:\\d{2}(?:\\.\\d*)?(?:[ \t]*(?:Z|[-+]\\d\\d?(?::\\d{2})?))?|\\d{4}-\\d{2}-\\d{2}|\\d\\d?:\\d{2}(?::\\d{2}(?:\\.\\d*)?)?"),lookbehind:!0,alias:"number"},boolean:{pattern:et("false|true","i"),lookbehind:!0,alias:"important"},null:{pattern:et("null|~","i"),lookbehind:!0,alias:"important"},string:{pattern:et(He),lookbehind:!0,greedy:!0},number:{pattern:et("[+-]?(?:0x[\\da-f]+|0o[0-7]+|(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?|\\.inf|\\.nan)","i"),lookbehind:!0},tag:le,important:Z,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},j.languages.yml=j.languages.yaml}(Prism);