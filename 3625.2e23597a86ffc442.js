"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[3625],{23625:(P,g,s)=>{s.d(g,{A:()=>K});var h=s(36895),e=s(94650),a=s(24006),_=s(83700),l=s(72506),f=s(44143),d=s(62331),w=s(67460),C=s(34541),E=s(28746),v=s(46779),x=s(2225);function T(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cf-icon",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showOldPass=!i.showOldPass)}),e.qZA()}}function D(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cf-icon",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showOldPass=!i.showOldPass)}),e.qZA()}}function A(n,r){1&n&&e._UZ(0,"cf-input-hint",28),2&n&&e.Q6J("hint","M\u1eadt kh\u1ea9u c\u0169 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cf-icon",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showNewPass=!i.showNewPass)}),e.qZA()}}function k(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cf-icon",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showNewPass=!i.showNewPass)}),e.qZA()}}function Z(n,r){1&n&&e._UZ(0,"cf-input-hint",28),2&n&&e.Q6J("hint","M\u1eadt kh\u1ea9u m\u1edbi kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function N(n,r){1&n&&e._UZ(0,"cf-icon",35)}function U(n,r){1&n&&e._UZ(0,"cf-icon",36)}function I(n,r){1&n&&e._UZ(0,"cf-icon",35)}function J(n,r){1&n&&e._UZ(0,"cf-icon",36)}function G(n,r){1&n&&e._UZ(0,"cf-icon",35)}function M(n,r){1&n&&e._UZ(0,"cf-icon",36)}function q(n,r){1&n&&e._UZ(0,"cf-icon",35)}function b(n,r){1&n&&e._UZ(0,"cf-icon",36)}const m=function(n,r){return{"!text-primary-1-4":n,"!text-secondary-5-3":r}};function Q(n,r){if(1&n&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",31),e.YNc(3,N,1,0,"cf-icon",32),e.YNc(4,U,1,0,"cf-icon",33),e.TgZ(5,"div",34),e._uU(6,"T\u1ed1i thi\u1ec3u 8 k\xed t\u1ef1"),e.qZA()(),e.TgZ(7,"div",31),e.YNc(8,I,1,0,"cf-icon",32),e.YNc(9,J,1,0,"cf-icon",33),e.TgZ(10,"div",34),e._uU(11,"C\xf3 1 ch\u1eef s\u1ed1"),e.qZA()(),e.TgZ(12,"div",31),e.YNc(13,G,1,0,"cf-icon",32),e.YNc(14,M,1,0,"cf-icon",33),e.TgZ(15,"div",34),e._uU(16,"C\xf3 1 ch\u1eef in hoa"),e.qZA()(),e.TgZ(17,"div",31),e.YNc(18,q,1,0,"cf-icon",32),e.YNc(19,b,1,0,"cf-icon",33),e.TgZ(20,"div",34),e._uU(21,"Kh\xf4ng tr\xf9ng m\u1eadt kh\u1ea9u c\u0169"),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(12,m,t.minLengthValid,!t.minLengthValid)),e.xp6(1),e.Q6J("ngIf",t.minLengthValid),e.xp6(1),e.Q6J("ngIf",!t.minLengthValid),e.xp6(3),e.Q6J("ngClass",e.WLB(15,m,t.requiresDigitValid,!t.requiresDigitValid)),e.xp6(1),e.Q6J("ngIf",t.requiresDigitValid),e.xp6(1),e.Q6J("ngIf",!t.requiresDigitValid),e.xp6(3),e.Q6J("ngClass",e.WLB(18,m,t.requiresUppercaseValid,!t.requiresUppercaseValid)),e.xp6(1),e.Q6J("ngIf",t.requiresUppercaseValid),e.xp6(1),e.Q6J("ngIf",!t.requiresUppercaseValid),e.xp6(3),e.Q6J("ngClass",e.WLB(21,m,t.matchingValid,!t.matchingValid)),e.xp6(1),e.Q6J("ngIf",t.matchingValid),e.xp6(1),e.Q6J("ngIf",!t.matchingValid)}}function B(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cf-icon",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showConfirmPass=!i.showConfirmPass)}),e.qZA()}}function O(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"cf-icon",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showConfirmPass=!i.showConfirmPass)}),e.qZA()}}function V(n,r){1&n&&e._UZ(0,"cf-input-hint",28),2&n&&e.Q6J("hint","M\u1eadt kh\u1ea9u m\u1edbi kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function L(n,r){1&n&&e._UZ(0,"cf-input-hint",28),2&n&&e.Q6J("hint","Ch\u01b0a tr\xf9ng v\u1edbi m\u1eadt kh\u1ea9u m\u1edbi")}function R(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onBack())}),e._uU(1," Quay l\u1ea1i "),e.qZA()}}function Y(n,r){1&n&&e._UZ(0,"cf-spinner")}let K=(()=>{class n{constructor(t,o,i,c,u){this.fb=o,this.authService=i,this.userService=c,this._toastService=u,this.isBack=!1,this.back=new e.vpe,this.showOldPass=!1,this.showNewPass=!1,this.showConfirmPass=!1,this.isLoading=!1,t.registerIcons([l.bLw,l.MwJ,l.NNX,l.UNF,l.rks])}ngOnInit(){this.initFormGroup()}initFormGroup(){this.formGroup=this.fb.group({oldPassword:[null,a.kI.required],newPassword:[null,a.kI.compose([a.kI.required,a.kI.minLength(8),this.unmatchValidator("oldPassword"),this.patternValidator(new RegExp("[0-9]"),{requiresDigit:!0}),this.patternValidator(new RegExp("(?=.*[A-Z])"),{requiresUppercase:!0})])],confirmNewPassword:[null,[a.kI.required,this.matchValidator("newPassword")]]})}onSubmit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const t=this.formGroup.value,o={oldPassword:t.oldPassword,newPassword:t.newPassword,confirmNewPassword:t.confirmNewPassword};this.isLoading=!0,this.userService.changePassword(o).pipe((0,E.x)(()=>this.isLoading=!1)).subscribe({next:i=>{var c,u;if(i.success)localStorage.setItem("currentUser",JSON.stringify(i)),this.authService.currentUserSubject.next(i),this._toastService.add({severity:"success",summary:"C\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u",detail:"M\u1eadt kh\u1ea9u m\u1edbi \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt th\xe0nh c\xf4ng.",sticky:!1}),this.formGroup.reset();else{const p=null===(u=null===(c=i.objectError)||void 0===c?void 0:c.errorDescription)||void 0===u?void 0:u.vi;this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:p||"Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:"Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i!",sticky:!0})}})}get requiresDigitValid(){return(this.formGroup.controls.newPassword.touched||this.formGroup.controls.newPassword.dirty)&&this.formGroup.controls.newPassword.hasError("requiresDigit")}get matchingValid(){return(this.formGroup.controls.newPassword.touched||this.formGroup.controls.newPassword.dirty)&&this.formGroup.controls.newPassword.hasError("matching")}get minLengthValid(){return(this.formGroup.controls.newPassword.touched||this.formGroup.controls.newPassword.dirty)&&this.formGroup.controls.newPassword.hasError("minlength")}get requiresUppercaseValid(){return(this.formGroup.controls.newPassword.touched||this.formGroup.controls.newPassword.dirty)&&this.formGroup.controls.newPassword.hasError("requiresUppercase")}matchValidator(t,o){return i=>{var c,u;if(i.parent&&o){const p=(null===(c=i.parent)||void 0===c?void 0:c.controls)[t];return p&&p.updateValueAndValidity(),null}return i.parent&&i.parent.value&&i.value===(null===(u=i.parent)||void 0===u?void 0:u.controls)[t].value?null:{matching:!0}}}unmatchValidator(t,o){return i=>{var c,u;if(i.parent&&o){const p=(null===(c=i.parent)||void 0===c?void 0:c.controls)[t];return p&&p.updateValueAndValidity(),null}return i.parent&&i.parent.value&&i.value===(null===(u=i.parent)||void 0===u?void 0:u.controls)[t].value?{matching:!0}:null}}patternValidator(t,o){return i=>i.value?t.test(i.value)?null:o:null}onBack(){this.back.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.KNP),e.Y36(a.qu),e.Y36(v.r),e.Y36(x.KD),e.Y36(d.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["change-password-page"]],inputs:{isBack:"isBack"},outputs:{back:"back"},standalone:!0,features:[e.jDz],decls:46,vars:23,consts:[[1,"flex","justify-center","py-4","px-[30px]","rounded-lg","md:p-4"],[1,"w-[1000px]","max-w-[1000px]"],[1,"hidden","md:flex","items-center","gap-x-1.5","mb-4",3,"click"],["icon","arrow_left","size","small"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-gray-6"],["autocomplete","off",1,"flex","flex-col","gap-y-6",3,"formGroup"],[1,"p-6","bg-white","rounded","shadow-cf-md","flex","flex-col","gap-4"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["cf-input","","size","medium","autocomplete","new-password","placeholder","M\u1eadt kh\u1ea9u c\u0169","formControlName","oldPassword",3,"type"],["cfTailIcon","","class","cursor-pointer text-neutral-gray-4","icon","eye","size","small",3,"click",4,"ngIf"],["cfTailIcon","","class","cursor-pointer text-neutral-gray-4","icon","eye_off","size","small",3,"click",4,"ngIf"],["cfHint","",3,"hint",4,"ngIf"],["cf-input","","size","medium","autocomplete","new-password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","newPassword",3,"type"],["class","flex",4,"ngIf"],["cf-input","","size","medium","autocomplete","new-password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","confirmNewPassword",3,"type"],[1,"flex","justify-between","md:hidden"],["cf-button","","size","medium","type","secondary","class","bg-neutral-white flex justify-center items-center",3,"click",4,"ngIf"],["cf-button","","size","medium",1,"flex","justify-center","items-center",3,"click"],[1,"p-4","bottom-0","hidden","md:fixed","md:block","bg-neutral-white","w-full"],["cf-button","","size","medium",1,"flex","justify-center","items-center","w-full",3,"click"],[4,"ngIf"],["cfTailIcon","","icon","eye","size","small",1,"cursor-pointer","text-neutral-gray-4",3,"click"],["cfTailIcon","","icon","eye_off","size","small",1,"cursor-pointer","text-neutral-gray-4",3,"click"],["cfHint","",3,"hint"],[1,"flex"],[1,"grid","grid-cols-2","gap-x-6","gap-y-2"],[1,"flex","items-center","gap-x-2.5",3,"ngClass"],["icon","close","size","small",4,"ngIf"],["icon","check","size","small",4,"ngIf"],[1,"text-body-sm"],["icon","close","size","small"],["icon","check","size","small"],["cf-button","","size","medium","type","secondary",1,"bg-neutral-white","flex","justify-center","items-center",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return o.onBack()}),e._UZ(3,"cf-icon",3),e.TgZ(4,"div",4),e._uU(5,"Ch\u1ecdn l\u1ea1i"),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6),e._UZ(8,"div",7),e.TgZ(9,"div",8),e._uU(10,"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u"),e.qZA()()(),e.TgZ(11,"form",9)(12,"div",10)(13,"cf-input-group",11)(14,"label",12),e._uU(15," M\u1eadt kh\u1ea9u c\u0169 "),e.qZA(),e._UZ(16,"input",13),e.YNc(17,T,1,0,"cf-icon",14),e.YNc(18,D,1,0,"cf-icon",15),e.YNc(19,A,1,1,"cf-input-hint",16),e.qZA(),e.TgZ(20,"cf-input-group",11)(21,"label",12),e._uU(22," M\u1eadt kh\u1ea9u m\u1edbi "),e.qZA(),e._UZ(23,"input",17),e.YNc(24,y,1,0,"cf-icon",14),e.YNc(25,k,1,0,"cf-icon",15),e.YNc(26,Z,1,1,"cf-input-hint",16),e.qZA(),e.YNc(27,Q,22,24,"div",18),e.TgZ(28,"cf-input-group",11)(29,"label",12),e._uU(30," X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi "),e.qZA(),e._UZ(31,"input",19),e.YNc(32,B,1,0,"cf-icon",14),e.YNc(33,O,1,0,"cf-icon",15),e.YNc(34,V,1,1,"cf-input-hint",16),e.YNc(35,L,1,1,"cf-input-hint",16),e.qZA()(),e.TgZ(36,"div",20)(37,"div"),e.YNc(38,R,2,0,"button",21),e.qZA(),e.TgZ(39,"button",22),e.NdJ("click",function(){return o.onSubmit()}),e._uU(40," Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u "),e.qZA()()()()(),e.TgZ(41,"div",23)(42,"button",24),e.NdJ("click",function(){return o.onSubmit()}),e._uU(43," Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u "),e.qZA()(),e.YNc(44,Y,1,0,"cf-spinner",25),e._UZ(45,"cf-toast")),2&t&&(e.xp6(11),e.Q6J("formGroup",o.formGroup),e.xp6(2),e.Q6J("status",o.formGroup.controls.oldPassword.invalid&&(o.formGroup.controls.oldPassword.dirty||o.formGroup.controls.oldPassword.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("type",o.showOldPass?"text":"password"),e.xp6(1),e.Q6J("ngIf",!o.showOldPass),e.xp6(1),e.Q6J("ngIf",o.showOldPass),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.oldPassword.hasError("required")&&(o.formGroup.controls.oldPassword.touched||o.formGroup.controls.oldPassword.dirty)),e.xp6(1),e.Q6J("status",o.formGroup.controls.newPassword.invalid&&(o.formGroup.controls.newPassword.dirty||o.formGroup.controls.newPassword.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("type",o.showNewPass?"text":"password"),e.xp6(1),e.Q6J("ngIf",!o.showNewPass),e.xp6(1),e.Q6J("ngIf",o.showNewPass),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.newPassword.hasError("required")&&(o.formGroup.controls.newPassword.touched||o.formGroup.controls.newPassword.dirty)),e.xp6(1),e.Q6J("ngIf",o.formGroup.value.newPassword),e.xp6(1),e.Q6J("status",o.formGroup.controls.confirmNewPassword.invalid&&(o.formGroup.controls.confirmNewPassword.dirty||o.formGroup.controls.confirmNewPassword.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("type",o.showConfirmPass?"text":"password"),e.xp6(1),e.Q6J("ngIf",!o.showConfirmPass),e.xp6(1),e.Q6J("ngIf",o.showConfirmPass),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.confirmNewPassword.hasError("required")&&(o.formGroup.controls.confirmNewPassword.touched||o.formGroup.controls.confirmNewPassword.dirty)),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.confirmNewPassword.hasError("matching")&&(o.formGroup.controls.confirmNewPassword.touched||o.formGroup.controls.confirmNewPassword.dirty)),e.xp6(3),e.Q6J("ngIf",o.isBack),e.xp6(6),e.Q6J("ngIf",o.isLoading))},dependencies:[h.ez,h.mk,h.O5,a.u5,a._Y,a.Fj,a.JJ,a.JL,a.UX,a.sg,a.u,f.j$,f.ND,f.BN,f.v2,C.C,l.AxE,l.Sm8,_.N8,_.Xq,w.OR,d.hj],encapsulation:2}),n})()},34541:(P,g,s)=>{s.d(g,{C:()=>a});var h=s(36895),e=s(94650);let a=(()=>{class _{constructor(f,d,w){this.elementRef=f,this.renderer=d,this.document=w}set CfRequired(f){if(f){const d=this.document.createElement("span");d.innerHTML="&nbsp;(*)",d.className="text-primary-1-4 text-espressive-sm",this.renderer.appendChild(this.elementRef.nativeElement,d)}}}return _.\u0275fac=function(f){return new(f||_)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(h.K0))},_.\u0275dir=e.lG2({type:_,selectors:[["","CfRequired",""]],inputs:{CfRequired:"CfRequired"},standalone:!0}),_})()}}]);