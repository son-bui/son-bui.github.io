"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[5922],{90602:(Q,A,n)=>{n.d(A,{P3:()=>z,Io:()=>V});var I=n(80529),u=n(88001),_=n(50494),C=n(54004),U=n(99251),t=n(97582),o=n(87067),r=n(43429);class S{}(0,t.gn)([(0,o.C)()],S.prototype,"status",void 0),(0,t.gn)([(0,r.D)(()=>O),(0,o.C)()],S.prototype,"data",void 0),(0,t.gn)([(0,o.C)()],S.prototype,"objectError",void 0),(0,t.gn)([(0,o.C)()],S.prototype,"success",void 0);class O{}(0,t.gn)([(0,r.D)(()=>e),(0,o.C)()],O.prototype,"bookingContact",void 0);class e{}(0,t.gn)([(0,o.C)()],e.prototype,"email",void 0),(0,t.gn)([(0,o.C)()],e.prototype,"name",void 0),(0,t.gn)([(0,o.C)()],e.prototype,"phone",void 0);class J{}(0,t.gn)([(0,o.C)()],J.prototype,"status",void 0),(0,t.gn)([(0,r.D)(()=>D),(0,o.C)()],J.prototype,"data",void 0),(0,t.gn)([(0,o.C)()],J.prototype,"objectError",void 0);class D{}(0,t.gn)([(0,o.C)()],D.prototype,"airline",void 0),(0,t.gn)([(0,o.C)()],D.prototype,"bookingCode",void 0),(0,t.gn)([(0,r.D)(()=>k),(0,o.C)()],D.prototype,"cancelCharge",void 0),(0,t.gn)([(0,r.D)(()=>b),(0,o.C)()],D.prototype,"totalCharge",void 0),(0,t.gn)([(0,r.D)(()=>N),(0,o.C)()],D.prototype,"cancelJourney",void 0),(0,t.gn)([(0,r.D)(()=>b),(0,o.C)()],D.prototype,"nonRefund",void 0),(0,t.gn)([(0,r.D)(()=>b),(0,o.C)()],D.prototype,"refund",void 0);class k{}(0,t.gn)([(0,o.C)()],k.prototype,"base",void 0),(0,t.gn)([(0,o.C)()],k.prototype,"applied",void 0),(0,t.gn)([(0,o.C)()],k.prototype,"surCharge",void 0),(0,t.gn)([(0,o.C)()],k.prototype,"tax",void 0),(0,t.gn)([(0,o.C)()],k.prototype,"total",void 0),(0,t.gn)([(0,o.C)()],k.prototype,"discount",void 0),(0,t.gn)([(0,r.D)(()=>x),(0,o.C)()],k.prototype,"currency",void 0);class x{}(0,t.gn)([(0,o.C)()],x.prototype,"baseCurrency",void 0),(0,t.gn)([(0,o.C)()],x.prototype,"code",void 0),(0,t.gn)([(0,o.C)()],x.prototype,"description",void 0),(0,t.gn)([(0,o.C)()],x.prototype,"exchangeRate",void 0);class b{}(0,t.gn)([(0,o.C)()],b.prototype,"base",void 0),(0,t.gn)([(0,o.C)()],b.prototype,"applied",void 0),(0,t.gn)([(0,o.C)()],b.prototype,"surCharge",void 0),(0,t.gn)([(0,o.C)()],b.prototype,"tax",void 0),(0,t.gn)([(0,o.C)()],b.prototype,"total",void 0),(0,t.gn)([(0,o.C)()],b.prototype,"discount",void 0),(0,t.gn)([(0,r.D)(()=>x),(0,o.C)()],b.prototype,"currency",void 0);class N{}(0,t.gn)([(0,r.D)(()=>h),(0,o.C)()],N.prototype,"journeyInfo",void 0),(0,t.gn)([(0,r.D)(()=>y),(0,o.C)()],N.prototype,"charge",void 0);class h{}(0,t.gn)([(0,o.C)()],h.prototype,"key",void 0);class y{}(0,t.gn)([(0,o.C)()],y.prototype,"base",void 0),(0,t.gn)([(0,o.C)()],y.prototype,"applied",void 0),(0,t.gn)([(0,o.C)()],y.prototype,"surCharge",void 0),(0,t.gn)([(0,o.C)()],y.prototype,"tax",void 0),(0,t.gn)([(0,o.C)()],y.prototype,"total",void 0),(0,t.gn)([(0,o.C)()],y.prototype,"discount",void 0),(0,t.gn)([(0,r.D)(()=>x),(0,o.C)()],y.prototype,"currency",void 0);class f{}(0,t.gn)([(0,o.C)()],f.prototype,"status",void 0),(0,t.gn)([(0,r.D)(()=>a),(0,o.C)()],f.prototype,"data",void 0),(0,t.gn)([(0,o.C)()],f.prototype,"objectError",void 0);class a{}(0,t.gn)([(0,o.C)()],a.prototype,"airline",void 0),(0,t.gn)([(0,o.C)()],a.prototype,"pnr",void 0),(0,t.gn)([(0,r.D)(()=>d),(0,o.C)()],a.prototype,"charge",void 0),(0,t.gn)([(0,o.C)()],a.prototype,"makePayment",void 0),(0,t.gn)([(0,r.D)(()=>i),(0,o.C)()],a.prototype,"cancelJourney",void 0),(0,t.gn)([(0,r.D)(()=>E),(0,o.C)()],a.prototype,"paymentInfo",void 0);class d{}(0,t.gn)([(0,o.C)()],d.prototype,"key",void 0),(0,t.gn)([(0,r.D)(()=>g),(0,o.C)()],d.prototype,"chargeType",void 0),(0,t.gn)([(0,r.D)(()=>m),(0,o.C)()],d.prototype,"charge",void 0),(0,t.gn)([(0,o.C)()],d.prototype,"description",void 0),(0,t.gn)([(0,o.C)()],d.prototype,"extra",void 0);class g{}(0,t.gn)([(0,o.C)()],g.prototype,"code",void 0),(0,t.gn)([(0,o.C)()],g.prototype,"type",void 0),(0,t.gn)([(0,r.D)(()=>c),(0,o.C)()],g.prototype,"description",void 0);class c{}(0,t.gn)([(0,o.C)()],c.prototype,"en",void 0),(0,t.gn)([(0,o.C)()],c.prototype,"vi",void 0);class m{}(0,t.gn)([(0,o.C)()],m.prototype,"base",void 0),(0,t.gn)([(0,o.C)()],m.prototype,"applied",void 0),(0,t.gn)([(0,o.C)()],m.prototype,"surCharge",void 0),(0,t.gn)([(0,o.C)()],m.prototype,"tax",void 0),(0,t.gn)([(0,o.C)()],m.prototype,"total",void 0),(0,t.gn)([(0,o.C)()],m.prototype,"discount",void 0),(0,t.gn)([(0,r.D)(()=>p),(0,o.C)()],m.prototype,"currency",void 0);class p{}(0,t.gn)([(0,o.C)()],p.prototype,"baseCurrency",void 0),(0,t.gn)([(0,o.C)()],p.prototype,"code",void 0),(0,t.gn)([(0,o.C)()],p.prototype,"description",void 0),(0,t.gn)([(0,o.C)()],p.prototype,"exchangeRate",void 0);class i{}(0,t.gn)([(0,o.C)()],i.prototype,"airline",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"airlineName",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"duration",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"delay",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"stopOvernight",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"fareOptions",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"key",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"leg",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"numOfStops",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"operating",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"operatingName",void 0),(0,t.gn)([(0,r.D)(()=>l),(0,o.C)()],i.prototype,"segments",void 0),(0,t.gn)([(0,r.D)(()=>v),(0,o.C)()],i.prototype,"departure",void 0),(0,t.gn)([(0,r.D)(()=>Z),(0,o.C)()],i.prototype,"arrival",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"expireTime",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"fareClass",void 0),(0,t.gn)([(0,o.C)()],i.prototype,"fareClassCode",void 0);class l{}(0,t.gn)([(0,o.C)()],l.prototype,"key",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"id",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"index",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"airline",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"airlineName",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"duration",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"delay",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"flightNumber",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"operating",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"operatingName",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"stopPoint",void 0),(0,t.gn)([(0,r.D)(()=>v),(0,o.C)()],l.prototype,"departure",void 0),(0,t.gn)([(0,r.D)(()=>Z),(0,o.C)()],l.prototype,"arrival",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"bookingClassArr",void 0),(0,t.gn)([(0,r.D)(()=>M),(0,o.C)()],l.prototype,"bookedInfo",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"fareType",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"modelAirplane",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"modelAirplaneName",void 0),(0,t.gn)([(0,o.C)()],l.prototype,"codeAirline",void 0);class v{}(0,t.gn)([(0,r.D)(()=>B),(0,o.C)()],v.prototype,"airport",void 0),(0,t.gn)([(0,o.C)()],v.prototype,"localTime",void 0),(0,t.gn)([(0,o.C)()],v.prototype,"scheduleTime",void 0);class B{}(0,t.gn)([(0,o.C)()],B.prototype,"code",void 0),(0,t.gn)([(0,o.C)()],B.prototype,"name",void 0),(0,t.gn)([(0,r.D)(()=>P),(0,o.C)()],B.prototype,"utcOffset",void 0);class P{}(0,t.gn)([(0,o.C)()],P.prototype,"zone",void 0),(0,t.gn)([(0,o.C)()],P.prototype,"iso",void 0);class Z{}(0,t.gn)([(0,r.D)(()=>B),(0,o.C)()],Z.prototype,"airport",void 0),(0,t.gn)([(0,o.C)()],Z.prototype,"localTime",void 0),(0,t.gn)([(0,o.C)()],Z.prototype,"scheduleTime",void 0);class M{}(0,t.gn)([(0,o.C)()],M.prototype,"fareClass",void 0),(0,t.gn)([(0,o.C)()],M.prototype,"status",void 0),(0,t.gn)([(0,o.C)()],M.prototype,"fareType",void 0),(0,t.gn)([(0,o.C)()],M.prototype,"fareBasic",void 0);class E{}(0,t.gn)([(0,o.C)()],E.prototype,"passengerKey",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"passengerType",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"passengerFirstName",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"passengerGender",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"passengerNamePrefix",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"passengerLastName",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"ticket",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"type",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"currencyCode",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"description",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"paymentMethod",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"paymentTime",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"paymentTimeZone",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"paymentRef",void 0),(0,t.gn)([(0,o.C)()],E.prototype,"amount",void 0);var Y=n(94650);const R={headers:new I.WM({"Content-Type":"application/json"})};let z=(()=>{class s{constructor(T,G){this.http=T,this.appConfig=G}getBookingDetail(T,G,j=!1){return this.http.post(this.appConfig.apiUrl+"flight/booking-retriver",JSON.stringify({airline:G,bookingCode:T,refresh:j}),R).pipe((0,C.U)(F=>(0,_.yE)(U.JG,F,{excludeExtraneousValues:!0})))}quotationCancelJourney(T){return this.http.post(this.appConfig.apiUrl+"ticket/quotation-journey-cancel",JSON.stringify(T),R).pipe((0,C.U)(G=>(0,_.yE)(J,G,{excludeExtraneousValues:!0})))}cancelJourney(T){return this.http.post(this.appConfig.apiUrl+"ticket/cancel-journey-reservation",JSON.stringify(T),R).pipe((0,C.U)(G=>(0,_.yE)(f,G,{excludeExtraneousValues:!0})))}getBookingInfo(T){return this.http.post(this.appConfig.apiUrl+"flight/get-pnr-info",JSON.stringify(T),R).pipe((0,C.U)(G=>(0,_.yE)(S,G,{excludeExtraneousValues:!0})))}}return s.\u0275fac=function(T){return new(T||s)(Y.LFG(I.eN),Y.LFG(u.qB))},s.\u0275prov=Y.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var V=(()=>{return(s=V||(V={})).UPDATE_JOURNEY="UPDATE_JOURNEY",s.ADD_JOURNEY="ADD_JOURNEY",s.NONE="NONE",V;var s})()},85922:(Q,A,n)=>{n.r(A),n.d(A,{SendEmailModalComponent:()=>g.B,SendEmailPageComponent:()=>d});var I=n(36895),u=n(24006),_=n(37094),C=n(83700),U=n(27898),t=n(44143),o=n(74713),r=n(67460),S=n(34541),O=n(28746),e=n(94650),J=n(20553),D=n(9381),k=n(97579),x=n(90602);function b(c,m){1&c&&e._UZ(0,"cf-input-hint",21),2&c&&e.Q6J("hint","M\xe3 \u0111\u1eb7t ch\u1ed7 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function N(c,m){1&c&&e._UZ(0,"cf-input-hint",21),2&c&&e.Q6J("hint","Nh\xe0 cung c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function h(c,m){1&c&&e._UZ(0,"cf-input-hint",21),2&c&&e.Q6J("hint","Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function y(c,m){1&c&&e._UZ(0,"cf-input-hint",21),2&c&&e.Q6J("hint","\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ee3p l\u1ec7")}function f(c,m){1&c&&e._UZ(0,"cf-spinner")}const a=function(){return[]};let d=(()=>{class c{constructor(p,i,l,v,B,P){this._fb=p,this._manageBookingService=i,this._mobileDetectService=l,this._bottomSheetService=v,this._modal=B,this._bookingDetailService=P,this.providerOptions=[{value:"VN",text:"VN - Vietnam Airlines"},{value:"VJ",text:"VJ - Vietjet Air"},{value:"QH",text:"QH - Bamboo Airways"},{value:"AIR_1G",text:"1G"}],this.isDisableEmail=!1,this.isDisableCheckbox=!1,this.isLoading=!1}ngOnInit(){this.initFormGroup(),this.formGroup.get("bookingCode").valueChanges.subscribe({next:p=>{6===p.length&&this.formGroup.value.airline&&this.getBookingContact()}})}initFormGroup(){this.formGroup=this._fb.group({bookingCode:["",u.kI.required],provider:[""],email:[""],includeTicket:[!1,[u.kI.required]]})}onSendEmail(){if(this.formGroup.invalid)return;const p=this.formGroup.value,i={bookingCode:p.bookingCode.trim().toUpperCase()||"",provider:p.provider||"",email:p.email.trim()||"",language:"vi",includeTicket:p.includeTicket};this._manageBookingService.sendEmail(i).subscribe({next:l=>{if("OK"===l.status)if(this._mobileDetectService.isMobile()){const v=this._bottomSheetService.open(r.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"}});v.containerInstance._rightButtonClick.subscribe(B=>v.dismiss())}else this._modal.open(r.z5,{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"});else if(this._mobileDetectService.isMobile()){const v=this._bottomSheetService.open(r.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});v.containerInstance._rightButtonClick.subscribe(B=>v.dismiss())}else this._modal.open(r.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"})},error:()=>{if(this._mobileDetectService.isMobile()){const l=this._bottomSheetService.open(r.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});l.containerInstance._rightButtonClick.subscribe(v=>l.dismiss())}else this._modal.open(r.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${i.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"})}})}checkedChange(p){this.formGroup.controls.includeTicket.setValue(p)}onChangeProvider(p){"VN"===p.value.toUpperCase()?(this.formGroup.value.bookingCode?this.getBookingContact():this.formGroup.controls.email.setValue(""),this.formGroup.controls.email.setValidators(null),this.formGroup.controls.email.updateValueAndValidity(),this.isDisableEmail=!0,this.isDisableCheckbox=!1):(this.formGroup.controls.email.setValidators([u.kI.required]),this.formGroup.controls.email.updateValueAndValidity(),this.formGroup.controls.includeTicket.setValue(!0),this.isDisableEmail=!1,this.isDisableCheckbox=!0)}getBookingContact(){const p={bookingCode:this.formGroup.value.bookingCode};this.isLoading=!0,this._bookingDetailService.getBookingInfo(p).pipe((0,O.x)(()=>this.isLoading=!1)).subscribe({next:i=>{"OK"===i.status&&this.formGroup.controls.email.setValue(i.data.bookingContact.email)}})}}return c.\u0275fac=function(p){return new(p||c)(e.Y36(u.qu),e.Y36(J.fB),e.Y36(D.L),e.Y36(_.a2),e.Y36(k.oE),e.Y36(x.P3))},c.\u0275cmp=e.Xpm({type:c,selectors:[["send-email-page"]],hostAttrs:[1,"h-full"],standalone:!0,features:[e.jDz],decls:32,vars:22,consts:[[1,"w-full","h-full","md:flex","md:flex-col","md:justify-between"],[1,"flex","justify-center","p-8","md:!p-4"],[1,"w-[764px]","md:!w-full"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"flex","items-center","text-heading-md"],[1,"bg-neutral-white","rounded","p-6","flex","flex-col","gap-y-4","mt-4","md:p-4"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7",3,"formControl"],["cfHint","",3,"hint",4,"ngIf"],["textField","text","valueField","value","placeholder","Ch\u1ecdn h\xe3ng bay",1,"!w-full","!max-w-full",3,"status","data","formControl","allowSearch","selectedChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],[1,"grow-[400]","!w-full",3,"disabled","status"],["cf-input","","size","medium","placeholder","Nh\u1eadp email nh\u1eadn m\u1eb7t v\xe9",3,"formControl"],["size","medium",3,"disabled","checked","checkChange"],[1,"mt-6","w-full","text-right","md:hidden"],["cf-button","","size","medium",1,"!min-w-[100px]","justify-center",3,"disabled","click"],[1,"hidden","md:block","w-full","p-4","bg-neutral-white"],["cf-button","","size","medium",1,"!w-full","justify-center",3,"disabled","click"],[4,"ngIf"],["cfHint","",3,"hint"]],template:function(p,i){1&p&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"div",4),e.TgZ(5,"div",5),e._uU(6,"Th\xf4ng tin g\u1eedi v\xe9"),e.qZA()(),e.TgZ(7,"div",6)(8,"cf-input-group",7)(9,"label",8),e._uU(10," M\xe3 \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e._UZ(11,"input",9),e.YNc(12,b,1,1,"cf-input-hint",10),e.qZA(),e.TgZ(13,"cf-select",11),e.NdJ("selectedChange",function(v){return i.onChangeProvider(v)}),e.TgZ(14,"label",12),e._uU(15," Nh\xe0 cung c\u1ea5p "),e.qZA(),e.YNc(16,N,1,1,"cf-input-hint",10),e.qZA(),e.TgZ(17,"cf-input-group",13)(18,"label",8),e._uU(19," Email "),e.qZA(),e._UZ(20,"input",14),e.YNc(21,h,1,1,"cf-input-hint",10),e.YNc(22,y,1,1,"cf-input-hint",10),e.qZA(),e.TgZ(23,"cf-checkbox",15),e.NdJ("checkChange",function(v){return i.checkedChange(v)}),e._uU(24," K\xe8m Ticket EMD "),e.qZA()(),e.TgZ(25,"div",16)(26,"button",17),e.NdJ("click",function(){return i.onSendEmail()}),e._uU(27," G\u1eedi"),e.qZA()()()(),e.TgZ(28,"div",18)(29,"button",19),e.NdJ("click",function(){return i.onSendEmail()}),e._uU(30," G\u1eedi"),e.qZA()()(),e.YNc(31,f,1,0,"cf-spinner",20)),2&p&&(e.xp6(8),e.Q6J("status",i.formGroup.controls.bookingCode.invalid&&(i.formGroup.controls.bookingCode.dirty||i.formGroup.controls.bookingCode.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",i.formGroup.controls.bookingCode),e.xp6(1),e.Q6J("ngIf",i.formGroup.controls.bookingCode.hasError("required")&&i.formGroup.controls.bookingCode.touched),e.xp6(1),e.Q6J("status",i.formGroup.controls.provider.invalid&&(i.formGroup.controls.provider.dirty||i.formGroup.controls.provider.touched)?"error":"default")("data",i.providerOptions||e.DdM(21,a))("formControl",i.formGroup.controls.provider)("allowSearch",!0),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",i.formGroup.controls.provider.hasError("required")&&i.formGroup.controls.provider.touched),e.xp6(1),e.Q6J("disabled",i.isDisableEmail)("status",i.formGroup.controls.email.invalid&&(i.formGroup.controls.email.dirty||i.formGroup.controls.email.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",i.formGroup.controls.email),e.xp6(1),e.Q6J("ngIf",i.formGroup.controls.email.hasError("required")&&(i.formGroup.controls.email.touched||i.formGroup.controls.email.dirty)),e.xp6(1),e.Q6J("ngIf",i.formGroup.controls.email.hasError("email")),e.xp6(1),e.Q6J("disabled",i.isDisableCheckbox)("checked",i.formGroup.value.includeTicket),e.xp6(3),e.Q6J("disabled",i.formGroup.invalid),e.xp6(3),e.Q6J("disabled",i.formGroup.invalid),e.xp6(2),e.Q6J("ngIf",i.isLoading))},dependencies:[I.ez,I.O5,C.N8,C.Xq,t.j$,t.ND,t.BN,t.v2,S.C,u.UX,u.Fj,u.JJ,u.oH,u.u5,o.q,_.DW,U.u,r.OR],encapsulation:2}),c})();var g=n(95911)},95911:(Q,A,n)=>{n.d(A,{B:()=>N});var I=n(36895),u=n(24006),_=n(37094),C=n(83700),U=n(27898),t=n(72506),o=n(44143),r=n(67460),S=n(34541),O=n(28746),e=n(94650),J=n(20553),D=n(97579);function k(h,y){1&h&&e._UZ(0,"cf-input-hint",18),2&h&&e.Q6J("hint","Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function x(h,y){1&h&&e._UZ(0,"cf-input-hint",18),2&h&&e.Q6J("hint","\u0110\u1ecbnh d\u1ea1ng kh\xf4ng h\u1ee3p l\u1ec7")}function b(h,y){1&h&&e._UZ(0,"cf-spinner")}let N=(()=>{class h{constructor(f,a,d,g,c,m,p,i){this.fb=a,this._manageBookingService=d,this._modal=g,this._bottomSheetService=c,this.ref=m,this.bottomSheetData=p,this.bottomSheetRef=i,this.isLoading=!1,this.isDisableEmail=!1,this.isDisableCheckbox=!1,f.registerIcons([t.UNF,t.PcQ]),m&&(this.emailInfo=this.ref.data.emailInfo),p&&(this.emailInfo=p.emailInfo)}ngOnInit(){switch(this.initFormGroup(),this.emailInfo.provider){case"VN":this.isDisableEmail=!0,this.formGroup.controls.email.setValidators(null),this.formGroup.controls.email.setValue(this.emailInfo.email),this.providerDisplay="VN - Vietnam Airlines";break;case"VJ":this.isDisableEmail=!1,this.isDisableCheckbox=!0,this.formGroup.controls.includeTicket.setValue(!0),this.providerDisplay="VJ - Vietjet Air";break;case"QH":this.isDisableEmail=!1,this.isDisableCheckbox=!0,this.formGroup.controls.includeTicket.setValue(!0),this.providerDisplay="QH - Bamboo Airways";break;case"AIR_1G":this.isDisableEmail=!1,this.isDisableCheckbox=!0,this.formGroup.controls.includeTicket.setValue(!0),this.providerDisplay="1G";break;default:this.providerDisplay=""}}initFormGroup(){this.formGroup=this.fb.group({email:["",[u.kI.required,u.kI.email]],includeTicket:[!1,[u.kI.required]]})}close(){this.ref&&this.ref.close(!1),this.bottomSheetData&&this.bottomSheetRef.dismiss(!1)}ok(){if(this.formGroup.invalid)return;const f=this.formGroup.value,a={bookingCode:this.emailInfo.bookingCode.trim().toUpperCase()||"",provider:this.emailInfo.provider||"",email:f.email.trim()||"",language:"vi",includeTicket:f.includeTicket};this.isLoading=!0,this._manageBookingService.sendEmail(a).pipe((0,O.x)(()=>this.isLoading=!1)).subscribe({next:d=>{if("OK"===d.status){if(this.ref&&this._modal.open(r.z5,{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${a.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"}).afterClosed$.subscribe({next:()=>{this.ref.close(!1)}}),this.bottomSheetData){const g=this._bottomSheetService.open(r.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"G\u1eedi email th\xe0nh c\xf4ng",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${a.email}</strong> th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email</div>`,status:"success"}});g.containerInstance._rightButtonClick.subscribe(c=>g.dismiss()),g.afterDismissed().subscribe(()=>{this.bottomSheetRef.dismiss(!1)})}}else if(this.ref&&this._modal.open(r.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${a.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}).afterClosed$.subscribe({next:()=>{}}),this.bottomSheetData){const g=this._bottomSheetService.open(r.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${a.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});g.containerInstance._rightButtonClick.subscribe(c=>g.dismiss()),g.afterDismissed().subscribe(()=>{this.bottomSheetRef.dismiss(!1)})}},error:()=>{if(this.ref&&this._modal.open(r.z5,{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${a.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}).afterClosed$.subscribe({next:()=>{}}),this.bottomSheetData){const d=this._bottomSheetService.open(r.z5,{headerTitle:"",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",data:{title:"C\xf3 l\u1ed7i x\u1ea3y ra",content:`<div>Y\xeau c\u1ea7u g\u1eedi m\u1eb7t v\xe9 v\u1ec1 email <strong>${a.email}</strong> th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i</div>`,status:"error"}});d.containerInstance._rightButtonClick.subscribe(g=>d.dismiss()),d.afterDismissed().subscribe(()=>{this.bottomSheetRef.dismiss(!1)})}}})}onCheckTicket(f){this.formGroup.controls.includeTicket.setValue(f)}}return h.\u0275fac=function(f){return new(f||h)(e.Y36(t.KNP),e.Y36(u.qu),e.Y36(J.fB),e.Y36(D.oE),e.Y36(_.a2),e.Y36(D.gb,8),e.Y36(_.Rr,8),e.Y36(_.Zu,8))},h.\u0275cmp=e.Xpm({type:h,selectors:[["send-email-modal"]],standalone:!0,features:[e.jDz],decls:29,vars:16,consts:[[1,"w-[640px]","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-gray-6"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-4"],[1,"grow-[400]","!w-full",3,"disabled","status"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["cf-input","","size","medium","placeholder","Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7",3,"value"],["cf-input","","size","medium","placeholder","Ch\u1ecdn h\xe3ng bay",3,"value"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["cf-input","","size","medium","placeholder","Nh\u1eadp email nh\u1eadn m\u1eb7t v\xe9",3,"formControl"],["cfHint","",3,"hint",4,"ngIf"],["size","medium",3,"disabled","checked","checkChange"],[1,"p-6","flex","gap-x-4","justify-end","md:justify-between"],["cf-button","","size","medium","type","secondary",1,"min-w-[100px]","md:!w-full","justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"min-w-[100px]","md:!w-full","justify-center","items-center",3,"disabled","click"],["icon","circle_check","size","small",1,"ml-2"],[4,"ngIf"],["cfHint","",3,"hint"]],template:function(f,a){1&f&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Th\xf4ng tin nh\u1eadn v\xe9"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return a.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"cf-input-group",5)(7,"label",6),e._uU(8," M\xe3 \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"cf-input-group",5)(11,"label",6),e._uU(12," Nh\xe0 cung c\u1ea5p "),e.qZA(),e._UZ(13,"input",8),e.qZA(),e.TgZ(14,"cf-input-group",5)(15,"label",9),e._uU(16," Email "),e.qZA(),e._UZ(17,"input",10),e.YNc(18,k,1,1,"cf-input-hint",11),e.YNc(19,x,1,1,"cf-input-hint",11),e.qZA(),e.TgZ(20,"cf-checkbox",12),e.NdJ("checkChange",function(g){return a.onCheckTicket(g)}),e._uU(21," K\xe8m Ticket EMD "),e.qZA()(),e.TgZ(22,"div",13)(23,"button",14),e.NdJ("click",function(){return a.close()}),e._uU(24," \u0110\xf3ng "),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return a.ok()}),e._uU(26," X\xe1c nh\u1eadn "),e._UZ(27,"cf-icon",16),e.qZA()()(),e.YNc(28,b,1,0,"cf-spinner",17)),2&f&&(e.xp6(6),e.Q6J("disabled",!0)("status","default"),e.xp6(3),e.Q6J("value",a.emailInfo.bookingCode),e.xp6(1),e.Q6J("disabled",!0)("status","default"),e.xp6(3),e.Q6J("value",a.providerDisplay),e.xp6(1),e.Q6J("disabled",a.isDisableEmail)("status",a.formGroup.controls.email.invalid&&(a.formGroup.controls.email.dirty||a.formGroup.controls.email.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",a.formGroup.controls.email),e.xp6(1),e.Q6J("ngIf",a.formGroup.controls.email.hasError("required")&&(a.formGroup.controls.email.touched||a.formGroup.controls.email.dirty)),e.xp6(1),e.Q6J("ngIf",a.formGroup.controls.email.hasError("email")),e.xp6(1),e.Q6J("disabled",a.isDisableCheckbox)("checked",a.formGroup.value.includeTicket),e.xp6(5),e.Q6J("disabled",a.formGroup.invalid),e.xp6(3),e.Q6J("ngIf",a.isLoading))},dependencies:[I.ez,I.O5,t.AxE,t.Sm8,C.N8,C.Xq,u.UX,u.Fj,u.JJ,u.oH,u.u5,o.j$,o.ND,o.BN,o.v2,S.C,_.DW,r.OR,U.u],encapsulation:2}),h})()},34541:(Q,A,n)=>{n.d(A,{C:()=>_});var I=n(36895),u=n(94650);let _=(()=>{class C{constructor(t,o,r){this.elementRef=t,this.renderer=o,this.document=r}set CfRequired(t){if(t){const o=this.document.createElement("span");o.innerHTML="&nbsp;(*)",o.className="text-primary-1-4 text-espressive-sm",this.renderer.appendChild(this.elementRef.nativeElement,o)}}}return C.\u0275fac=function(t){return new(t||C)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(I.K0))},C.\u0275dir=u.lG2({type:C,selectors:[["","CfRequired",""]],inputs:{CfRequired:"CfRequired"},standalone:!0}),C})()}}]);