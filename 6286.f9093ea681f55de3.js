"use strict";(self.webpackChunkcheapflightclient=self.webpackChunkcheapflightclient||[]).push([[6286],{47917:(Oe,te,h)=>{h.d(te,{h:()=>d});var d=(()=>{return(u=d||(d={})).B2B_GMBR="B2B_GMBR",u.B2C_GMBR="B2C_GMBR",d;var u})()},36286:(Oe,te,h)=>{h.r(te),h.d(te,{ApproveProductModalComponent:()=>_e,CreateDistributionTicketConfigComponent:()=>Xt,DistributionTicketConfigComponent:()=>qt,EditProductComponent:()=>Cc,HuntTicketAdvancedAddComponent:()=>Ar,HuntTicketAdvancedDetailComponent:()=>$c,HuntTicketAdvancedEditComponent:()=>Ce,HuntTicketAdvancedListComponent:()=>Wa,ManageApproveProductComponent:()=>_c,ManageProductComponent:()=>Bn,ManualSaleProductComponent:()=>Be,PaymentOrderDetailComponent:()=>as,ReceivingTicketInventoryComponent:()=>Et,RetailOrderComponent:()=>kc});var d=h(36895),u=h(24006),T=h(83700),ne=h(72853),l=h(72506),b=h(44143),ie=h(17736),B=h(74713),Z=h(67460),P=h(76978),se=h(88001),C=h(15439),k=h(28746),e=h(94650),oe=h(80529),J=h(54004),f=h(97582),_=h(87067),q=h(43429);let et=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"status",void 0),(0,f.gn)([(0,q.D)(()=>tt),(0,_.C)()],i.prototype,"data",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"objectError",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"success",void 0),i})(),tt=(()=>{class i{}return(0,f.gn)([(0,q.D)(()=>nt),(0,_.C)()],i.prototype,"productDetail",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"priceSaleInfo",void 0),i})(),nt=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"airline",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"arrival",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"bookingCode",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"cabin",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"flightNumber",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"fareClass",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"fareClassSegment",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"channelDistribution",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"departure",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"flyScheduleTime",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"arrivalScheduleTime",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"ownerName",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"paxCount",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"productBasePrice",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"productId",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"timeHoldBooking",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"state",void 0),i})();var Ne=h(99251);let it=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"status",void 0),(0,f.gn)([(0,q.D)(()=>Ne.eG),(0,_.C)()],i.prototype,"data",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"objectError",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"success",void 0),i})(),ot=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"status",void 0),(0,f.gn)([(0,q.D)(()=>rt),(0,_.C)()],i.prototype,"data",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"objectError",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"success",void 0),i})();class rt{}let at=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"status",void 0),(0,f.gn)([(0,q.D)(()=>ct),(0,_.C)()],i.prototype,"data",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"objectError",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"success",void 0),i})();class ct{}let Ue=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"status",void 0),(0,f.gn)([(0,q.D)(()=>st),(0,_.C)()],i.prototype,"data",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"objectError",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"success",void 0),i})(),st=(()=>{class i{}return(0,f.gn)([(0,q.D)(()=>Ne.eG),(0,_.C)()],i.prototype,"bookingInfo",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"channelDistribution",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"distributionFee",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"productId",void 0),(0,f.gn)([(0,q.D)(()=>lt),(0,_.C)()],i.prototype,"saleInfo",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"source",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"state",void 0),i})(),lt=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"agentName",void 0),(0,f.gn)([(0,q.D)(()=>ut),(0,_.C)()],i.prototype,"newPnrInfo",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"revenue",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"salesChannel",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"sellSourceType",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"time",void 0),i})(),ut=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"airline",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"pnr",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"supplier",void 0),i})();var G=h(50494);const Q={headers:new oe.WM({"Content-Type":"application/json"})};let re=(()=>{class i{constructor(t,n){this.http=t,this.appConfig=n}manageProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/manage-product",JSON.stringify(t),Q).pipe((0,J.U)(n=>(0,G.yE)(et,n,{excludeExtraneousValues:!0})))}shortRetrieveTicket(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/retrieve-ticket",JSON.stringify(t),Q).pipe((0,J.U)(n=>(0,G.yE)(it,n,{excludeExtraneousValues:!0})))}approveProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/approved-product",JSON.stringify(t),Q).pipe((0,J.U)(n=>(0,G.yE)(ot,n,{excludeExtraneousValues:!0})))}importManualProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/import-product-manual",JSON.stringify(t),Q).pipe((0,J.U)(n=>(0,G.yE)(at,n,{excludeExtraneousValues:!0})))}getProductDetail(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/get-product-detail",JSON.stringify({productId:t}),Q).pipe((0,J.U)(n=>(0,G.yE)(Ue,n,{excludeExtraneousValues:!0})))}updateProductDetail(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/update-product",JSON.stringify(t),Q).pipe((0,J.U)(n=>(0,G.yE)(Ue,n,{excludeExtraneousValues:!0})))}manageDistributionConfigFee(t){return this.http.post(this.appConfig.apiUrlIS+"distribution/config/manage-fee",JSON.stringify(t),Q)}distributionConfigFee(t){return this.http.post(this.appConfig.apiUrlIS+"distribution/config/fee",JSON.stringify(t),Q)}disableDistributionConfigFee(t){return this.http.post(this.appConfig.apiUrlIS+"distribution/config/disable-fee",JSON.stringify(t),Q)}stopSaleProduct(t){return this.http.post(this.appConfig.apiUrlIS+"inventory/stop-sale-product",JSON.stringify({productId:t}),Q)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(oe.eN),e.LFG(se.qB))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=h(82761),H=h(62331),j=h(62733);function dt(i,a){1&i&&e._UZ(0,"cf-hint",18),2&i&&e.Q6J("hint","Nh\xe0 cung c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function pt(i,a){1&i&&e._UZ(0,"cf-hint",18),2&i&&e.Q6J("hint","Ch\u01b0a nh\u1eadp booking code")}function ft(i,a){1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),e._UZ(5,"img",24),e.qZA(),e.TgZ(6,"div",25),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 retrieve th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",26),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",27),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function _t(i,a){1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i t\xecm ki\u1ebfm!"),e.qZA()(),e.BQk())}function mt(i,a){1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",30)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function gt(i,a){1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",30)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function ht(i,a){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),e._UZ(5,"img",28),e.qZA(),e.YNc(6,_t,8,0,"ng-container",17),e.YNc(7,mt,6,0,"ng-container",17),e.YNc(8,gt,6,0,"ng-container",17),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function vt(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",80),e._uU(2),e.qZA(),e.TgZ(3,"td",81),e._uU(4),e.qZA(),e.TgZ(5,"td",82),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",82),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",83)(12,"span"),e._uU(13),e.ALo(14,"number"),e.qZA()()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.lcZ(7,5,t.base)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.tax)),e.xp6(4),e.Oqu(e.lcZ(14,9,t.total))}}const xt=function(){return[]};function Tt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div")(3,"div",33),e._UZ(4,"div",34),e.TgZ(5,"div",35),e._uU(6,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(7,"div",36)(8,"div",37)(9,"div",38)(10,"div"),e._UZ(11,"img",39),e.qZA(),e.TgZ(12,"div",40)(13,"span",41),e._uU(14),e.qZA(),e.TgZ(15,"span",42),e._uU(16),e.qZA()(),e.TgZ(17,"div",43),e._uU(18),e.qZA()(),e._UZ(19,"div",44),e.TgZ(20,"div",45)(21,"div",46)(22,"span"),e._uU(23),e.qZA(),e._UZ(24,"cf-icon",47),e.TgZ(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"div",48),e._UZ(28,"cf-icon",49),e.TgZ(29,"span",50),e._uU(30),e.ALo(31,"date"),e.qZA()()(),e._UZ(32,"div",44),e.TgZ(33,"div",51)(34,"div",52),e._uU(35,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(36,"div",2),e._uU(37),e.qZA()(),e._UZ(38,"div",44),e.TgZ(39,"div",51)(40,"div",52),e._uU(41,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(42,"div",53),e._UZ(43,"cf-icon",54),e.TgZ(44,"div",55)(45,"label",56),e._uU(46),e.qZA()()()()()(),e.TgZ(47,"div",57)(48,"div",58),e._UZ(49,"cf-icon",59),e._uU(50," Chi ti\u1ebft chi ph\xed "),e.qZA(),e.TgZ(51,"div",60)(52,"div")(53,"table",61)(54,"thead")(55,"tr",62)(56,"th",63),e._uU(57,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(58,"th",64),e._uU(59,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(60,"th",65),e._uU(61,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(62,"th",65),e._uU(63,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(64,"th",66),e._uU(65,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(66,"tbody"),e.YNc(67,vt,15,11,"tr",67),e.qZA()(),e._UZ(68,"hr",68),e.qZA(),e.TgZ(69,"div",69)(70,"div",70)(71,"div",71),e._uU(72,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(73,"div",72)(74,"span"),e._uU(75),e.ALo(76,"number"),e.qZA()()(),e.TgZ(77,"div",70)(78,"div",71),e._uU(79,"D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam"),e.qZA(),e.TgZ(80,"div",72),e._uU(81),e.ALo(82,"number"),e.qZA()(),e.TgZ(83,"div",70)(84,"div",71),e._uU(85,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(86,"div",72),e._uU(87),e.ALo(88,"number"),e.qZA()()(),e.TgZ(89,"div",73)(90,"div",74),e._uU(91,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(92,"div",75)(93,"span"),e._uU(94),e.ALo(95,"number"),e.qZA()()()()()(),e.TgZ(96,"div")(97,"div",33),e._UZ(98,"div",34),e.TgZ(99,"div",35),e._uU(100,"Th\xf4ng tin c\u01a1 b\u1ea3n"),e.qZA()(),e.TgZ(101,"div",36)(102,"cf-multi-select",76),e.NdJ("valueChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeChannel(o))}),e.TgZ(103,"label",77),e._uU(104," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()()(),e.TgZ(105,"div",78)(106,"button",79),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(107," Nh\u1eadp kho "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(11),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("","VN"," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.Oqu(t.bookingDetail.startPoint),e.xp6(3),e.Oqu(t.bookingDetail.endPoint),e.xp6(4),e.lnq("",t.bookingDetail.startPoint," - ",t.bookingDetail.endPoint," (",e.xi3(31,22,t.bookingDetail.startTime,"HH:mm - dd/MM/yyyy"),")"),e.xp6(7),e.Oqu(t.bookingDetail.bookingCode),e.xp6(9),e.Oqu(t.bookingDetail.statusText),e.xp6(21),e.Q6J("ngForOf",t.priceDetail.passengers),e.xp6(8),e.hij(" ",e.lcZ(76,25,t.priceDetail.totalBasePrice)," \u0111"),e.xp6(6),e.hij("",e.lcZ(82,27,t.priceDetail.totalAddonService)," \u0111"),e.xp6(6),e.hij("",e.lcZ(88,29,t.priceDetail.totalServiceFee)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(95,31,t.priceDetail.totalPrice)," \u0111"),e.xp6(8),e.Q6J("status","default")("data",t.channelDistributionOption||e.DdM(33,xt))("allowSearch",!0)("formControl",t.channelControl)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230)}}function Ct(i,a){1&i&&(e.TgZ(0,"div",84)(1,"div",85),e._UZ(2,"ticket-item-skeleton",86)(3,"ticket-item-skeleton",86)(4,"ticket-item-skeleton",86)(5,"ticket-item-skeleton",86),e.qZA()())}function yt(i,a){1&i&&e._UZ(0,"cf-spinner")}const At=function(i){return{"opacity-50 pointer-events-none cursor-default":i}};let Et=(()=>{class i{constructor(t,n,o,r,c,s){this._fb=n,this._inventoryService=o,this._router=r,this._toastService=c,this._flightDataService=s,this.airlineDefault="VJ",this.channelControl=new u.NI(["ALL"],u.kI.required),this.airlineSelectOption=[],this.supplierSelectOption=[],this.channelDistributionOption=[],this.isLoading=!1,this.isLoadingInventory=!1,this.stateMode="search_default",t.registerIcons([l.Ffn,l.okA,l.llu]),this.searchForm=n.group({airline:[this.airlineDefault],supplier:[""],searchText:["",u.kI.required]}),this.isDisableSupplier="VN"!==this.airlineDefault}ngOnInit(){this.airlineSelectOption=[{text:"Vietnam Airlines",value:"VN"},{text:"Bamboo Airways",value:"QH"},{text:"Vietjet Air",value:"VJ"}],this.supplierSelectOption=[...Object.entries(se.f$).map(([t,n])=>({text:t,value:n}))],this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL"},{text:"Flychills",value:"B2B_GMBR"},{text:"GMBR",value:"B2C_GMBR"}]}onAirlineChange(t){const n=this.searchForm.get("supplier");n.setValue(""),"VN"===t.value?(this.isDisableSupplier=!1,n.setValidators([u.kI.required]),n.updateValueAndValidity()):(this.isDisableSupplier=!0,n.setValidators(null),n.updateValueAndValidity())}onSearch(){var t;if(this.searchForm.markAllAsTouched(),this.searchForm.invalid)return;const n=this.searchForm.value,o={airline:n.airline,bookingCode:null===(t=n.searchText)||void 0===t?void 0:t.toUpperCase(),supplier:n.supplier};this.isLoading=!0,this._inventoryService.shortRetrieveTicket(o).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:r=>{"OK"===r.status&&"BOOKED"===r.data.state?(this.stateMode="has_value",this.searchForm.get("searchText").reset(),this.initBookingDetail(r.data),this.initPriceDetail(r.data)):this.stateMode="not_found"},error:()=>{this.stateMode="not_found"}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,provider:t.provider,supplier:t.supplier,airline:t.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:t.airlineName,startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,startTime:C(t.journeys[0].departure.localTime).toDate(),endTime:C(t.journeys[0].arrival.localTimelocalTime).toDate(),statusText:t.getStatusText(),flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,status:t.state,passengers:t.passengers.map(n=>({index:n.index,key:n.key,name:"",birthday:n.birthday,lastName:n.lastName,firstName:n.firstName,parentKey:n.parentKey,gender:n.genderEnum,type:n.type}))}}initPriceDetail(t){const n=t.passengers.map(o=>({name:o.getName(),type:o.type,typeName:o.getType(),key:o.key}));this.priceDetail={provider:t.journeys.map(o=>o.airline||o.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.totalFareCharge,totalOthersCharge:t.totalCharges.total.totalOthersCharge,totalDiscountBasePrice:0,passengers:n.map(o=>({name:o.name,type:o.typeName,base:t.fareCharges.getBaseCharge(o.type),tax:t.fareCharges.getTaxCharge(o.type)+t.fareCharges.getVATCharge(o.type),total:t.fareCharges.getTotalCharge(o.type)}))}}onCreateDistributionTicketConfig(){this._router.navigate(["admin/create-distribution-ticket-config"])}onSubmit(){var t;let o="";o=(null===(t=this.channelControl.value)||void 0===t?void 0:t.some(c=>"ALL"===c))?this.channelDistributionOption.filter(c=>"ALL"!==c.value).map(c=>c.value).join(","):this.channelControl.value.join(",");const r={channelDistribution:o,data:{airline:this.bookingDetail.airline||"",bookingCode:this.bookingDetail.bookingCode||"",supplier:this.bookingDetail.supplier||""}};this.isLoadingInventory=!0,this._inventoryService.importManualProduct(r).pipe((0,k.x)(()=>this.isLoadingInventory=!1)).subscribe({next:c=>{var s,p;if("OK"===c.status)this.searchForm.get("searchText").setValue(""),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Nh\u1eadp h\xe0ng v\xe0o kho th\xe0nh c\xf4ng!",sticky:!1}),this.stateMode="search_default";else{const v=(null===(p=null===(s=c.objectError)||void 0===s?void 0:s.errorDescription)||void 0===p?void 0:p.vi)||"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:v,sticky:!0})}},error:c=>{var s,p,v;if(c.error&&"FAILED"===c.error.status){const g=(null===(v=null===(p=null===(s=c.error)||void 0===s?void 0:s.objectError)||void 0===p?void 0:p.errorDescription)||void 0===v?void 0:v.vi)||"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:g,sticky:!0})}else this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Nh\u1eadp h\xe0ng v\xe0o kho th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau!",sticky:!0})}})}onChangeChannel(t){"ALL"===t.value?(this.channelControl.setValue(null),this.channelControl.setValue(["ALL"])):this.channelControl.value.includes("ALL")&&(this.channelControl.setValue(null),this.channelControl.setValue([t.value]))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(u.qu),e.Y36(re),e.Y36(N.F0),e.Y36(H.BX),e.Y36(j.G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["receiving-ticket-inventory"]],standalone:!0,features:[e.jDz],decls:22,vars:21,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start",3,"formGroup","ngSubmit"],["textField","text","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch","selectedChange"],["textField","text","valueField","value","size","medium","placeholder","Ch\u1ecdn nh\xe0 cung c\u1ea5p",1,"w-[180px]",3,"status","formControl","data","allowSearch","ngClass"],["cfHint","",3,"hint",4,"ngIf"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp booking code",3,"formControl"],["tableSearchInput",""],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"w-full","h-full"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px] gap-x-[20px] ",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],[4,"ngIf"],["cfHint","",3,"hint"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","gap-x-[20px]"],[1,"min-w-[750px]","flex","flex-col","gap-y-6"],[1,"flex","gap-x-[20px]","mb-4","md:hidden"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"bg-white","py-4","px-6","mb-2","shadow-cf-md"],[1,"flex","justify-between","items-center","gap-x-7","mb-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-[108px]","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","items-start","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","rounded","flex","gap-x-2","items-center","w-fit"],["icon","arrow_right","size","small"],[1,"mt-3","flex","items-center","gap-x-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","items-start","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[1,"bg-white","rounded","shadow-cf-md","flex","flex-col","md:hidden"],[1,"text-heading-sm","text-neutral-black","p-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"!pt-0"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3","pl-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3","pr-3"],[4,"ngFor","ngForOf"],[1,"text-neutral-gray-1","w-full","mb-4"],[1,"flex","flex-col","items-end","gap-[10px]","pr-3","pb-3"],[1,"flex","justify-end","items-center","gap-8"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-body-dm","text-neutral-black"],[1,"flex","justify-end","items-center","gap-x-4","p-4","border-t","border-neutral-gray-1"],[1,"text-espressive-md","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-heading-lg","text-secondary-3-4"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight","valueChange"],["cfLabel","",1,"text-express-sm","text-black"],[1,"flex","justify-end","items-center","gap-x-2","pb-6"],["cf-button","","size","medium",3,"click"],[1,"text-left","text-body-md","text-neutral-black","py-3","pl-3","uppercase"],[1,"text-left","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3","pr-3"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp h\xe0ng v\xe0o kho"),e.qZA(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return n.onSearch()}),e.TgZ(5,"cf-select",4),e.NdJ("selectedChange",function(r){return n.onAirlineChange(r)}),e.qZA(),e.TgZ(6,"cf-select",5),e.YNc(7,dt,1,1,"cf-hint",6),e.qZA(),e.TgZ(8,"cf-input-group",7),e._UZ(9,"cf-icon",8)(10,"input",9,10),e.YNc(12,pt,1,1,"cf-hint",6),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return n.onSearch()}),e._UZ(14,"cf-icon",12),e._uU(15," Retrieve "),e.qZA()()(),e.TgZ(16,"div",13),e.YNc(17,ft,13,0,"div",14),e.YNc(18,ht,9,3,"div",14),e.YNc(19,Tt,108,34,"div",15),e.YNc(20,Ct,6,0,"div",16),e.qZA()(),e.YNc(21,yt,1,0,"cf-spinner",17)),2&t&&(e.xp6(4),e.Q6J("formGroup",n.searchForm),e.xp6(1),e.Q6J("formControl",n.searchForm.controls.airline)("data",n.airlineSelectOption)("allowSearch",!1),e.xp6(1),e.Q6J("status",n.searchForm.controls.supplier.invalid&&(n.searchForm.controls.supplier.dirty||n.searchForm.controls.supplier.touched)?"error":"default")("formControl",n.searchForm.controls.supplier)("data",n.supplierSelectOption)("allowSearch",!1)("ngClass",e.VKq(19,At,n.isDisableSupplier)),e.xp6(1),e.Q6J("ngIf",(null==n.searchForm.controls.supplier.errors?null:n.searchForm.controls.supplier.errors.required)&&(n.searchForm.controls.supplier.dirty||n.searchForm.controls.supplier.touched)),e.xp6(1),e.Q6J("status",n.searchForm.controls.searchText.invalid&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(2),e.Q6J("ngIf",(null==n.searchForm.controls.searchText.errors?null:n.searchForm.controls.searchText.errors.required)&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(4),e.Q6J("ngIf",!n.isLoading&&"search_default"===n.stateMode),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&("not_found"===n.stateMode||"cancelled"===n.stateMode||"issued"===n.stateMode)),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"has_value"===n.stateMode),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoadingInventory))},dependencies:[d.ez,d.mk,d.sg,d.O5,d.JJ,d.uU,b.j$,b.ND,b.BN,l.AxE,l.Sm8,u.u5,u._Y,u.Fj,u.JJ,u.JL,u.UX,u.oH,u.sg,B.q,T.N8,T.Xq,ne.m,P.IA,Z.OR,ie.U],encapsulation:2}),i})();var pe=h(48373),L=h(88516),qe=h(28050),S=h(97579),R=h(28490);function bt(i,a){if(1&i&&e._UZ(0,"img",36),2&i){const t=e.oxw().$implicit;e.Q6J("src","assets/airline-logo/"+t.airline+".png",e.LSH)}}function Zt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",29)(1,"td",30),e.YNc(2,bt,1,1,"img",31),e.qZA(),e.TgZ(3,"td",32),e._uU(4),e.qZA(),e.TgZ(5,"td",32),e._uU(6),e.qZA(),e.TgZ(7,"td",32),e._uU(8),e.qZA(),e.TgZ(9,"td",32),e._uU(10),e.qZA(),e.TgZ(11,"td",32),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td",32),e._uU(15),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",32),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td",32),e._uU(21),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"td",33)(24,"div",34)(25,"div",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onRemoveConfig(r.id))}),e._uU(26,"X\xf3a"),e.qZA()()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Q6J("ngIf","ALL"!==t.airline),e.xp6(2),e.AsE(" ",t.startPoint," (",t.startCode,") "),e.xp6(2),e.AsE(" ",t.endPoint," (",t.endCode,") "),e.xp6(2),e.hij(" ","-"," "),e.xp6(2),e.hij(" ",t.channel||"-"," "),e.xp6(2),e.hij(" ",e.lcZ(13,12,t.adtFee||0)||"-"," "),e.xp6(3),e.hij(" ",e.lcZ(16,14,t.chdFee||0)||"-"," "),e.xp6(3),e.hij(" ",e.lcZ(19,16,t.infFee||0)||"-"," "),e.xp6(3),e.hij(" ",e.xi3(22,18,1e3*t.createdDate,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("sticky","right")}}const Dt=function(){return{num:25}},Ft=function(){return{num:50}},kt=function(){return{num:75}},It=function(){return{num:100}},St=function(i,a,t,n){return[i,a,t,n]};function wt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"div",20),e._uU(3,"Danh s\xe1ch c\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i"),e.qZA(),e.TgZ(4,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCreateDistributionTicketConfig())}),e._UZ(5,"cf-icon",22),e._uU(6," T\u1ea1o c\xe0i \u0111\u1eb7t m\u1edbi "),e.qZA()(),e.TgZ(7,"cf-table",23,24)(9,"thead",25)(10,"th",26),e._uU(11,"H\xe3ng bay"),e.qZA(),e.TgZ(12,"th",26),e._uU(13,"\u0110i\u1ec3m \u0111i"),e.qZA(),e.TgZ(14,"th",26),e._uU(15,"\u0110i\u1ec3m \u0111\u1ebfn"),e.qZA(),e.TgZ(16,"th",26),e._uU(17,"Ng\xe0y gi\u1edd bay"),e.qZA(),e.TgZ(18,"th",26),e._uU(19,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA(),e.TgZ(20,"th",26),e._uU(21,"Ng\u01b0\u1eddi l\u1edbn"),e.qZA(),e.TgZ(22,"th",26),e._uU(23,"Tr\u1ebb em"),e.qZA(),e.TgZ(24,"th",26),e._uU(25,"Em b\xe9"),e.qZA(),e.TgZ(26,"th",26),e._uU(27,"Ng\xe0y t\u1ea1o"),e.qZA(),e.TgZ(28,"th",27),e._uU(29,"Ch\u1ee9c n\u0103ng"),e.qZA()(),e.TgZ(30,"tbody"),e.YNc(31,Zt,27,21,"ng-template",28),e.qZA()()()}if(2&i){const t=e.MAs(8),n=e.oxw();e.xp6(7),e.Q6J("fnSort",n.sortChange)("fnSearch",n.searchChange)("pageSizeList",e.l5B(11,St,e.DdM(7,Dt),e.DdM(8,Ft),e.DdM(9,kt),e.DdM(10,It)))("listData",n.listOfData)("pageSize",n.pageSize),e.xp6(21),e.Q6J("sticky","right"),e.xp6(3),e.Q6J("ngForOf",t.partOfdata)}}function Ot(i,a){1&i&&(e.TgZ(0,"div",37)(1,"div",38)(2,"div"),e._UZ(3,"img",39),e.qZA(),e.TgZ(4,"div",40)(5,"div",41),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",42)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng ki\u1ec3m tra l\u1ea1i \u0111i\u1ec1u ki\u1ec7n t\xecm ki\u1ebfm."),e.qZA()()()()())}function Nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",38)(2,"div"),e._UZ(3,"img",43),e.qZA(),e.TgZ(4,"div",40)(5,"div",41),e._uU(6,"C\xf3 l\u1ed7i x\u1ea3y ra"),e.qZA(),e.TgZ(7,"div",44),e._uU(8,"Kh\xf4ng th\u1ec3 hi\u1ec3n th\u1ecb danh s\xe1ch c\xf4ng n\u1ee3. Vui l\xf2ng th\u1eed l\u1ea1i!"),e.qZA()(),e.TgZ(9,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getManageConfigFee())}),e._UZ(10,"cf-icon",45),e._uU(11," Th\u1eed l\u1ea1i "),e.qZA()()()}}function Ut(i,a){1&i&&e._UZ(0,"cf-spinner")}const Me=function(){return[]};let qt=(()=>{class i{constructor(t,n,o,r,c,s,p,v){this.calendar=t,this._fb=n,this._router=o,this._discountFeeService=r,this._inventoryService=c,this._modal=s,this._locationDataService=p,this._toastService=v,this.dateRangeStr="",this.accountOptions=[],this.state="SUCCESS",this.pageSize=25,this.listOfData=[],this.airlineOptions=[],this.airportOptions=[],this.isLoading=!1,this.searchChange=(g,m)=>m,this.sortChange=(g,m)=>m,this.currentDate=t.getToday(),this.getDiscountFeeInfo()}ngOnInit(){this.searchForm=this._fb.group({airline:[""],searchDate:[null],toDate:[null],startPointDetails:[""],endPointDetails:[""],userId:[""]}),this.getManageConfigFee()}getDiscountFeeInfo(){this._discountFeeService.getDiscountFeeInfoConfig().subscribe({next:t=>{if(console.log(t),"OK"===t.status&&t.data){this.airlineOptions=t.data.airlineList.map(r=>({value:r.code,text:r.name}));const n=t.data.airportDomesticInfoList.map(r=>({code:r.code,name:r.name,city:r.city,nationalName:r.nationalName,displayName:`${r.code} - ${r.city}`})),o=t.data.airportInfoList.map(r=>({code:r.code,name:r.name,city:r.city,nationalName:r.nationalName,displayName:`${r.code} - ${r.city}`}));this.airportOptions=[{code:"ALL",name:"T\u1ea5t c\u1ea3 s\xe2n bay",city:"",nationalName:"",displayName:"T\u1ea5t c\u1ea3 s\xe2n bay"},...n,...o]}}})}getManageConfigFee(){const t={airline:this.searchForm.value.airline||"VJ",endPoint:this.searchForm.value.endPointDetails||"ALL",startPoint:this.searchForm.value.startPointDetails||"ALL",supplier:"GMBR"};this.isLoading=!0,this._inventoryService.manageDistributionConfigFee(t).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:n=>{var o;console.log(n),"OK"===n.status&&(this.listOfData=(null===(o=n.data)||void 0===o?void 0:o.map(r=>({id:r.id,airline:r.airline,startCode:r.startPoint,startPoint:this._locationDataService.getCityNameByCode(r.startPoint),endCode:r.endPoint,endPoint:this._locationDataService.getCityNameByCode(r.endPoint),channel:r.channel,adtFee:r.distributionFee.adtFee,chdFee:r.distributionFee.chdFee,infFee:r.distributionFee.infFee,createdDate:r.createdDate})))||[],this.state="SUCCESS")}})}changeValue(){}onRemoveConfig(t){this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn",body:"X\xe1c nh\u1eadn x\xf3a ph\xed d\u1ecbch v\u1ee5 n\xe0y?",okText:"X\xf3a",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:o=>{if(o.data){const r={id:t,supplierInfo:{supplierCode:"GMBR",supplierName:"GMBR",supplierType:"GMBR"}};this.isLoading=!0,this._inventoryService.disableDistributionConfigFee(r).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:c=>{console.log(c),"OK"===c.status?(this._toastService.add({severity:"success",summary:"X\xf3a ph\xed d\u1ecbch v\u1ee5 th\xe0nh c\xf4ng",detail:"",sticky:!1}),this.getManageConfigFee()):this._toastService.add({severity:"error",summary:"X\xf3a ph\xed d\u1ecbch v\u1ee5 th\u1ea5t b\u1ea1i",detail:"",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"X\xf3a ph\xed d\u1ecbch v\u1ee5 th\u1ea5t b\u1ea1i",detail:"",sticky:!0})}})}}})}onDateSelection(t,n,o,r){}onCreateDistributionTicketConfig(){this._router.navigate(["admin/create-distribution-ticket-config"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L.jH),e.Y36(u.qu),e.Y36(N.F0),e.Y36(qe.O),e.Y36(re),e.Y36(S.oE),e.Y36(R._),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["distribution-ticket-config"]],standalone:!0,features:[e.jDz],decls:26,vars:25,consts:[[1,"py-4","px-[30px]","bg-white","w-full","md:hidden","flex","flex-col","gap-y-4"],[1,"flex"],["textField","name","valueField","value","size","medium","placeholder","Ch\u1ecdn h\xe3ng bay",1,"grow-[180]","mr-4",3,"formControl","data","allowSearch"],["cfLabel",""],[1,""],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel","",1,"text-espressive-sm","text-black"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y ho\u1eb7c b\u1ecf tr\u1ed1ng \u0111\u1ec3 kh\xf4ng gi\u1edbi h\u1ea1n",1,"py-[7px]",3,"minDate","secondaryCalendar","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],[1,"flex","gap-x-4","items-end"],["textField","name","valueField","code",1,"w-full","!max-w-full",3,"status","data","allowSearch","placeholder","ngModel","maxHeight","ngModelChange"],["cfLabel","",1,"text-express-sm","text-black"],["cf-button","","type","secondary","size","medium",1,"justify-center","min-w-[150px]","!py-2.5",3,"click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"py-4","px-[30px]","rounded-lg","md:py-4","md:pr-0","md:pl-4","md:flex-auto","md:overflow-y-hidden"],["class","bg-neutral-white rounded-lg shadow-cf-md md:h-full",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-md md:mr-4",4,"ngIf"],[4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:h-full"],[1,"p-4","flex","justify-between","items-center","md:hidden"],[1,"text-heading-sm"],["cf-button","","size","medium",3,"click"],["icon","export","size","small",1,"mr-2.5"],[1,"",3,"fnSort","fnSearch","pageSizeList","listData","pageSize"],["managerTable",""],["cf-thead",""],["cf-th","",1,"whitespace-nowrap"],["cf-th","",1,"whitespace-nowrap",3,"sticky"],["ngFor","",3,"ngForOf"],[1,"border-b","border-neutral-gray-1"],[1,"py-2","px-3"],["class","w-[80px] h-[40px] object-contain",3,"src",4,"ngIf"],[1,"py-2","px-3","text-body-sm","whitespace-nowrap"],["cf-td","",1,"py-2","px-3","text-body-sm","whitespace-nowrap",3,"sticky"],[1,"flex","justify-end"],[1,"text-espressive-sm","text-secondary-3-4","cursor-pointer","whitespace-nowrap",3,"click"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"bg-neutral-white","rounded-lg","shadow-cf-md","md:mr-4"],[1,"flex","flex-col","gap-y-8","justify-center","items-center","py-[120px]"],["src","assets/images/empty-result.svg","alt",""],[1,"flex","flex-col","gap-y-2","items-center"],[1,"text-heading-md"],[1,"text-body-md-short","text-center"],["src","assets/images/error.svg","alt",""],[1,"text-body-md-short"],["cfHeadIcon","","icon","refresh","size","small",1,"mr-2"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"cf-select",2)(3,"label",3),e._uU(4,"H\xe3ng bay"),e.qZA()(),e.TgZ(5,"cf-input-group",4),e._UZ(6,"cf-icon",5),e.TgZ(7,"label",6),e._uU(8," Ng\xe0y gi\u1edd bay "),e.qZA(),e.TgZ(9,"input",7,8),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(c.close())}),e.qZA()()(),e.TgZ(11,"div",9)(12,"cf-multi-select",10),e.NdJ("ngModelChange",function(c){return n.searchForm.startPointDetails=c}),e.TgZ(13,"label",11),e._uU(14," \u0110i\u1ec3m \u0111i "),e.qZA()(),e.TgZ(15,"cf-multi-select",10),e.NdJ("ngModelChange",function(c){return n.searchForm.endPointDetails=c}),e.TgZ(16,"label",11),e._uU(17," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA()(),e.TgZ(18,"button",12),e.NdJ("click",function(){return n.getManageConfigFee()}),e._UZ(19,"cf-icon",13),e._uU(20," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(21,"div",14),e.YNc(22,wt,32,16,"div",15),e.YNc(23,Ot,12,0,"div",16),e.YNc(24,Nt,12,0,"div",16),e.qZA(),e.YNc(25,Ut,1,0,"cf-spinner",17)}2&t&&(e.xp6(2),e.Q6J("formControl",n.searchForm.controls.userId)("data",n.accountOptions)("allowSearch",!0),e.xp6(7),e.Q6J("minDate",n.currentDate)("secondaryCalendar","lunar")("displayMonths",1)("formControl",n.searchForm.controls.searchDate),e.xp6(3),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(23,Me))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay ho\u1eb7c b\u1ecf tr\u1ed1ng cho t\u1ea5t c\u1ea3")("ngModel",n.searchForm.startPointDetails)("maxHeight",230),e.xp6(3),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(24,Me))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay ho\u1eb7c b\u1ecf tr\u1ed1ng cho t\u1ea5t c\u1ea3")("ngModel",n.searchForm.endPointDetails)("maxHeight",230),e.xp6(7),e.Q6J("ngIf","SUCCESS"===n.state),e.xp6(1),e.Q6J("ngIf","EMPTY"===n.state),e.xp6(1),e.Q6J("ngIf","ERROR"===n.state),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.sg,d.O5,d.JJ,d.uU,u.u5,u.Fj,u.JJ,u.On,u.UX,u.oH,b.j$,b.ND,b.BN,l.AxE,l.Sm8,B.q,T.N8,T.Xq,pe.rC,pe.E_,pe.zs,pe.qS,ie.U,L.Cs,Z.OR],encapsulation:2}),i})();var Ae=h(27898);const Mt={B2BGMBR:{adt:1e5,chd:1e5,inf:5e4},B2CGMBR:{adt:2e5,chd:2e5,inf:1e5}};var w=h(47917),le=h(34541),Pe=h(50633);function Pt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","H\xe3ng bay kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Jt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","H\u1ea1ng \u0111\u1eb7t ch\u1ed7 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Bt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","\u0110i\u1ec3m kh\u1edfi h\xe0nh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Ht(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","\u0110i\u1ec3m k\u1ebft th\xfac kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Lt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","K\xeanh ph\xe2n ph\u1ed1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Qt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","Ph\xed d\u1ecbch v\u1ee5 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Yt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","Ph\xed d\u1ecbch v\u1ee5 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Gt(i,a){1&i&&e._UZ(0,"cf-hint",33),2&i&&e.Q6J("hint","Ph\xed d\u1ecbch v\u1ee5 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Rt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(1," T\u1ea1o c\xe0i \u0111\u1eb7t "),e.qZA()}}function jt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(1," C\u1eadp nh\u1eadt "),e.qZA()}}function Vt(i,a){if(1&i&&(e.TgZ(0,"div",36),e._UZ(1,"div",37),e.ALo(2,"highlighter"),e._UZ(3,"div",38),e.ALo(4,"highlighter"),e.qZA()),2&i){const t=e.oxw(),n=t.item,o=t.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,2,n.city+", "+n.nationalName,o.text),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.xi3(4,5,n.code+" - "+n.name,o.text),e.oJD)}}function zt(i,a){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",37),e.ALo(2,"highlighter"),e.qZA()),2&i){const t=e.oxw(),n=t.item,o=t.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,1,n.name,o.text),e.oJD)}}function Kt(i,a){if(1&i&&(e.YNc(0,Vt,5,8,"div",35),e.YNc(1,zt,3,4,"div",32)),2&i){const t=a.item;e.Q6J("ngIf","ALL"!==t.code),e.xp6(1),e.Q6J("ngIf","ALL"===t.code)}}function $t(i,a){1&i&&e._UZ(0,"cf-spinner")}const ue=function(){return[]};let Xt=(()=>{class i{constructor(t,n,o,r,c,s,p){this._cd=t,this.calendar=n,this._router=o,this._fb=r,this._inventoryService=c,this._discountFeeService=s,this._toastService=p,this.LIMIT_FEE=1e7,this.channelDistributionOption=[],this.airlineOptions=[],this.airportOptions=[],this.fareClassQH=[],this.fareClassVJ=[],this.fareClassVN=[],this.fareClassOptions=[],this.isDisabledFareClass=!0,this.isEditConfig=!1,this.checkDefaultFee=!1,this.isLoading=!1,this.DISTRIBUTION_TICKET_FEE_CONST=Mt,this.CHANNEL_DISTRIBUTION_ENUM=w.h,this.positionSearchCustom=(v,g)=>{const m=this.removeAccents(v.code.toLowerCase()),x=this.removeAccents(v.name.toLowerCase()),y=this.removeAccents(v.city.toLowerCase()),E=this.removeAccents(v.nationalName.toLowerCase()),A=this.removeAccents(g.toLowerCase());return m.includes(A)||x.includes(A)||y.includes(A)||E.includes(A)},this.currentDateIssue=n.getToday()}ngOnInit(){this.getDiscountFeeInfo(),this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL"},{text:"Flychills",value:w.h.B2B_GMBR},{text:"GMBR",value:w.h.B2C_GMBR}],this.formGroup=this._fb.group({airline:["",u.kI.required],channel:[[w.h.B2B_GMBR],u.kI.required],fareClass:["",u.kI.required],startPointDetails:["",u.kI.required],endPointDetails:["",u.kI.required],flightTimeFrom:[null],flightTimeTo:[null],adtFee:[null,u.kI.required],chdFee:[null,u.kI.required],infFee:[null,u.kI.required]})}getDiscountFeeInfo(){this._discountFeeService.getDiscountFeeInfoConfig().subscribe({next:t=>{var n,o,r;if(console.log(t),"OK"===t.status&&t.data){this.airlineOptions=t.data.airlineList.map(s=>({value:s.code,text:s.name})),this.airlineOptions.unshift({value:"ALL",text:"T\u1ea5t c\u1ea3 h\xe3ng bay"});const c=t.data.airportInfoList.map(s=>({code:s.code,name:s.name,city:s.city,nationalName:s.nationalName,displayName:`${s.code} - ${s.city}`}));this.airportOptions=[{code:"ALL",name:"T\u1ea5t c\u1ea3 s\xe2n bay",city:"",nationalName:"",displayName:"T\u1ea5t c\u1ea3 s\xe2n bay"},...c],this.fareClassQH=null===(n=t.data.fareClassList)||void 0===n?void 0:n.fareClassQH.map(s=>({value:s.code,text:s.code})),this.fareClassVJ=null===(o=t.data.fareClassList)||void 0===o?void 0:o.fareClassVJ.map(s=>({value:s.code,text:s.code})),this.fareClassVN=null===(r=t.data.fareClassList)||void 0===r?void 0:r.fareClassVN.map(s=>({value:s.code,text:s.code}))}}})}onSelectedAirline(t){this.formGroup.get("fareClass").setValue(null),"ALL"===t?(this.isDisabledFareClass=!0,this.formGroup.get("fareClass").clearValidators(),this.formGroup.get("fareClass").updateValueAndValidity()):(this.getFareClass(t),this.isDisabledFareClass=!1,this.formGroup.get("fareClass").setValidators([u.kI.required]),this.formGroup.get("fareClass").updateValueAndValidity())}getFareClass(t){switch(t){case"VN":this.fareClassOptions=this.fareClassVN.map(n=>Object.assign({},n)),this.isDisabledFareClass=!1;break;case"VJ":this.fareClassOptions=this.fareClassVJ.map(n=>Object.assign({},n)),this.isDisabledFareClass=!1;break;case"QH":this.fareClassOptions=this.fareClassQH.map(n=>Object.assign({},n)),this.isDisabledFareClass=!1;break;default:this.fareClassOptions=[],this.isDisabledFareClass=!0}this.fareClassOptions.unshift({value:"ALL",text:"T\u1ea5t c\u1ea3 h\u1ea1ng \u0111\u1eb7t ch\u1ed7"})}onFareClassChange(t){"ALL"===t.value?(this.formGroup.get("fareClass").setValue(null),this.formGroup.get("fareClass").setValue(["ALL"])):this.formGroup.get("fareClass").value.includes("ALL")&&(this.formGroup.get("fareClass").setValue(null),this.formGroup.get("fareClass").setValue([t.value]))}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}checkedChange(t){let n={adt:0,chd:0,inf:0};t&&(n=this.DISTRIBUTION_TICKET_FEE_CONST.B2BGMBR),this.formGroup.patchValue({adtFee:n.adt,chdFee:n.chd,infFee:n.inf})}onPointChange(t,n){"ALL"===t.code?(this.formGroup.get(n).setValue(null),this.formGroup.get(n).setValue(["ALL"])):this.formGroup.get(n).value.includes("ALL")&&(this.formGroup.get(n).setValue(null),this.formGroup.get(n).setValue([t.code]))}onSelectedChange(t,n){t||this.formGroup.get(n).setValue(null)}onChannelChange(t){"ALL"===t.value?(this.formGroup.get("channel").setValue(null),this.formGroup.get("channel").setValue(["ALL"])):this.formGroup.get("channel").value.includes("ALL")&&(this.formGroup.get("channel").setValue(null),this.formGroup.get("channel").setValue([t.value]))}gotoManage(){this._router.navigate(["admin/distribution-ticket-config"])}onSubmit(){var t,n,o,r;if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const c=this.formGroup.value,s={condition:{airline:c.airline,startPoint:null===(t=c.startPointDetails)||void 0===t?void 0:t.join(";"),endPoint:null===(n=c.endPointDetails)||void 0===n?void 0:n.join(";"),fareClass:null===(o=c.fareClass)||void 0===o?void 0:o.join(";"),flightTimeFrom:c.flightTimeFrom?C(c.flightTimeFrom).format("YYYY-MM-DD"):"ALL",flightTimeTo:c.flightTimeTo?C(c.flightTimeTo).format("YYYY-MM-DD"):"ALL"},feeDetail:{channel:null===(r=c.channel)||void 0===r?void 0:r.join(";"),adtFee:c.adtFee,chdFee:c.chdFee,infFee:c.infFee},supplierInfo:{supplierCode:"GMBR",supplierName:"GMBR",supplierType:"GMBR"}};this.isLoading=!0,this._inventoryService.distributionConfigFee(s).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:p=>{var v,g;if("OK"===p.status)this.gotoManage(),this._toastService.add({severity:"success",summary:"C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i th\xe0nh c\xf4ng",detail:"",sticky:!1});else{const m=(null===(g=null===(v=p.objectError)||void 0===v?void 0:v.errorDescription)||void 0===g?void 0:g.vi)||"C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i sau!";this._toastService.add({severity:"error",summary:m,detail:"",sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"C\xe0i \u0111\u1eb7t ph\xe2n ph\u1ed1i th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i sau!",detail:"",sticky:!0})}})}onFeeChange(){this.checkDefaultFee=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(L.jH),e.Y36(N.F0),e.Y36(u.qu),e.Y36(re),e.Y36(qe.O),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["create-distribution-ticket-config"]],standalone:!0,features:[e.jDz],decls:78,vars:86,consts:[[1,"flex","justify-center","py-4","px-[30px]","md:hidden"],[1,"w-[1000px]","max-w-[1000px]","flex","flex-col","gap-y-8"],[1,"flex","gap-x-[20px]","mb-4"],[1,"w-1","bg-[#fcb40a]"],[1,"text-heading-md"],[1,"p-6","bg-neutral-white","rounded-lg","shadow-cf-md","flex","flex-col","gap-y-4"],[1,"flex","gap-x-4"],[1,"flex","flex-col","grow","gap-y-4"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","formControl","selectedChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["cfHint","",3,"hint",4,"ngIf"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","disabled","data","allowSearch","placeholder","formControl","maxHeight","valueChange"],["cfLabel","",1,"text-express-sm","text-black"],[1,"flex","justify-between","gap-x-4"],["textField","displayName","valueField","code",1,"w-full","!max-w-full",3,"status","data","allowSearch","placeholder","customSearch","formControl","maxHeight","optionTmp","valueChange","selectedChange"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["textField","displayName","valueField","code",1,"w-full","!max-w-full",3,"status","data","allowSearch","placeholder","formControl","maxHeight","optionTmp","selectedChange","valueChange"],[1,"flex","gap-x-3"],[1,"grow-[400]","!w-full",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel","",1,"text-espressive-sm","text-black"],["cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Ch\u1ecdn ng\xe0y ho\u1eb7c b\u1ecf tr\u1ed1ng \u0111\u1ec3 kh\xf4ng gi\u1edbi h\u1ea1n",1,"py-[7px]",3,"minDate","secondaryCalendar","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["dateTo","cfDatepicker"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight","valueChange"],[1,"flex","justify-between","items-center","gap-x-4"],["size","medium",3,"formControl","placeholder","max","negative","ngModelChange"],["size","medium",1,"flex",3,"checked","checkChange"],[1,"flex","justify-end","items-center","gap-x-4"],["cf-button","","size","medium","type","secondary",1,"bg-white",3,"click"],["cf-button","","size","medium",3,"click",4,"ngIf"],["optionTmp",""],[4,"ngIf"],["cfHint","",3,"hint"],["cf-button","","size","medium",3,"click"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],[1,"text-body-md-short","text-neutral-gray-6",3,"innerHtml"],[1,"text-body-sm","text-neutral-gray-4",3,"innerHtml"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),e._UZ(4,"div",3),e.TgZ(5,"div",4),e._uU(6,"\u0110i\u1ec1u ki\u1ec7n ph\xe2n ph\u1ed1i"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"cf-select",8),e.NdJ("selectedChange",function(c){return n.onSelectedAirline(c.value)}),e.TgZ(11,"label",9),e._uU(12," H\xe3ng bay khai th\xe1c "),e.qZA(),e.YNc(13,Pt,1,1,"cf-hint",10),e.qZA(),e.TgZ(14,"cf-multi-select",11),e.NdJ("valueChange",function(c){return n.onFareClassChange(c)}),e.TgZ(15,"label",12),e._uU(16," H\u1ea1ng \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.YNc(17,Jt,1,1,"cf-hint",10),e.qZA(),e.TgZ(18,"div",13)(19,"cf-multi-select",14),e.NdJ("valueChange",function(c){return n.onPointChange(c,"startPointDetails")})("selectedChange",function(c){return n.onSelectedChange(c,"startPointDetails")}),e.TgZ(20,"label",15),e._uU(21," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e.YNc(22,Bt,1,1,"cf-hint",10),e.qZA(),e.TgZ(23,"cf-multi-select",16),e.NdJ("selectedChange",function(c){return n.onSelectedChange(c,"endPointDetails")})("valueChange",function(c){return n.onPointChange(c,"endPointDetails")}),e.TgZ(24,"label",15),e._uU(25," \u0110i\u1ec3m k\u1ebft th\xfac "),e.qZA(),e.YNc(26,Ht,1,1,"cf-hint",10),e.qZA()(),e.TgZ(27,"div",17)(28,"cf-input-group",18),e._UZ(29,"cf-icon",19),e.TgZ(30,"label",20),e._uU(31," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(32,"input",21,22),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(33);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(33);return e.KtG(c.close())}),e.qZA()(),e.TgZ(34,"cf-input-group",18),e._UZ(35,"cf-icon",19),e.TgZ(36,"label",20),e._uU(37," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(38,"input",21,23),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(39);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(39);return e.KtG(c.close())}),e.qZA()()()()()()(),e.TgZ(40,"div")(41,"div",2),e._UZ(42,"div",3),e.TgZ(43,"div",4),e._uU(44,"C\xe0i \u0111\u1eb7t ph\xed d\u1ecbch v\u1ee5"),e.qZA()(),e.TgZ(45,"div",5)(46,"div",6)(47,"div",7)(48,"cf-multi-select",24),e.NdJ("valueChange",function(c){return n.onChannelChange(c)}),e.TgZ(49,"label",15),e._uU(50," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA(),e.YNc(51,Lt,1,1,"cf-hint",10),e.qZA(),e.TgZ(52,"div",25)(53,"cf-input-group",18)(54,"label",15),e._uU(55," Ng\u01b0\u1eddi l\u1edbn (ADT) "),e.qZA(),e.TgZ(56,"cf-input-number",26),e.NdJ("ngModelChange",function(){return n.onFeeChange()}),e.qZA(),e.YNc(57,Qt,1,1,"cf-hint",10),e.qZA(),e.TgZ(58,"cf-input-group",18)(59,"label",15),e._uU(60," Tr\u1ebb em (CHD) "),e.qZA(),e.TgZ(61,"cf-input-number",26),e.NdJ("ngModelChange",function(){return n.onFeeChange()}),e.qZA(),e.YNc(62,Yt,1,1,"cf-hint",10),e.qZA(),e.TgZ(63,"cf-input-group",18)(64,"label",15),e._uU(65," Em b\xe9 (INF) "),e.qZA(),e.TgZ(66,"cf-input-number",26),e.NdJ("ngModelChange",function(){return n.onFeeChange()}),e.qZA(),e.YNc(67,Gt,1,1,"cf-hint",10),e.qZA()(),e.TgZ(68,"cf-checkbox",27),e.NdJ("checkChange",function(c){return n.checkedChange(c)}),e._uU(69," S\u1eed d\u1ee5ng gi\xe1 m\u1eb7c \u0111\u1ecbnh "),e.qZA()()()()(),e.TgZ(70,"div",28)(71,"button",29),e.NdJ("click",function(){return n.gotoManage()}),e._uU(72," H\u1ee7y b\u1ecf "),e.qZA(),e.YNc(73,Rt,2,0,"button",30),e.YNc(74,jt,2,0,"button",30),e.qZA()()(),e.YNc(75,Kt,2,2,"ng-template",null,31,e.W1O),e.YNc(77,$t,1,0,"cf-spinner",32)}if(2&t){const o=e.MAs(76);e.xp6(10),e.Q6J("status",n.formGroup.controls.airline.invalid&&(n.formGroup.controls.airline.dirty||n.formGroup.controls.airline.touched)?"error":"default")("data",n.airlineOptions||e.DdM(81,ue))("placeholder","Ch\u1ecdn h\xe3ng bay")("allowSearch",!0)("formControl",n.formGroup.controls.airline),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==n.formGroup.controls.airline.errors?null:n.formGroup.controls.airline.errors.required)&&(n.formGroup.controls.airline.dirty||n.formGroup.controls.airline.touched)),e.xp6(1),e.Q6J("status",n.formGroup.controls.fareClass.invalid&&(n.formGroup.controls.fareClass.dirty||n.formGroup.controls.fareClass.touched)?"error":"default")("disabled",n.isDisabledFareClass)("status","default")("data",n.fareClassOptions||e.DdM(82,ue))("allowSearch",!1)("placeholder","Ch\u1ecdn c\xe1c h\u1ea1ng \u0111\u1eb7t ch\u1ed7")("formControl",n.formGroup.controls.fareClass)("maxHeight",230),e.xp6(3),e.Q6J("ngIf",(null==n.formGroup.controls.fareClass.errors?null:n.formGroup.controls.fareClass.errors.required)&&(n.formGroup.controls.fareClass.dirty||n.formGroup.controls.fareClass.touched)),e.xp6(2),e.Q6J("status",n.formGroup.controls.startPointDetails.invalid&&(n.formGroup.controls.startPointDetails.dirty||n.formGroup.controls.startPointDetails.touched)?"error":"default")("status","default")("data",n.airportOptions||e.DdM(83,ue))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay")("customSearch",n.positionSearchCustom)("formControl",n.formGroup.controls.startPointDetails)("maxHeight",230)("optionTmp",o),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==n.formGroup.controls.startPointDetails.errors?null:n.formGroup.controls.startPointDetails.errors.required)&&(n.formGroup.controls.startPointDetails.dirty||n.formGroup.controls.startPointDetails.touched)),e.xp6(1),e.Q6J("status",n.formGroup.controls.endPointDetails.invalid&&(n.formGroup.controls.endPointDetails.dirty||n.formGroup.controls.endPointDetails.touched)?"error":"default")("status","default")("data",n.airportOptions||e.DdM(84,ue))("allowSearch",!0)("placeholder","Ch\u1ecdn m\xe3 s\xe2n bay")("formControl",n.formGroup.controls.endPointDetails)("maxHeight",230)("optionTmp",o),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==n.formGroup.controls.endPointDetails.errors?null:n.formGroup.controls.endPointDetails.errors.required)&&(n.formGroup.controls.endPointDetails.dirty||n.formGroup.controls.endPointDetails.touched)),e.xp6(2),e.Q6J("status","default"),e.xp6(4),e.Q6J("minDate",n.currentDateIssue)("secondaryCalendar","lunar")("displayMonths",1)("formControl",n.formGroup.controls.flightTimeFrom),e.xp6(2),e.Q6J("status","default"),e.xp6(4),e.Q6J("minDate",n.currentDateIssue)("secondaryCalendar","lunar")("displayMonths",1)("formControl",n.formGroup.controls.flightTimeTo),e.xp6(10),e.Q6J("status",n.formGroup.controls.channel.invalid&&(n.formGroup.controls.channel.dirty||n.formGroup.controls.channel.touched)?"error":"default")("status","default")("data",n.channelDistributionOption||e.DdM(85,ue))("allowSearch",!0)("formControl",n.formGroup.controls.channel)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==n.formGroup.controls.channel.errors?null:n.formGroup.controls.channel.errors.required)&&(n.formGroup.controls.channel.dirty||n.formGroup.controls.channel.touched)),e.xp6(2),e.Q6J("status",n.formGroup.controls.adtFee.invalid&&(n.formGroup.controls.adtFee.dirty||n.formGroup.controls.adtFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.adtFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho ADT (\u0111)")("max",n.LIMIT_FEE)("negative",!1),e.xp6(1),e.Q6J("ngIf",(null==n.formGroup.controls.adtFee.errors?null:n.formGroup.controls.adtFee.errors.required)&&(n.formGroup.controls.adtFee.dirty||n.formGroup.controls.adtFee.touched)),e.xp6(1),e.Q6J("status",n.formGroup.controls.chdFee.invalid&&(n.formGroup.controls.chdFee.dirty||n.formGroup.controls.chdFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.chdFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho CHD (\u0111)")("max",n.LIMIT_FEE)("negative",!1),e.xp6(1),e.Q6J("ngIf",(null==n.formGroup.controls.chdFee.errors?null:n.formGroup.controls.chdFee.errors.required)&&(n.formGroup.controls.chdFee.dirty||n.formGroup.controls.chdFee.touched)),e.xp6(1),e.Q6J("status",n.formGroup.controls.infFee.invalid&&(n.formGroup.controls.infFee.dirty||n.formGroup.controls.infFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.infFee)("placeholder","Nh\u1eadp ph\xed d\u1ecbch v\u1ee5 cho INF (\u0111)")("max",n.LIMIT_FEE)("negative",!1),e.xp6(1),e.Q6J("ngIf",(null==n.formGroup.controls.infFee.errors?null:n.formGroup.controls.infFee.errors.required)&&(n.formGroup.controls.infFee.dirty||n.formGroup.controls.infFee.touched)),e.xp6(1),e.Q6J("checked",n.checkDefaultFee),e.xp6(5),e.Q6J("ngIf",!n.isEditConfig),e.xp6(1),e.Q6J("ngIf",n.isEditConfig),e.xp6(3),e.Q6J("ngIf",n.isLoading)}},dependencies:[d.ez,d.O5,u.u5,u.Fj,u.JJ,u.UX,u.oH,B.q,le.C,b.j$,b.ND,b.BN,b.lt,T.N8,T.Xq,Ae.u,ie.U,Pe.T,l.AxE,l.Sm8,L.Cs,ne.m,Z.OR],encapsulation:2}),i})();var Ee=h(4688),F=(()=>{return(i=F||(F={})).FOR_APPROVAL="FOR_APPROVAL",i.APPROVED="APPROVED",i.SOLD="SOLD",i.ON_SALE="ON_SALE",i.STOP_SALE="STOP_SALE",i.CHECK_OUT_FAILED="CHECK_OUT_FAILED",i.REJECT="REJECT",i.EXPIRED="EXPIRED",i.LOCK_FOR_PROCESSING="LOCK_FOR_PROCESSING",F;var i})();const fe={[F.FOR_APPROVAL]:{name:"Ch\u01b0a duy\u1ec7t",backgroundColor:"orange",textColor:""},[F.APPROVED]:{name:"\u0110\xe3 duy\u1ec7t",backgroundColor:"cyan",textColor:""},[F.SOLD]:{name:"\u0110\xe3 b\xe1n",backgroundColor:"green",textColor:""},[F.ON_SALE]:{name:"\u0110ang b\xe1n",backgroundColor:"cyan",textColor:""},[F.LOCK_FOR_PROCESSING]:{name:"\u0110ang X\u1eed l\xfd",backgroundColor:"red",textColor:""},[F.STOP_SALE]:{name:"Ng\u1eebng b\xe1n",backgroundColor:"gray-2",textColor:""},[F.CHECK_OUT_FAILED]:{name:"Ch\u1ed9p h\u1ee5t",backgroundColor:"purple",textColor:""},[F.REJECT]:{name:"T\u1eeb ch\u1ed1i",backgroundColor:"gray-2",textColor:""},[F.EXPIRED]:{name:"H\u1ebft h\u1ea1n",backgroundColor:"gray-2",textColor:""}};var V=h(80429),z=h(77296),ae=h(70800);const Je=function(i,a){return{data:i,pnr:a}};function Wt(i,a){if(1&i&&(e.ynx(0),e.GkF(1,16),e.BQk()),2&i){const t=a.$implicit;e.oxw(3);const n=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,Je,t,t.bookingCode))}}const en=function(i){return{data:i}};function tn(i,a){if(1&i&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15),e._uU(3," Th\xf4ng tin \u0111\u1eb7t v\xe9 "),e.qZA(),e.GkF(4,16),e.qZA(),e.TgZ(5,"div",14)(6,"div",17)(7,"div",18)(8,"div",19),e._uU(9,"K\u1ebft qu\u1ea3 t\u1eeb h\u1ec7 th\u1ed1ng"),e.qZA(),e._UZ(10,"div",11),e.qZA(),e.TgZ(11,"div",20)(12,"div",21),e.YNc(13,Wt,2,5,"ng-container",22),e.qZA()()()()()),2&i){const t=e.oxw(2),n=e.MAs(3);e.xp6(4),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,en,t.ticketApproveData.ticketApproves)),e.xp6(9),e.Q6J("ngForOf",t.ticketApproveData.ticketOriginal)}}function nn(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",23)(2,"ticket-item-skeleton",23),e.qZA())}function on(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e.qZA()(),e.TgZ(5,"div",7),e.YNc(6,tn,14,5,"div",8),e.YNc(7,nn,3,0,"div",2),e.qZA(),e.TgZ(8,"div",9)(9,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(10," H\u1ee7y "),e.qZA(),e.TgZ(11,"div",11)(12,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onCancel())}),e._uU(13," T\u1eeb ch\u1ed1i "),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onApprove())}),e._uU(15," Duy\u1ec7t "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij("Duy\u1ec7t xu\u1ea5t v\xe9 [",t.paymentCode,"]"),e.xp6(3),e.Q6J("ngIf",t.ticketApproveData),e.xp6(1),e.Q6J("ngIf",!t.ticketApproveData)}}function rn(i,a){if(1&i&&(e.ynx(0),e.GkF(1,16),e.BQk()),2&i){const t=a.$implicit;e.oxw(3);const n=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,Je,t,t.bookingCode))}}function an(i,a){if(1&i&&(e.TgZ(0,"div",13)(1,"div",20)(2,"div",21),e.YNc(3,rn,2,5,"ng-container",22),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.ticketApproveData.ticketOriginal)}}function cn(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",23)(2,"ticket-item-skeleton",23),e.qZA())}function sn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e.qZA()(),e.TgZ(5,"div",7),e.YNc(6,an,4,1,"div",8),e.YNc(7,cn,3,0,"div",2),e.qZA(),e.TgZ(8,"div",9)(9,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(10," H\u1ee7y "),e.qZA(),e.TgZ(11,"div",11)(12,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onApprove())}),e._uU(13," Duy\u1ec7t "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij("Duy\u1ec7t xu\u1ea5t v\xe9 [",t.paymentCode,"]"),e.xp6(3),e.Q6J("ngIf",t.ticketApproveData),e.xp6(1),e.Q6J("ngIf",!t.ticketApproveData)}}function ln(i,a){1&i&&(e.TgZ(0,"div",28),e._uU(1,"PNR: "),e.qZA())}function un(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",29),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t," ")}}function dn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",29),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t," ")}}function pn(i,a){if(1&i&&(e.TgZ(0,"div",21)(1,"div",24),e.YNc(2,ln,2,0,"div",25),e.TgZ(3,"div",26),e._uU(4),e.qZA()(),e.TgZ(5,"div",27)(6,"div",28),e._uU(7,"Th\xf4ng tin h\xe0nh kh\xe1ch: "),e.qZA(),e.YNc(8,un,3,1,"ng-container",22),e.qZA(),e.TgZ(9,"div",27)(10,"div",28),e._uU(11,"Th\xf4ng tin h\xe0nh tr\xecnh: "),e.qZA(),e.YNc(12,dn,3,1,"ng-container",22),e.qZA(),e.TgZ(13,"div",27)(14,"div",28),e._uU(15,"Th\xf4ng tin li\xean h\u1ec7: "),e.qZA(),e.TgZ(16,"div",29),e._uU(17),e.qZA()()()),2&i){const t=a.data,n=a.pnr;e.xp6(2),e.Q6J("ngIf",n),e.xp6(2),e.hij(" ",n," "),e.xp6(4),e.Q6J("ngForOf",t.passengers),e.xp6(4),e.Q6J("ngForOf",t.journeys),e.xp6(5),e.hij(" ",t.contactInfo," ")}}function fn(i,a){1&i&&e._UZ(0,"cf-spinner")}let _e=(()=>{class i{constructor(t,n,o,r){this.ref=t,this._modal=n,this._ticketLowFareService=o,this._toastService=r,this.newTotalPrice=0,this.currentIndex=0,this.isLoading=!1,this.isViewAgent=!1,this.paymentId=this.ref.data.paymentId,this.paymentCode=this.ref.data.paymentCode,this.isViewAgent=this.ref.data.isViewAgent}ngOnInit(){this.getDetail()}getDetail(){this._ticketLowFareService.getTicketsPendingApprovalDetail(this.paymentCode,this.paymentId).subscribe({next:t=>{var n,o;"OK"===t.status&&null!==(n=t.data)&&void 0!==n&&n.length?this.ticketApproveData={oldTotalCharge:0,newTotalCharge:0,ticketOriginal:t.data.map(r=>Object.assign({bookingCode:r.pnr},this.getTicketDataOriginal(r.bookingInfo))),ticketApproves:this.getTicketDataApprove(null===(o=t.data[0])||void 0===o?void 0:o.paymentInfo)}:(this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 Booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",sticky:!0}),this.close())},error:()=>{this.close(),this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, Vui l\xf2ng th\u1eed l\u1ea1i ho\u1eb7c li\xean h\u1ec7 Booker \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3!",sticky:!0})}})}getTicketDataOriginal(t){var n;const o=null==t?void 0:t.passengersInfo.filter(c=>"INFANT"!==c.type).map(c=>({index:c.index,type:c.type,firstName:c.firstName,lastName:c.lastName,hasChild:!1,child:{type:"",firstName:"",lastName:""}})),r=null==t?void 0:t.passengersInfo.filter(c=>"INFANT"===c.type);return o.forEach(c=>{const s=r.find(p=>p.parentIndex===c.index);s&&(c.hasChild=!0,c.child={type:s.type,firstName:s.firstName,lastName:s.lastName})}),console.log(r),console.log(o),{passengers:[...o.map(c=>`${c.type}-${c.lastName}/${c.firstName}${c.hasChild?c.child.type+"-"+c.child.lastName+"/"+c.child.firstName:""}`),...r.map(c=>`${c.type}-${c.lastName}/${c.firstName}`)],journeys:null===(n=t.journeysInfo)||void 0===n?void 0:n.map(c=>{const s=new Date(c.departTime);return`${c.airline}${c.flightNumber} ${c.fareClass} ${C(s).format("DDMMM").toUpperCase()} ${c.startPoint}${c.endPoint} ${C(s).format("HH:mm")}`}),contactInfo:`${t.contactInfo.phone} ${t.contactInfo.email}`,totalPrice:0}}getTicketDataApprove(t){var n;const o=null==t?void 0:t.passengersInfo.filter(c=>"INFANT"!==c.type).map(c=>({index:c.index,type:c.type,firstName:c.firstName,lastName:c.lastName,hasChild:!1,child:{type:"",firstName:"",lastName:""}})),r=null==t?void 0:t.passengersInfo.filter(c=>"INFANT"===c.type);return null!=o&&o.forEach(c=>{const s=r.find(p=>p.parentIndex===c.index);s&&(c.hasChild=!0,c.child={type:s.type,firstName:s.firstName,lastName:s.lastName})}),{passengers:o.map(c=>`${c.type}-${c.lastName}/${c.firstName}${c.hasChild?c.child.type+"-"+c.child.lastName+"/"+c.child.firstName:""}`),journeys:null===(n=t.journeyInfo)||void 0===n?void 0:n.map(c=>{const s=new Date(c.departTime);return`${c.airline}${c.flightNumber} ${c.fareClass} ${C(s).format("DDMMM").toUpperCase()} ${c.startPoint}${c.endPoint} ${C(s).format("HH:mm")}`}),contactInfo:`${t.contactInfo.phone} ${t.contactInfo.email}`,totalPrice:0}}close(){this.ref&&this.ref.close(!1)}onCancel(){this._modal.open(Z.V0,{title:"T\u1eeb ch\u1ed1i",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe(n=>{n.data&&this._ticketLowFareService.rejectTicketPending({paymentCode:this.paymentCode,paymentId:this.paymentId}).subscribe({next:r=>{"OK"===r.status?(this.ref.close(!0),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})})}onApprove(){this._modal.open(Z.V0,{title:"Duy\u1ec7t xu\u1ea5t",body:"Duy\u1ec7t xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"Duy\u1ec7t",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe(n=>{if(n.data){const o={paymentCode:this.paymentCode,paymentId:this.paymentId};this.isLoading=!0,this._ticketLowFareService.approvalTicketPending(o).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:r=>{"OK"===r.status?(this.ref.close(!0),this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1})):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.gb,8),e.Y36(S.oE),e.Y36(ae.s),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["approve-product-modal"]],standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[["class","w-[760px] max-h-[600px] rounded-lg bg-neutral-white overflow-hidden flex flex-col md:w-screen",4,"ngIf"],["ticketTemplate",""],[4,"ngIf"],[1,"w-[760px]","max-h-[600px]","rounded-lg","bg-neutral-white","overflow-hidden","flex","flex-col","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"flex-auto","w-full","h-full","overflow-auto"],["class","p-6 grid grid-cols-2 gap-x-4",4,"ngIf"],[1,"p-6","flex","justify-between","gap-x-4"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],[1,"flex","items-center","gap-x-2"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"p-6","grid","grid-cols-2","gap-x-4"],[1,"w-full","flex","flex-col","rounded-lg","border","border-neutral-gray-1"],[1,"bg-neutral-gray-1","p-3","text-express-sm"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","flex-col"],[1,"bg-neutral-gray-1","p-3","flex","justify-between","items-center"],[1,"text-express-sm"],[1,"flex","gap-x-3","items-center"],[1,"flex","flex-col","gap-y-4","p-4"],[4,"ngFor","ngForOf"],[1,"rounded","border","border-neutral-gray-1"],[1,"flex","gap-2"],["class","text-neutral-gray-5 text-body-md-short",4,"ngIf"],[1,"text-express-md","text-neutral-gray-6","font-semibold"],[1,"flex","flex-col","gap-y-2"],[1,"text-neutral-gray-5","text-body-md-short"],[1,"text-express-md","text-neutral-gray-6"]],template:function(t,n){1&t&&(e.YNc(0,on,16,3,"div",0),e.YNc(1,sn,14,3,"div",0),e.YNc(2,pn,18,5,"ng-template",null,1,e.W1O),e.YNc(4,fn,1,0,"cf-spinner",2)),2&t&&(e.Q6J("ngIf",!n.isViewAgent),e.xp6(1),e.Q6J("ngIf",n.isViewAgent),e.xp6(3),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.sg,d.O5,d.tP,l.AxE,l.Sm8,T.N8,T.Xq,Z.OR,P.IA],encapsulation:2}),i})();var _n=h(2225);function mn(i,a){if(1&i&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div"),e._UZ(3,"img",28),e.qZA(),e.TgZ(4,"div",29)(5,"span",30),e._uU(6),e.qZA()()(),e.TgZ(7,"div",31)(8,"div",32)(9,"span"),e._uU(10),e.qZA(),e._UZ(11,"cf-icon",33),e.TgZ(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"div",34),e._UZ(15,"cf-icon",35),e.TgZ(16,"span",36),e._uU(17),e.ALo(18,"date"),e.qZA()()(),e.TgZ(19,"div",37)(20,"div",38),e._uU(21,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(22,"div",39),e._uU(23),e.qZA()(),e.TgZ(24,"div",37)(25,"div",38),e._uU(26,"Gi\xe1 mua v\xe0o"),e.qZA(),e.TgZ(27,"div",40),e._uU(28),e.ALo(29,"number"),e.qZA()(),e.TgZ(30,"div",37)(31,"div",38),e._uU(32,"S\u1ed1 kh\xe1ch"),e.qZA(),e.TgZ(33,"div",40),e._uU(34),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("src",t.productDetail.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.productDetail.airlineName),e.xp6(4),e.hij(" ",t.productDetail.startPoint,""),e.xp6(3),e.hij(" ",t.productDetail.endPoint," "),e.xp6(4),e.lnq("",t.productDetail.startPoint," - ",t.productDetail.endPoint," (",t.productDetail.startTime?e.xi3(18,10,t.productDetail.startTime,"HH:mm - dd/MM/yyyy"):"N/A",")"),e.xp6(6),e.Oqu(t.productDetail.bookingCode),e.xp6(5),e.hij("",e.lcZ(29,13,t.productDetail.purchasePrice)," \u0111"),e.xp6(6),e.Oqu(t.productDetail.paxCount)}}function gn(i,a){1&i&&(e.TgZ(0,"div",41),e._UZ(1,"ticket-item-skeleton",42),e.qZA())}function hn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ph\xed kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function vn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ph\xed kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function xn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ph\xed kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Tn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","K\xeanh giao d\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Cn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Ng\xe0y giao d\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function yn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","AG giao d\u1ecbch kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function An(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","H\xe3ng bay kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function En(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","Nh\xe0 cung c\u1ea5p kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function bn(i,a){1&i&&e._UZ(0,"cf-input-hint",43),2&i&&e.Q6J("hint","PNR kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}function Zn(i,a){1&i&&e._UZ(0,"cf-spinner")}const me=function(){return[]},Dn=function(i){return{"opacity-50 pointer-events-none cursor-default":i}};let Be=(()=>{class i{constructor(t,n,o,r,c,s,p,v,g,m){this.iconRegister=t,this.calendar=n,this._fb=o,this._modal=r,this._ref=c,this._inventoryService=s,this._flightDataService=p,this._ticketLowFareService=v,this._userService=g,this._toastService=m,this.LIMIT_FEE=1e7,this.transactionChannelOptions=[],this.airlineOptions=[],this.supplierSelectOption=[],this.isLoading=!1,this.isSpinning=!1,this.isDisableSupplier=!0,this.agentOption=[],t.registerIcons([l.okA]),this.maxPaymentDate=n.getToday(),this.productId=c.data.productId,this.initListOptions(),this.getAgentData()}ngOnInit(){this.initFormGroup(),this.getProductDetail()}initFormGroup(){this.formGroup=this._fb.group({agentId:["",u.kI.required],airline:["",u.kI.required],channel:[w.h.B2B_GMBR,u.kI.required],paymentDate:[new Date,u.kI.required],pnr:["",u.kI.required],supplier:["",u.kI.required],adtFee:["",u.kI.required],chdFee:["",u.kI.required],infFee:["",u.kI.required]})}getAgentData(){this._userService.getAllAgentUserForBooking().subscribe({next:t=>{this.agentOption=t.data.map(n=>({text:`${n.userName} - ${n.displayName}`,value:n.userId}))}})}getProductDetail(){this.isLoading=!0,this._inventoryService.getProductDetail(this.productId).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:t=>{console.log(t);const n=t.data.bookingInfo;this.productDetail={airline:n.airline,airlineName:n.airlineName,airlineLogo:this._flightDataService.getAirlineLogoByCode(n.airline),startPoint:n.journeys[0].departure.airport.code,endPoint:n.journeys[0].arrival.airport.code,startTime:new Date(n.journeys[0].departure.localTime),endTime:new Date(n.journeys[0].arrival.localTime),bookingCode:n.bookingCode,paxCount:n.passengers.length,purchasePrice:n.totalCharges.total.totalFareCharge}}})}initListOptions(){this.transactionChannelOptions=[{value:w.h.B2B_GMBR,text:"Flychills"},{value:w.h.B2C_GMBR,text:"GMBR"},{value:"other",text:"Kh\xe1c"}],this.airlineOptions=[{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.supplierSelectOption=[...Object.entries(se.f$).map(([t,n])=>({text:t,value:n}))]}close(){this._ref&&this._ref.close(!1)}onSubmit(){this.formGroup.markAllAsTouched(),this.formGroup.invalid||this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn b\xe1n \u0111\u01a1n h\xe0ng n\xe0y?",body:"\u0110\u01a1n h\xe0ng \u0111\xe3 b\xe1n s\u1ebd \u0111\u01b0\u1ee3c ghi nh\u1eadn doanh thu v\xe0 kh\xf4ng th\u1ec3 ph\xe2n ph\u1ed1i tr\u1edf l\u1ea1i. B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ti\u1ebfp t\u1ee5c?",okText:"Ti\u1ebfp t\u1ee5c",cancelText:"\u0110\xf3ng",hasIcon:!1}).afterClosed$.subscribe({next:n=>{if(n.data){const o=this.formGroup.value,r={ownerPayment:o.agentId,paymentDetail:{airline:"ALL"!=o.airline?o.airline:"",channel:o.channel,distributionFee:{adtFee:(null==o?void 0:o.adtFee)||0,chdFee:(null==o?void 0:o.chdFee)||0,infFee:(null==o?void 0:o.infFee)||0,channel:o.channel},paymentDate:o.paymentDate?o.paymentDate.getTime():0,pnr:o.pnr,provider:o.airline,supplier:"ALL"!=o.supplier?o.supplier:""},productId:this.productId};console.log(r),this.isSpinning=!0,this._ticketLowFareService.paymentOutsideTicket(r).pipe((0,k.x)(()=>this.isSpinning=!1)).subscribe({next:c=>{var s;if(console.log(c),"OK"===c.status)this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Nh\u1eadp th\xf4ng tin b\xe1n th\u1ee7 c\xf4ng th\xe0nh c\xf4ng!",sticky:!1}),this._ref.close(!0);else{const p=null!==(s=c.objectError.errorDescription.vi)&&void 0!==s?s:c.objectError.errorDescription.en;this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i ",detail:p,sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i ",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!0})}})}}})}onAirlineChange(t){const n=this.formGroup.get("supplier");n.setValue(""),"VN"===t.value?(this.isDisableSupplier=!1,n.setValidators([u.kI.required]),n.updateValueAndValidity()):(this.isDisableSupplier=!0,n.setValidators(null),n.updateValueAndValidity())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(L.jH),e.Y36(u.qu),e.Y36(S.oE),e.Y36(S.gb),e.Y36(re),e.Y36(j.G),e.Y36(ae.s),e.Y36(_n.KD),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manual-sale-product"]],standalone:!0,features:[e.jDz],decls:66,vars:66,consts:[[1,"w-[740px]","flex","flex-col","rounded-lg","bg-neutral-white","md:w-screen"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-b-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"p-6","flex","flex-col","gap-y-6"],["class","flex items-center justify-between gap-x-4",4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"text-espressive-sm","text-black","mb-1.5"],[1,"grid","grid-cols-3","gap-4"],[1,"grow-[400]","!w-full",3,"status"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["size","medium",3,"placeholder","formControl","max","negative"],["cfHint","",3,"hint",4,"ngIf"],[1,"flex","flex-col","gap-y-4"],["textField","text","valueField","value","placeholder","Ch\u1ecdn k\xeanh giao d\u1ecbch","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5",3,"CfRequired"],["autocomplete","off","cfDatepicker","","type","text","size","medium","cf-input","","placeholder","Nh\u1eadp ng\xe0y giao d\u1ecbch",1,"py-[7px]",3,"secondaryCalendar","maxDate","displayMonths","formControl","input","dateSelect"],["dateFrom","cfDatepicker"],["textField","text","valueField","value","placeholder","Ch\u1ecdn \u0111\u1ea1i l\xfd","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl"],["textField","text","valueField","value","placeholder","Ch\u1ecdn h\xe3ng h\xe0ng kh\xf4ng","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","formControl","selectedChange"],["textField","text","valueField","value","placeholder","Ch\u1ecdn nh\xe0 cung c\u1ea5p","size","medium",1,"!max-w-full","!w-full",3,"status","data","allowSearch","ngClass","formControl"],["cf-input","","size","medium","placeholder","Nh\u1eadp PNR",3,"formControl"],[1,"flex","justify-end","gap-x-4","pb-6","pr-6"],["cf-button","","size","medium","type","secondary",1,"md:w-full","md:justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",3,"click"],[4,"ngIf"],[1,"flex","items-center","justify-between","gap-x-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"whitespace-nowrap"],[1,"h-full","shrink-0","flex","flex-col","justify-between"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","flex","gap-x-2","items-center","justify-center","w-fit","rounded"],["icon","arrow_right","size","small"],[1,"mt-3","flex","gap-x-2"],["icon","plane","size","small",1,"text-[#ccc]"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","justify-between","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-heading-lg"],[1,""],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"],["cfHint","",3,"hint"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp th\xf4ng tin b\xe1n h\xe0ng th\u1ee7 c\xf4ng"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,mn,35,15,"div",5),e.YNc(7,gn,2,0,"div",6),e.TgZ(8,"div")(9,"div",7),e._uU(10,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(11,"div",8)(12,"cf-input-group",9)(13,"label",10),e._uU(14," Ng\u01b0\u1eddi l\u1edbn (ADT) "),e.qZA(),e._UZ(15,"cf-input-number",11),e.YNc(16,hn,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(17,"cf-input-group",9)(18,"label",10),e._uU(19," Tr\u1ebb em (CHD) "),e.qZA(),e._UZ(20,"cf-input-number",11),e.YNc(21,vn,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(22,"cf-input-group",9)(23,"label",10),e._uU(24," Em b\xe9 (INF) "),e.qZA(),e._UZ(25,"cf-input-number",11),e.YNc(26,xn,1,1,"cf-input-hint",12),e.qZA()()(),e.TgZ(27,"div",13)(28,"div",8)(29,"cf-select",14)(30,"label",15),e._uU(31," K\xeanh giao d\u1ecbch "),e.qZA(),e.YNc(32,Tn,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(33,"cf-input-group",9)(34,"label",15),e._uU(35," Ng\xe0y giao d\u1ecbch "),e.qZA(),e.TgZ(36,"input",16,17),e.NdJ("input",function(){e.CHM(o);const c=e.MAs(37);return e.KtG(c.close())})("dateSelect",function(){e.CHM(o);const c=e.MAs(37);return e.KtG(c.close())}),e.qZA(),e.YNc(38,Cn,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(39,"cf-select",18)(40,"label",15),e._uU(41," AG giao d\u1ecbch "),e.qZA(),e.YNc(42,yn,1,1,"cf-input-hint",12),e.qZA()(),e.TgZ(43,"div")(44,"div",7),e._uU(45,"PNR ph\xe1t sinh"),e.qZA(),e.TgZ(46,"div",8)(47,"cf-select",19),e.NdJ("selectedChange",function(c){return n.onAirlineChange(c)}),e.TgZ(48,"label",15),e._uU(49," H\xe3ng bay "),e.qZA(),e.YNc(50,An,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(51,"cf-select",20)(52,"label",15),e._uU(53," Nh\xe0 cung c\u1ea5p "),e.qZA(),e.YNc(54,En,1,1,"cf-input-hint",12),e.qZA(),e.TgZ(55,"cf-input-group",9)(56,"label",15),e._uU(57," PNR "),e.qZA(),e._UZ(58,"input",21),e.YNc(59,bn,1,1,"cf-input-hint",12),e.qZA()()()()(),e.TgZ(60,"div",22)(61,"button",23),e.NdJ("click",function(){return n.close()}),e._uU(62," H\u1ee7y "),e.qZA(),e.TgZ(63,"button",24),e.NdJ("click",function(){return n.onSubmit()}),e._uU(64," X\xe1c nh\u1eadn "),e.qZA()()(),e.YNc(65,Zn,1,0,"cf-spinner",25)}2&t&&(e.xp6(6),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("status",n.formGroup.controls.adtFee.invalid&&(n.formGroup.controls.adtFee.dirty||n.formGroup.controls.adtFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c ph\xed d\u1ecbch v\u1ee5")("formControl",n.formGroup.controls.adtFee)("max",n.LIMIT_FEE)("negative",!1),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.adtFee.hasError("required")&&(n.formGroup.controls.adtFee.touched||n.formGroup.controls.adtFee.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.chdFee.invalid&&(n.formGroup.controls.chdFee.dirty||n.formGroup.controls.chdFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c ph\xed d\u1ecbch v\u1ee5")("formControl",n.formGroup.controls.chdFee)("max",n.LIMIT_FEE)("negative",!1),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.chdFee.hasError("required")&&(n.formGroup.controls.chdFee.touched||n.formGroup.controls.chdFee.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.infFee.invalid&&(n.formGroup.controls.infFee.dirty||n.formGroup.controls.infFee.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("placeholder","Nh\u1eadp m\u1ee9c ph\xed d\u1ecbch v\u1ee5")("formControl",n.formGroup.controls.infFee)("max",n.LIMIT_FEE)("negative",!1),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.infFee.hasError("required")&&(n.formGroup.controls.infFee.touched||n.formGroup.controls.infFee.dirty)),e.xp6(3),e.Q6J("status",n.formGroup.controls.channel.invalid&&(n.formGroup.controls.channel.dirty||n.formGroup.controls.channel.touched)?"error":"default")("data",n.transactionChannelOptions||e.DdM(60,me))("allowSearch",!1)("formControl",n.formGroup.controls.channel),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.channel.hasError("required")&&(n.formGroup.controls.channel.touched||n.formGroup.controls.channel.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.paymentDate.invalid&&(n.formGroup.controls.paymentDate.dirty||n.formGroup.controls.paymentDate.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("secondaryCalendar","lunar")("maxDate",n.maxPaymentDate)("displayMonths",1)("formControl",n.formGroup.controls.paymentDate),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.paymentDate.hasError("required")&&(n.formGroup.controls.paymentDate.touched||n.formGroup.controls.paymentDate.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.agentId.invalid&&(n.formGroup.controls.agentId.dirty||n.formGroup.controls.agentId.touched)?"error":"default")("data",n.agentOption||e.DdM(61,me))("allowSearch",!1)("formControl",n.formGroup.controls.agentId),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.agentId.hasError("required")&&(n.formGroup.controls.agentId.touched||n.formGroup.controls.agentId.dirty)),e.xp6(5),e.Q6J("status",n.formGroup.controls.airline.invalid&&(n.formGroup.controls.airline.dirty||n.formGroup.controls.airline.touched)?"error":"default")("data",n.airlineOptions||e.DdM(62,me))("allowSearch",!1)("formControl",n.formGroup.controls.airline),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.airline.hasError("required")&&(n.formGroup.controls.airline.touched||n.formGroup.controls.airline.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.supplier.invalid&&(n.formGroup.controls.supplier.dirty||n.formGroup.controls.supplier.touched)?"error":"default")("data",n.supplierSelectOption||e.DdM(63,me))("allowSearch",!1)("ngClass",e.VKq(64,Dn,n.isDisableSupplier))("formControl",n.formGroup.controls.supplier),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",n.formGroup.controls.supplier.hasError("required")&&(n.formGroup.controls.supplier.touched||n.formGroup.controls.supplier.dirty)),e.xp6(1),e.Q6J("status",n.formGroup.controls.pnr.invalid&&(n.formGroup.controls.pnr.dirty||n.formGroup.controls.pnr.touched)?"error":"default"),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("formControl",n.formGroup.controls.pnr),e.xp6(1),e.Q6J("ngIf",n.formGroup.controls.pnr.hasError("required")&&(n.formGroup.controls.pnr.touched||n.formGroup.controls.pnr.dirty)),e.xp6(6),e.Q6J("ngIf",n.isSpinning))},dependencies:[d.ez,d.mk,d.O5,d.JJ,d.uU,l.AxE,l.Sm8,T.N8,T.Xq,b.j$,b.ND,b.BN,b.v2,b.lt,u.u5,u.Fj,u.JJ,u.UX,u.oH,B.q,L.Cs,P.IA,le.C,Z.OR],encapsulation:2}),i})();var Fn=h(16039);const kn=function(i,a){return{"border-b-4 border-neutral-gray-4":i,"!pl-5":a}},In=function(i){return{"text-neutral-gray-6":i}},Sn=function(i){return{"!bg-neutral-gray-6 text-express-sm":i}};function wn(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",35,36)(3,"div",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onChangeTab(r))}),e._uU(4),e.TgZ(5,"cf-label",38),e._uU(6),e.qZA()()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,kn,t.active,!n)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,In,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,Sn,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function On(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onManualSaleProduct(o.productId))}),e._uU(1," B\xe1n th\u1ee7 c\xf4ng "),e.qZA()}}function Nn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onStopSale(o.productId))}),e._uU(1," Ng\u1eebng b\xe1n "),e.qZA()}}function Un(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",41)(2,"div",42)(3,"div",43)(4,"cf-label",44),e._uU(5),e.qZA()(),e.TgZ(6,"div",45),e.YNc(7,On,2,0,"button",46),e.YNc(8,Nn,2,0,"button",46),e.TgZ(9,"button",47),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onEditProduct(r.productId))}),e._uU(10," Ch\u1ec9nh s\u1eeda "),e.qZA()()(),e.TgZ(11,"div",48)(12,"div",49),e._UZ(13,"img",50),e.TgZ(14,"div"),e._uU(15),e.qZA(),e._UZ(16,"cf-icon",51),e.TgZ(17,"div"),e._uU(18),e.qZA(),e.TgZ(19,"div"),e._uU(20),e.TgZ(21,"span",52),e._uU(22),e.qZA(),e._uU(23),e.qZA()(),e.TgZ(24,"div",53)(25,"div",54)(26,"div",55),e._uU(27,"Ng\xe0y bay: "),e.qZA(),e.TgZ(28,"div",56)(29,"span"),e._uU(30),e.ALo(31,"date"),e.qZA(),e.TgZ(32,"span"),e._uU(33),e.ALo(34,"date"),e.qZA(),e.TgZ(35,"span"),e._uU(36),e.ALo(37,"date"),e.qZA()()(),e.TgZ(38,"div",54)(39,"div",55),e._uU(40,"M\xe3 PNR: "),e.qZA(),e.TgZ(41,"div",56),e._uU(42),e.qZA()(),e.TgZ(43,"div",54)(44,"div",55),e._uU(45,"S\u1ed1 kh\xe1ch: "),e.qZA(),e.TgZ(46,"div",56),e._uU(47),e.qZA()(),e.TgZ(48,"div",54)(49,"div",55),e._uU(50,"H\u1ea1n gi\u1eef ch\u1ed7: "),e.qZA(),e.TgZ(51,"div",56),e._uU(52),e.ALo(53,"date"),e.qZA()(),e.TgZ(54,"div",54)(55,"div",55),e._uU(56,"Ng\u01b0\u1eddi \u0111\u1eb7t: "),e.qZA(),e.TgZ(57,"div",56),e._uU(58),e.qZA()(),e.TgZ(59,"div",54)(60,"div",55),e._uU(61,"Gi\xe1 mua v\xe0o: "),e.qZA(),e.TgZ(62,"div",56),e._uU(63),e.ALo(64,"number"),e.qZA()(),e.TgZ(65,"div",54)(66,"div",55),e._uU(67,"Gi\xe1 tr\xean Flychills: "),e.qZA(),e.TgZ(68,"div",56),e._uU(69),e.ALo(70,"number"),e.qZA()(),e.TgZ(71,"div",54)(72,"div",55),e._uU(73,"Gi\xe1 tr\xean GMBR: "),e.qZA(),e.TgZ(74,"div",56),e._uU(75),e.ALo(76,"number"),e.qZA()()()()(),e.BQk()}if(2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("color",n.STATE_PRODUCT_DISPLAY_CONST[t.state].backgroundColor)("size","small"),e.xp6(1),e.hij(" ",n.STATE_PRODUCT_DISPLAY_CONST[t.state].name," "),e.xp6(2),e.Q6J("ngIf",t.state===n.STATE_PRODUCT_ENUM.STOP_SALE),e.xp6(1),e.Q6J("ngIf",t.state===n.STATE_PRODUCT_ENUM.ON_SALE),e.xp6(5),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.AsE("",t.departureName," (",t.departure,")"),e.xp6(3),e.AsE("",t.arrivalName," (",t.arrival,")"),e.xp6(2),e.hij("| ",t.flightNumber," | "),e.xp6(2),e.Oqu(t.cabin),e.xp6(1),e.hij(" (",t.fareClassSegment,")"),e.xp6(7),e.hij("",e.xi3(31,23,1e3*t.flyScheduleTime,"dd/MM/yyyy"),", "),e.xp6(3),e.hij("",e.xi3(34,26,1e3*t.flyScheduleTime,"HH:mm")," - "),e.xp6(3),e.Oqu(e.xi3(37,29,1e3*t.arrivalScheduleTime,"HH:mm")),e.xp6(6),e.Oqu(t.bookingCode),e.xp6(5),e.Oqu(t.paxCount),e.xp6(5),e.Oqu(e.xi3(53,32,1e3*t.timeHoldBooking,"HH:mm, dd/MM/yyyy")),e.xp6(6),e.Oqu(t.ownerName),e.xp6(5),e.Oqu(e.lcZ(64,35,t.productBasePrice)),e.xp6(6),e.Oqu(e.lcZ(70,37,t.priceSaleB2B)),e.xp6(6),e.Oqu(e.lcZ(76,39,t.priceSaleB2C))}}function qn(i,a){if(1&i&&(e.TgZ(0,"div",39)(1,"div",40),e.YNc(2,Un,77,41,"ng-container",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listOfProducts)}}function Mn(i,a){1&i&&(e.TgZ(0,"div",57)(1,"div"),e._UZ(2,"img",58),e.qZA(),e.TgZ(3,"div",59)(4,"div",60),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(6,"div",61)(7,"div"),e._uU(8,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin t\xecm ki\u1ebfm."),e.qZA()()()())}function Pn(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",62)(2,"ticket-item-skeleton",62),e.qZA())}function Jn(i,a){1&i&&e._UZ(0,"cf-spinner")}const $=function(){return[]};let Bn=(()=>{class i{constructor(t,n,o,r,c,s,p,v,g){this._cfIconRegister=t,this._fb=n,this._modal=o,this._router=r,this._inventoryService=c,this._locationDataService=s,this._flightDataService=p,this._excelService=v,this._toastService=g,this.listTab=[{value:"",text:"T\u1ea5t c\u1ea3",counter:0,active:!1},{value:"FOR_APPROVAL",text:"Ch\u01b0a duy\u1ec7t",counter:0,active:!1},{value:"ON_SALE",text:"\u0110ang b\xe1n",counter:0,active:!0},{value:"SOLD",text:"\u0110\xe3 b\xe1n",counter:0,active:!1},{value:"REJECT",text:"T\u1eeb ch\u1ed1i",counter:0,active:!1},{value:"STOP_SALE",text:"Ng\u1eebng b\xe1n",counter:0,active:!1},{value:"EXPIRED",text:"H\u1ebft h\u1ea1n",counter:0,active:!1},{value:"CHECK_OUT_FAILED",text:"Ch\u1ed9p h\u1ee5t",counter:0,active:!1}],this.isLoading=!1,this.isSkeleton=!1,this.listOfProducts=[],this.STATE_PRODUCT_DISPLAY_CONST=fe,this.STATE_PRODUCT_ENUM=F,this.typeTimeOptions=[],this.dateRangeStr="",this.airlineOptions=[],this.distributionChannelOptions=[],this.salesChannelOptions=[],this.sellSourceTypeOptions=[],this.searchTextTypeOptions=[],this.sourceOptions=[],this.placeholderTextSearch="T\xecm ki\u1ebfm theo PNR",this.checkLenghtProduct=m=>m.length>0,t.registerIcons([l.esH,l.iYu]),this.initDateSearch()}ngOnInit(){var t;this.currentTab=(null===(t=this.listTab.find(n=>n.active))||void 0===t?void 0:t.value)||"",this.initListOptions(),this.initSearchForm(),this.getManageProduct()}initDateSearch(){this.endDateOfMonth=new Date,this.startDateOfMonth=C(this.endDateOfMonth).subtract(6,"day").toDate();const t=(0,d.p6)(this.startDateOfMonth,"dd/MM/yyyy","vi-VN"),n=(0,d.p6)(this.endDateOfMonth,"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+n}initSearchForm(){this.searchForm=this._fb.group({airline:[""],distributionChannel:[w.h.B2B_GMBR],fromDate:[this.startDateOfMonth],toDate:[this.endDateOfMonth],salesChannel:[""],searchText:[""],searchTextType:["PNR"],sellSourceType:[""],source:[""],timeFilterType:["TIME_BOOKING"]})}initListOptions(){this.typeTimeOptions=[{value:"TIME_BOOKING",text:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7"},{value:"TIME_FLY",text:"Th\u1eddi gian bay"}],this.airlineOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.distributionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:w.h.B2B_GMBR,text:"Flychills"},{value:w.h.B2C_GMBR,text:"GMBR"}],this.salesChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:w.h.B2B_GMBR,text:"Flychills"},{value:w.h.B2C_GMBR,text:"GMBR"},{value:"OTHER",text:"Kh\xe1c"}],this.searchTextTypeOptions=[{value:"PNR",text:"PNR"},{value:"JOURNEY",text:"H\xe0nh tr\xecnh"},{value:"BOOKER",text:"BOOKER"},{value:"AGENT",text:"AGENT"}],this.sourceOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"SYSTEM",text:"H\u1ec7 th\u1ed1ng"},{value:"MANUAL",text:"Th\u1ee7 c\xf4ng"}],this.sellSourceTypeOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"SYSTEM",text:"H\u1ec7 th\u1ed1ng"},{value:"BOOKER",text:"BOOKER"}]}onDateSelection(t,n,o,r){if(n.value||o.value)if(n.value&&!o.value&&t&&t.getTime()>=n.value.getTime()){o.setValue(t),r.close(),this.startDate=n.value;const c=(0,d.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{o.setValue(null),n.setValue(t);const c=(0,d.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{n.setValue(t),o.setValue(null);const c=(0,d.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}}onChangeTab(t){this.currentTab!==t.value&&(this.currentTab=t.value,this.getManageProduct(),this.listTab.forEach(n=>{n.active=n.value===this.currentTab}))}getManageProduct(){var t;const n=this.searchForm.value,o={airline:(null==n?void 0:n.airline)||"",channelDistribution:(null==n?void 0:n.distributionChannel)||"",startDate:null!=n&&n.fromDate?(0,d.p6)(null==n?void 0:n.fromDate,"yyyy-MM-dd","vi-VN"):"",endDate:null!=n&&n.toDate?(0,d.p6)(null==n?void 0:n.toDate,"yyyy-MM-dd","vi-VN"):"",salesChannel:(null==n?void 0:n.salesChannel)||null,searchText:(null===(t=null==n?void 0:n.searchText)||void 0===t?void 0:t.trim())||"",searchTextType:(null==n?void 0:n.searchTextType)||null,sellSourceType:(null==n?void 0:n.sellSourceType)||null,source:(null==n?void 0:n.source)||null,state:this.currentTab||null,timeFilterType:(null==n?void 0:n.timeFilterType)||null};this.isSkeleton=!0,this._inventoryService.manageProduct(o).pipe((0,k.x)(()=>this.isSkeleton=!1)).subscribe({next:r=>{var c;"OK"===r.status&&(this.listOfProducts=(null===(c=r.data)||void 0===c?void 0:c.map(s=>{var p,v,g,m,x,y;return{airline:s.productDetail.airline,airlineName:this._flightDataService.getAirlineNameByCode(s.productDetail.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(s.productDetail.airline),departure:s.productDetail.departure,departureName:this._locationDataService.getCityNameByCode(s.productDetail.departure),arrival:s.productDetail.arrival,arrivalName:this._locationDataService.getCityNameByCode(s.productDetail.arrival),bookingCode:s.productDetail.bookingCode,flightNumber:`${s.productDetail.airline}${s.productDetail.flightNumber}`,cabin:(null===(p=s.productDetail)||void 0===p?void 0:p.cabin)||"",fareClassSegment:(null===(v=s.productDetail)||void 0===v?void 0:v.fareClassSegment)||"",channelDistribution:s.productDetail.channelDistribution,flyScheduleTime:s.productDetail.flyScheduleTime,arrivalScheduleTime:s.productDetail.arrivalScheduleTime,ownerName:s.productDetail.ownerName,paxCount:s.productDetail.paxCount,productBasePrice:s.productDetail.productBasePrice*s.productDetail.paxCount,productId:s.productDetail.productId,timeHoldBooking:s.productDetail.timeHoldBooking,priceSaleB2C:(null===(m=null===(g=s.priceSaleInfo)||void 0===g?void 0:g.find(E=>"B2C_GMBR"===E.channel))||void 0===m?void 0:m.priceSale)||0,priceSaleB2B:(null===(y=null===(x=s.priceSaleInfo)||void 0===x?void 0:x.find(E=>"B2B_GMBR"===E.channel))||void 0===y?void 0:y.priceSale)||0,state:s.productDetail.state,stateDisplay:fe[s.productDetail.state].name}}))||[],this.listOfProducts.sort((s,p)=>s.timeHoldBooking-p.timeHoldBooking))}})}onSearchTextType(t){switch(console.log(t),t){case"PNR":default:this.placeholderTextSearch="T\xecm ki\u1ebfm theo PNR";break;case"JOURNEY":this.placeholderTextSearch="T\xecm ki\u1ebfm theo H\xe0nh tr\xecnh";break;case"BOOKER":this.placeholderTextSearch="T\xecm ki\u1ebfm theo Booker";break;case"AGENT":this.placeholderTextSearch="T\xecm ki\u1ebfm theo \u0110\u1ea1i l\xfd"}}onEditProduct(t){this._router.navigate([`admin/edit-product/${t}`])}onCancelConfirm(){this._modal.open(Z.V0,{title:"",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"})}onConfirm(){this._modal.open(_e,{})}onManualSaleProduct(t){this._modal.open(Be,{productId:t}).afterClosed$.subscribe({next:o=>{o.data&&this.getManageProduct()}})}onStopSale(t){this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn ng\u1eebng b\xe1n",body:"Ng\u1eebng b\xe1n \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"X\xe1c nh\u1eadn",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe({next:o=>{o.data&&(this.isLoading=!0,this._inventoryService.stopSaleProduct(t).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:r=>{var c,s;if("OK"===r.status)this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Ng\u1eebng b\xe1n th\xe0nh c\xf4ng",sticky:!1}),this.getManageProduct();else{const p=(null===(s=null===(c=r.objectError)||void 0===c?void 0:c.errorDescription)||void 0===s?void 0:s.vi)||"Ng\u1eebng b\xe1n th\u1ea5t b\u1ea1i";this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:p,sticky:!0})}},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra",sticky:!0})}}))}})}onCheckout(t){}exportExcelProduct(){const t=`inventory_ticket_report_${C().format("DDMMYYYY")}`,n=this.listOfProducts.map(o=>({airline:o.airline,bookingCode:o.bookingCode,departureDate:C(1e3*o.flyScheduleTime).format("DD/MM/YYYY"),flightNumber:o.flightNumber,route:`${o.departure}${o.arrival}`,duration:`${C(1e3*o.flyScheduleTime).format("HHmm")} ${C(1e3*o.arrivalScheduleTime).format("HHmm")}`,type:"",timeCreated:"",ownerName:o.ownerName,timeHoldBooking:C(1e3*o.timeHoldBooking).format("HH:mm, DD/MM/YYYY"),paxCount:o.paxCount,stateDisplay:fe[o.state].name,productBasePrice:o.productBasePrice,b2bPrice:"",b2cPrice:"",reveneus:"",ownerSale:"",transactionChannel:"",transactionAgent:"",transactionDate:"",salePNR:""}));this._excelService.exportToExcel(n,["H\xe3ng bay","PNR mua v\xe0o","Ng\xe0y bay","M\xe3 hi\u1ec7u chuy\u1ebfn bay","H\xe0nh tr\xecnh","Th\u1eddi gian bay","Ph\xe2n lo\u1ea1i","Ng\xe0y \u0111\u1eb7t","Ng\u01b0\u1eddi \u0111\u1eb7t","H\u1ea1n gi\u1eef ch\u1ed7","S\u1ed1 kh\xe1ch","Tr\u1ea1ng th\xe1i","Gi\xe1 mua v\xe0o","Gi\xe1 b\xe1n tr\xean Flychills","Gi\xe1 b\xe1n tr\xean GMBR","Doanh thu","Ng\u01b0\u1eddi b\xe1n","K\xeanh giao d\u1ecbch","AG giao d\u1ecbch","Ng\xe0y giao d\u1ecbch","PNR b\xe1n ra"],t,[{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(u.qu),e.Y36(S.oE),e.Y36(N.F0),e.Y36(re),e.Y36(R._),e.Y36(j.G),e.Y36(Fn.x),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manage-product"]],standalone:!0,features:[e.jDz],decls:57,vars:64,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","items-center"],[1,"text-heading-lg","md:text-heading-sm"],["cf-button","","size","medium",1,"justify-center","whitespace-nowrap","bg-neutral-white",3,"click"],["cfHeadIcon","","icon","export","size","small",1,"mr-2"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2"],[1,"flex","flex-wrap","gap-x-4","gap-y-2"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","placeholder","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex"],[1,"w-[200px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value",1,"!max-w-none","w-[200px]",3,"status","data","placeholder","allowSearch","formControl"],[1,"flex","items-center","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","allowSearch","formControl","ngModelChange"],[1,"w-full"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","autocomplete","off",3,"formControl","placeholder"],["cf-button","","size","medium","type","secondary",1,"justify-center","whitespace-nowrap",3,"click"],["cfHeadIcon","","icon","search","size","small",1,"mr-2"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],["class","flex flex-col gap-y-[30px] md:gap-y-4",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-[100px] flex flex-col justify-center items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[4,"ngIf"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass","click"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback"],[1,"rounded-lg","overflow-hidden"],[1,"bg-neutral-gray-3","flex","justify-between","items-center"],[1,"py-2","px-3"],["type","solid",3,"color","size"],[1,"flex","items-center","gap-x-2","py-1.5","px-2.5"],["cf-button","","size","small","type","secondary","class","bg-white",3,"click",4,"ngIf"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],[1,"bg-neutral-white","flex","flex-col","gap-y-2","p-3"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],["icon","arrow_right","size","small"],[1,"uppercase"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-[100px]","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-heading-md"],[1,"text-center","text-body-md-short"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"T\u1ed5ng kho v\xe9 T\u1ebft 2025"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.exportExcelProduct()}),e._UZ(6,"cf-icon",5),e._uU(7," Xu\u1ea5t excel "),e.qZA()(),e.TgZ(8,"div",6)(9,"div",7),e.YNc(10,wn,7,13,"ng-container",8),e.qZA(),e.TgZ(11,"div",9)(12,"div",10)(13,"cf-select",11)(14,"label",12),e._uU(15," L\u1ecdc theo "),e.qZA()(),e.TgZ(16,"div",13)(17,"cf-input-group",14),e._UZ(18,"cf-icon",15),e.TgZ(19,"label",16),e._uU(20,"Th\u1eddi gian"),e.qZA(),e.TgZ(21,"input",17),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(23);return e.KtG(c.open())})("ngModelChange",function(c){return n.dateRangeStr=c}),e.qZA()(),e.TgZ(22,"input",18,19),e.NdJ("dateSelect",function(c){e.CHM(o);const s=e.MAs(23);return e.KtG(n.onDateSelection(c,n.searchForm.controls.fromDate,n.searchForm.controls.toDate,s))}),e.qZA()(),e.TgZ(24,"cf-select",20)(25,"label",12),e._uU(26," H\xe3ng bay "),e.qZA()(),e.TgZ(27,"cf-select",20)(28,"label",12),e._uU(29," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()(),e.TgZ(30,"cf-select",20)(31,"label",12),e._uU(32," Ng\u01b0\u1eddi \u0111\u1eb7t "),e.qZA()(),e.TgZ(33,"cf-select",20)(34,"label",12),e._uU(35," K\xeanh giao d\u1ecbch "),e.qZA()(),e.TgZ(36,"cf-select",20)(37,"label",12),e._uU(38," Ng\u01b0\u1eddi b\xe1n "),e.qZA()()(),e.TgZ(39,"div",21)(40,"cf-select",22),e.NdJ("ngModelChange",function(c){return n.onSearchTextType(c)}),e.qZA(),e.TgZ(41,"cf-input-group",23),e._UZ(42,"cf-icon",24)(43,"input",25),e.qZA(),e.TgZ(44,"button",26),e.NdJ("click",function(){return n.getManageProduct()}),e._UZ(45,"cf-icon",27),e._uU(46," T\xecm ki\u1ebfm "),e.qZA()()()()(),e.TgZ(47,"div",28)(48,"div",29)(49,"div",30)(50,"div",31),e.YNc(51,qn,3,7,"div",32),e.ALo(52,"mapper"),e.YNc(53,Mn,11,0,"div",33),e.ALo(54,"mapper"),e.YNc(55,Pn,3,0,"div",34),e.qZA()()()()(),e.YNc(56,Jn,1,0,"cf-spinner",34)}2&t&&(e.xp6(10),e.Q6J("ngForOf",n.listTab),e.xp6(3),e.Q6J("status","default")("data",n.typeTimeOptions||e.DdM(57,$))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.timeFilterType),e.xp6(4),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.searchForm.controls.fromDate.value)("toDate",n.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(58,$))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.airline),e.xp6(3),e.Q6J("status","default")("data",n.distributionChannelOptions||e.DdM(59,$))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.distributionChannel),e.xp6(3),e.Q6J("status","default")("data",n.sourceOptions||e.DdM(60,$))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.source),e.xp6(3),e.Q6J("status","default")("data",n.salesChannelOptions||e.DdM(61,$))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.salesChannel),e.xp6(3),e.Q6J("status","default")("data",n.sellSourceTypeOptions||e.DdM(62,$))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.sellSourceType),e.xp6(4),e.Q6J("status","default")("data",n.searchTextTypeOptions||e.DdM(63,$))("allowSearch",!0)("formControl",n.searchForm.controls.searchTextType),e.xp6(3),e.Q6J("formControl",n.searchForm.controls.searchText)("placeholder",n.placeholderTextSearch),e.xp6(8),e.Q6J("ngIf",!n.isSkeleton&&e.xi3(52,51,n.listOfProducts,n.checkLenghtProduct)),e.xp6(2),e.Q6J("ngIf",!n.isSkeleton&&!e.xi3(54,54,n.listOfProducts,n.checkLenghtProduct)),e.xp6(2),e.Q6J("ngIf",n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.mk,d.sg,d.O5,d.JJ,d.uU,Ee.b,B.q,u.u5,u.Fj,u.JJ,u.On,u.UX,u.oH,T.N8,T.Xq,b.j$,b.ND,b.BN,l.AxE,l.Sm8,P.IA,z.Rq,z.Ry,L.Cs,V.q,Z.OR],encapsulation:2}),i})();var O=h(37094),Hn=h(52013),X=h(42678);let Ln=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"status",void 0),(0,f.gn)([(0,q.D)(()=>Qn),(0,_.C)()],i.prototype,"data",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"objectError",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"success",void 0),i})(),Qn=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"orderId",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"code",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"ownerInfo",void 0),(0,f.gn)([(0,q.D)(()=>Vn),(0,_.C)()],i.prototype,"userActionInfo",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"state",void 0),(0,f.gn)([(0,q.D)(()=>jn),(0,_.C)()],i.prototype,"ticketInfo",void 0),(0,f.gn)([(0,q.D)(()=>Rn),(0,_.C)()],i.prototype,"orderInfo",void 0),(0,f.gn)([(0,q.D)(()=>Gn),(0,_.C)()],i.prototype,"fareInfo",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"canUpdate",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"monitorType",void 0),(0,f.gn)([(0,q.D)(()=>Yn),(0,_.C)()],i.prototype,"availableSlotInfo",void 0),i})(),Yn=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"free",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"type",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"amountPerPax",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"percent",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"currency",void 0),i})(),Gn=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"originalPnr",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"detectedPnr",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"originalFare",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"detectedFare",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"originalFareClass",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"detectedFareClass",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"higherFare",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"lastTimeUpdate",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"airline",void 0),i})(),Rn=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"timeCreate",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"timeExpire",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"timeUpdate",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"timeFinished",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"fareMonitors",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"priceMonitors",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"notifyBeforeExpired",void 0),i})(),jn=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"airline",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"flightType",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"journeys",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"passengers",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"originalPrice",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"totalFare",void 0),i})(),Vn=(()=>{class i{}return(0,f.gn)([(0,_.C)()],i.prototype,"id",void 0),(0,f.gn)([(0,_.C)()],i.prototype,"name",void 0),i})();const be={headers:new oe.WM({"Content-Type":"application/json"})};let He=(()=>{class i{constructor(t,n){this.http=t,this.appConfig=n}registerTickedAdvanced(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/register",JSON.stringify(t),be).pipe((0,J.U)(n=>(0,G.yE)(Ln,n,{excludeExtraneousValues:!0})))}getCurrentConfigOrder(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/current-config-order",JSON.stringify({orderId:t}),be).pipe((0,J.U)(n=>(0,G.yE)(X.zz,n,{excludeExtraneousValues:!0})))}updateConfigOrder(t){return this.http.post(this.appConfig.apiUrlTPS+"hunt_ticket_advanced/update_order",JSON.stringify(t),be).pipe((0,J.U)(n=>(0,G.yE)(X.Cs,n,{excludeExtraneousValues:!0})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(oe.eN),e.LFG(se.qB))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function zn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"span",53),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.start+" - "+t.end," ")}}function Kn(i,a){if(1&i&&(e.ynx(0),e.YNc(1,zn,3,1,"ng-container",52),e.ALo(2,"mapper"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.rawData.departureTime,t.viewDepartureTime))}}function $n(i,a){1&i&&(e.TgZ(0,"span",53),e._uU(1," 00:00 - 23:59 "),e.qZA())}function Xn(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Wn(i,a){if(1&i&&(e.TgZ(0,"div",55)(1,"div",56),e._UZ(2,"img",57),e.TgZ(3,"div",31),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function ei(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Wn,7,8,"div",54),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function ti(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ei,2,1,"div",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.rawData.specifyPriceList)}}function ni(i,a){1&i&&(e.TgZ(0,"div",31)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function ii(i,a){if(1&i&&(e.TgZ(0,"div",55)(1,"div",56),e._UZ(2,"img",57),e.TgZ(3,"div",31),e._uU(4),e.TgZ(5,"span",60),e._uU(6),e.qZA()()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function oi(i,a){if(1&i&&(e.TgZ(0,"div",65),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function ri(i,a){if(1&i&&(e.ynx(0),e.YNc(1,oi,2,1,"div",64),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function ai(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ri,2,1,"ng-container",52),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const ci=function(i){return{"w-full":i}};function si(i,a){if(1&i&&(e.TgZ(0,"div",62)(1,"div",63),e._uU(2),e.qZA(),e.YNc(3,ai,2,1,"ng-container",39),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,ci,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function li(i,a){if(1&i&&(e.ynx(0),e.YNc(1,si,4,5,"div",61),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function ui(i,a){if(1&i&&(e.ynx(0),e.YNc(1,li,2,1,"ng-container",52),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function di(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ui,2,1,"ng-container",52),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function pi(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ii,7,3,"div",54),e.TgZ(2,"div",59),e.YNc(3,di,2,1,"ng-container",39),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function fi(i,a){if(1&i&&(e.TgZ(0,"div",58),e.YNc(1,pi,4,2,"ng-container",52),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function _i(i,a){1&i&&e._UZ(0,"cf-spinner")}let Le=(()=>{class i{constructor(t,n,o,r,c,s,p,v){this.cfIconRegister=t,this.ref=n,this.cfBottomSheetRef=o,this.huntTicketAdvancedSvc=r,this._route=c,this._modal=s,this.cdr=p,this.bottomSheetData=v,this.dataFlight=(0,e.f3M)(R._).getAllOption(),this.isLoading=!1,this.viewDepartureTime=g=>g.filter(m=>m.isActive),this.viewFly=g=>{const m=this.dataFlight.find(x=>x.Code===g);return`${null==m?void 0:m.CityName} (${g})`},t.registerIcons([l.UNF]),this.ref&&(this.rawData=this.ref.data.data,this.dataFormSubmit=this.progressDateAfterSubmit(this.ref.data.data),this.selectedFaresTree=this.ref.data.selectedFaresTree),this.cfBottomSheetRef&&(this.rawData=this.bottomSheetData.rawData,this.dataFormSubmit=this.progressDateAfterSubmit(this.bottomSheetData.rawData),this.selectedFaresTree=this.bottomSheetData.selectedFaresTree)}close(t){this.ref&&this.ref.close(t),this.bottomSheetData&&this.cfBottomSheetRef.dismiss(t)}submit(){this.isLoading=!0,this.huntTicketAdvancedSvc.registerTickedAdvanced(this.dataFormSubmit).pipe((0,k.x)(()=>{this.isLoading=!1,this.cdr.detectChanges()})).subscribe(t=>{if("OK"===t.status){let n="",o="";o="well_done",n=`<div>Ch\xfac m\u1eebng b\u1ea1n, b\u1ea1n \u0111\u01b0\u1ee3c mi\u1ec5n ph\xed y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${t.data.code}</strong>. Ch\xfang t\xf4i s\u1ebd th\xf4ng b\xe1o \u0111\u1ebfn b\u1ea1n khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi nh\u1ea5t.</div>`,this._modal.open(Hn.V,{title:"T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",content:n,status:o,cancelText:"\u0110\xf3ng",okText:"Xem danh s\xe1ch"}).afterClosed$.subscribe({next:c=>{c.data&&(this.close(!0),this._route.navigate(["admin/hunt-ticket-advanced-list"]))}})}})}progressDateAfterSubmit(t){const{type:n,endPoint:o,startPoint:r,distributionChannel:c,isTimeRange:s,departureTime:p,toDate:v,fromDate:g,specifyPriceList:m,specifyFareClassList:x}=t,y=null==p?void 0:p.filter(A=>A.isActive),E=y[y.length-1].end.split(":");return{conditions:{specifyPriceList:"PRICE"===n?m.filter(A=>A.price).map(({id:A,price:D})=>({airline:A,targetPrice:D})):[],specifyFareClassList:"FARE"===n?x.map(({airline:A,fareClass:D})=>({airline:A.toUpperCase(),fareClass:D.join(";")})):[],type:n},advanceSetting:{timeExecute:C(this.setTimeOnDate(v,+E[0],+E[1])).format("YYYY-MM-DDTHH:mm:ss"),notifBeforExpire:!1},journeys:{endPoint:o,startPoint:r,rangeDateTime:{fromDate:Math.floor(this.setTimeOnDate(g,0,0).getTime()/1e3),toDate:Math.floor(this.setTimeOnDate(v,0,0).getTime()/1e3)},allRangeTime:!s,rangeTime:y.map(({start:A,end:D})=>({toDate:D,fromDate:A}))},distributionChannel:c}}setTimeOnDate(t,n,o,r){return t.setHours(n),t.setMinutes(o),t.setSeconds(r?59:0),t.setMilliseconds(r?99:0),t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(S.gb,8),e.Y36(O.Zu,8),e.Y36(He),e.Y36(N.F0),e.Y36(S.oE),e.Y36(e.sBO),e.Y36(O.Rr,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-add-confirm-modal"]],standalone:!0,features:[e.jDz],decls:110,vars:27,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","pt-6","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],["icon","plane","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"flex","flex-col","gap-3","bg-[#FAFAFA]","px-3","py-2"],[1,"flex","justify-center","gap-3","md:flex-col"],[1,"flex","items-center","gap-x-[20px]","md:flex-col","md:gap-3"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center"],[1,"items-center","w-[100px]","md:w-[75px]"],[1,"text-center","text-express-sm","text-neutral-gray-4"],[1,"flex","items-center"],[1,"w-1.5","h-1.5","bg-neutral-gray-2","rounded-full"],[1,"w-full","h-[1px]","bg-neutral-gray-2"],["icon","plane","size","small",1,"text-[#ccc]","cf-icon-small"],[1,"text-heading-lg","text-neutral-black","flex","gap-x-2","items-center","md:flex","md:flex-1","md:justify-center"],[1,"flex","justify-center","gap-x-1"],[1,"flex","items-center","gap-x-2","mb-2","justify-start"],["icon","calendar","size","small",1,"cf-icon-small"],[1,"text-body-md","text-neutral-black"],[1,"text-body-md","text-neutral-black","font-semibold"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"text-body-md"],[1,"w-[60%]"],[1,"text-express-md"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],[4,"ngIf","ngIfElse"],["allTimeTpl",""],[1,"w-[60%]","text-express-md"],[4,"ngIf"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],["icon","money","size","small"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-right",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"click"],["icon","circle_check","size","small",1,"ml-2.5"],[4,"ngFor","ngForOf"],[1,"bg-neutral-gray-1","text-express-md","p-2"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close(!1)}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"cf-icon",7),e.TgZ(9,"span",8),e._uU(10,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div")(15,"div",12)(16,"div",13)(17,"span"),e._uU(18),e.ALo(19,"mapper"),e.qZA()(),e.TgZ(20,"div",14)(21,"div",15),e._uU(22,"Bay th\u1eb3ng"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"div",17)(25,"div",18)(26,"cf-icon",19),e.qZA()()()(),e.TgZ(27,"div")(28,"div",20)(29,"span"),e._uU(30),e.ALo(31,"mapper"),e.qZA()()()(),e.TgZ(32,"div",21)(33,"div",22),e._UZ(34,"cf-icon",23),e.TgZ(35,"div",24),e._uU(36,"T\u1eeb "),e.TgZ(37,"span",25),e._uU(38),e.ALo(39,"date"),e.qZA()()(),e.TgZ(40,"div",22)(41,"div",24),e._uU(42,"\u0110\u1ebfn "),e.TgZ(43,"span",25),e._uU(44),e.ALo(45,"date"),e.qZA()()()()(),e._UZ(46,"div",26),e.TgZ(47,"div",27)(48,"div",28)(49,"div",29)(50,"span"),e._uU(51,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e.TgZ(52,"div",30)(53,"span",31),e._uU(54),e.ALo(55,"date"),e.qZA()()(),e._UZ(56,"div",26),e.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"span"),e._uU(61,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(62,"div",35),e.YNc(63,Kn,3,4,"ng-container",36),e.YNc(64,$n,2,0,"ng-template",null,37,e.W1O),e.qZA()(),e._UZ(66,"div",26),e.TgZ(67,"div",32)(68,"div",33)(69,"div",34)(70,"span"),e._uU(71,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(72,"div",38),e.YNc(73,Xn,2,0,"span",39),e.YNc(74,ti,2,1,"div",39),e.qZA()(),e._UZ(75,"div",26),e.TgZ(76,"div",32)(77,"div",33)(78,"div",29)(79,"span"),e._uU(80,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(81,"div",30),e.YNc(82,ni,3,0,"div",40),e.YNc(83,fi,2,1,"div",41),e.qZA()()()(),e.TgZ(84,"div",5)(85,"div",42),e._UZ(86,"cf-icon",43),e.TgZ(87,"span",8),e._uU(88,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(89,"div",44),e._UZ(90,"cf-icon",45),e.TgZ(91,"div")(92,"span",31),e._uU(93,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(94," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(95,"div",44),e._UZ(96,"cf-icon",46),e.TgZ(97,"div",31),e._uU(98,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(99,"span",47),e._uU(100,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(101," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()(),e.TgZ(102,"div",48)(103,"button",49),e.NdJ("click",function(){return n.close(!1)}),e._uU(104," \u0110\xf3ng "),e.qZA(),e.TgZ(105,"button",50),e.NdJ("click",function(){return n.submit()}),e.TgZ(106,"span"),e._uU(107,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(108,"cf-icon",51),e.qZA()()(),e.YNc(109,_i,1,0,"cf-spinner",39)),2&t){const o=e.MAs(65);e.xp6(18),e.hij("",e.xi3(19,12,n.rawData.startPoint,n.viewFly)," "),e.xp6(12),e.hij(" ",e.xi3(31,15,n.rawData.endPoint,n.viewFly)," "),e.xp6(8),e.Oqu(e.xi3(39,18,n.rawData.fromDate,"dd/MM/yyyy")),e.xp6(6),e.Oqu(e.xi3(45,21,n.rawData.toDate,"dd/MM/yyyy")),e.xp6(10),e.Oqu(e.xi3(55,24,n.dataFormSubmit.advanceSetting.timeExecute,"dd/MM/yyy HH:mm")),e.xp6(9),e.Q6J("ngIf",n.rawData.isTimeRange)("ngIfElse",o),e.xp6(10),e.Q6J("ngIf","PRICE"!==n.rawData.type),e.xp6(1),e.Q6J("ngIf","PRICE"===n.rawData.type),e.xp6(8),e.Q6J("ngIf","FARE"!==n.rawData.type),e.xp6(1),e.Q6J("ngIf","FARE"===n.rawData.type),e.xp6(26),e.Q6J("ngIf",n.isLoading)}},dependencies:[d.ez,d.mk,d.sg,d.O5,d.JJ,d.uU,l.AxE,l.Sm8,V.q,T.N8,T.Xq,P.AS,O.DW,Z.OR],styles:[":host{display:block}\n"],encapsulation:2,changeDetection:0}),i})();function mi(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index;e.xp6(1),e.hij(" ",t+1," ")}}function gi(i,a){1&i&&(e.TgZ(0,"span"),e._UZ(1,"cf-icon",7),e.qZA())}function hi(i,a){if(1&i&&e._UZ(0,"div",8),2&i){const t=e.oxw().index,n=e.oxw();e.Q6J("ngClass",t<n.stepCurIdx?"bg-secondary-7-4":"bg-neutral-gray-3")}}const vi=function(i,a,t){return{"text-neutral-white !bg-secondary-7-4":i,"text-neutral-gray-3 !bg-white":a,"border-secondary-7-4":t}};function xi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3),e.YNc(3,mi,2,1,"span",4),e.YNc(4,gi,2,0,"span",4),e.TgZ(5,"div",5),e._uU(6),e.qZA()()(),e.YNc(7,hi,1,1,"div",6),e.BQk()),2&i){const t=a.$implicit,n=a.index,o=a.last,r=e.oxw();e.xp6(2),e.Q6J("ngClass",e.kEZ(5,vi,r.stepCurIdx===n,r.stepCurIdx!==n,n<=r.stepCurIdx)),e.xp6(1),e.Q6J("ngIf",n>=r.stepCurIdx),e.xp6(1),e.Q6J("ngIf",n<r.stepCurIdx),e.xp6(2),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",!o)}}let Ti=(()=>{class i{set stepCur(t){this.stepCurIdx=this.steps.findIndex(n=>n.id===t)}constructor(t){this._cfRegister=t,this.stepChange=new e.vpe,t.registerIcons([l.NNX])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cheapflightclient-step-ct"]],inputs:{steps:"steps",stepCur:"stepCur"},outputs:{stepChange:"stepChange"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[1,"flex","items-center","w-[84%]","md:w-[70%]"],[4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"relative","z-10","flex-shrink-0","w-9","h-9","rounded-full","flex","items-center","justify-center","border","border-neutral-gray-3",3,"ngClass"],[4,"ngIf"],[1,"line-clamp-2","absolute","min-w-[140px]","max-w-[170px]","top-[130%]","text-[#2C2C2C]","text-express-md","md:max-w-[80px]","text-center"],["class","flex-grow h-[1px] ",3,"ngClass",4,"ngIf"],["icon","check","size","small",1,"text-secondary-7-4"],[1,"flex-grow","h-[1px]",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,xi,8,9,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.steps))},dependencies:[d.ez,d.mk,d.sg,d.O5,l.AxE,l.Sm8],styles:["[_nghost-%COMP%]{display:flex;width:100%;justify-content:center;min-height:68px;align-items:flex-start}"],changeDetection:0}),i})();var Ci=h(99590),Qe=h(73546),Ye=h(76331);const Ei=(i,a)=>{var t;const n=i.fareType.map(o=>o.fareClass.map(({code:r})=>r)).reduce((o,r)=>[...o,...r],[]);return!(null===(t=null==a?void 0:a.fareClass)||void 0===t||!t.length)&&n.some(o=>a.fareClass.includes(o))},bi=(i,a)=>{var t;return!(null===(t=null==a?void 0:a.fareClass)||void 0===t||!t.length)&&i.fareClass.map(({code:n})=>n).some(n=>a.fareClass.includes(n))},Zi=i=>{var a;let t=0;return null===(a=i.cabin)||void 0===a||a.forEach(n=>{var o;null===(o=n.fareType)||void 0===o||o.forEach(r=>{t+=r.fareClass.length||0})}),t},Di=i=>["GDS","other","",null].includes(i)?"assets/icons/airline-default.svg":`assets/icons/${i}-icon.svg`,Fi={VJ:{name:"Vietjet Air",logo:"assets/airline-logo/VJ.png",smallLogo:"assets/airline-logo/VJ_small.png"},VN:{name:"Vietnam Airlines",logo:"assets/airline-logo/VN.png",smallLogo:"assets/airline-logo/VN_small.png"},QH:{name:"Bamboo Airways",logo:"assets/airline-logo/QH.png",smallLogo:"assets/airline-logo/QH_small.png"}},ki=i=>{var a;return(null===(a=Fi[i])||void 0===a?void 0:a.name)||""};var Ii=h(27361),Ge=h(17489),Si=h(39646),K=h(40899);function wi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function Oi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._UZ(1,"cf-icon",19),e.qZA()}}function Ni(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._UZ(1,"cf-icon",18),e.qZA()}}function Ui(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._UZ(1,"cf-icon",19),e.qZA()}}const qi=function(i){return{"bg-[#FCB40A] text-neutral-white":i}};function Mi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(6);return e.KtG(c.onToggleFareSelected(r))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,qi,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function Pi(i,a){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Mi,3,4,"ng-container",5),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ji(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onFareTypeSelectedChange(o,c))}),e.TgZ(3,"div",10)(4,"div",11)(5,"div",13),e._uU(6),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()(),e.YNc(9,Ni,2,0,"button",15),e.YNc(10,Ui,2,0,"button",15),e.qZA(),e.YNc(11,Pi,2,1,"div",22),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function Bi(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ji,12,7,"ng-container",5),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Hi(i,a){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,Bi,2,1,"ng-container",5),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Li(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9)(2,"cf-checkbox",3),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSelectedAirlineChange(o,c))}),e.TgZ(3,"div",10)(4,"div",11),e._UZ(5,"img",12),e.TgZ(6,"div",13),e._uU(7),e.TgZ(8,"span",14),e._uU(9),e.qZA()()()()(),e.YNc(10,wi,2,0,"button",15),e.YNc(11,Oi,2,0,"button",15),e.qZA(),e.YNc(12,Hi,2,1,"div",16),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}let Re=(()=>{class i{constructor(t,n,o,r,c,s,p,v){this.route=t,this._cfRegister=n,this._permissionService=o,this._modal=r,this._route=c,this._cd=s,this.data=p,this.cfBottomSheetRef=v,n.registerIcons([l.xgX,l.xbi,l.NYs,l.Hge,l.n78,l.fqi,l.esH,l.cnj,l.TM4]),v.containerInstance._rightButtonClick.subscribe(g=>{this.cfBottomSheetRef.dismiss(!1)}),this.fareOptions=p.fareOptions}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(n=>{n.isExpand=n.code.toUpperCase()===t.code.toUpperCase()&&!n.isExpand})}onFareTypeExpand(t,n){n.isExpand=!n.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.code!==n.code&&(r.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(n=>{n.isActive=t,n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,n){n.isActive=t,n.childItems.forEach(o=>{o.isActive=n.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,n){n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t){t.isActive=!t.isActive,this.standardizeFareOptionSelected()}close(){this.cfBottomSheetRef.dismiss()}submit(){this.cfBottomSheetRef.dismiss(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(n=>{let o=!1;n.childItems.forEach(r=>{r.childItems.forEach(c=>{c.isActive=c.childItems.map(s=>s.isActive).reduce((s,p)=>s||p,!1),t=t&&c.childItems.map(s=>s.isActive).reduce((s,p)=>s&&p,!0),c.totalSelectedFare=c.childItems.filter(s=>s.isActive).length,c.isActive&&(o=!0)})}),n.isActive=o,n.totalSelectedFare=n.childItems.reduce((r,c)=>r+c.childItems.map(s=>s.childItems.filter(p=>p.isActive).length).reduce((s,p)=>s+p),0)}),this.selectedAll=t,this._cd.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.gz),e.Y36(l.KNP),e.Y36(K.$A),e.Y36(S.oE),e.Y36(N.F0),e.Y36(e.sBO),e.Y36(O.Rr),e.Y36(O.Zu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fare-option-bottom-sheet"]],standalone:!0,features:[e.jDz],decls:14,vars:2,consts:[[1,"overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"px-3","w-full","h-full","flex-1","overflow-auto","flex","flex-col","gap-y-4"],[1,"px-3","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"fixed","bottom-0","left-0","w-screen","bg-white","shadow-cf-large-top","p-3","flex","items-center","justify-end","gap-x-2","z-1000"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-3","items-center"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !outline-none !outline-transparent gap-x-2 items-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 pl-4",4,"ngIf"],["type","secondary",1,"flex","!outline-none","!outline-transparent","gap-x-2","items-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","pl-4"],[1,"w-full","flex","justify-between","py-2","px-3","items-center"],["class","flex flex-wrap gap-2 p-2 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"cf-checkbox",3),e.NdJ("checkChange",function(r){return n.onSelectAllChange(r)}),e._uU(4,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Li,13,8,"ng-container",5),e.qZA()(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return n.close()}),e.TgZ(9,"span"),e._uU(10,"H\u1ee7y"),e.qZA()(),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.submit()}),e.TgZ(12,"span"),e._uU(13,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("checked",n.selectedAll),e.xp6(3),e.Q6J("ngForOf",n.fareOptions))},dependencies:[l.AxE,l.Sm8,d.ez,d.mk,d.sg,d.O5,b.j$,T.N8,T.Xq,O.DW,u.UX,Ae.u],encapsulation:2}),i})();function Qi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function Yi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onExpandAirline(o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}function Gi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._uU(1," Xem th\xeam "),e._UZ(2,"cf-icon",20),e.qZA()}}function Ri(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3).$implicit,c=e.oxw();return e.KtG(c.onFareTypeExpand(r,o))}),e._uU(1," \u1ea8n b\u1edbt "),e._UZ(2,"cf-icon",21),e.qZA()}}const ji=function(i){return{"!bg-[#FFF8E7] border-[#FCB40A]":i}};function Vi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23)(2,"cf-checkbox",24),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onFareTypeSelectedChange(o,c))}),e._uU(3),e.TgZ(4,"span",16),e._uU(5),e.qZA()(),e.YNc(6,Gi,3,0,"button",25),e.YNc(7,Ri,3,0,"button",25),e.qZA(),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(7,ji,t.isExpand)),e.xp6(1),e.Q6J("checked",t.isActive),e.xp6(1),e.hij("",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand)}}function zi(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Vi,8,9,"ng-container",7),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ki(i,a){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,zi,2,1,"ng-container",7),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const $i=function(i){return{"bg-[#FCB40A] text-neutral-white":i}};function Xi(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.onToggleFareSelected(r,c))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,$i,t.isActive)),e.xp6(1),e.hij(" ",t.name,"")}}function Wi(i,a){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,Xi,3,4,"ng-container",7),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function eo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Wi,2,1,"div",27),e.BQk()),2&i){const t=a.$implicit,n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.isExpand&&n.isExpand)}}function to(i,a){if(1&i&&(e.ynx(0),e.YNc(1,eo,2,1,"ng-container",7),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function no(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",11)(2,"cf-checkbox",5),e.NdJ("checkChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onSelectedAirlineChange(o,c))}),e.TgZ(3,"div",12)(4,"div",13),e._UZ(5,"img",14),e.TgZ(6,"div",15),e._uU(7),e.TgZ(8,"span",16),e._uU(9),e.qZA()()()()(),e.YNc(10,Qi,3,0,"button",17),e.YNc(11,Yi,3,0,"button",17),e.qZA(),e.YNc(12,Ki,2,1,"div",18),e.YNc(13,to,2,1,"ng-container",7),e.BQk()}if(2&i){const t=a.$implicit;e.xp6(2),e.Q6J("checked",t.isActive),e.xp6(3),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.AsE("(",t.totalSelectedFare||0,"/",t.totalFare,")"),e.xp6(1),e.Q6J("ngIf",!t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngIf",t.isExpand),e.xp6(1),e.Q6J("ngForOf",t.childItems)}}let je=(()=>{class i{constructor(t,n,o,r,c,s,p){this.route=t,this._cfRegister=n,this._permissionService=o,this._modal=r,this._route=c,this._cd=s,this._ref=p,n.registerIcons([l.xgX,l.xbi,l.NYs,l.Hge,l.n78,l.fqi,l.esH,l.cnj,l.TM4]),this.fareOptions=(0,Ge.cloneDeep)(p.data.data)}ngOnInit(){this.standardizeFareOptionSelected()}onExpandAirline(t){this.fareOptions.forEach(n=>{n.isExpand=n.code.toUpperCase()===t.code.toUpperCase()&&!n.isExpand})}onFareTypeExpand(t,n){n.isExpand=!n.isExpand,t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.code!==n.code&&(r.isExpand=!1)})})}onSelectAllChange(t){this.fareOptions.forEach(n=>{n.isActive=t,n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})})}),this.standardizeFareOptionSelected()}onFareTypeSelectedChange(t,n){n.isActive=t,n.childItems.forEach(o=>{o.isActive=n.isActive}),this.standardizeFareOptionSelected()}onSelectedAirlineChange(t,n){n.childItems.forEach(o=>{o.isActive=t,o.childItems.forEach(r=>{r.isActive=t,r.childItems.forEach(c=>{c.isActive=t})})}),this.standardizeFareOptionSelected()}onToggleFareSelected(t,n){t.isActive=!t.isActive,n.isActive=n.childItems.some(o=>o.isActive),this.standardizeFareOptionSelected()}close(){this._ref.close(this._ref.data.data)}submit(){this._ref.close(this.fareOptions)}standardizeFareOptionSelected(){let t=!0;this.fareOptions.forEach(n=>{let o=!1;n.childItems.forEach(r=>{r.isActive=r.childItems.some(c=>c.isActive),r.childItems.forEach(c=>{c.isActive=c.childItems.map(s=>s.isActive).reduce((s,p)=>s||p,!1),t=t&&c.childItems.map(s=>s.isActive).reduce((s,p)=>s&&p,!0),c.totalSelectedFare=c.childItems.filter(s=>s.isActive).length,c.isActive&&(o=!0)})}),n.isActive=o,n.totalSelectedFare=n.childItems.reduce((r,c)=>r+c.childItems.map(s=>s.childItems.filter(p=>p.isActive).length).reduce((s,p)=>s+p),0)}),this.selectedAll=t,this._cd.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.gz),e.Y36(l.KNP),e.Y36(K.$A),e.Y36(S.oE),e.Y36(N.F0),e.Y36(e.sBO),e.Y36(S.gb))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fare-option-modal"]],standalone:!0,features:[e.jDz],decls:17,vars:2,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:w-screen","md:max-h-none","md:h-full","md:justify-between","md:rounded-none"],[1,"flex","justify-between","items-center","px-6","py-[13px]","md:hidden"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],[1,"px-6","py-[13px]","border-b","border-neutral-gray-1"],["size","medium",3,"checked","checkChange"],[1,"w-full","h-full","flex-1","overflow-auto","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"w-full","p-6","flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-full","flex","justify-between","py-4","px-6"],[1,"text-body-md","text-neutral-black"],[1,"flex","items-center","gap-x-2"],[1,"w-6","h-6","object-contain",3,"src"],[1,"text-body-md-long"],[1,"text-express-md"],["class","flex !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0 gap-x-2 items-center text-center","type","secondary",3,"click",4,"ngIf"],["class","flex w-full flex-wrap gap-2 px-6",4,"ngIf"],["type","secondary",1,"flex","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0","gap-x-2","items-center","text-center",3,"click"],["size","small","icon","chevron_down"],["size","small","icon","chevron_up"],[1,"flex","w-full","flex-wrap","gap-2","px-6"],[1,"w-[calc(32%-12px)]","py-2","px-2.5","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-between","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"ngClass"],["size","medium",1,"w-full",3,"checked","checkChange"],["class","flex w-full text-center !pt-2 !outline-none !outline-transparent !text-express-md !text-blue-4 bottom-0","type","secondary",3,"click",4,"ngIf"],["type","secondary",1,"flex","w-full","text-center","!pt-2","!outline-none","!outline-transparent","!text-express-md","!text-blue-4","bottom-0",3,"click"],["class","flex flex-wrap gap-2 p-2 px-6 justify-start items-center",4,"ngIf"],[1,"flex","flex-wrap","gap-2","p-2","px-6","justify-start","items-center"],[1,"ml-1","mr-1","bg-[#F2F2F2]","text-espressive-md","p-2","text-center","cursor-pointer",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Ch\u1ecdn h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"cf-checkbox",5),e.NdJ("checkChange",function(r){return n.onSelectAllChange(r)}),e._uU(7,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,no,14,9,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return n.close()}),e.TgZ(12,"span"),e._uU(13,"H\u1ee7y"),e.qZA()(),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.submit()}),e.TgZ(15,"span"),e._uU(16,"X\xe1c nh\u1eadn"),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("checked",n.selectedAll),e.xp6(3),e.Q6J("ngForOf",n.fareOptions))},dependencies:[l.AxE,l.Sm8,d.ez,d.mk,d.sg,d.O5,b.j$,T.N8,T.Xq,O.DW,u.UX,Ae.u],encapsulation:2}),i})();const io=function(i,a,t){return{"!bg-primary-2-4 !border-0":i,"opacity-[0.4]":a,"md:col-span-2":t}},oo=function(i){return{"!text-neutral-white opacity-[0.6]":i}},ro=function(i){return{"!text-neutral-white":i}};function ao(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectedTime(r))}),e.TgZ(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.last;e.xp6(1),e.Q6J("ngClass",e.kEZ(5,io,t.isActive,t.disable,n)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,oo,t.isActive)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,ro,t.isActive)),e.xp6(1),e.hij(" ",t.start+" - "+t.end!="00:00 - 23:59"?t.start+" - "+t.end:"Gi\u1edd c\u1ee5 th\u1ec3","")}}function co(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",12)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA()(),e.TgZ(8,"cf-slider",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.customRangeItem.rangeValues=o)})("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.timeChange(o,r.customRangeItem))})("onSlideEnd",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.end())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.customRangeItem.startTimeStr),e.xp6(2),e.Oqu(t.customRangeItem.endTimeStr),e.xp6(1),e.Q6J("ngModel",t.customRangeItem.rangeValues)("min",0)("max",1439)("step",1)("range",!0)}}let so=(()=>{class i{constructor(t,n,o,r){this._cd=n,this.data=o,this.cfBottomSheetRef=r,this.optionDepartureTime=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!1,disable:!1,startTime:0,endTime:1439,totalAvailable:0}],this.customRangeItem={rangeValues:[0,1439],startTimeStr:"00:00",endTimeStr:"23:59"},t.registerIcons([]),this.orgOptionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.optionDepartureTime=JSON.parse(JSON.stringify(o.timeRanges)),this.orgOptionDepartureTime.forEach(c=>{"custom"===c.code&&(this.customRangeItem.rangeValues=[c.startTime,c.endTime],this.customRangeItem.startTimeStr=c.start,this.customRangeItem.endTimeStr=c.end)}),r.containerInstance._rightButtonClick.subscribe(c=>{this.cfBottomSheetRef.dismiss(!1)})}onSelectedTime(t){t.disable||(t.isActive=!t.isActive),"custom"===t.code&&!0===t.isActive?this.optionDepartureTime.forEach(n=>{"custom"!==n.code&&(n.isActive=!1)}):"custom"!==t.code&&!0===t.isActive&&(this.optionDepartureTime[4].isActive=!1)}timeChange(t,n){n.startTimeStr=this.minuteToString(t[0]),n.endTimeStr=this.minuteToString(t[1])}minuteToString(t){const n=Math.floor(t/60),o=t%60;let r=`${n}`,c=`${o}`;return n<10&&(r=`0${n}`),o<10&&(c=`0${o}`),`${r}:${c}`}end(){this.optionDepartureTime[4].start=this.customRangeItem.startTimeStr,this.optionDepartureTime[4].end=this.customRangeItem.endTimeStr,this.optionDepartureTime[4].startTime=this.customRangeItem.rangeValues[0],this.optionDepartureTime[4].endTime=this.customRangeItem.rangeValues[1]}submit(){this.cfBottomSheetRef.dismiss(this.optionDepartureTime)}reset(){this.optionDepartureTime.forEach(t=>{t.isActive=!1}),this._cd.detectChanges()}close(){this.cfBottomSheetRef.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(e.sBO),e.Y36(O.Rr),e.Y36(O.Zu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["time-range-options-bottom-sheet"]],hostAttrs:[1,"!w-full"],standalone:!0,features:[e.jDz],decls:10,vars:2,consts:[[1,"flex","flex-wrap","justify-center","items-center","md:grid","md:grid-cols-2","gap-x-4","gap-y-4","px-4"],[4,"ngFor","ngForOf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4 mt-4",4,"ngIf"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"w-[40%]","md:!w-full","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1","py-2.5",3,"ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4","mt-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelChange","onSlideEnd"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ao,6,13,"ng-container",1),e.qZA(),e.YNc(2,co,9,7,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.reset()}),e._uU(6," \u0110\u1eb7t l\u1ea1i "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.submit()}),e.TgZ(8,"span"),e._uU(9,"Xong"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.optionDepartureTime),e.xp6(1),e.Q6J("ngIf",n.optionDepartureTime[4].isActive))},dependencies:[l.AxE,d.ez,d.mk,d.sg,d.O5,Qe.nA,u.u5,u.JJ,u.On,T.N8,T.Xq],encapsulation:2}),i})();const lo={headers:new oe.WM({"Content-Type":"application/json"})};let uo=(()=>{class i{constructor(t,n){this.http=t,this.appConfig=n}getLstAirlineFareoptions(){return this.http.post(this.appConfig.apiUrlTPS+"ticket-low-fare/get-list-airline-fare-class",JSON.stringify({airline:"vn,qh,vj"}),lo)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(oe.eN),e.LFG(se.qB))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const po=["dateFromEl"],fo=["form",""];function _o(i,a){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function mo(i,a){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function go(i,a){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function ho(i,a){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}const ge=function(i){return[i]},he=function(){return{"text-express-md":!0}};function vo(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",18),e.ynx(2),e.TgZ(3,"cf-select",19),e.NdJ("selectedChange",function(){e.CHM(t);const o=e.MAs(13),r=e.oxw();return e.KtG(r.nextPosition(o))}),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,_o,1,1,"cf-hint",24),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"cf-select",27,28),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,mo,1,1,"cf-hint",24),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"div",31)(21,"cf-field-group",32),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",34),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",35,36),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33),r=e.MAs(26);return e.oxw().dateFromChange(o),e.KtG(r.close())}),e.qZA(),e.YNc(27,go,1,1,"cf-hint",37),e.qZA(),e.TgZ(28,"cf-field-group",32),e._UZ(29,"cf-icon",33),e.TgZ(30,"label",38),e._uU(31," \u0111\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(32,"input",39,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(33);return e.KtG(o.close())}),e.ALo(34,"mapper"),e.qZA(),e.YNc(35,ho,1,1,"cf-hint",37),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(),n=e.MAs(39);e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("data",t.data)("optionTmp",n)("excludes",e.VKq(32,ge,t.form.controls.endPoint.value)),e.xp6(2),e.Q6J("ngClass",e.DdM(34,he)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(3),e.Q6J("maxHeight",230)("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("data",t.data)("optionTmp",n)("excludes",e.VKq(35,ge,t.form.controls.startPoint.value)),e.xp6(3),e.Q6J("ngClass",e.DdM(37,he)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(1),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(34,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function xo(i,a){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m kh\u1edfi h\xe0nh")}function To(i,a){1&i&&e._UZ(0,"cf-hint",41),2&i&&e.Q6J("hint","Ch\u01b0a ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn")}function Co(i,a){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function yo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",58),e.NdJ("dateSelect",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.dateSelectMobile(o,r.form.controls.fromDate,r.form.controls.toDate))}),e.qZA()()(),e.TgZ(4,"div",59)(5,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(6,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",t.minDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("fromDate",t.form.controls.fromDate.value)("displayMonthsOffset",0)}}function Ao(i,a){1&i&&e._UZ(0,"cf-hint",42),2&i&&e.Q6J("hint","Ng\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng.")}function Eo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"div",57),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.scrollDown())}),e.TgZ(3,"cf-datepicker-inline",61,62),e.NdJ("dateSelect",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.dateSelectMobile(o,r.form.controls.toDate))}),e.ALo(5,"mapper"),e.qZA()()(),e.TgZ(6,"div",59)(7,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onMobileDatePickerOK())}),e._uU(8,"X\xe1c nh\u1eadn"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",2)("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0)("infiniteScrollContainer",".ngb-dp-content"),e.xp6(1),e.Q6J("minDate",e.xi3(5,14,t.form.value.toDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate)("displayMonths",t.numOfMonth)("rangeSelection",!0)("secondaryCalendar","lunar")("toDate",t.form.controls.toDate.value)("displayMonthsOffset",0)}}function bo(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.startPoint,o.form.controls.endPoint))}),e.TgZ(3,"cf-select",45),e._UZ(4,"cf-icon",20),e.TgZ(5,"label",21),e._uU(6," \u0110i\u1ec3m kh\u1edfi h\xe0nh "),e.qZA(),e._UZ(7,"input",22,23),e.YNc(9,xo,1,1,"cf-hint",24),e.qZA()(),e.TgZ(10,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.swapPoint(o.form.controls.startPoint,o.form.controls.endPoint))}),e._UZ(11,"cf-icon",26),e.qZA(),e.TgZ(12,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openAirportBottomSheet(o.form.controls.endPoint,o.form.controls.startPoint))}),e.TgZ(13,"cf-select",47),e._UZ(14,"cf-icon",20),e.TgZ(15,"label",29),e._uU(16," \u0110i\u1ec3m \u0111\u1ebfn "),e.qZA(),e._UZ(17,"input",30,23),e.YNc(19,To,1,1,"cf-hint",24),e.qZA()()(),e.TgZ(20,"div",48)(21,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(29),r=e.oxw();return e.KtG(r.departDatePickerClick(o))}),e._UZ(22,"cf-icon",33),e.TgZ(23,"label",50),e._uU(24," T\u1eeb ng\xe0y "),e.qZA(),e.TgZ(25,"input",51,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roundTripFocus(o))}),e.qZA(),e.YNc(27,Co,1,1,"cf-hint",37),e.qZA(),e.YNc(28,yo,7,13,"ng-template",null,52,e.W1O),e.TgZ(30,"cf-field-group",49),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(39),r=e.oxw();return e.KtG(r.departDatePickerClick(o))}),e._UZ(31,"cf-icon",33),e.TgZ(32,"label",50),e._uU(33," \u0110\u1ebfn ng\xe0y "),e.qZA(),e.TgZ(34,"input",53,40),e.NdJ("input",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("dateSelect",function(){e.CHM(t);const o=e.MAs(26);return e.KtG(o.close())})("mousedown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roundTripFocus(o))}),e.ALo(36,"mapper"),e.qZA(),e.YNc(37,Ao,1,1,"cf-hint",37),e.qZA(),e.YNc(38,Eo,9,17,"ng-template",null,54,e.W1O),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(),n=e.MAs(39);e.xp6(3),e.Q6J("typeInput","FIELD")("status",t.form.controls.startPoint.invalid&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(32,ge,t.form.controls.endPoint.value))("data",t.data)("optionTmp",n),e.xp6(2),e.Q6J("ngClass",e.DdM(34,he)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.startPoint.errors?null:t.form.controls.startPoint.errors.required)&&(t.form.controls.startPoint.dirty||t.form.controls.startPoint.touched)),e.xp6(4),e.Q6J("typeInput","FIELD")("status",t.form.controls.endPoint.invalid&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)?"error":"default")("customSearch",t.positionSearchCustom)("excludes",e.VKq(35,ge,t.form.controls.startPoint.value))("data",t.data)("optionTmp",n),e.xp6(2),e.Q6J("ngClass",e.DdM(37,he)),e.xp6(4),e.Q6J("ngIf",(null==t.form.controls.endPoint.errors?null:t.form.controls.endPoint.errors.required)&&(t.form.controls.endPoint.dirty||t.form.controls.endPoint.touched)),e.xp6(2),e.Q6J("valid",t.form.controls.fromDate.valid)("status",t.form.controls.fromDate.invalid&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",t.minDate),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.fromDate.errors?null:t.form.controls.fromDate.errors.required)&&(t.form.controls.fromDate.dirty||t.form.controls.fromDate.touched)),e.xp6(3),e.Q6J("valid",t.form.controls.toDate.valid)("status",t.form.controls.toDate.invalid&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched)?"error":"default"),e.xp6(4),e.Q6J("secondaryCalendar","lunar")("displayMonths",1)("minDate",e.xi3(36,29,t.form.value.fromDate,t.convertDateFromCFDate)||t.minDate)("maxDate",t.maxDate),e.xp6(3),e.Q6J("ngIf",(null==t.form.controls.toDate.errors?null:t.form.controls.toDate.errors.required)&&(t.form.controls.toDate.dirty||t.form.controls.toDate.touched))}}function Zo(i,a){1&i&&(e.TgZ(0,"div",71),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function Do(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onRemoveAirlineOption(o,r))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Fo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",73),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3).$implicit,s=e.oxw(2);return e.KtG(s.onRemoveFareTypeOption(o,r,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.name+"-"+t.name,"")}}function ko(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",76),e._uU(1),e.TgZ(2,"cf-icon",74),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(5).$implicit,s=e.oxw(2);return e.KtG(s.onRemoveFareOption(o,r,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+n.name+"-"+t.name,"")}}function Io(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ko,3,1,"div",75),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function So(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Io,2,1,"ng-container",68),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function wo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Fo,3,1,"div",72),e.YNc(2,So,2,1,"ng-container",2),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Oo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,wo,3,2,"ng-container",68),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function No(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Oo,2,1,"ng-container",68),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Uo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Do,3,1,"div",72),e.YNc(2,No,2,1,"ng-container",2),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function qo(i,a){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function Mo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",66),e.YNc(5,Zo,2,0,"div",67),e.YNc(6,Uo,3,2,"ng-container",68),e.qZA(),e._UZ(7,"cf-icon",69),e.qZA(),e.YNc(8,qo,3,0,"div",70),e.ALo(9,"mapper"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",!(t.form.value.specifyFareClassList&&(null==t.form.value.specifyFareClassList?null:t.form.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.form.value.type,t.specifyFareClassList.touched))}}function Po(i,a){1&i&&(e.TgZ(0,"label",78),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&i&&e.Q6J("CfRequired",!1)}function Jo(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",81)(2,"div",82),e._UZ(3,"img",83),e.TgZ(4,"span",84),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",86),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function Bo(i,a){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function Ho(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",79),e.ynx(2,80),e.YNc(3,Jo,9,6,"ng-container",68),e.BQk(),e.YNc(4,Bo,3,0,"div",70),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.form.value.type,t.specifyPriceList.touched))}}const Lo=function(i,a){return{"!bg-primary-2-4 !border-0":i,"opacity-[0.4]":a}},Qo=function(i){return{"!text-neutral-white opacity-[0.6]":i}},Yo=function(i){return{"!text-neutral-white":i}};function Go(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",91),e.NdJ("click",function(){const o=e.CHM(t),r=o.$implicit,c=o.index,s=e.oxw(3);return e.KtG(s.onSelectedTime(r,c))}),e.TgZ(2,"div",92),e._uU(3),e.qZA(),e.TgZ(4,"div",93),e._uU(5),e.qZA()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.index;e.xp6(1),e.Q6J("formGroupName",n)("ngClass",e.WLB(6,Lo,t.value.isActive,t.value.disable)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Qo,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.name,""),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Yo,t.value.isActive)),e.xp6(1),e.hij(" ",t.value.start+" - "+t.value.end!="00:00 - 23:59"?t.value.start+" - "+t.value.end:"Gi\u1edd c\u1ee5 th\u1ec3"," ")}}function Ro(i,a){if(1&i&&(e.TgZ(0,"div",89),e.ynx(1,90),e.YNc(2,Go,6,13,"ng-container",68),e.BQk(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.departureTime.controls)}}const jo=function(){return{standalone:!0}};function Vo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95),e._uU(2,"T\xf9y ch\u1ec9nh gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",96)(4,"div"),e._uU(5),e.ALo(6,"mapper"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"mapper"),e.qZA()(),e.TgZ(10,"cf-slider",97),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.rangeHours=o)})("onSlideEnd",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.endSliderTime())}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,8,t.rangeHours[0],t.minuteToString)),e.xp6(3),e.Oqu(e.xi3(9,11,t.rangeHours[1],t.minuteToString)),e.xp6(2),e.Q6J("ngModel",t.rangeHours)("min",0)("max",1439)("step",1)("range",!0)("ngModelOptions",e.DdM(14,jo))}}function zo(i,a){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function Ko(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ro,3,1,"div",87),e.YNc(2,Vo,11,15,"div",88),e.YNc(3,zo,3,0,"div",70),e.ALo(4,"mapper"),e.ALo(5,"mapper"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",t.departureTime.value[4].isActive&&t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",e.gM2(4,3,e.xi3(5,8,t.departureTime.value,t.selectForDepartureTimeActive),t.checkInvalidField,t.form.value.isTimeRange,t.departureTime.touched))}}function $o(i,a){if(1&i&&(e.TgZ(0,"span",101),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.start+" - "+t.end," ")}}function Xo(i,a){if(1&i&&(e.ynx(0),e.YNc(1,$o,2,1,"span",100),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Wo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openTimeRangeOptions())}),e.YNc(1,Xo,2,1,"ng-container",68),e.ALo(2,"mapper"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.departureTime.value,t.selectForDepartureTimeActive))}}function er(i,a){1&i&&(e.TgZ(0,"div",77)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn th\u1eddi gian bay."),e.qZA()())}function tr(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Wo,3,4,"div",98),e.YNc(2,er,3,0,"div",70),e.ALo(3,"mapper"),e.BQk()),2&i){const t=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",t.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!(null!=(n=e.xi3(3,2,t.departureTime.value,t.selectForDepartureTimeActive))&&n.length))}}function nr(i,a){if(1&i&&(e.TgZ(0,"div",102),e._UZ(1,"div",103),e.ALo(2,"highlighter"),e._UZ(3,"div",104),e.ALo(4,"highlighter"),e.qZA()),2&i){const t=a.item,n=a.search;e.xp6(1),e.Q6J("innerHtml",e.xi3(2,2,t.CityName+", "+t.Title,n.text),e.oJD),e.xp6(2),e.Q6J("innerHtml",e.xi3(4,5,t.Code+" - "+t.AirportName,n.text),e.oJD)}}function ir(i,a){1&i&&e._UZ(0,"cf-spinner")}let or=(()=>{class i{constructor(t,n,o,r,c,s,p,v){this.fb=t,this._cfRegister=n,this.calendar=o,this._bottomSheetService=r,this._locationDataService=c,this._cdr=s,this._modal=p,this._selectFareFlightSvc=v,this.isMobile=!1,this.maxDate={year:C().add(4,"days").toDate().getFullYear(),month:C().add(4,"days").toDate().getMonth()+1,day:C().add(4,"days").toDate().getDate()},this.numOfMonth=4,this.isLoading=!1,this.selectedFaresTreeChange=new e.vpe,this.rangeHours=[0,1439],this.convertDateFromCFDate=g=>({year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate()}),this.checkInvalidField=(g,m,x)=>m&&!g.length&&x,this.selectForDepartureTimeActive=g=>null==g?void 0:g.filter(m=>m.isActive),this.minuteToString=g=>{const m=Math.floor(g/60),x=g%60;let y=`${m}`,E=`${x}`;return m<10&&(y=`0${m}`),x<10&&(E=`0${x}`),`${y}:${E}`},this.positionSearchCustom=(g,m)=>{const x=this.removeAccents(g.Code.toLowerCase()),y=this.removeAccents(g.Title.toLowerCase()),E=this.removeAccents(g.CityName.toLowerCase()),A=this.removeAccents(g.AirportName.toLowerCase()),D=this.removeAccents(m.toLowerCase());return x.includes(D)||y.includes(D)||E.includes(D)||A.includes(D)},n.registerIcons([l.okA,l._tC,l.wvd,l.UNF,l.n78]),this.minDate=o.getToday(),this.data=this._locationDataService.getAllOption()}ngOnChanges(t){t.selectedFaresTree&&t.selectedFaresTree.currentValue&&this.convertTreeDataToSpecifyFare(t.selectedFaresTree.currentValue)}swapPoint(t,n){if(""!=t.value&&""!=n.value){const o=t.value;t.setValue(null),t.setValue(n.value),n.setValue(null),n.setValue(o)}}nextPosition(t){setTimeout(()=>{t.selectFocus()})}dateFromChange(t){var n,o,r;this.form.patchValue({toDate:null});const c={year:C(null===(n=this.form.get("fromDate"))||void 0===n?void 0:n.value).add(4,"days").get("year"),month:C(null===(o=this.form.get("fromDate"))||void 0===o?void 0:o.value).add(4,"days").get("month")+1,day:C(null===(r=this.form.get("fromDate"))||void 0===r?void 0:r.value).add(4,"days").get("date")};this.maxDate=c,setTimeout(()=>{t.open()},0)}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}openAirportBottomSheet(t,n){const o=this._bottomSheetService.open(Ii.hm,{headerTitle:"Chuy\u1ebfn bay c\u1ee7a b\u1ea1n",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0,restoreFocus:!1,data:{airportOptions:this.data,currentSelected:this._locationDataService.getCityNameByCode(t.value),excludes:[n.value]}});o.containerInstance._leftButtonClick.subscribe(r=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&t.setValue(r.Code)})}departDatePickerClick(t){if(this.isMobile){const n=this._bottomSheetService.open(t,{headerTitle:"T\xf9y ch\u1ec9nh th\u1eddi gian",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",rightButtonIcon:"",containerFullHeigh:!0});n.containerInstance._leftButtonClick.subscribe(o=>{n.dismiss()})}}roundTripFocus(t){if(this.isMobile)return t.preventDefault(),!1}dateSelectMobile(t,n,o){var r,c,s;if(n.setValue(t),o){o.setValue(null);const p={year:C(null===(r=this.form.get("toDate"))||void 0===r?void 0:r.value).add(4,"days").get("year"),month:C(null===(c=this.form.get("toDate"))||void 0===c?void 0:c.value).add(4,"days").get("month")+1,day:C(null===(s=this.form.get("toDate"))||void 0===s?void 0:s.value).add(4,"days").get("date")};this.maxDate=p}this._cdr.detectChanges()}onMobileDatePickerOK(){this._bottomSheetService.dismiss()}scrollDown(){this.numOfMonth=this.numOfMonth+4}onShowFareOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(n=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(Z.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onPriceOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(n=this.specifyFareClassList.value)&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.form.patchValue({type:"FARE"===this.form.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}loadFareOptions(t){var n;return(null===(n=this.selectedFaresTree)||void 0===n?void 0:n.length)>0?(0,Si.of)(this.selectedFaresTree):this._selectFareFlightSvc.getLstAirlineFareoptions().pipe((0,J.U)(o=>((i,a)=>i.map(t=>{var n,o;const r=null==a?void 0:a.find(c=>c.airline===t.airline);return{name:ki(null===(n=t.airline)||void 0===n?void 0:n.toUpperCase()),code:t.airline,icon:Di(t.airline),isActive:!!a&&!!r,totalSelectedFare:(null===(o=null==r?void 0:r.fareClass)||void 0===o?void 0:o.length)||0,isDisable:!1,totalFare:Zi(t),childItems:t.cabin.map(c=>({code:c.code,name:c.name,isActive:!!r&&Ei(c,r),isDisable:!1,childItems:c.fareType.map(s=>{var p;return{code:s.code,name:s.description,isActive:!!r&&bi,isDisable:!1,totalFare:(null===(p=s.fareClass)||void 0===p?void 0:p.length)||0,childItems:s.fareClass.map(v=>({code:v.code,name:v.name,isActive:!!r&&r.fareClass.find(g=>g===v.code),childItems:[],isDisable:!1})),totalSelectedFare:r?s.fareClass.map(({code:v})=>v).filter(v=>r.fareClass.includes(v)).length:0}})}))}}))(o.data,t)))}countAirlineTotalFare(t){var n;let o=0;return null===(n=t.cabin)||void 0===n||n.forEach(r=>{var c;null===(c=r.fareType)||void 0===c||c.forEach(s=>{o+=s.fareClass.length||0})}),o}openFareOptions(){this.isLoading=!0,this.loadFareOptions().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(Re,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(je,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.selectedFaresTreeChange.emit(this.selectedFaresTree),this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var n;this.specifyFareClassList.clear();for(const o of(i=>i.map(a=>({airline:a.code,fareClass:a.childItems.map(t=>t.childItems.map(n=>n.childItems.filter(o=>o.isActive)).reduce((n,o)=>[...n,...o.map(r=>r.code)],[])).reduce((t,n)=>[...t,...n],[])})))(t))null!==(n=o.fareClass)&&void 0!==n&&n.length&&this.addFareClass(o);this._cdr.markForCheck()}onRemoveAirlineOption(t,n){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(o=>{o.childItems.forEach(r=>{r.childItems.forEach(c=>c.isActive=!1)})}),this.standardizeAirlineOptionSelected(n)}standardizeAirlineOptionSelected(t){let n=!1;t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.isActive=r.childItems.map(c=>c.isActive).reduce((c,s)=>c||s,!1),r.totalSelectedFare=r.childItems.filter(c=>c.isActive).length,r.isActive&&(n=!0)})}),t.isActive=n,t.totalSelectedFare=t.childItems.reduce((o,r)=>o+r.childItems.map(c=>c.childItems.filter(s=>s.isActive).length).reduce((c,s)=>c+s),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}onRemoveFareTypeOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(r=>{r.isActive=!1}),this.standardizeAirlineOptionSelected(o)}onRemoveFareOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1,this.standardizeAirlineOptionSelected(o)}get specifyFareClassList(){return this.form.get("specifyFareClassList")}get specifyPriceList(){return this.form.get("specifyPriceList")}addFareClass(t){var n;const o=this.fb.group({airline:null,fareClass:null});o.patchValue(t),null===(n=this.specifyFareClassList)||void 0===n||n.push(o)}onTimeOptionChange(t){this.form.patchValue({isTimeRange:t}),t&&this.isMobile&&this.openTimeRangeOptions()}openTimeRangeOptions(){this._bottomSheetService.open(so,{headerTitle:"Gi\u1edd kh\u1edfi h\xe0nh",data:{timeRanges:(0,Ge.cloneDeep)(this.departureTime.value)}}).afterDismissed().subscribe(n=>{n&&(this.departureTime.controls.forEach((o,r)=>{this.departureTime.at(r).setValue(n[r])}),this._cdr.detectChanges())})}get departureTime(){return this.form.get("departureTime")}onSelectedTime(t,n){this.departureTime.markAllAsTouched(),"custom"===t.value.code?this.departureTime.controls.forEach((o,r)=>{o.patchValue(r!==n?{isActive:!1}:{isActive:!o.value.isActive})}):(this.departureTime.at(4).patchValue({isActive:!1}),this.departureTime.at(n).patchValue({isActive:!t.value.isActive}))}endSliderTime(){const[t,n]=this.rangeHours;this.departureTime.at(4).patchValue({start:this.minuteToString(t),end:this.minuteToString(n),startTime:t,endTime:n})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(l.KNP),e.Y36(L.jH),e.Y36(O.a2),e.Y36(R._),e.Y36(e.sBO),e.Y36(S.oE),e.Y36(uo))},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-info-flight-step","form",""]],viewQuery:function(t,n){if(1&t&&e.Gf(po,5),2&t){let o;e.iGM(o=e.CRH())&&(n.dateFromEl=o.first)}},inputs:{form:"form",isMobile:"isMobile",selectedFaresTree:"selectedFaresTree"},outputs:{selectedFaresTreeChange:"selectedFaresTreeChange"},standalone:!0,features:[e.TTD,e.jDz],attrs:fo,decls:41,vars:17,consts:[[1,"w-full","h-full",3,"formGroup"],[1,"text-heading-md","py-4"],[4,"ngIf"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mt-4","mb-4"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,"mb-3"],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],[1,"flex","justify-between","items-center","mb-2"],["icon","clock","size","small"],[3,"checked","checkedChange"],["optionTemplate",""],[1,"flex","items-start","gap-x-2","md:flex-wrap","md:gap-x-0","md:gap-y-4","pb-2"],["placeholder","T\u1eeb?","textField","AirportDisplay","valueField","Code","formControlName","startPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes","selectedChange"],["cf-head-icon","","icon","plane","size","medium",1,"text-neutral-gray-4"],["cf-label","","for","startPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","startPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],["cfInputElement",""],["cf-hint","",3,"hint",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:top-[45px]","md:!bg-neutral-white","mt-2","md:m-0",3,"click"],["icon","switch","size","small",1,"text-primary-1-4","md:rotate-90"],["textField","AirportDisplay","valueField","Code","valueField","Code","placeholder","\u0110\u1ebfn?","formControlName","endPoint",1,"grow-[293]","md:flex-grow-0","w-full","max-w-full",3,"maxHeight","typeInput","status","data","optionTmp","excludes"],["endPoint",""],["cf-label","","for","endPoint",1,"text-body-sm","text-neutral-gray-4","cursor-text",3,"ngClass"],["type","text","id","endPoint","type","text","size","medium","autocomplete","off","cf-field","",1,"!p-0","placeholder-neutral-gray-6","placeholder:text-express-md"],[1,"flex","items-center","gap-x-4","md:flex-wrap","md:gap-x-0","md:gap-y-4","justify-between"],[1,"grow-[293]","!max-w-none","md:flex-grow-0","md:w-full","w-[calc(50%-12px)]",3,"valid","status"],["cfHeadIcon","","icon","calendar","size","medium",1,"text-neutral-gray-4"],["cfLabel","","for","fromDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","fromDate","cfDatepicker","","formControlName","fromDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","dateSelect"],["dateFrom","cfDatepicker"],["cfHint","",3,"hint",4,"ngIf"],["cfLabel","","for","toDate",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","autocomplete","off","id","toDate","cfDatepicker","","formControlName","toDate",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect"],["dateTo","cfDatepicker"],["cf-hint","",3,"hint"],["cfHint","",3,"hint"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4","relative"],[1,"grow-[293]","md:flex-grow-0","md:w-full","hidden","md:block",3,"click"],["formControlName","startPoint","textField","AirportDisplay","valueField","Code","placeholder","T\u1eeb?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],["cf-button","","size","medium","type","secondary",1,"rounded-full","md:absolute","md:right-[10px]","flex","items-center","w-10","!h-10","align-middle","justify-center","md:bottom-[38%]","md:!bg-neutral-white",3,"click"],["formControlName","endPoint","textField","AirportDisplay","valueField","Code","placeholder","\u0110\u1ebfn?",1,"pointer-events-none","!max-w-full","w-full",3,"typeInput","status","customSearch","excludes","data","optionTmp"],[1,"flex","items-start","gap-x-2","md:flex-col","md:gap-y-4","pb-4"],[1,"grow-[293]","md:flex-grow-0","w-full",3,"valid","status","click"],["cfLabel","",1,"text-express-md","text-neutral-gray-4","cursor-text"],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","fromDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","input","mousedown"],["fromDatepickerBottomSheetTpl",""],["type","text","size","medium","cf-input","","cfDatepicker","","formControlName","toDate","autocomplete","off",1,"!p-0",3,"secondaryCalendar","displayMonths","minDate","maxDate","input","dateSelect","mousedown"],["toDatepickerBottomSheetTpl",""],[1,"flex","w-full","flex-col","justify-between"],[1,"grow","overflow-y-hidden","flex","pb-12"],["infinite-scroll","",1,"w-full","flex",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","scrollWindow","fromRoot","alwaysCallback","infiniteScrollContainer","scrolled"],["outsideDays","hidden","formControlName","fromDate","navigation","none","direction","vertical",3,"minDate","displayMonths","rangeSelection","secondaryCalendar","fromDate","displayMonthsOffset","dateSelect"],[1,"p-4","fixed","bottom-0","w-full","right-0","bg-neutral-white"],["cf-button","",1,"justify-center","w-full",3,"click"],["formControlName","toDate","outsideDays","hidden","navigation","none","direction","vertical",1,"",3,"minDate","maxDate","displayMonths","rangeSelection","secondaryCalendar","toDate","displayMonthsOffset","dateSelect"],["dateFromMobileEl",""],[1,""],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],["class","flex flex-wrap justify-start items-center md:justify-between md:items-center gap-x-8 gap-y-2",4,"ngIf"],["class","flex flex-col gap-y-2 border border-[#F2F2F2] rounded p-4",4,"ngIf"],[1,"flex","flex-wrap","justify-start","items-center","md:justify-between","md:items-center","gap-x-8","gap-y-2"],["formArrayName","departureTime"],[1,"py-2","px-2.5","min-w-[106px]","border","border-[#F2F2F2]","rounded-[0.25rem]","flex","flex-col","justify-center","items-center","gap-y-0.5","cursor-pointer","bg-white","md:border","md:border-neutral-gray-1",3,"formGroupName","ngClass","click"],[1,"text-espressive-sm","text-neutral-gray-4",3,"ngClass"],[1,"text-espressive-md","text-neutral-black",3,"ngClass"],[1,"flex","flex-col","gap-y-2","border","border-[#F2F2F2]","rounded","p-4"],[1,"text-center","items-center","text-espressive-xs","w-full","text-neutral-gray-4"],[1,"flex","justify-between","text-espressive-sm"],[1,"px-2.5",3,"ngModel","min","max","step","range","ngModelOptions","ngModelChange","onSlideEnd"],["class","flex flex-wrap gap-2 mt-4 cursor-pointer",3,"click",4,"ngIf"],[1,"flex","flex-wrap","gap-2","mt-4","cursor-pointer",3,"click"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngIf"],[1,"bg-neutral-gray-1","text-express-md","p-2"],[1,"flex","flex-col"],[1,"text-body-md-short","text-neutral-gray-6",3,"innerHtml"],[1,"text-body-sm","text-neutral-gray-4",3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2,"T\xf9y ch\u1ecdn chuy\u1ebfn bay"),e.qZA(),e.YNc(3,vo,36,38,"ng-container",2),e.YNc(4,bo,40,38,"ng-container",2),e._UZ(5,"div",3),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"cf-icon",6),e.TgZ(9,"div",7)(10,"span"),e._uU(11,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(12,"div",8),e.NdJ("click",function(r){return n.onShowFareOptionChange(r)}),e._UZ(13,"cf-switch",9),e.qZA()(),e.YNc(14,Mo,10,8,"div",10),e._UZ(15,"div",3),e.TgZ(16,"div",11)(17,"div",4)(18,"div",5),e._UZ(19,"cf-icon",12),e.TgZ(20,"div",7)(21,"span"),e._uU(22,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(23,"div",8),e.NdJ("click",function(r){return n.onPriceOptionChange(r)}),e._UZ(24,"cf-switch",9),e.qZA()(),e.YNc(25,Po,2,1,"label",13),e.ALo(26,"mapper"),e.qZA(),e.YNc(27,Ho,6,7,"ng-container",2),e._UZ(28,"div",3),e.TgZ(29,"div",14)(30,"div",5),e._UZ(31,"cf-icon",15),e.TgZ(32,"div",7)(33,"span"),e._uU(34,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(35,"cf-switch",16),e.NdJ("checkedChange",function(r){return n.onTimeOptionChange(r)}),e.qZA()(),e.YNc(36,Ko,6,11,"ng-container",2),e.YNc(37,tr,4,5,"ng-container",2),e.qZA(),e.YNc(38,nr,5,8,"ng-template",null,17,e.W1O),e.YNc(40,ir,1,0,"cf-spinner",2)),2&t&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",!n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isMobile),e.xp6(9),e.Q6J("checked","FARE"===n.form.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===n.form.value.type),e.xp6(10),e.Q6J("checked","PRICE"===n.form.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(26,12,n.specifyPriceList.value,n.checkInvalidField,"PRICE"===n.form.value.type,n.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===n.form.value.type),e.xp6(8),e.Q6J("checked",n.form.value.isTimeRange),e.xp6(1),e.Q6J("ngIf",!n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isMobile),e.xp6(3),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.mk,d.sg,d.O5,u.UX,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,u.x0,u.CE,l.AxE,l.Sm8,ne.m,b.j$,b.BN,b.lt,B.q,T.N8,T.Xq,O.DW,Ci.C,Pe.T,le.C,L.Cs,V.q,z.Rq,z.Ry,L._o,Ye.I,Z.OR,Qe.nA,u.u5,u.On],encapsulation:2}),i})();var Ve=h(19123);const Ze=[{id:"B2B_GMBR,B2C_GMBR",name:"T\u1ea5t c\u1ea3"},{id:"B2B_GMBR",name:"Flychills"},{id:"B2C_GMBR",name:"GMBR"}];function rr(i,a){if(1&i&&(e.TgZ(0,"cf-radio",12),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const ar=function(){return{standalone:!0}};function cr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"cf-radio-group",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.distributionChannelTempMobile=o)}),e.YNc(2,rr,2,2,"cf-radio",10),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirmDistributeChannel())}),e._uU(4,"X\xe1c nh\u1eadn"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.distributionChannelTempMobile)("ngModelOptions",e.DdM(3,ar)),e.xp6(1),e.Q6J("ngForOf",t.distributionChannelOptions)}}let sr=(()=>{class i{constructor(t,n,o){this._cfRegister=t,this._permissionService=n,this._bottomSheetService=o,this.isMobile=!1,this.distributionChannelTempMobile="B2B_GMBR,B2C_GMBR",this.distributionChannelOptions=Ze,t.registerIcons([l.ctk,l.gEm])}isAgent2(){const t=this._permissionService.getCurrentAuthor();return"AGENT2"===(null==t?void 0:t.titleCode.toUpperCase())}selectMobileDistributionChannel(t){if(!this.isMobile)return;const n=this._bottomSheetService.open(t,{headerTitle:"Vai tr\xf2",rightButtonIcon:"close",rightButtonIconClass:"text-neutral-gray-4",leftButtonIcon:"",restoreFocus:!1});n.containerInstance._rightButtonClick.subscribe(()=>{n.dismiss()}),n.afterDismissed().subscribe(()=>{var o;this.distributionChannelTempMobile=null===(o=this.form.get("distributionChannel"))||void 0===o?void 0:o.value})}onConfirmDistributeChannel(){this.form.patchValue({distributionChannel:this.distributionChannelTempMobile}),this._bottomSheetService.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(K.$A),e.Y36(O.a2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cheapflightclient-add-config-flight-step"]],inputs:{form:"form",isMobile:"isMobile"},standalone:!0,features:[e.jDz],decls:11,vars:5,consts:[[3,"formGroup"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"mb-6","md:mb-[1px]"],[1,"",3,"click"],["data-id","distributionChannel","textField","name","valueField","id","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"ngClass","status","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],["distributionChannelTpl",""],[1,"flex","flex-col","w-full","p-4","gap-y-6"],[1,"flex","flex-col","gap-y-4",3,"ngModel","ngModelOptions","ngModelChange"],["size","medium",3,"value",4,"ngFor","ngForOf"],["cf-button","",1,"w-full","justify-center",3,"click"],["size","medium",3,"value"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"form",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(10);return e.KtG(n.selectMobileDistributionChannel(c))}),e.TgZ(4,"cf-select",4)(5,"label",5),e._UZ(6,"cf-icon",6),e.TgZ(7,"span"),e._uU(8,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()(),e.YNc(9,cr,5,4,"ng-template",null,7,e.W1O),e.qZA()}2&t&&(e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngClass",n.isMobile?"pointer-events-none":"pointer-events-auto")("status",n.form.controls.distributionChannel.invalid&&(n.form.controls.distributionChannel.dirty||n.form.controls.distributionChannel.touched)?"error":"default")("data",n.distributionChannelOptions)("allowSearch",!1))},dependencies:[d.ez,d.mk,d.sg,u.UX,u._Y,u.JJ,u.JL,u.sg,u.u,l.AxE,l.Sm8,b.j$,B.q,Ve.o,Ve.T,u.u5,u.On,T.N8,T.Xq],encapsulation:2}),i})();var De=h(9381);let Fe=(()=>{class i{constructor(){}setOrderId(t){this.orderId=t}getOrderId(){return this.orderId}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"add-info-flight-step",27),e.NdJ("selectedFaresTreeChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedFaresTree=o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)("selectedFaresTree",t.selectedFaresTree)}}function ur(i,a){if(1&i&&e._UZ(0,"cheapflightclient-add-config-flight-step",28),2&i){const t=e.oxw();e.Q6J("form",t.form)("isMobile",t.isMobile)}}function dr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}const ze=function(i,a,t,n,o){return[i,a,t,n,o]};function pr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,ze,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function fr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function _r(i,a){if(1&i&&(e.TgZ(0,"div",29),e.YNc(1,dr,3,0,"button",30),e.YNc(2,pr,5,13,"button",31),e.YNc(3,fr,3,1,"button",31),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function mr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.INFO_FLIGHT)}),e._UZ(1,"cf-icon",33),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function gr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentStep=o.STEP_PAGE.CONFIG_HUNT)}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e._UZ(4,"cf-icon",35),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",e.G7q(1,1,e.qbA(7,ze,t.form.value,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value,t.form.value.departureTime))||t.form.controls.startPoint.invalid||t.form.controls.endPoint.invalid)}}function hr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"T\u1ea1o y\xeau c\u1ea7u"),e.qZA(),e._UZ(3,"cf-icon",35),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid)}}function vr(i,a){if(1&i&&(e.TgZ(0,"div",36)(1,"div",37),e.YNc(2,mr,3,0,"button",38),e.YNc(3,gr,5,13,"button",39),e.YNc(4,hr,4,1,"button",39),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT)}}function xr(i,a){1&i&&e._UZ(0,"cf-spinner")}var W=(()=>{return(i=W||(W={}))[i.INFO_FLIGHT=0]="INFO_FLIGHT",i[i.CONFIG_HUNT=1]="CONFIG_HUNT",W;var i})();const Tr=[{title:"Th\xf4ng tin chuy\u1ebfn bay",id:W.INFO_FLIGHT},{title:"C\u1ea5u h\xecnh s\u0103n v\xe9",id:W.CONFIG_HUNT}],Cr=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}],yr=[{name:"S\xe1ng s\u1edbm",code:"early_morning",start:"00:00",end:"05:59",isActive:!1,disable:!1,startTime:0,endTime:360,totalAvailable:0},{name:"Bu\u1ed5i s\xe1ng",code:"morning",start:"06:00",end:"11:59",isActive:!1,disable:!1,startTime:360,endTime:720,totalAvailable:0},{name:"Bu\u1ed5i chi\u1ec1u",code:"afternoon",start:"12:00",end:"17:59",isActive:!1,disable:!1,startTime:720,endTime:1080,totalAvailable:0},{name:"Bu\u1ed5i t\u1ed1i",code:"evening",start:"18:00",end:"23:59",isActive:!1,disable:!1,startTime:1080,endTime:1439,totalAvailable:0},{name:"T\xf9y ch\u1ecdn",code:"custom",start:"00:00",end:"23:59",isActive:!0,disable:!1,startTime:0,endTime:1439,totalAvailable:0}];let Ar=(()=>{class i{constructor(t,n,o,r,c,s,p,v,g,m){this.fb=t,this._cfRegister=n,this.router=o,this._mobileDetectService=r,this._cdr=c,this._modal=s,this._bottomSheetService=p,this._huntTicketAdvancedBindingSvc=v,this._bookingHunterSvc=g,this._flightDataService=m,this.currentStep=W.INFO_FLIGHT,this.STEP_PAGE=W,this.isMobile=!1,this.stepList=Tr,this.isLoading=!1,this.checkValidStepInfoFlight=(x,y,E,A)=>{var D,M;let U=!1;return"PRICE"===x.type?U=!(null!==(D=y.filter(we=>we.price))&&void 0!==D&&D.length)||U:"FARE"===x.type&&(U=!(null!=E&&E.length)||U),x.isTimeRange&&(U=!(null!==(M=null==A?void 0:A.filter(we=>we.isActive))&&void 0!==M&&M.length)||U),U},n.registerIcons([l.toh,l.NNX,l.rJw])}ngOnInit(){this.initOrderIdForBinding(),this.initCheckMobile(),this.initForm()}initOrderIdForBinding(){const t=this._huntTicketAdvancedBindingSvc.getOrderId();t&&this._bookingHunterSvc.getPnrOrderDetail(t).subscribe(n=>{const o=n.data.orderInfo.fareMonitors,r=n.data.orderInfo.priceMonitors,{rangeTime:c,startPoint:s,endPoint:p,rangeDateTime:v}=n.data.ticketInfo.journeys[0];this.form.patchValue({startPoint:s,endPoint:p,distributionChannel:n.data.distributionChannel,toDate:C.unix(v.toDate).toDate(),fromDate:C.unix(v.fromDate).toDate(),isTimeRange:!(1===(null==c?void 0:c.length)&&"0:00"==c[0].fromDate&&"23:59"==c[0].toDate),type:null!=o&&o.length?"FARE":"PRICE"});const g=n.data.orderInfo.fareMonitors.reduce((m,x)=>[...m,...x.specifyFareClass],[]);this._bookingHunterSvc.getLstAirlineFareoptions().pipe((0,J.U)(m=>{var x;return null===(x=null==m?void 0:m.data)||void 0===x?void 0:x.map(y=>{var E;return{name:this._flightDataService.getAirlineNameByCode(null===(E=y.airline)||void 0===E?void 0:E.toUpperCase()),code:y.airline,icon:this._flightDataService.getAirlineIconByCode(y.airline),isActive:!1,isDisable:!1,totalFare:this.countAirlineTotalFare(y),childItems:y.cabin.map(A=>({code:A.code,name:A.name,isActive:!1,isDisable:!1,childItems:A.fareType.map(D=>{var M;return{code:D.code,name:D.description,isActive:!1,isDisable:!1,totalFare:(null===(M=D.fareClass)||void 0===M?void 0:M.length)||0,childItems:D.fareClass.map(U=>({code:U.code,name:U.name,isActive:!1,childItems:[],isDisable:!1}))}})}))}})})).subscribe({next:m=>{this.selectedFaresTree=m,this.selectedFaresTree.forEach(x=>{x.childItems.forEach(y=>{y.childItems.forEach(E=>{E.childItems.forEach(A=>{g.includes(A.code)&&(A.isActive=!0)})})}),this.standardizeAirlineOptionSelected(x),this._cdr.detectChanges()}),this.selectedFaresTree=[...this.selectedFaresTree]},error:m=>{console.log(m)}}),null!=r&&r.length&&this.specifyPriceList.controls.forEach((m,x)=>{r.forEach(y=>{y.airline===m.value.id&&m.patchValue({price:y.targetPrice})})})}),this._huntTicketAdvancedBindingSvc.setOrderId("")}countAirlineTotalFare(t){var n;let o=0;return null===(n=t.cabin)||void 0===n||n.forEach(r=>{var c;null===(c=r.fareType)||void 0===c||c.forEach(s=>{o+=s.fareClass.length||0})}),o}standardizeAirlineOptionSelected(t){let n=!1;t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.isActive=r.childItems.map(c=>c.isActive).reduce((c,s)=>c||s,!1),r.totalSelectedFare=r.childItems.filter(c=>c.isActive).length,r.isActive&&(n=!0)})}),t.isActive=n,t.totalSelectedFare=t.childItems.reduce((o,r)=>o+r.childItems.map(c=>c.childItems.filter(s=>s.isActive).length).reduce((c,s)=>c+s),0)}initForm(){this.form=this.fb.group({specifyFareClassList:this.fb.array([]),specifyPriceList:this.fb.array([]),type:"FARE",endPoint:[null,u.kI.required],startPoint:[null,u.kI.required],toDate:[C().toDate(),u.kI.required],fromDate:[C().toDate(),u.kI.required],isTimeRange:!1,departureTime:this.fb.array([]),distributionChannel:["B2B_GMBR,B2C_GMBR",u.kI.required]}),Cr.forEach(t=>{this.initDataPriceList(t)}),yr.forEach(t=>{this.initDepartureTime(t)})}initDataPriceList(t){const n=this.fb.group({name:null,id:null,price:null,image:null});n.patchValue(t),this.specifyPriceList.push(n)}initDepartureTime(t){const n=this.fb.group({name:null,code:null,start:null,end:null,isActive:!1,disable:!1,startTime:null,endTime:null,totalAvailable:0});n.patchValue(t),this.departureTimeList.push(n)}get specifyPriceList(){return this.form.get("specifyPriceList")}get departureTimeList(){return this.form.get("departureTime")}initCheckMobile(){this._mobileDetectService.mobileSubject.subscribe(t=>{this.isMobile=t})}onMoveToHuntTicketAdvancedList(){this.router.navigate(["admin/hunt-ticket-advanced-list"])}get specifyFareClassList(){return this.form.get("specifyFareClassList")}onSubmit(){this.form.invalid||(this.isMobile?this._bottomSheetService.open(Le,{headerTitle:"X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",containerFullHeigh:!0,data:{rawData:this.form.value,selectedFaresTree:this.selectedFaresTree}}):this._modal.open(Le,{data:this.form.value,selectedFaresTree:this.selectedFaresTree}).afterClosed$.subscribe({next:n=>{}}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(l.KNP),e.Y36(N.F0),e.Y36(De.L),e.Y36(e.sBO),e.Y36(S.oE),e.Y36(O.a2),e.Y36(Fe),e.Y36(X.yL),e.Y36(j.G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-add"]],standalone:!0,features:[e.jDz],decls:33,vars:8,consts:[[1,"p-6","h-full","block","w-full","md:p-3",3,"formGroup"],[1,"flex","gap-x-2","mb-4","justify-start","items-center"],[1,"text-body-md-short","text-neutral-gray-6","cursor-pointer",3,"click"],["icon","chevron_right","size","small",1,"text-neutral-gray-4"],[1,"text-body-md-short","text-neutral-gray-6"],[1,"flex","flex-col","h-full","w-full","justify-center","items-center"],[1,"w-[70%]","md:w-full"],[1,"flex","justify-between","items-center","mb-4","md:hidden"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"flex","flex-col","w-full","justify-center"],[1,"block","gap-y-4","mb-2","md:mb-12"],[1,"flex","rounded","w-full","bg-white","justify-between","shadow-cf-md","mb-8","p-4","items-center"],[1,"flex","justify-start","gap-x-0","items-center"],[1,"h-full","flex","flex-col","justify-center","items-end"],["src","assets/images/booking-hunter-banner.svg",1,"w-full","object-contain"],[1,"h-full","p-4","items-start"],[1,"text-express-md","text-neutral-black"],[1,"flex","flex-col","gap-3","bg-white","rounded","shadow-cf-md","gap-y-3","p-6","md:px-3"],[1,"flex","justify-center","items-center","md:items-center","w-[80%]","mx-auto"],[3,"steps","stepCur"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange",4,"ngIf"],[3,"form","isMobile",4,"ngIf"],["class","w-full py-4",4,"ngIf"],["class","bg-neutral-white pt-3 pr-4 pb-3 pl-4 flex-row items-end justify-end w-full fixed bottom-0 hidden md:flex md:justify-between",4,"ngIf"],[4,"ngIf"],[3,"form","isMobile","selectedFaresTree","selectedFaresTreeChange"],[3,"form","isMobile"],[1,"w-full","py-4"],["cf-button","","size","medium","type","secondary","class","bg-white float-left",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center float-right",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left",3,"click"],["cfHeadIcon","","icon","chevron_left","size","small",1,"mr-2"],["cf-button","","size","medium","color","primary-1",1,"justify-center","float-right",3,"disabled","click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"bg-neutral-white","pt-3","pr-4","pb-3","pl-4","flex-row","items-end","justify-end","w-full","fixed","bottom-0","hidden","md:flex","md:justify-between"],[1,"flex","flex-row","items-center","justify-start","shrink-0","relative","md:w-full"],["cf-button","","size","medium","type","secondary","class","bg-white float-left justify-center md:w-full",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center ml-2 md:w-full",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"bg-white","float-left","justify-center","md:w-full",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return n.onMoveToHuntTicketAdvancedList()}),e._uU(3," S\u0103n v\xe9 t\u1ebft "),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"div",4),e._uU(6," T\u1ea1o y\xeau c\u1ea7u s\u0103n "),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.TgZ(12,"div",10),e._uU(13," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 "),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"div"),e._UZ(20,"img",16),e.qZA()(),e.TgZ(21,"div",17)(22,"div",18),e._uU(23," M\u1ed9t c\xe1ch \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng \u0111\u1eb7t ch\u1ed7 nh\u1eefng chuy\u1ebfn bay v\xe0o d\u1ecbp l\u1ec5! "),e.qZA()()()(),e.TgZ(24,"div",19)(25,"div",20),e._UZ(26,"cheapflightclient-step-ct",21),e.qZA(),e.TgZ(27,"div"),e.YNc(28,lr,1,3,"add-info-flight-step",22),e.YNc(29,ur,1,2,"cheapflightclient-add-config-flight-step",23),e.qZA()(),e.YNc(30,_r,4,3,"div",24),e.qZA()()(),e.YNc(31,vr,5,3,"div",25),e.qZA()(),e.YNc(32,xr,1,0,"cf-spinner",26)),2&t&&(e.Q6J("formGroup",n.form),e.xp6(26),e.Q6J("steps",n.stepList)("stepCur",n.currentStep),e.xp6(2),e.Q6J("ngIf",n.currentStep===n.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",n.currentStep===n.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",!n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isMobile),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.O5,T.N8,T.Xq,l.AxE,l.Sm8,Ti,Z.OR,u.UX,u._Y,u.JL,u.sg,or,sr,O.DW,V.q],encapsulation:2}),i})();var ke=h(98184),Ke=h(74891),$e=h(24513),de=h(38514),I=h(53820),ve=h(62163);function Er(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",34,35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("EDIT"))}),e._uU(3," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.pnrOrderData.canUpdate)("manualHandle",t.pnrOrderData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function br(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("CANCEL"))}),e._uU(1," H\u1ee7y s\u0103n "),e.qZA()}}function Zr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("CREATE_NEW"))}),e._uU(1," T\u1ea1o l\u1ea1i "),e.qZA()}}const xe=function(i,a,t){return[i,a,t]},Xe=function(i,a){return[i,a]};function Dr(i,a){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,Er,4,4,"button",32),e.YNc(2,br,2,0,"button",33),e.YNc(3,Zr,2,0,"button",33),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.kEZ(3,xe,t.STATUS_ORDER.CREATE,t.STATUS_ORDER.IN_PROCESS,t.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(t.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.kEZ(7,xe,t.STATUS_ORDER.CREATE,t.STATUS_ORDER.IN_PROCESS,t.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(t.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.WLB(11,Xe,t.STATUS_ORDER.CANCEL,t.STATUS_ORDER.EXPIRED).includes(t.pnrOrderData.state))}}function Fr(i,a){if(1&i&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2,"Ng\u01b0\u1eddi t\u1ea1o"),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.pnrOrderData.userAction||"-")}}function kr(i,a){if(1&i&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.pnrOrderData.ownerName||"-")}}function Ir(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"H\xe3ng bay"),e.qZA())}function Sr(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"Gi\xe1 v\xe9"),e.qZA())}function wr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAction("BOOKING_DETAIL"))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.pnrOrderData.fareInfo.detectedPnr," ")}}function Or(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}const Te=function(i){return{"md:!hidden":i}};function Nr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",21),e._uU(2,"PNR m\u1edbi"),e.qZA(),e.TgZ(3,"div",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("BOOKING_DETAIL"))}),e.YNc(4,wr,2,1,"a",38),e.YNc(5,Or,2,0,"span",23),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,Te,!t.isShowMore)),e.xp6(4),e.Q6J("ngIf",t.pnrOrderData.fareInfo.detectedPnr),e.xp6(1),e.Q6J("ngIf",!t.pnrOrderData.fareInfo.detectedPnr)}}function Ur(i,a){if(1&i&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.pnrOrderData.rangeTimeStr||"-")}}function qr(i,a){1&i&&e._UZ(0,"cf-icon",40)}function Mr(i,a){1&i&&e._UZ(0,"cf-icon",41)}function Pr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",42,35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("EDIT"))}),e._uU(3," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.pnrOrderData.canUpdate)("manualHandle",t.pnrOrderData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function Jr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("CANCEL"))}),e._uU(1," H\u1ee7y s\u0103n "),e.qZA()}}function Br(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAction("CREATE_NEW"))}),e._uU(1," T\u1ea1o l\u1ea1i "),e.qZA()}}const Hr=function(i){return{"md:!items-end":i}};let Lr=(()=>{class i{constructor(t,n,o,r){this._permissionService=n,this._bottomSheetService=o,this._mobileDetectService=r,this.bookingHunterType=de.G.HUNT_NEW_TICKET,this.TYPE_ORDER=de.G,this.status=I.b.COMPLETED,this.STATUS_ORDER=I.b,this.CARD_HUNTER_STATUS=X.u1,this.MONITOR_TYPE=ve.$,this.actionChange=new e.vpe,this.canMonitorHuntFareTicket=this._permissionService.hasPermission(K.or.CanMonitorHuntFareTicket),this.isShowMore=!1,t.registerIcons([l.esH,l.NNX,l.Hge,l.Ffn,l.SlW,l.$PG,l.qDv,l.cnj,l.okA,l.xbi,l.n78,l.fqi,l.BbA,l.QkI,l.$S,l.SK7])}ngOnInit(){this.status=this.pnrOrderData.state}onAction(t){this._bottomSheetService&&this._bottomSheetService.dismiss(),this.actionChange.emit(t)}onShow(t){t.preventDefault(),t.stopPropagation(),this.isShowMore=!this.isShowMore}onClickDetail(){this._mobileDetectService.isMobile()&&this.onAction("DETAIL")}openBottomSheet(t,n){t.preventDefault(),t.stopPropagation(),this.bottomSheetAction=this._bottomSheetService.open(n,{hasHeader:!1,rightButtonIconClass:"text-neutral-gray-4"})}onConfirmCancel(t){this.bottomSheetAction.dismiss(),t.preventDefault(),t.stopPropagation(),this.mobileConfirmBts=this._bottomSheetService.open(Z.Q4,{headerTitle:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:`<div>B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${this.pnrOrderData.code}?</strong></div>`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}}),this.mobileConfirmBts.containerInstance._rightButtonClick.subscribe(n=>{this.mobileConfirmBts.dismiss()}),this.mobileConfirmBts.afterDismissed().subscribe(n=>{n?this.onAction("CANCEL"):this.onClose()})}onClose(){this.mobileConfirmBts.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(K.$A),e.Y36(O.a2),e.Y36(De.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-item"]],inputs:{bookingHunterType:"bookingHunterType",pnrOrderData:"pnrOrderData"},outputs:{actionChange:"actionChange"},standalone:!0,features:[e.jDz],decls:67,vars:56,consts:[[1,"rounded-lg","overflow-hidden","bg-white"],[1,"px-2.5","py-1.5","flex","justify-between","gap-x-2.5"],[1,"flex","items-center","gap-x-2"],[1,"flex","items-center","gap-x-1"],["size","small",3,"icon"],[1,"text-express-md"],["class","flex gap-x-1.5 md:hidden",4,"ngIf"],[1,"p-3","flex","flex-col","gap-y-2",3,"click"],[1,"flex","justify-between","items-center"],[1,"flex","flex-col","justify-between","gap-y-1.5"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],["icon","plane","size","small"],["icon","arrow_right","size","small"],[1,"flex","gap-x-[30px]","pl-[26px]"],[1,"text-body-sm","text-neutral-gray-4"],[1,"text-express-sm","text-neutral-gray-6"],["cf-button","","size","medium",1,"md:hidden",3,"click"],[1,"p-2","bg-neutral-gray-1","rounded","md:flex","md:gap-x-4","md:justify-center","md:items-center","md:p-3",3,"ngClass"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],["class","min-w-[100px] flex flex-col justify-between gap-y-2 md:flex-row md:gap-x-4",4,"ngIf"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4",3,"ngClass"],[4,"ngIf"],["class","min-w-[100px] flex flex-col justify-between gap-y-2 md:flex-row md:gap-x-4",3,"ngClass",4,"ngIf"],[1,"md:p-2","hidden","md:block",3,"click"],["icon","chevron_down","size","small",4,"ngIf"],["icon","chevron_up","size","small",4,"ngIf"],[1,"w-full","md:flex","gap-3","hidden"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white flex-1",3,"disabled","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white flex-1",3,"click",4,"ngIf"],[1,"flex","gap-x-1.5","md:hidden"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"disabled","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium","type","secondary","class","justify-center bg-neutral-white",3,"click",4,"ngIf"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"disabled","manualHandle","placement","cfTooltip","click"],["trigger","","originOverlay","cdkOverlayOrigin"],["cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white",3,"click"],[1,"text-express-sm","text-neutral-gray-6",3,"click"],["class","text-secondary-3-4 hover:underline cursor-default",3,"click",4,"ngIf"],[1,"text-secondary-3-4","hover:underline","cursor-default",3,"click"],["icon","chevron_down","size","small"],["icon","chevron_up","size","small"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white","flex-1",3,"disabled","manualHandle","placement","cfTooltip","click"],["cf-button","","size","medium","type","secondary",1,"justify-center","bg-neutral-white","flex-1",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"cf-icon",4),e.TgZ(5,"div",5),e._uU(6),e.qZA()()(),e.YNc(7,Dr,4,14,"div",6),e.qZA(),e.TgZ(8,"div",7),e.NdJ("click",function(){return n.onClickDetail()}),e.TgZ(9,"div",8)(10,"div",9)(11,"div",10),e._UZ(12,"cf-icon",11),e.TgZ(13,"div"),e._uU(14),e.qZA(),e._UZ(15,"cf-icon",12),e.TgZ(16,"div"),e._uU(17),e.qZA()(),e.TgZ(18,"div",13)(19,"div")(20,"div",14),e._uU(21,"Ng\xe0y kh\u1edfi h\xe0nh:"),e.qZA(),e.TgZ(22,"div",15),e._uU(23),e.ALo(24,"date"),e.ALo(25,"date"),e.qZA()()()(),e.TgZ(26,"button",16),e.NdJ("click",function(){return n.onAction("DETAIL")}),e._uU(27," Chi ti\u1ebft "),e.qZA()(),e.TgZ(28,"div",17)(29,"div",18),e.YNc(30,Fr,5,1,"div",19),e.YNc(31,kr,5,1,"div",19),e.TgZ(32,"div",20)(33,"div",21),e._uU(34,"M\xe3 y\xeau c\u1ea7u"),e.qZA(),e.TgZ(35,"div",15),e._uU(36),e.qZA()(),e.TgZ(37,"div",20)(38,"div",21),e._uU(39,"Ng\xe0y y\xeau c\u1ea7u"),e.qZA(),e.TgZ(40,"div",15),e._uU(41),e.qZA()(),e.TgZ(42,"div",22)(43,"div",21),e._uU(44,"H\u1ea1n s\u0103n v\xe9"),e.qZA(),e.TgZ(45,"div",15),e._uU(46),e.qZA()(),e.TgZ(47,"div",22)(48,"div",21),e._uU(49,"S\u0103n theo"),e.qZA(),e.TgZ(50,"div",15),e.YNc(51,Ir,2,0,"span",23),e.YNc(52,Sr,2,0,"span",23),e.qZA()(),e.TgZ(53,"div",22)(54,"div",21),e._uU(55,"H\xe3ng bay"),e.qZA(),e.TgZ(56,"div",15),e._uU(57),e.qZA()(),e.YNc(58,Nr,6,5,"div",24),e.YNc(59,Ur,5,1,"div",19),e.qZA(),e.TgZ(60,"div",25),e.NdJ("click",function(r){return n.onShow(r)}),e.YNc(61,qr,1,0,"cf-icon",26),e.YNc(62,Mr,1,0,"cf-icon",27),e.qZA()(),e.TgZ(63,"div",28),e.YNc(64,Pr,4,4,"button",29),e.YNc(65,Jr,2,0,"button",30),e.YNc(66,Br,2,0,"button",30),e.qZA()()()),2&t&&(e.xp6(1),e.Tol(n.CARD_HUNTER_STATUS[n.pnrOrderData.state].backgroundColor),e.xp6(2),e.Tol(n.CARD_HUNTER_STATUS[n.pnrOrderData.state].textColor),e.xp6(1),e.Q6J("icon",n.CARD_HUNTER_STATUS[n.pnrOrderData.state].icon),e.xp6(2),e.Oqu(n.CARD_HUNTER_STATUS[n.pnrOrderData.state].description),e.xp6(1),e.Q6J("ngIf",n.canMonitorHuntFareTicket),e.xp6(7),e.AsE("",n.pnrOrderData.startPointName," (",n.pnrOrderData.startPoint,")"),e.xp6(3),e.AsE("",n.pnrOrderData.endPointName," (",n.pnrOrderData.endPoint,")"),e.xp6(6),e.hij(" ",e.xi3(24,31,1e3*n.pnrOrderData.rangeDateTime.fromDate,"dd/MM/yyy")+" - "+e.xi3(25,34,1e3*n.pnrOrderData.rangeDateTime.toDate,"dd/MM/yyy"),""),e.xp6(5),e.Q6J("ngClass",e.VKq(37,Hr,n.isShowMore)),e.xp6(2),e.Q6J("ngIf",n.bookingHunterType===n.TYPE_ORDER.HUNT_NEW_TICKET_TET),e.xp6(1),e.Q6J("ngIf",n.pnrOrderData.ownerName),e.xp6(5),e.Oqu(n.pnrOrderData.code||"-"),e.xp6(5),e.Oqu(n.pnrOrderData.timeCreated||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(39,Te,!n.isShowMore)),e.xp6(4),e.Oqu(n.pnrOrderData.timeExpired||"-"),e.xp6(1),e.Q6J("ngClass",e.VKq(41,Te,!n.isShowMore)),e.xp6(4),e.Q6J("ngIf",n.pnrOrderData.monitorType===n.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",n.pnrOrderData.monitorType===n.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngClass",e.VKq(43,Te,!n.isShowMore)),e.xp6(4),e.Oqu(n.pnrOrderData.airline||"-"),e.xp6(1),e.Q6J("ngIf",n.bookingHunterType!==n.TYPE_ORDER.HUNT_NEW_TICKET_TET),e.xp6(1),e.Q6J("ngIf",n.bookingHunterType===n.TYPE_ORDER.HUNT_NEW_TICKET_TET),e.xp6(2),e.Q6J("ngIf",!n.isShowMore),e.xp6(1),e.Q6J("ngIf",n.isShowMore),e.xp6(2),e.Q6J("ngIf",e.kEZ(45,xe,n.STATUS_ORDER.CREATE,n.STATUS_ORDER.IN_PROCESS,n.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(n.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.kEZ(49,xe,n.STATUS_ORDER.CREATE,n.STATUS_ORDER.IN_PROCESS,n.STATUS_ORDER.IN_PROCESS_PRICE_UP).includes(n.pnrOrderData.state)),e.xp6(1),e.Q6J("ngIf",e.WLB(53,Xe,n.STATUS_ORDER.CANCEL,n.STATUS_ORDER.EXPIRED).includes(n.pnrOrderData.state)))},dependencies:[d.ez,d.mk,d.O5,d.uU,l.AxE,l.Sm8,T.N8,T.Xq,$e.Lk,Ke.f,ke.xu,ke.U8,O.DW],encapsulation:2}),i})();var Ie=h(77579),Qr=h(63900),Yr=h(82722),Gr=h(78372);function Rr(i,a){1&i&&(e.TgZ(0,"div",46),e._uU(1," Ch\u1ecdn h\xe3ng bay mong mu\u1ed1n"),e.qZA())}function jr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(4);return e.KtG(c.onRemoveAirlineOption(o,r))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Vr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3).$implicit,s=e.oxw(4);return e.KtG(s.onRemoveFareTypeOption(o,r,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.name+"-"+t.name,"")}}function zr(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e._uU(1),e.TgZ(2,"cf-icon",49),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(5).$implicit,s=e.oxw(4);return e.KtG(s.onRemoveFareOption(o,r,c))}),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2).$implicit,o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",o.name+"-"+n.name+"-"+t.name,"")}}function Kr(i,a){if(1&i&&(e.ynx(0),e.YNc(1,zr,3,1,"div",50),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function $r(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Kr,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Xr(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Vr,3,1,"div",47),e.YNc(2,$r,2,1,"ng-container",6),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Wr(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Xr,3,2,"ng-container",43),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ea(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Wr,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function ta(i,a){if(1&i&&(e.ynx(0),e.YNc(1,jr,3,1,"div",47),e.YNc(2,ea,2,1,"ng-container",6),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive&&t.totalFare===t.totalSelectedFare&&0!==t.totalFare),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function na(i,a){1&i&&(e.TgZ(0,"div",52)(1,"div"),e._uU(2,"Vui l\xf2ng ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n."),e.qZA()())}function ia(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",39),e._uU(2,"S\u0103n v\xe9 thu\u1ed9c (c\xe1c) h\xe3ng bay d\u01b0\u1edbi \u0111\xe2y"),e.qZA(),e.TgZ(3,"div",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.openFareOptions())}),e.TgZ(4,"div",41),e.YNc(5,Rr,2,0,"div",42),e.YNc(6,ta,3,2,"ng-container",43),e.qZA(),e._UZ(7,"cf-icon",44),e.qZA(),e.YNc(8,na,3,0,"div",45),e.ALo(9,"mapper"),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(5),e.Q6J("ngIf",!(t.formGroup.value.specifyFareClassList&&(null==t.formGroup.value.specifyFareClassList?null:t.formGroup.value.specifyFareClassList.length)>0)),e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree),e.xp6(2),e.Q6J("ngIf",e.gM2(9,3,t.specifyFareClassList.value,t.checkInvalidField,"FARE"===t.formGroup.value.type,t.specifyFareClassList.touched))}}function oa(i,a){1&i&&(e.TgZ(0,"label",53),e._uU(1," Gi\u1eef ch\u1ed7 n\u1ebfu gi\xe1 v\xe9 th\u1ea5p h\u01a1n ho\u1eb7c b\u1eb1ng m\u1ee9c d\u01b0\u1edbi \u0111\xe2y "),e.qZA()),2&i&&e.Q6J("CfRequired",!1)}function ra(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",56)(2,"div",57),e._UZ(3,"img",58),e.TgZ(4,"span",59),e._uU(5),e.qZA()(),e.TgZ(6,"cf-input-number",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.specifyPriceList.markAsTouched())}),e.qZA(),e.TgZ(7,"span",61),e._uU(8,"\u0111"),e.qZA()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("src",t.value.image,e.LSH),e.xp6(2),e.Oqu(t.value.name),e.xp6(1),e.Q6J("placeholder","0")("negative",!1)("min",0)}}function aa(i,a){1&i&&(e.TgZ(0,"div",52)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp gi\xe1 \xedt nh\u1ea5t 1 h\xe3ng bay."),e.qZA()())}function ca(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",54),e.ynx(2,55),e.YNc(3,ra,9,6,"ng-container",43),e.BQk(),e.YNc(4,aa,3,0,"div",45),e.ALo(5,"mapper"),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.specifyPriceList.controls),e.xp6(1),e.Q6J("ngIf",e.gM2(5,2,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.formGroup.value.type,t.specifyPriceList.touched))}}function sa(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"form",10)(1,"div")(2,"div",11)(3,"div",12),e._UZ(4,"cf-icon",13),e.TgZ(5,"span",14),e._uU(6,"M\xe3 y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA()()(),e.TgZ(7,"div",15),e._uU(8),e.qZA()(),e.TgZ(9,"div",16)(10,"div",17)(11,"div",18),e._uU(12),e.qZA(),e.TgZ(13,"div",19),e._uU(14),e.qZA()(),e.TgZ(15,"div",20)(16,"div",21)(17,"div",22),e._UZ(18,"div",23)(19,"div",24),e.qZA()(),e.TgZ(20,"div"),e._UZ(21,"cf-icon",25),e.qZA()(),e.TgZ(22,"div",17)(23,"div",18),e._uU(24),e.qZA(),e.TgZ(25,"div",19),e._uU(26),e.qZA()()(),e._UZ(27,"div",26),e.TgZ(28,"div",11)(29,"div",27),e._UZ(30,"cf-icon",28),e.TgZ(31,"div",29)(32,"span"),e._uU(33,"Ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(34,"div",30),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onShowFareOptionChange(o))}),e._UZ(35,"cf-switch",31),e.qZA()(),e.YNc(36,ia,10,8,"div",32),e._UZ(37,"div",26),e.TgZ(38,"div",33)(39,"div",11)(40,"div",27),e._UZ(41,"cf-icon",34),e.TgZ(42,"div",29)(43,"span"),e._uU(44,"S\u0103n theo gi\xe1"),e.qZA()()(),e.TgZ(45,"div",30),e.NdJ("click",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onPriceOptionChange(o))}),e._UZ(46,"cf-switch",31),e.qZA()(),e.YNc(47,oa,2,1,"label",35),e.ALo(48,"mapper"),e.qZA(),e.YNc(49,ca,6,7,"ng-container",6),e.TgZ(50,"div",33)(51,"cf-select",36)(52,"label",37),e._UZ(53,"cf-icon",38),e.TgZ(54,"span"),e._uU(55,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.formGroup),e.xp6(8),e.Oqu(null==t.configOrderData?null:t.configOrderData.code),e.xp6(4),e.AsE(" ",t.configOrderData?t.configOrderData.journeys[0].startPointName:""," (",t.configOrderData?t.configOrderData.journeys[0].startPoint:"",") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].departTime),e.xp6(10),e.AsE(" ",t.configOrderData.journeys[0].endPointName," (",t.configOrderData.journeys[0].endPoint,") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].arrivalTime),e.xp6(9),e.Q6J("checked","FARE"===t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===t.formGroup.value.type),e.xp6(10),e.Q6J("checked","PRICE"===t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf",e.gM2(48,17,t.specifyPriceList.value,t.checkInvalidField,"PRICE"===t.formGroup.value.type,t.specifyPriceList.touched)),e.xp6(2),e.Q6J("ngIf","PRICE"===t.formGroup.value.type),e.xp6(2),e.Q6J("status",t.formGroup.controls.distributionChannel.invalid&&(t.formGroup.controls.distributionChannel.dirty||t.formGroup.controls.distributionChannel.touched)?"error":"default")("ngClass",t.isMobile?"pointer-events-none":"pointer-events-auto")("data",t.distributionChannelOptions)("allowSearch",!1)}}function la(i,a){if(1&i&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.AsE(" ",t.fromDate," - ",t.toDate," ")}}function ua(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function da(i,a){if(1&i&&(e.TgZ(0,"div",87)(1,"div",12),e._UZ(2,"img",88),e.TgZ(3,"div",82),e._uU(4),e.ALo(5,"replace"),e.ALo(6,"number"),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.hij(" ",e.Dn7(5,2,e.lcZ(6,6,t.price),",",".")," \u0111")}}function pa(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,da,7,8,"div",86),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.price>0)}}function fa(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,pa,2,1,"div",43),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.formGroup.value.specifyPriceList)}}function _a(i,a){1&i&&(e.TgZ(0,"div",82)(1,"div"),e._uU(2,"B\u1ea5t k\xec"),e.qZA()())}function ma(i,a){if(1&i&&(e.TgZ(0,"div",87)(1,"div",12),e._UZ(2,"img",88),e.TgZ(3,"div",82),e._uU(4),e.TgZ(5,"span",91),e._uU(6),e.qZA()()()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.icon,e.LSH),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij("(",t.code,")")}}function ga(i,a){if(1&i&&(e.TgZ(0,"div",96),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function ha(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ga,2,1,"div",95),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function va(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ha,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}const xa=function(i){return{"w-full":i}};function Ta(i,a){if(1&i&&(e.TgZ(0,"div",93)(1,"div",94),e._uU(2),e.qZA(),e.YNc(3,va,2,1,"ng-container",6),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(3,xa,t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)),e.xp6(2),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function Ca(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ta,4,5,"div",92),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function ya(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Ca,2,1,"ng-container",43),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Aa(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ya,2,1,"ng-container",43),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.childItems)}}function Ea(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ma,7,3,"div",86),e.TgZ(2,"div",90),e.YNc(3,Aa,2,1,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(2),e.Q6J("ngIf",t.totalFare!==t.totalSelectedFare&&0!==t.totalFare)}}function ba(i,a){if(1&i&&(e.TgZ(0,"div",89),e.YNc(1,Ea,4,2,"ng-container",43),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedFaresTree)}}function Za(i,a){if(1&i&&(e.TgZ(0,"div",62)(1,"div",63)(2,"div",64),e._UZ(3,"cf-icon",28),e.TgZ(4,"span",14),e._uU(5,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(6,"div",65)(7,"div",16)(8,"div",17)(9,"div",18),e._uU(10),e.qZA(),e.TgZ(11,"div",19),e._uU(12),e.qZA()(),e.TgZ(13,"div",20)(14,"div",21)(15,"div",22),e._UZ(16,"div",23)(17,"div",24),e.qZA()(),e.TgZ(18,"div"),e._UZ(19,"cf-icon",25),e.qZA()(),e.TgZ(20,"div",17)(21,"div",18),e._uU(22),e.qZA(),e.TgZ(23,"div",19),e._uU(24),e.qZA()()(),e._UZ(25,"div",66),e.TgZ(26,"div",67)(27,"div",68)(28,"div",59)(29,"span"),e._uU(30,"H\u1ea1n s\u0103n v\xe9"),e.qZA()()(),e.TgZ(31,"div",69),e._uU(32),e.ALo(33,"date"),e.qZA()(),e._UZ(34,"div",66),e.TgZ(35,"div",70)(36,"div",71)(37,"div",72)(38,"span"),e._uU(39,"Gi\u1edd kh\u1edfi h\xe0nh"),e.qZA()()(),e.TgZ(40,"div",73),e.YNc(41,la,2,2,"span",74),e.qZA()(),e._UZ(42,"div",66),e.TgZ(43,"div",70)(44,"div",71)(45,"div",72)(46,"span"),e._uU(47,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a"),e.qZA()()(),e.TgZ(48,"div",75),e.YNc(49,ua,2,0,"span",6),e.YNc(50,fa,2,1,"div",6),e.qZA()(),e._UZ(51,"div",66),e.TgZ(52,"div",70)(53,"div",71)(54,"div",59)(55,"span"),e._uU(56,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n"),e.qZA()()(),e.TgZ(57,"div",76),e.YNc(58,_a,3,0,"div",77),e.YNc(59,ba,2,1,"div",78),e.qZA()(),e._UZ(60,"div",66),e.TgZ(61,"div",67)(62,"div",68)(63,"div",59)(64,"span"),e._uU(65,"K\xeanh ph\xe2n ph\u1ed1i"),e.qZA()()(),e.TgZ(66,"div",69),e._uU(67),e.ALo(68,"mapper"),e.qZA()()()(),e.TgZ(69,"div",63)(70,"div",79),e._UZ(71,"cf-icon",80),e.TgZ(72,"span",14),e._uU(73,"M\u1ed9t s\u1ed1 l\u01b0u \xfd"),e.qZA()(),e.TgZ(74,"div",81),e._UZ(75,"cf-icon",34),e.TgZ(76,"div")(77,"span",82),e._uU(78,"B\u1ea1n kh\xf4ng m\u1ea5t b\u1ea5t c\u1ee9 kho\u1ea3n ph\xed n\u1ebfu kh\xf4ng s\u0103n \u0111\u01b0\u1ee3c v\xe9."),e.qZA(),e._uU(79," C\xf3 th\u1ec3 h\u1ee7y s\u0103n v\xe9 b\u1ea5t k\xec l\xfac n\xe0o! "),e.qZA()(),e.TgZ(80,"div",81),e._UZ(81,"cf-icon",83),e.TgZ(82,"div",82),e._uU(83,"B\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi "),e.TgZ(84,"span",84),e._uU(85,"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),e.qZA(),e._uU(86," khi s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y. "),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(10),e.AsE(" ",t.configOrderData?t.configOrderData.journeys[0].startPointName:""," (",t.configOrderData?t.configOrderData.journeys[0].startPoint:"",") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].departTime),e.xp6(10),e.AsE(" ",t.configOrderData.journeys[0].endPointName," (",t.configOrderData.journeys[0].endPoint,") "),e.xp6(2),e.Oqu(t.configOrderData.journeys[0].arrivalTime),e.xp6(8),e.hij(" ",e.xi3(33,13,t.configOrderData.timeExecute,"dd/MM/yyy hh:mm")," "),e.xp6(9),e.Q6J("ngForOf",t.configOrderData.journeys[0].rangeTime),e.xp6(8),e.Q6J("ngIf","PRICE"!==t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","PRICE"===t.formGroup.value.type),e.xp6(8),e.Q6J("ngIf","FARE"!==t.formGroup.value.type),e.xp6(1),e.Q6J("ngIf","FARE"===t.formGroup.value.type),e.xp6(8),e.hij(" ",e.xi3(68,16,t.formGroup.value.distributionChannel,t.viewDistributionChannel),"")}}function Da(i,a){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,sa,56,22,"form",8),e.YNc(2,Za,87,19,"div",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT)}}function Fa(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.close())}),e._uU(1," \u0110\xf3ng "),e.qZA()}}function ka(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",103),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onChangeStep(o.STEP_PAGE.INFO_FLIGHT))}),e.ALo(1,"mapper"),e.TgZ(2,"span"),e._uU(3,"C\u1eadp nh\u1eadt"),e.qZA(),e._UZ(4,"cf-icon",104),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",e.gM2(1,1,t.formGroup.value.type,t.checkValidStepInfoFlight,t.specifyPriceList.value,t.specifyFareClassList.value))}}function Ia(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onChangeStep(o.STEP_PAGE.CONFIG_HUNT))}),e._UZ(1,"cf-icon",105),e._uU(2," Quay l\u1ea1i "),e.qZA()}}function Sa(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",106),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"span"),e._uU(2,"X\xe1c nh\u1eadn"),e.qZA(),e._UZ(3,"cf-icon",104),e.qZA()}}function wa(i,a){if(1&i&&(e.TgZ(0,"div",97)(1,"div",98),e.YNc(2,Fa,2,0,"button",99),e.YNc(3,ka,5,6,"button",100),e.YNc(4,Ia,3,0,"button",99),e.YNc(5,Sa,4,0,"button",101),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.CONFIG_HUNT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.STEP_PAGE.INFO_FLIGHT)}}function Oa(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",107)(2,"ticket-item-skeleton",107)(3,"ticket-item-skeleton",107),e.qZA())}function Na(i,a){1&i&&e._UZ(0,"cf-spinner")}const qa=[{name:"VNA",id:"VN",price:0,image:"assets/icons/vn-icon.svg"},{name:"QH",id:"QH",price:0,image:"assets/icons/qh-icon.svg"},{name:"VJ",id:"VJ",price:0,image:"assets/icons/vj-icon.svg"}];var ce=(()=>{return(i=ce||(ce={})).INFO_FLIGHT="INFO_FLIGHT",i.CONFIG_HUNT="CONFIG_HUNT",ce;var i})();let Ce=(()=>{class i{constructor(t,n,o,r,c,s,p,v,g,m,x){this.ref=t,this.cfIconRegister=n,this._fb=o,this._locationDataService=r,this._huntTicketAdvancedService=c,this._bookingHunterService=s,this._modal=p,this._flightDataService=v,this._bottomSheetService=g,this._cdr=m,this._router=x,this.title="Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u s\u0103n v\xe9",this.isLoading=!1,this.isSpinning=!1,this.STEP_PAGE=ce,this.currentStep=ce.CONFIG_HUNT,this.dataFlight=(0,e.f3M)(R._).getAllOption(),this.hiddenPax=!1,this.distributionChannelOptions=Ze,this.isMobile=!1,this.checkInvalidField=(y,E,A)=>E&&!y.length&&A,this.viewFly=y=>{const E=this.dataFlight.find(A=>A.Code===y);return`${null==E?void 0:E.CityName} (${y})`},this.viewDistributionChannel=y=>{var E;return(null===(E=this.distributionChannelOptions.find(A=>A.id===y))||void 0===E?void 0:E.name)||""},this.checkValidStepInfoFlight=(y,E,A)=>{var D;let M=!1;return"PRICE"===y?M=!(null!==(D=E.filter(Y=>Y.price))&&void 0!==D&&D.length)||M:"FARE"===y&&(M=!(null!=A&&A.length)||M),M},n.registerIcons([l.PcQ,l.rJw]),t&&(this.orderId=t.data.orderId)}ngOnInit(){this.initFormGroup(),this.orderId&&this.getCurrentConfigOrder()}initFormGroup(){this.formGroup=this._fb.group({distributionChannel:[this.distributionChannelOptions[0].id,u.kI.required],specifyFareClassList:this._fb.array([]),specifyPriceList:this._fb.array([]),type:[ve.$.FARE]}),qa.forEach(t=>{this.initDataPriceList(t)})}initDataPriceList(t){const n=this._fb.group({name:null,id:null,price:null,image:null});n.patchValue(t),this.specifyPriceList.push(n)}getCurrentConfigOrder(){this.isLoading=!0,this._huntTicketAdvancedService.getCurrentConfigOrder(this.orderId).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:t=>{var n,o,r,c,s,p,v;if(t.data){this.configOrderData={orderId:t.data.orderId,canUpdate:t.data.canUpdate,code:t.data.code,notifBeforExpire:t.data.advanceSetting.notifBeforExpire,timeExecute:t.data.advanceSetting.timeExecute,monitorType:null===(n=t.data.conditions)||void 0===n?void 0:n.type,specifyPriceList:(null===(r=null===(o=t.data.conditions)||void 0===o?void 0:o.specifyPriceList)||void 0===r?void 0:r.filter(m=>m.targetPrice))||[],passengers:[],journeys:t.data.ticketInfo.journeys.map(m=>({departTime:C(new Date(1e3*m.rangeDateTime.fromDate)).format("DD/MM/YYYY"),arrivalTime:C(new Date(1e3*m.rangeDateTime.toDate)).format("DD/MM/YYYY"),startPoint:m.startPoint,startPointName:this._locationDataService.getCityNameByCode(m.startPoint),endPoint:m.endPoint,endPointName:this._locationDataService.getCityNameByCode(m.endPoint),leg:m.leg,rangeTime:m.rangeTime}))},this.formGroup.patchValue({type:this.configOrderData.monitorType||ve.$.FARE,distributionChannel:t.data.distributionChannel}),null!==(s=null===(c=t.data.conditions)||void 0===c?void 0:c.specifyPriceList)&&void 0!==s&&s.length&&(null===(p=t.data.conditions)||void 0===p||p.specifyPriceList.forEach(m=>{this.specifyPriceList.controls.forEach((x,y)=>{x.value.id===m.airline&&x.patchValue({price:m.targetPrice})})}));const g=(null===(v=t.data.conditions.specifyFareClassList)||void 0===v?void 0:v.map(m=>m.fareClass.split(";")).reduce((m,x)=>[...m,...x]))||[];this.loadFareOptions$().subscribe({next:m=>{this.selectedFaresTree=m,this.selectedFaresTree.forEach(x=>{x.childItems.forEach(y=>{y.childItems.forEach(E=>{E.childItems.forEach(A=>{g.includes(A.code)&&(A.isActive=!0)})})}),this.standardizeAirlineOptionSelected(x)})},error:m=>{console.log(m)}})}},error:()=>{}})}standardizeAirlineOptionSelected(t){let n=!1;t.childItems.forEach(o=>{o.childItems.forEach(r=>{r.isActive=r.childItems.map(c=>c.isActive).reduce((c,s)=>c||s,!1),r.totalSelectedFare=r.childItems.filter(c=>c.isActive).length,r.isActive&&(n=!0)})}),t.isActive=n,t.totalSelectedFare=t.childItems.reduce((o,r)=>o+r.childItems.map(c=>c.childItems.filter(s=>s.isActive).length).reduce((c,s)=>c+s),0),this.convertTreeDataToSpecifyFare(this.selectedFaresTree),this._cdr.detectChanges()}countAirlineTotalFare(t){var n;let o=0;return null===(n=t.cabin)||void 0===n||n.forEach(r=>{var c;null===(c=r.fareType)||void 0===c||c.forEach(s=>{o+=s.fareClass.length||0})}),o}formatAirlineFareOptions(t){return t.map(n=>{var o;return{name:this._flightDataService.getAirlineNameByCode(null===(o=n.airline)||void 0===o?void 0:o.toUpperCase()),code:n.airline,icon:this._flightDataService.getAirlineIconByCode(n.airline),isActive:!1,isDisable:!1,totalFare:this.countAirlineTotalFare(n),childItems:n.cabin.map(r=>({code:r.code,name:r.name,isActive:!1,isDisable:!1,childItems:r.fareType.map(c=>{var s;return{code:c.code,name:c.description,isActive:!1,isDisable:!1,totalFare:(null===(s=c.fareClass)||void 0===s?void 0:s.length)||0,childItems:c.fareClass.map(p=>({code:p.code,name:p.name,isActive:!1,childItems:[],isDisable:!1}))}})}))}})}loadFareOptions$(){return this._bookingHunterService.getLstAirlineFareoptions().pipe((0,J.U)(t=>this.formatAirlineFareOptions(t.data)))}openFareOptions(){this.loadFareOptions$().subscribe({next:t=>{this.isLoading=!1,this._cdr.detectChanges(),this.isMobile?this._bottomSheetService.open(Re,{headerTitle:"H\xe3ng bay/H\u1ea1ng gh\u1ebf",containerFullHeigh:!0,data:{fareOptions:t}}).afterDismissed().subscribe({next:o=>{o&&(this.selectedFaresTree=[...o],this.convertTreeDataToSpecifyFare(o)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}}):this._modal.open(je,{data:this.selectedFaresTree?this.selectedFaresTree:t}).afterClosed$.subscribe({next:o=>{o.data&&(this.selectedFaresTree=[...o.data],this.convertTreeDataToSpecifyFare(o.data)),this.specifyFareClassList.markAsTouched(),this._cdr.detectChanges()}})},error:t=>{this.isLoading=!1,this.specifyFareClassList.markAsTouched(),console.log(t)}})}convertTreeDataToSpecifyFare(t){var n;this.specifyFareClassList.clear();for(const o of(i=>i.map(a=>({airline:a.code,fareClass:a.childItems.map(t=>t.childItems.map(n=>n.childItems.filter(o=>o.isActive)).reduce((n,o)=>[...n,...o.map(r=>r.code)],[])).reduce((t,n)=>[...t,...n],[])})))(t))null!==(n=o.fareClass)&&void 0!==n&&n.length&&this.addFareClass(o);this._cdr.markForCheck()}addFareClass(t){var n;const o=this._fb.group({airline:null,fareClass:null});o.patchValue(t),null===(n=this.specifyFareClassList)||void 0===n||n.push(o)}onRemoveAirlineOption(t,n){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(o=>{o.childItems.forEach(r=>{r.childItems.forEach(c=>c.isActive=!1)})})}onRemoveFareOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1}onRemoveFareTypeOption(t,n,o){t.preventDefault(),t.stopPropagation(),n.isActive=!1,n.childItems.forEach(r=>{r.isActive=!1})}onShowFareOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyPriceList.value&&null!==(n=this.specifyPriceList.value.filter(o=>o.price))&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}else this._modal.open(Z.V0,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf s\u1ebd h\u1ee7y c\xe1c ch\u1ec9nh s\u1eeda c\u1ee7a t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong>. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c ch\u1ecdn h\xe3ng bay/h\u1ea1ng gh\u1ebf?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}get specifyPriceList(){return this.formGroup.get("specifyPriceList")}get specifyFareClassList(){return this.formGroup.get("specifyFareClassList")}onPriceOptionChange(t){var n;if(t.stopPropagation(),t.preventDefault(),this.specifyFareClassList.value&&null!==(n=this.specifyFareClassList.value)&&void 0!==n&&n.length)if(this.isMobile){const o=this._bottomSheetService.open(Z.Q4,{headerTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",rightButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",data:{body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}});o.containerInstance._rightButtonClick.subscribe(()=>{o.dismiss()}),o.afterDismissed().subscribe(r=>{r&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())})}else this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn thay \u0111\u1ed5i",body:"Vi\u1ec7c b\u1eadt t\xednh n\u0103ng <strong>S\u0103n theo gi\xe1 v\xe9</strong> s\u1ebd h\u1ee7y ch\u1ec9nh s\u1eeda c\u1ee7a c\xe1c h\xe3ng bay/h\u1ea1ng gh\u1ebf mong mu\u1ed1n. B\u1ea1n mu\u1ed1n ti\u1ebfp t\u1ee5c s\u0103n theo gi\xe1 v\xe9?",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges())}});else this.formGroup.patchValue({type:"FARE"===this.formGroup.value.type?"PRICE":"FARE"}),this._cdr.detectChanges()}onChangeStep(t){this.specifyPriceList.markAsTouched(),this.specifyFareClassList.markAsTouched(),this.formGroup.markAllAsTouched(),!this.formGroup.invalid&&(this.currentStep=t,t===ce.INFO_FLIGHT&&(this.title="X\xe1c nh\u1eadn y\xeau c\u1ea7u s\u0103n v\xe9",this.progressDateAfterSubmit()))}progressDateAfterSubmit(){const t=this.formGroup.value;this.dataFormSubmit={conditions:{specifyPriceList:"PRICE"===t.type?t.specifyPriceList.filter(n=>n.price).map(({id:n,price:o})=>({airline:n,targetPrice:o})):[],specifyFareClassList:"FARE"===t.type?t.specifyFareClassList.map(({airline:n,fareClass:o})=>({airline:n,fareClass:o.join(";")})):[],type:t.type},advanceSetting:{timeExecute:this.configOrderData.timeExecute,notifBeforExpire:this.configOrderData.notifBeforExpire},distributionChannel:t.distributionChannel}}onSubmit(){this.isSpinning=!0;const t={advanceSetting:this.dataFormSubmit.advanceSetting,conditions:{specifyFareClassList:this.dataFormSubmit.conditions.specifyFareClassList.map(n=>({airline:n.airline.toUpperCase(),fareClass:n.fareClass})),specifyPriceList:this.dataFormSubmit.conditions.specifyPriceList,type:this.dataFormSubmit.conditions.type},distributionChannel:this.dataFormSubmit.distributionChannel,orderId:this.orderId};this._huntTicketAdvancedService.updateConfigOrder(t).pipe((0,k.x)(()=>this.isSpinning=!0)).subscribe({next:n=>{"OK"===n.status?this.ref&&this.ref.close("OK"):this.ref&&this.ref.close("ERROR")},error:()=>{this.ref.close("ERROR")}})}close(){this.ref&&this.ref.close(!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.gb,8),e.Y36(l.KNP),e.Y36(u.qu),e.Y36(R._),e.Y36(He),e.Y36(X.yL),e.Y36(S.oE),e.Y36(j.G),e.Y36(O.a2),e.Y36(e.sBO),e.Y36(N.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-edit"]],standalone:!0,features:[e.jDz],decls:9,vars:5,consts:[[1,"w-[700px]","max-h-[600px]","overflow-hidden","rounded-lg","bg-neutral-white","flex","flex-col","md:hidden"],[1,"flex","justify-between","items-center","px-6","py-[13px]","border-b","border-neutral-gray-1"],[1,"text-heading-xs","text-neutral-black"],["size","medium","icon","close",1,"text-neutral-gray-4","cursor-pointer",3,"click"],["class","w-full h-full flex-1 overflow-auto",4,"ngIf"],["class","p-6",4,"ngIf"],[4,"ngIf"],[1,"w-full","h-full","flex-1","overflow-auto"],["class","p-6 w-ful h-full flex flex-col gap-y-6",3,"formGroup",4,"ngIf"],["class","flex flex-col gap-y-6 px-6 pt-6",4,"ngIf"],[1,"p-6","w-ful","h-full","flex","flex-col","gap-y-6",3,"formGroup"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-x-2"],["icon","coupon","size","small"],[1,"text-heading-sm","text-neutral-black"],[1,"text-heading-md","text-neutral-black"],[1,"rounded","bg-neutral-gray-1","py-3","flex","justify-center","items-center","gap-x-4"],[1,"flex","flex-col","gap-y-1"],[1,"text-heading-sm","text-neutral-gray-6"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","gap-x-1","items-center"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"w-full","h-[1px]","bg-neutral-gray-1"],[1,"flex","justify-between","items-center","gap-x-[4px]"],["icon","plane","size","small"],[1,"text-heading-sm"],[1,"cursor-pointer",3,"click"],[1,"pointer-events-none",3,"checked"],["class","",4,"ngIf"],[1,""],["icon","money","size","small"],["cfLabel","","class","text-body-md-short text-black ml-4",3,"CfRequired",4,"ngIf"],["data-id","distributionChannel","textField","name","valueField","id","formControlName","distributionChannel","placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i",1,"!w-full","!max-w-none",3,"status","ngClass","data","allowSearch"],["cfLabel","",1,"text-heading-sm","text-neutral-black","flex","gap-x-2","items-center"],["icon","window","cfHeadIcon","","size","small"],[1,"text-espressive-sm"],[1,"flex","border","border-[#CCCCCC]","justify-between","items-center","rounded","mt-2","mb-2","cursor-pointer",3,"click"],["id","faresgroup",1,"flex","flex-wrap","p-2","gap-2","max-h-[7em]","overflow-y-auto"],["class","text-neutral-gray-4 text-body-md-short",4,"ngIf"],[4,"ngFor","ngForOf"],["icon","chevron_down","size","small",1,"p-2","cursor-pointer"],["class","text-body-sm mt-1.5 empty:!m-0 text-secondary-6-5",4,"ngIf"],[1,"text-neutral-gray-4","text-body-md-short"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1"],["icon","close","size","small",1,"px-2","float-right","text-[#999999]",3,"click"],["class","border border-neutral-gray-1 bg-[#F2F2F2] text-espressive-sm p-1 flex items-center",4,"ngIf"],[1,"border","border-neutral-gray-1","bg-[#F2F2F2]","text-espressive-sm","p-1","flex","items-center"],[1,"text-body-sm","mt-1.5","empty:!m-0","text-secondary-6-5"],["cfLabel","",1,"text-body-md-short","text-black","ml-4",3,"CfRequired"],[1,"grid","grid-cols-2","gap-x-5","gap-y-3","md:grid-cols-1"],["formArrayName","specifyPriceList"],[1,"w-full","h-10","flex","justify-between","border","border-neutral-gray-2","rounded","!col-span-2","items-center",3,"formGroupName"],[1,"w-[120px]","shrink-0","flex","gap-x-2","border-r","border-neutral-gray-2","py-2","px-3"],[1,"h-5","w-10","object-contain",3,"src"],[1,"text-body-md"],["size","medium","formControlName","price",1,"pl-4",3,"placeholder","negative","min","click"],[1,"text-body-md-short","px-3","py-2"],[1,"flex","flex-col","gap-y-6","px-6","pt-6"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","text-heading-sm","text-neutral-black","gap-x-2"],[1,"border","border-dashed","border-[#ccc]","rounded-lg","p-4"],[1,"w-full","h-[1px]","bg-neutral-gray-1","mb-2"],[1,"flex","justify-items-start","mt-2","py-2"],[1,"flex","items-center","gap-x-[4px]","w-[40%]"],[1,"w-[60%]","text-body-md","text-neutral-black"],[1,"flex","justify-items-start","py-2"],[1,"flex","items-start","gap-x-[4px]","w-[40%]"],[1,"text-body-md","py-2"],[1,"flex","flex-wrap","w-[60%]","gap-2"],["class","bg-neutral-gray-1 text-express-md p-2",4,"ngFor","ngForOf"],[1,"w-[60%]","text-express-md"],[1,"w-[60%]"],["class","text-express-md",4,"ngIf"],["class","w-full flex flex-wrap gap-2",4,"ngIf"],[1,"mb-4","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"mb-4","flex","items-center","gap-x-2","text-body-md-short"],[1,"text-express-md"],["icon","document_check","size","small"],[1,"text-secondary-3-4"],[1,"bg-neutral-gray-1","text-express-md","p-2"],["class","text-body-md text-neutral-black w-full",4,"ngIf"],[1,"text-body-md","text-neutral-black","w-full"],[1,"w-6","h-6","object-contain",3,"src"],[1,"w-full","flex","flex-wrap","gap-2"],[1,"flex","flex-wrap","ml-6","gap-2"],[1,"uppercase"],["class","flex flex-wrap gap-2",3,"ngClass",4,"ngIf"],[1,"flex","flex-wrap","gap-2",3,"ngClass"],[1,"border","border-neutral-gray-5","rounded","text-espressive-sm","p-1"],["class","border border-neutral-gray-1 rounded bg-[#F2F2F2] text-espressive-sm p-1",4,"ngIf"],[1,"border","border-neutral-gray-1","rounded","bg-[#F2F2F2]","text-espressive-sm","p-1"],[1,"p-6"],[1,"flex","justify-end","gap-x-2"],["cf-button","","size","medium","type","secondary","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"disabled","click",4,"ngIf"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","type","secondary",1,"justify-center",3,"click"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"disabled","click"],["icon","circle_check","size","small",1,"ml-2.5"],["icon","chevron_left","size","small",1,"mr-2.5"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"cf-icon",3),e.NdJ("click",function(){return n.close()}),e.qZA()(),e.YNc(5,Da,3,2,"div",4),e.YNc(6,wa,6,4,"div",5),e.YNc(7,Oa,4,0,"div",6),e.qZA(),e.YNc(8,Na,1,0,"cf-spinner",6)),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(2),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isSpinning))},dependencies:[d.ez,d.mk,d.sg,d.O5,d.JJ,d.uU,l.AxE,l.Sm8,P.IA,Ye.I,B.q,T.N8,T.Xq,V.q,le.C,u.u5,u._Y,u.JJ,u.JL,u.UX,u.sg,u.u,u.x0,u.CE,b.j$,b.lt,O.DW,P.AS,Z.OR],encapsulation:2}),i})();var Ma=h(77492);const Pa=function(i,a){return{"border-b-4 border-neutral-gray-4":i,"!pl-5":a}},Ja=function(i){return{"text-neutral-gray-6":i}},Ba=function(i){return{"!bg-neutral-gray-6 text-express-sm":i}};function Ha(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33,34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.MAs(2),s=e.oxw();return e.KtG(s.onChangeTab(r,c))}),e.TgZ(3,"div",35),e._uU(4),e.TgZ(5,"cf-label",36),e._uU(6),e.qZA()()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,Pa,t.active,!n)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Ja,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,Ba,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}const ye=function(){return[]};function La(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(3,"cf-select",23),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.ownerId=o)})("selectedChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFilterChange())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,ye))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function Qa(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"hunt-ticket-advanced-item",38),e.NdJ("actionChange",function(o){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onChange(o,c))}),e.qZA(),e.BQk()}if(2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("pnrOrderData",t)("bookingHunterType",n.TYPE_ORDER.HUNT_NEW_TICKET_TET)}}function Ya(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("scrolled",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onScrollDown())}),e.YNc(1,Qa,2,2,"ng-container",11),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listPnrOrder)}}function Ga(i,a){1&i&&(e.TgZ(0,"div")(1,"div",40)(2,"div"),e._UZ(3,"img",41),e.qZA(),e.TgZ(4,"div",42)(5,"div",43),e._uU(6,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(7,"div",44)(8,"div"),e._uU(9,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin t\xecm ki\u1ebfm."),e.qZA()()()()())}function Ra(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onMoveToHuntTicketAdvancedAdd())}),e._UZ(1,"cf-icon",49),e.TgZ(2,"span"),e._uU(3,"T\u1ea1o m\u1edbi ngay"),e.qZA()()}}function ja(i,a){if(1&i&&(e.TgZ(0,"div",40)(1,"div"),e._UZ(2,"img",45),e.qZA(),e.TgZ(3,"div",46)(4,"div",43),e._uU(5,"Ch\u01b0a c\xf3 y\xeau c\u1ea7u s\u0103n v\xe9"),e.qZA(),e.TgZ(6,"div",44),e._uU(7," T\u1ea1o y\xeau c\u1ea7u s\u0103n v\xe9 gi\xfap b\u1ea1n t\u1ef1 \u0111\u1ed9ng canh v\xe0 gi\u1eef ch\u1ed7 c\xe1c chuy\u1ebfn bay theo y\xeau c\u1ea7u m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng nh\u1ea5t! "),e.qZA()(),e.YNc(8,Ra,4,0,"button",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.huntBookingFlag)}}function Va(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ga,12,0,"div",31),e.YNc(2,ja,9,1,"div",39),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isEmptyOrder),e.xp6(1),e.Q6J("ngIf",t.isEmptyOrder)}}function za(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",50)(2,"ticket-item-skeleton",50)(3,"ticket-item-skeleton",50),e.qZA())}function Ka(i,a){1&i&&e._UZ(0,"cf-spinner")}function $a(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"cf-select",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.filterData.ownerId=o)}),e.TgZ(1,"label",56)(2,"span"),e._uU(3,"Thu\u1ed9c \u0111\u1ea1i l\xfd"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Q6J("status","default")("data",t.agentOptions||e.DdM(5,ye))("placeholder","")("allowSearch",!0)("ngModel",t.filterData.ownerId)}}function Xa(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",52)(2,"cf-input-group",53),e._UZ(3,"cf-icon",14),e.TgZ(4,"input",15,16),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.searchText=o)}),e.qZA()(),e.YNc(6,$a,4,6,"cf-select",54),e.TgZ(7,"cf-select",55),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.airline=o)}),e.TgZ(8,"label",56)(9,"span"),e._uU(10,"H\xe3ng bay"),e.qZA()()(),e.TgZ(11,"cf-select",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.filterData.sortByType=o)}),e.TgZ(12,"label",56)(13,"span"),e._uU(14,"S\u1eafp x\u1ebfp"),e.qZA()()()(),e.TgZ(15,"div")(16,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchHuntLowFare())}),e._UZ(17,"cf-icon",59),e.TgZ(18,"div"),e._uU(19,"T\xecm ki\u1ebfm"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.filterData.searchText),e.xp6(2),e.Q6J("ngIf",t.viewListAgentForMonitorHuntFare),e.xp6(1),e.Q6J("status","default")("data",t.airlineOptions)("allowSearch",!1)("ngModel",t.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",t.orderbyOptions||e.DdM(11,ye))("placeholder","")("allowSearch",!1)("ngModel",t.filterData.sortByType)}}let Wa=(()=>{class i{constructor(t,n,o,r,c,s,p,v,g,m,x){this._locationDataService=n,this._permissionService=o,this._modal=r,this._router=c,this._ticketLowFareService=s,this._toastService=p,this._mobileDetectService=v,this._eventLogService=g,this._bottomSheetService=m,this._huntTicketAdvancedBindingSvc=x,this.isSpinner=!1,this.STATUS_ORDER=I.b,this.tabSelected="ALL",this.listTab=[{value:"ALL",text:"T\u1ea5t c\u1ea3",counter:0,active:!0},{value:I.b.IN_PROCESS,text:"\u0110ang ho\u1ea1t \u0111\u1ed9ng",counter:0,active:!1},{value:I.b.CANCEL,text:"\u0110\xe3 k\u1ebft th\xfac",counter:0,active:!1}],this.orderbyOptions=[{value:"TIME_UPDATE",text:"Ng\xe0y c\u1eadp nh\u1eadt"},{value:"TIME_CREATE",text:"Ng\xe0y y\xeau c\u1ea7u"},{value:"TIME_EXPIRE",text:"H\u1ea1n s\u0103n v\xe9"},{value:"AIRLINE",text:"H\xe3ng bay"},{value:"PNR",text:"M\xe3 \u0111\u1eb7t ch\u1ed7"}],this.airlineOptions=[{value:"ALL",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"VietJet Air"},{value:"QH",text:"Bamboo Airways"}],this.agentOptions=[{value:"",text:"T\u1ea5t c\u1ea3"}],this.searchValueChanged$=new Ie.x,this.currentTab="ALL",this.filterData={airline:"ALL",sortByType:"TIME_UPDATE",ownerId:"",searchText:"",offset:1,limit:10},this.listPnrOrder=[],this.viewListAgentForMonitorHuntFare=this._permissionService.hasPermission(K.or.ViewListAgentForMonitorHuntFare),this.TYPE_ORDER=de.G,this.isSkeleton=!0,this.isEmptyOrder=!1,this.isEmptyResult=!1,this.totalItem=0,this.huntBookingFlag=this._permissionService.hasPermission(K.or.CanMonitorHuntFareTicket),this.unsubscribe$=new Ie.x,this.searchHuntLowFareResult$=new Ie.x,this.availableSlotData={available:!1,type:de.G.HUNT_NEW_TICKET_TET,amount:0,currency:"VND"},t.registerIcons([l.TM4,l.oFb,l.xbi,l.D7,l.SK7]),this._eventLogService.captureOpenManageHuntFare()}ngOnInit(){this.viewListAgentForMonitorHuntFare&&this.getListAgentFilter(),this.onChangeTab(this.listTab[1]),this.searchHuntLowFareResult$.pipe((0,Qr.w)(t=>this._ticketLowFareService.getListPnrOrder(t).pipe((0,k.x)(()=>this.isSkeleton=!1))),(0,Yr.R)(this.unsubscribe$)).subscribe({next:t=>{if("OK"===t.status){1===this.filterData.offset&&(this.listPnrOrder=[]);const n=this.listTab.find(r=>r.value===this.currentTab);n&&("ALL"===(null==n?void 0:n.value)?this.listTab=[...this.listTab.map(r=>Object.assign(Object.assign({},r),{counter:"ALL"===r.value?t.data.total:r.value===I.b.IN_PROCESS?t.data.listOrder.filter(c=>[I.b.CREATE,I.b.IN_PROCESS,I.b.IN_PROCESS_PRICE_UP].includes(c.state)).length:t.data.listOrder.filter(c=>[I.b.CANCEL,I.b.EXPIRED].includes(c.state)).length}))]:n.counter=t.data.total);const o=t.data.listOrder.map(r=>{var c,s,p,v,g,m,x;const y=r.ticketInfo.passengers.find(A=>"ADT"===A.type.toUpperCase()),E=y?`${y.lastName} ${y.firstName}`:"";return{orderId:r.orderId,code:r.code,state:r.state,monitorType:r.monitorType,startPoint:r.ticketInfo.journeys[0].startPoint,rangeDateTime:r.ticketInfo.journeys[0].rangeDateTime,startPointName:this._locationDataService.getCityNameByCode(r.ticketInfo.journeys[0].startPoint),endPoint:r.ticketInfo.journeys[0].endPoint,endPointName:this._locationDataService.getCityNameByCode(r.ticketInfo.journeys[0].endPoint),departTime:r.ticketInfo.journeys[0].departTime?C(r.ticketInfo.journeys[0].departTime).format("DD/MM/YYYY"):"",ownerName:(null===(c=r.ownerInfo)||void 0===c?void 0:c.name)||"",timeCreated:r.orderInfo.timeCreate?C(r.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpired:r.orderInfo.timeExpire?C(r.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdated:r.orderInfo.timeUpdate?C(r.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",targetPrice:(null===(s=r.orderInfo.priceMonitors[0])||void 0===s?void 0:s.targetPrice)||0,airline:r.ticketInfo.airline?r.ticketInfo.airline:"B\u1ea5t k\xec",canUpdate:r.canUpdate,countOfPax:[],representPax:{name:E,remainingPax:r.ticketInfo.passengers.length-1},fareInfo:{airline:(null===(p=r.fareInfo)||void 0===p?void 0:p.airline)||"",detectedPnr:(null===(v=r.fareInfo)||void 0===v?void 0:v.detectedPnr)||""},availableSlotInfo:{amountPerPax:r.availableSlotInfo.amountPerPax||0,currency:r.availableSlotInfo.currency||"",free:r.availableSlotInfo.free,percent:r.availableSlotInfo.percent||0,type:r.availableSlotInfo.type},userAction:(null===(g=r.userActionInfo)||void 0===g?void 0:g.name)||"",rangeTimeStr:(null===(x=null===(m=r.ticketInfo.journeys[0].rangeTime)||void 0===m?void 0:m.map(A=>`${A.fromDate}-${A.toDate}`))||void 0===x?void 0:x.join(", "))||""}})||[];this.listPnrOrder=[...this.listPnrOrder,...o],this.totalItem=t.data.total,this.listPnrOrder.length?(this.isEmptyResult=!1,this.isEmptyOrder=!1):(this.isEmptyResult=!0,this.isEmptyOrder=t.data.empty)}else this.listPnrOrder=[]},error:()=>{this.listPnrOrder=[]}}),this.searchHuntLowFare(),this.searchValueChanged$.pipe((0,Gr.b)(1e3)).subscribe(()=>{this.isEmptyResult=!0,this.searchHuntLowFare()})}onFilterChange(){this.isEmptyResult=!0,this.filterData.offset=1,this.searchHuntLowFare()}searchHuntLowFare(){this._mobileDetectService.isMobile()&&this.btsSearchMobile&&this.btsSearchMobile.dismiss(),this.isSkeleton=!0;const t=this.getReqSearch();this.searchHuntLowFareResult$.next(t)}getReqSearch(){let t={getAllState:!1,listState:[],searchText:this.filterData.searchText,airline:this.filterData.airline,sortByType:this.filterData.sortByType,ownerId:this.filterData.ownerId||"",pageOffset:this.filterData.offset,pageSize:this.filterData.limit,type:de.G.HUNT_NEW_TICKET_TET};switch(this.currentTab){case I.b.IN_PROCESS:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[I.b.CREATE,I.b.IN_PROCESS,I.b.IN_PROCESS_PRICE_UP]});break;case I.b.COMPLETED:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[I.b.COMPLETED]});break;case I.b.CANCEL:t=Object.assign(Object.assign({},t),{getAllState:!1,listState:[I.b.CANCEL,I.b.EXPIRED]});break;default:t=Object.assign(Object.assign({},t),{getAllState:!0,listState:[]})}return t}onMoveToHuntTicketAdvancedAdd(){this._router.navigate(["admin/hunt-ticket-advanced-add"])}getListAgentFilter(){this._ticketLowFareService.getAgentFilterOrder().subscribe({next:t=>{var n;if("OK"===t.status){const o=(null===(n=t.data)||void 0===n?void 0:n.map(r=>({value:r.id,text:r.username})))||[];this.agentOptions=[...this.agentOptions,...o]}}})}onChangeTab(t,n){t.value!==this.currentTab&&(n&&n.scrollIntoView({behavior:"smooth",inline:"center"}),this.listPnrOrder=[],this.filterData.offset=1,this.listTab.forEach(o=>o.active=!1),t.active=!0,this.currentTab=t.value,this.searchHuntLowFare())}onScrollDown(){this.filterData.offset*this.filterData.limit<this.totalItem&&(this.filterData.offset+=1,this.searchHuntLowFare())}onChange(t,n){switch(t){case"DETAIL":this.onShowBookingHunterDetail(n.orderId);break;case"EDIT":this.onEditBookingHunter(n.orderId);break;case"CANCEL":this.onCancelPnrOrder(n.orderId,n.code);break;case"BOOKING_DETAIL":this.onBookingDetail(n.fareInfo.airline,n.fareInfo.detectedPnr);break;case"CREATE_NEW":this._huntTicketAdvancedBindingSvc.setOrderId(n.orderId),this._router.navigate(["admin/hunt-ticket-advanced-add"])}}onBookingDetail(t,n){this._router.navigate([`admin/booking-detail/${t}/${n}`])}onShowBookingHunterDetail(t,n=!1,o=!1){this._eventLogService.captureOpenDetailHuntFare({source:0}),this._router.navigate([`admin/hunt-ticket-advanced-detail/${t}`],{state:{isUpdated:n,isUpdatedFail:o}})}onEditBookingHunter(t){if(this._mobileDetectService.isMobile()){const n=this._bottomSheetService.open(Ce,{containerFullHeigh:!0,headerTitle:"Ch\u1ec9nh s\u1eeda y\xeau c\u1ea7u s\u0103n v\xe9",leftButtonIcon:"",rightButtonIcon:"close",data:{orderId:t}});n.containerInstance._rightButtonClick.subscribe(()=>{n.dismiss()}),n.afterDismissed().subscribe(o=>{"OK"===o&&this.onShowBookingHunterDetail(t,!0,!1),"ERROR"===o&&this.onShowBookingHunterDetail(t,!1,!0)})}else this._modal.open(Ce,{orderId:t}).afterClosed$.subscribe({next:o=>{"OK"===o.data&&(this.onShowBookingHunterDetail(t,!0,!1),this.listPnrOrder.forEach(r=>{r.orderId===t&&(r.canUpdate=o.data.canUpdate)})),"ERROR"===o.data&&this.onShowBookingHunterDetail(t,!1,!0)}})}onCancelPnrOrder(t,n){this._eventLogService.captureCancelHuntFare({source:0}),this._mobileDetectService.isMobile()?(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,k.x)(()=>this.isSpinner=!1)).subscribe({next:o=>{"OK"===o.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchHuntLowFare()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}})):this._modal.open(Z.V0,{title:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${n}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(t).pipe((0,k.x)(()=>this.isSpinner=!1)).subscribe({next:c=>{"OK"===c.status?(this._toastService.add({severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} th\xe0nh c\xf4ng.`,sticky:!1}),this.searchHuntLowFare()):this._toastService.add({severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${n} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}}))}})}openBottomSheet(t){const n=this._bottomSheetService.open(t,{headerTitle:"",rightButtonIcon:"",rightButtonIconClass:"text-neutral-gray-4"});n.containerInstance._rightButtonClick.subscribe(o=>{n.dismiss()})}openSearchBts(t){this.btsSearchMobile=this._bottomSheetService.open(t,{headerTitle:"T\xecm ki\u1ebfm",containerFullHeigh:!0,rightButtonIcon:"",leftButtonIcon:"close",leftButtonIconClass:"text-neutral-gray-4",restoreFocus:!1}),this.btsSearchMobile.containerInstance._leftButtonClick.subscribe(n=>{this.btsSearchMobile.dismiss()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(R._),e.Y36(K.$A),e.Y36(S.oE),e.Y36(N.F0),e.Y36(ae.s),e.Y36(H.BX),e.Y36(De.L),e.Y36(Ma.x),e.Y36(O.a2),e.Y36(Fe))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-list"]],standalone:!0,features:[e.jDz],decls:46,vars:19,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","justify-between","gap-x-6","md:flex-col","md:gap-y-4"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4","md:text-body-sm"],[1,"flex","justify-between","items-center","gap-x-6"],["cf-button","","size","medium","color","primary-1",1,"justify-center","ml-2","md:w-full",3,"click"],["icon","chevron_right","size","small",1,"ml-2.5"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"!w-[350px]","md:hidden"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange"],["tableSearchInput",""],[1,"hidden","md:block","md:!w-full","md:!max-w-full"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo PNR, s\xe2n bay, m\xe3 y\xeau c\u1ea7u","autocomplete","off",3,"ngModel","ngModelChange","focus"],[1,"flex","gap-x-4","items-center","md:hidden"],["class","flex items-center gap-x-2.5",4,"ngIf"],[1,"flex","items-center","gap-x-2.5"],[1,"text-express-md","whitespace-nowrap"],["textField","text","valueField","value",1,"!max-w-none","w-[160px]",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange","selectedChange"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["class","flex flex-col gap-y-[30px] md:gap-y-4","infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled",4,"ngIf"],[4,"ngIf"],["bottomSheetSearch",""],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],["tabElement",""],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback","scrolled"],[3,"pnrOrderData","bookingHunterType","actionChange"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-[120px] flex flex-col justify-center\n              items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-[120px]","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-heading-md"],[1,"text-center","text-body-md-short"],["src","assets/images/add-task.svg","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","gap-y-2","justify-between","items-center"],["cf-button","","size","medium","color","primary-1","class","justify-center",3,"click",4,"ngIf"],["cf-button","","size","medium","color","primary-1",1,"justify-center",3,"click"],["icon","plus","size","small",1,"mr-2.5"],[1,"rounded","border","border-neutral-gray-1"],[1,"p-4","w-full","flex","flex-col","justify-between"],[1,"flex","flex-col","gap-y-4"],[1,"!max-w-none","w-full"],["class","!max-w-none w-full","textField","text","valueField","value",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange",4,"ngIf"],["textField","text","valueField","value","size","medium","placeholder","",1,"!max-w-none","w-full",3,"status","data","allowSearch","ngModel","ngModelChange"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],["textField","text","valueField","value",1,"!max-w-none","w-full",3,"status","data","placeholder","allowSearch","ngModel","ngModelChange"],["cf-button","",1,"w-full","justify-center","gap-x-2",3,"click"],["icon","search","size","small"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"S\u0103n v\xe9 T\u1ebft 2025"),e.qZA(),e.TgZ(6,"div",5),e._uU(7," M\u1ed9t c\xe1ch \u0111\u1ec3 \u0111\u1eb7t ch\u1ed7 t\u1ef1 \u0111\u1ed9ng ng\xe0y l\u1ec5! "),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return n.onMoveToHuntTicketAdvancedAdd()}),e.TgZ(10,"span"),e._uU(11,"T\u1ea1o s\u0103n v\xe9"),e.qZA(),e._UZ(12,"cf-icon",8),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10),e.YNc(15,Ha,7,13,"ng-container",11),e.qZA(),e.TgZ(16,"div",12)(17,"cf-input-group",13),e._UZ(18,"cf-icon",14),e.TgZ(19,"input",15,16),e.NdJ("ngModelChange",function(c){return n.filterData.searchText=c})("ngModelChange",function(c){return n.searchValueChanged$.next(c)}),e.qZA()(),e.TgZ(21,"cf-input-group",17),e._UZ(22,"cf-icon",14),e.TgZ(23,"input",18,16),e.NdJ("ngModelChange",function(c){return n.filterData.searchText=c})("focus",function(){e.CHM(o);const c=e.MAs(45);return e.KtG(n.openSearchBts(c))}),e.qZA()(),e.TgZ(25,"div",19),e.YNc(26,La,4,6,"div",20),e.TgZ(27,"div",21)(28,"div",22),e._uU(29,"H\xe3ng bay:"),e.qZA(),e.TgZ(30,"cf-select",23),e.NdJ("ngModelChange",function(c){return n.filterData.airline=c})("selectedChange",function(){return n.onFilterChange()}),e.qZA()(),e.TgZ(31,"div",21)(32,"div",22),e._uU(33,"S\u1eafp x\u1ebfp:"),e.qZA(),e.TgZ(34,"cf-select",24),e.NdJ("ngModelChange",function(c){return n.filterData.sortByType=c})("selectedChange",function(){return n.onFilterChange()}),e.qZA()()()()()(),e.TgZ(35,"div",25)(36,"div",26)(37,"div",27)(38,"div",28)(39,"div",29),e.YNc(40,Ya,2,7,"div",30),e.YNc(41,Va,3,2,"div",31),e.qZA(),e.YNc(42,za,4,0,"div",31),e.qZA()()()()(),e.YNc(43,Ka,1,0,"cf-spinner",31),e.YNc(44,Xa,20,12,"ng-template",null,32,e.W1O)}2&t&&(e.xp6(15),e.Q6J("ngForOf",n.listTab),e.xp6(4),e.Q6J("ngModel",n.filterData.searchText),e.xp6(4),e.Q6J("ngModel",n.filterData.searchText),e.xp6(3),e.Q6J("ngIf",n.viewListAgentForMonitorHuntFare),e.xp6(4),e.Q6J("status","default")("data",n.airlineOptions)("placeholder","")("allowSearch",!1)("ngModel",n.filterData.airline),e.xp6(4),e.Q6J("status","default")("data",n.orderbyOptions||e.DdM(18,ye))("placeholder","")("allowSearch",!1)("ngModel",n.filterData.sortByType),e.xp6(6),e.Q6J("ngIf",!n.isEmptyResult&&n.listPnrOrder.length),e.xp6(1),e.Q6J("ngIf",n.isEmptyResult&&!n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isSpinner))},dependencies:[d.ez,d.mk,d.sg,d.O5,u.u5,u.Fj,u.JJ,u.On,T.N8,T.Xq,u.UX,b.j$,b.ND,b.BN,l.AxE,l.Sm8,B.q,z.Rq,z.Ry,Ee.b,P.IA,Z.OR,Lr],encapsulation:2}),i})();const ec=function(i,a){return{"border-b-4 border-neutral-gray-4":i,"!pl-5":a}},tc=function(i){return{"text-neutral-gray-6":i}},nc=function(i){return{"!bg-neutral-gray-6 text-express-sm":i}};function ic(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectedTab(r))}),e.TgZ(2,"div",31),e._uU(3),e.TgZ(4,"cf-label",32),e._uU(5),e.qZA()()(),e.BQk()}if(2&i){const t=a.$implicit,n=a.first;e.xp6(1),e.Q6J("ngClass",e.WLB(6,ec,t.active,!n)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,tc,t.active)),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("color","green")("ngClass",e.VKq(11,nc,t.active)),e.xp6(1),e.hij(" ",t.counter>99?"99+":t.counter," ")}}function oc(i,a){if(1&i&&(e.TgZ(0,"div",50),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" [",t.paymentCode,"]")}}function rc(i,a){if(1&i&&(e.TgZ(0,"cf-label",51),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("color","yellow")("size","small"),e.xp6(1),e.hij(" ",t.stateDisplay," ")}}function ac(i,a){if(1&i&&(e.TgZ(0,"cf-label",51),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("color","red")("size","small"),e.xp6(1),e.hij(" ",t.stateDisplay," ")}}function cc(i,a){if(1&i&&(e.TgZ(0,"cf-label",51),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("color","green")("size","small"),e.xp6(1),e.hij(" ",t.stateDisplay," ")}}function sc(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onConfirm(o))}),e._uU(2," Duy\u1ec7t "),e.qZA(),e.TgZ(3,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onCancelConfirm(o))}),e._uU(4," T\u1eeb ch\u1ed1i "),e.qZA()()}}function lc(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",35)(2,"div",36)(3,"div",37),e.YNc(4,oc,2,1,"div",38),e.TgZ(5,"div",39),e.YNc(6,rc,2,3,"cf-label",40),e.YNc(7,ac,2,3,"cf-label",40),e.YNc(8,cc,2,3,"cf-label",40),e.qZA()(),e.YNc(9,sc,5,0,"div",41),e.qZA(),e.TgZ(10,"div",42)(11,"div",43),e._UZ(12,"cf-icon",44),e.TgZ(13,"div"),e._uU(14),e.qZA(),e._UZ(15,"cf-icon",45),e.TgZ(16,"div"),e._uU(17),e.qZA()(),e.TgZ(18,"div",46)(19,"div",47)(20,"div",48),e._uU(21,"Ng\xe0y bay: "),e.qZA(),e.TgZ(22,"div",49),e._uU(23),e.qZA()(),e.TgZ(24,"div",47)(25,"div",48),e._uU(26,"S\u1ed1 kh\xe1ch: "),e.qZA(),e.TgZ(27,"div",49),e._uU(28),e.qZA()(),e.TgZ(29,"div",47)(30,"div",48),e._uU(31,"H\u1ea1n gi\u1eef ch\u1ed7: "),e.qZA(),e.TgZ(32,"div",49),e._uU(33),e.qZA()(),e.TgZ(34,"div",47)(35,"div",48),e._uU(36,"M\xe3 AG: "),e.qZA(),e.TgZ(37,"div",49),e._uU(38),e.qZA()(),e.TgZ(39,"div",47)(40,"div",48),e._uU(41,"K\xeanh ph\xe2n ph\u1ed1i: "),e.qZA(),e.TgZ(42,"div",49),e._uU(43),e.qZA()(),e.TgZ(44,"div",47)(45,"div",48),e._uU(46,"T\u1ed5ng ti\u1ec1n: "),e.qZA(),e.TgZ(47,"div",49),e._uU(48),e.ALo(49,"number"),e.qZA()(),e.TgZ(50,"div",47)(51,"div",48),e._uU(52,"Th\u1eddi gian \u0111\u1eb7t v\xe9: "),e.qZA(),e.TgZ(53,"div",49),e._uU(54),e.qZA()()()()(),e.BQk()),2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.paymentCode),e.xp6(2),e.Q6J("ngIf","FOR_APPROVAL"===t.state),e.xp6(1),e.Q6J("ngIf","REJECT"===t.state),e.xp6(1),e.Q6J("ngIf","APPROVED"===t.state),e.xp6(1),e.Q6J("ngIf",t.state===n.STATE_PRODUCT_ENUM.FOR_APPROVAL),e.xp6(5),e.AsE("",t.startPoint," (",t.startCode,")"),e.xp6(3),e.AsE("",t.endPoint," (",t.endCode,")"),e.xp6(6),e.Oqu(t.departureDate),e.xp6(5),e.Oqu(t.paxCount),e.xp6(5),e.Oqu(t.timeHoldBooking),e.xp6(5),e.Oqu(t.agentName),e.xp6(5),e.Oqu(t.channel),e.xp6(5),e.Oqu(e.lcZ(49,16,t.totalPayment)),e.xp6(6),e.Oqu(t.timeBooked)}}function uc(i,a){if(1&i&&(e.TgZ(0,"div",33)(1,"div",34),e.YNc(2,lc,55,18,"ng-container",6),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",300)("infiniteScrollContainer",".main-scroll-bar")("scrollWindow",!1)("fromRoot",!0)("alwaysCallback",!0),e.xp6(1),e.Q6J("ngForOf",t.listOfProducts)}}function dc(i,a){1&i&&(e.TgZ(0,"div",55)(1,"div"),e._UZ(2,"img",56),e.qZA(),e.TgZ(3,"div",57)(4,"div",58),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"),e.qZA(),e.TgZ(6,"div",59)(7,"div"),e._uU(8,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin t\xecm ki\u1ebfm."),e.qZA()()()())}function pc(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ticket-item-skeleton",60)(2,"ticket-item-skeleton",60)(3,"ticket-item-skeleton",60),e.qZA())}function fc(i,a){1&i&&e._UZ(0,"cf-spinner")}const Se=function(){return[]};let _c=(()=>{class i{constructor(t,n,o,r,c,s){this._modal=n,this._fb=o,this._ticketLowFareService=r,this._toastService=c,this._locationDataService=s,this.STATE_PRODUCT_ENUM=F,this.airlineOptions=[],this.distributionChannelOptions=[],this.dateRangeStr="",this.listTab=[{value:"",text:"T\u1ea5t c\u1ea3",counter:0,active:!1},{value:F.FOR_APPROVAL,text:"Ch\u01b0a duy\u1ec7t",counter:0,active:!0},{value:F.APPROVED,text:"\u0110\xe3 duy\u1ec7t",counter:0,active:!1},{value:F.REJECT,text:"T\u1eeb ch\u1ed1i",counter:0,active:!1}],this.currentTab=F.FOR_APPROVAL,this.isSkeleton=!1,this.isLoading=!1,this.typeTimeOptions=[],this.listOfProducts=[],this.checkLengthProduct=p=>(null==p?void 0:p.length)>0,t.registerIcons([l.esH]),this.initDateSearch(),this.initListOptions(),this.initSearchForm()}ngOnInit(){this.onSearch()}initListOptions(){this.typeTimeOptions=[{value:"TIME_BOOKING",text:"Th\u1eddi gian \u0111\u1eb7t ch\u1ed7"},{value:"TIME_FLY",text:"Th\u1eddi gian bay"}],this.airlineOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:"VN",text:"Vietnam Airlines"},{value:"VJ",text:"Vietjet Air"},{value:"QH",text:"Bamboo Airways"}],this.distributionChannelOptions=[{value:"",text:"T\u1ea5t c\u1ea3"},{value:w.h.B2B_GMBR,text:"Flychills"},{value:w.h.B2C_GMBR,text:"GMBR"}]}initDateSearch(){this.endDateOfMonth=new Date,this.startDateOfMonth=C(this.endDateOfMonth).subtract(6,"day").toDate();const t=(0,d.p6)(this.startDateOfMonth,"dd/MM/yyyy","vi-VN"),n=(0,d.p6)(this.endDateOfMonth,"dd/MM/yyyy","vi-VN");this.dateRangeStr=t+" - "+n}initSearchForm(){this.searchForm=this._fb.group({airline:[""],distributionChannel:[w.h.B2B_GMBR],fromDate:[this.startDateOfMonth],toDate:[this.endDateOfMonth],searchText:[""],timeFilterType:["TIME_BOOKING"]})}onSearch(){var t;const n=this.searchForm.value,o={airline:(null==n?void 0:n.airline)||"",channelDistribution:null==n?void 0:n.distributionChannel,startDate:null!=n&&n.fromDate?(0,d.p6)(null==n?void 0:n.fromDate,"yyyy-MM-dd","vi-VN"):"",endDate:null!=n&&n.toDate?(0,d.p6)(null==n?void 0:n.toDate,"yyyy-MM-dd","vi-VN"):"",searchText:(null==n?void 0:n.searchText)||"",searchTextType:null,timeFilterType:(null==n?void 0:n.timeFilterType)||null,state:(null===(t=this.listTab.find(r=>r.active))||void 0===t?void 0:t.value)||""};this.isLoading=!0,this._ticketLowFareService.getTicketsPendingApproval(o).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:r=>{var c;"OK"===r.status?this.listOfProducts=(null===(c=r.data)||void 0===c?void 0:c.map(s=>{var p,v,g,m,x;return{departureDate:C(1e3*(null===(p=s.journeyInfos[0])||void 0===p?void 0:p.departureDate)).format("DD/MM/YYYY"),paxCount:s.adtCount+s.chdCount+s.infCount,timeHoldBooking:s.timeHoldBooking?C(s.timeHoldBooking).format("DD/MM/YYYY"):"-",agentName:(null==s?void 0:s.agentName)||"-",channel:this.getChannel(null==s?void 0:s.channel)||"-",totalPayment:(null==s?void 0:s.totalPayment)||0,timeBooked:s.timeBooked?C(1e3*s.timeBooked).format("DD/MM/YYYY"):"-",paymentCode:(null==s?void 0:s.paymentCode)||"-",paymentId:(null==s?void 0:s.paymentId)||"-",startCode:null===(v=s.journeyInfos[0])||void 0===v?void 0:v.startPoint,startPoint:this._locationDataService.getCityNameByCode(null===(g=s.journeyInfos[0])||void 0===g?void 0:g.startPoint),endCode:null===(m=s.journeyInfos[0])||void 0===m?void 0:m.endPoint,endPoint:this._locationDataService.getCityNameByCode(null===(x=s.journeyInfos[0])||void 0===x?void 0:x.endPoint),state:s.state,stateDisplay:this.getState(s.state)}}))||[]:this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra!",sticky:!0})}})}getChannel(t){if(!t)return"";switch(t){case w.h.B2B_GMBR:return"Flychills";case w.h.B2C_GMBR:return"GMBR";default:return""}}getState(t){switch(t){case F.FOR_APPROVAL:return"Ch\u01b0a duy\u1ec7t";case F.APPROVED:return"\u0110\xe3 duy\u1ec7t";case F.REJECT:return"T\u1eeb ch\u1ed1i";default:return"\u0110ang x\u1eed l\xfd"}}onDateSelection(t,n,o,r){if(n.value||o.value)if(n.value&&!o.value&&t&&t.getTime()>=n.value.getTime()){o.setValue(t),r.close(),this.startDate=n.value;const c=(0,d.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr+=c}else{o.setValue(null),n.setValue(t);const c=(0,d.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}else{n.setValue(t),o.setValue(null);const c=(0,d.p6)(t,"dd/MM/yyyy","vi-VN");this.dateRangeStr=c+" - "}}onSelectedTab(t){t.value!==this.currentTab&&(this.listTab.forEach(n=>n.active=!1),t.active=!0,this.currentTab=t.value,this.onSearch())}onCancelConfirm(t){this._modal.open(Z.V0,{title:"T\u1eeb ch\u1ed1i",body:"T\u1eeb ch\u1ed1i xu\u1ea5t v\xe9 \u0111\u01a1n h\xe0ng n\xe0y?",hasIcon:!1,okText:"T\u1eeb ch\u1ed1i",cancelText:"\u0110\xf3ng"}).afterClosed$.subscribe(o=>{o.data&&this._ticketLowFareService.rejectTicketPending({paymentCode:t.paymentCode,paymentId:t.paymentId}).subscribe({next:c=>{"OK"===c.status?(this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this.onSearch()):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})})}onConfirm(t){this._modal.open(_e,{paymentCode:t.paymentCode,paymentId:t.paymentId}).afterClosed$.subscribe(o=>{o.data&&(console.log(o.data),this.onSearch())})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(S.oE),e.Y36(u.qu),e.Y36(ae.s),e.Y36(H.BX),e.Y36(R._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manage-approve-product"]],standalone:!0,features:[e.jDz],decls:43,vars:40,consts:[[1,"flex","flex-col","h-full","w-full"],[1,"py-4","px-[30px]","flex","flex-col","gap-y-[30px]","md:gap-y-4","bg-neutral-white"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-heading-lg","md:text-heading-sm"],[1,"flex","flex-col","gap-y-5"],[1,"flex","overflow-x-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-4"],["textField","text","valueField","value",1,"!max-w-none","w-[262px]",3,"status","data","placeholder","allowSearch","formControl"],["cfLabel","",1,"text-espressive-sm","text-black","mb-1.5"],[1,"flex"],[1,"w-[200px]",3,"status"],["cfHeadIcon","","icon","calendar","size","small"],["cfLabel",""],["cf-input","","type","text","size","medium","placeholder","Ch\u1ecdn ng\xe0y kh\u1edfi h\xe0nh",1,"py-[7px]",3,"ngModel","click","ngModelChange"],["cfDatepicker","","type","text","outsideDays","hidden",1,"w-0","m-0","bottom-0",3,"secondaryCalendar","displayMonths","rangeSelection","containerWidth","startDate","canReset","fromDate","toDate","dateSelect"],["dateRange","cfDatepicker"],["textField","text","valueField","value",1,"!max-w-none","w-[200px]",3,"status","data","placeholder","allowSearch","formControl"],[1,"w-full"],["cfHeadIcon","","icon","search","size","small",1,"text-neutral-gray-4"],["size","medium","cf-input","","placeholder","T\xecm ki\u1ebfm theo h\xe0nh tr\xecnh","autocomplete","off",3,"formControl"],["cf-button","","size","medium","type","secondary","color","primary-1",1,"justify-center","whitespace-nowrap",3,"click"],[1,"flex-auto","h-full","w-full"],[1,"h-full","pt-8","pb-4","px-[30px]","flex","justify-center"],[1,"w-[1000px]","max-w-[1000px]"],[1,"w-full","h-full"],["class","flex flex-col gap-y-[30px] md:gap-y-4",4,"ngIf"],["class","bg-neutral-white rounded-lg shadow-cf-info-card h-full w-full p-[100px] flex flex-col justify-center items-center gap-y-8 md:px-5 md:py-[80px]",4,"ngIf"],[4,"ngIf"],[1,"py-2.5","pr-5","pl-0","flex","gap-x-2.5","border-b","border-neutral-gray-1","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","whitespace-nowrap","text-heading-md","text-neutral-gray-4","md:text-express-md",3,"ngClass"],[1,"!text-express-xs","!p-1","bg-neutral-gray-4","ml-2",3,"color","ngClass"],[1,"flex","flex-col","gap-y-[30px]","md:gap-y-4"],["infinite-scroll","",1,"flex","flex-col","gap-y-[30px]","md:gap-y-4",3,"infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollContainer","scrollWindow","fromRoot","alwaysCallback"],[1,"rounded-lg","overflow-hidden"],[1,"bg-neutral-gray-3","flex","justify-between","items-center"],[1,"flex","items-center"],["class","text-express-lg text-neutral-gray-6 pl-2",4,"ngIf"],[1,"py-2","px-3"],["type","solid",3,"color","size",4,"ngIf"],["class","flex items-center gap-x-2 py-1.5 px-2.5",4,"ngIf"],[1,"bg-neutral-white","flex","flex-col","gap-y-2","p-3"],[1,"text-express-xl","text-neutral-gray-6","flex","items-center","gap-x-2.5","md:text-express-md"],["icon","plane","size","small"],["icon","arrow_right","size","small"],[1,"flex","justify-between","items-center","md:flex-col","md:items-start","md:gap-y-2","md:flex-1"],[1,"min-w-[100px]","flex","flex-col","justify-between","gap-y-2","md:flex-row","md:gap-x-4"],[1,"text-body-sm","text-neutral-gray-4","md:min-w-[100px]"],[1,"text-express-sm","text-neutral-gray-6"],[1,"text-express-lg","text-neutral-gray-6","pl-2"],["type","solid",3,"color","size"],[1,"flex","items-center","gap-x-2","py-1.5","px-2.5"],["cf-button","","size","small",1,"",3,"click"],["cf-button","","size","small","type","secondary",1,"bg-white",3,"click"],[1,"bg-neutral-white","rounded-lg","shadow-cf-info-card","h-full","w-full","p-[100px]","flex","flex-col","justify-center","items-center","gap-y-8","md:px-5","md:py-[80px]"],["src","assets/images/empty_result.png","alt","empty",1,"w-[160px]","h-160px","object-contain"],[1,"flex","flex-col","justify-between","items-center"],[1,"text-heading-md"],[1,"text-center","text-body-md-short"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Duy\u1ec7t xu\u1ea5t v\xe9"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,ic,6,13,"ng-container",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"cf-select",9)(11,"label",10),e._uU(12," L\u1ecdc theo "),e.qZA()(),e.TgZ(13,"div",11)(14,"cf-input-group",12),e._UZ(15,"cf-icon",13),e.TgZ(16,"label",14),e._uU(17,"Th\u1eddi gian"),e.qZA(),e.TgZ(18,"input",15),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(20);return e.KtG(c.open())})("ngModelChange",function(c){return n.dateRangeStr=c}),e.qZA()(),e.TgZ(19,"input",16,17),e.NdJ("dateSelect",function(c){e.CHM(o);const s=e.MAs(20);return e.KtG(n.onDateSelection(c,n.searchForm.controls.fromDate,n.searchForm.controls.toDate,s))}),e.qZA()(),e.TgZ(21,"cf-select",18)(22,"label",10),e._uU(23," H\xe3ng bay "),e.qZA()(),e.TgZ(24,"cf-select",18)(25,"label",10),e._uU(26," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA()()(),e.TgZ(27,"div",8)(28,"cf-input-group",19),e._UZ(29,"cf-icon",20)(30,"input",21),e.qZA(),e.TgZ(31,"button",22),e.NdJ("click",function(){return n.onSearch()}),e._uU(32," T\xecm ki\u1ebfm "),e.qZA()()()()(),e.TgZ(33,"div",23)(34,"div",24)(35,"div",25)(36,"div",26),e.YNc(37,uc,3,7,"div",27),e.ALo(38,"mapper"),e.YNc(39,dc,11,0,"div",28),e.ALo(40,"mapper"),e.YNc(41,pc,4,0,"div",29),e.qZA()()()()(),e.YNc(42,fc,1,0,"cf-spinner",29)}2&t&&(e.xp6(7),e.Q6J("ngForOf",n.listTab),e.xp6(3),e.Q6J("status","default")("data",n.typeTimeOptions||e.DdM(37,Se))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.timeFilterType),e.xp6(4),e.Q6J("status","default"),e.xp6(4),e.Q6J("ngModel",n.dateRangeStr),e.xp6(1),e.Q6J("secondaryCalendar","lunar")("displayMonths",2)("rangeSelection",!0)("containerWidth",600)("startDate",n.startDate)("canReset",!1)("fromDate",n.searchForm.controls.fromDate.value)("toDate",n.searchForm.controls.toDate.value),e.xp6(2),e.Q6J("status","default")("data",n.airlineOptions||e.DdM(38,Se))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.airline),e.xp6(3),e.Q6J("status","default")("data",n.distributionChannelOptions||e.DdM(39,Se))("placeholder","")("allowSearch",!0)("formControl",n.searchForm.controls.distributionChannel),e.xp6(6),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(7),e.Q6J("ngIf",!n.isSkeleton&&e.xi3(38,31,n.listOfProducts,n.checkLengthProduct)),e.xp6(2),e.Q6J("ngIf",!n.isSkeleton&&!e.xi3(40,34,n.listOfProducts,n.checkLengthProduct)),e.xp6(2),e.Q6J("ngIf",n.isSkeleton),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.mk,d.sg,d.O5,d.JJ,Ee.b,B.q,u.u5,u.Fj,u.JJ,u.On,u.UX,u.oH,T.N8,T.Xq,b.j$,b.ND,b.BN,l.AxE,l.Sm8,P.IA,z.Rq,z.Ry,L.Cs,V.q,Z.OR],encapsulation:2}),i})();function mc(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",63),e._uU(2),e.qZA(),e.TgZ(3,"td",64),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",65),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",66)(12,"span"),e._uU(13),e.ALo(14,"number"),e.qZA()()()),2&i){const t=a.$implicit;e.xp6(2),e.hij("",t.name," "),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(e.lcZ(7,5,t.base)),e.xp6(3),e.Oqu(e.lcZ(10,7,t.tax)),e.xp6(4),e.Oqu(e.lcZ(14,9,t.total))}}function gc(i,a){1&i&&e._UZ(0,"cf-hint",67),2&i&&e.Q6J("hint","K\xeanh ph\xe2n ph\u1ed1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}const hc=function(){return[]};function vc(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div")(2,"div",11),e._UZ(3,"div",12),e.TgZ(4,"div",13),e._uU(5,"Chi ti\u1ebft \u0111\u1eb7t ch\u1ed7"),e.qZA()(),e.TgZ(6,"div",14)(7,"div",15)(8,"div",16)(9,"div"),e._UZ(10,"img",17),e.qZA(),e.TgZ(11,"div",18)(12,"span",19),e._uU(13),e.qZA(),e.TgZ(14,"span",20),e._uU(15),e.qZA()(),e.TgZ(16,"div",21),e._uU(17),e.qZA()(),e._UZ(18,"div",22),e.TgZ(19,"div",23)(20,"div",24)(21,"span"),e._uU(22),e.qZA(),e._UZ(23,"cf-icon",25),e.TgZ(24,"span"),e._uU(25),e.qZA()(),e.TgZ(26,"div",26),e._UZ(27,"span"),e.TgZ(28,"span",27),e._uU(29),e.ALo(30,"date"),e.qZA()()(),e._UZ(31,"div",22),e.TgZ(32,"div",28)(33,"div",29),e._uU(34,"M\xe3 \u0111\u1eb7t ch\u1ed7"),e.qZA(),e.TgZ(35,"div",30),e._uU(36),e.qZA()(),e._UZ(37,"div",22),e.TgZ(38,"div",28)(39,"div",29),e._uU(40,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(41,"div",31),e._UZ(42,"cf-icon",32),e.TgZ(43,"div",33)(44,"label",34),e._uU(45),e.qZA()()()()()(),e.TgZ(46,"div",35)(47,"div",36),e._UZ(48,"cf-icon",37),e._uU(49," Chi ti\u1ebft chi ph\xed "),e.qZA(),e.TgZ(50,"div",38)(51,"div")(52,"table",39)(53,"thead")(54,"tr",40)(55,"th",41),e._uU(56,"H\xe0nh kh\xe1ch"),e.qZA(),e.TgZ(57,"th",42),e._uU(58,"Lo\u1ea1i kh\xe1ch"),e.qZA(),e.TgZ(59,"th",43),e._uU(60,"Gi\xe1 v\xe9"),e.qZA(),e.TgZ(61,"th",43),e._uU(62,"Thu\u1ebf ph\xed"),e.qZA(),e.TgZ(63,"th",44),e._uU(64,"T\u1ed5ng gi\xe1"),e.qZA()()(),e.TgZ(65,"tbody"),e.YNc(66,mc,15,11,"tr",45),e.qZA()()(),e.TgZ(67,"div",46)(68,"div",47)(69,"div",48),e._uU(70,"T\u1ed5ng gi\xe1 g\u1ed1c"),e.qZA(),e.TgZ(71,"div",49)(72,"span"),e._uU(73),e.ALo(74,"number"),e.qZA()()(),e.TgZ(75,"div",47)(76,"div",48),e._uU(77,"D\u1ecbch v\u1ee5 c\u1ed9ng th\xeam"),e.qZA(),e.TgZ(78,"div",49),e._uU(79),e.ALo(80,"number"),e.qZA()(),e.TgZ(81,"div",47)(82,"div",48),e._uU(83,"Ph\xed d\u1ecbch v\u1ee5"),e.qZA(),e.TgZ(84,"div",49),e._uU(85),e.ALo(86,"number"),e.qZA()()(),e.TgZ(87,"div",50)(88,"div",51),e._uU(89,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(90,"div",52)(91,"span"),e._uU(92),e.ALo(93,"number"),e.qZA()()()()()(),e.TgZ(94,"div")(95,"div",11),e._UZ(96,"div",12),e.TgZ(97,"div",13),e._uU(98,"Th\xf4ng tin c\u01a1 b\u1ea3n"),e.qZA()(),e.TgZ(99,"div",53)(100,"div",54)(101,"div",55),e._uU(102,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(103,"div",56),e._uU(104),e.qZA()(),e.TgZ(105,"div",54)(106,"div",55),e._uU(107,"Ng\u01b0\u1eddi \u0111\u1eb7t"),e.qZA(),e.TgZ(108,"div",56),e._uU(109),e.qZA()(),e.TgZ(110,"cf-multi-select",57),e.NdJ("valueChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeChannel(o))}),e.TgZ(111,"label",58),e._uU(112," K\xeanh ph\xe2n ph\u1ed1i "),e.qZA(),e.YNc(113,gc,1,1,"cf-hint",59),e.qZA()()(),e.TgZ(114,"div",60)(115,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.gotoManage())}),e._uU(116," H\u1ee7y "),e.qZA(),e.TgZ(117,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateProduct())}),e._uU(118," Ch\u1ec9nh s\u1eeda "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("src",t.bookingDetail.airlineLogo,e.LSH),e.xp6(3),e.hij("",t.bookingDetail.airline," -\xa0"),e.xp6(2),e.Oqu(t.bookingDetail.airlineName),e.xp6(2),e.hij(" H\u1ec7 th\u1ed1ng: ",t.bookingDetail.airlineSystem," "),e.xp6(5),e.Oqu(t.bookingDetail.startPoint),e.xp6(3),e.Oqu(t.bookingDetail.endPoint),e.xp6(4),e.lnq(" ",t.bookingDetail.startPoint," - ",t.bookingDetail.endPoint," (",e.xi3(30,27,t.bookingDetail.startTime,"HH:mm - dd/MM/yyyy"),") "),e.xp6(7),e.Oqu(t.bookingDetail.bookingCode),e.xp6(9),e.Oqu(t.bookingDetail.statusText),e.xp6(21),e.Q6J("ngForOf",t.priceDetail.passengers),e.xp6(7),e.hij(" ",e.lcZ(74,30,t.priceDetail.totalBasePrice)," \u0111"),e.xp6(6),e.hij("",e.lcZ(80,32,t.priceDetail.totalAddonService)," \u0111"),e.xp6(6),e.hij(" ",e.lcZ(86,34,t.priceDetail.totalServiceFee)," \u0111 "),e.xp6(7),e.hij("",e.lcZ(93,36,t.priceDetail.totalPrice)," \u0111"),e.xp6(12),e.hij(" ",t.productDetail.statusDisplay," "),e.xp6(5),e.hij(" ",t.productDetail.sourceDisplay," "),e.xp6(1),e.Q6J("status",t.formGroup.controls.channelDistribution.invalid&&(t.formGroup.controls.channelDistribution.dirty||t.formGroup.controls.channelDistribution.touched)?"error":"default")("status","default")("data",t.channelDistributionOption||e.DdM(38,hc))("allowSearch",!0)("formControl",t.formGroup.controls.channelDistribution)("placeholder","Ch\u1ecdn k\xeanh ph\xe2n ph\u1ed1i")("maxHeight",230),e.xp6(1),e.Q6J("CfRequired",!0),e.xp6(2),e.Q6J("ngIf",(null==t.formGroup.controls.channelDistribution.errors?null:t.formGroup.controls.channelDistribution.errors.required)&&(t.formGroup.controls.channelDistribution.dirty||t.formGroup.controls.channelDistribution.touched))}}function xc(i,a){1&i&&(e.TgZ(0,"div",68),e._UZ(1,"ticket-item-skeleton",69)(2,"ticket-item-skeleton",69)(3,"ticket-item-skeleton",69),e.qZA())}function Tc(i,a){1&i&&e._UZ(0,"cf-spinner")}let Cc=(()=>{class i{constructor(t,n,o,r,c,s){this._fb=t,this._route=n,this._router=o,this._flightDataService=r,this._inventoryService=c,this._toastService=s,this.isLoading=!1,this.isSpinning=!1,this.productId="",this.channelDistributionOption=[{text:"T\u1ea5t c\u1ea3",value:"ALL"},{text:"Flychills",value:"B2B_GMBR"},{text:"GMBR",value:"B2C_GMBR"}],this.productDetail={source:"",sourceDisplay:"",status:F.LOCK_FOR_PROCESSING,statusDisplay:""},this._route.params.subscribe(p=>{this.productId=p.id})}ngOnInit(){this.initFormGroup(),this.productId&&this.getProductDetail()}initFormGroup(){this.formGroup=this._fb.group({channelDistribution:[null,u.kI.required]})}getProductDetail(){this.isLoading=!0,this._inventoryService.getProductDetail(this.productId).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:t=>{this.productDetail={source:t.data.source,sourceDisplay:"MANUAL"===t.data.source?"Booker":"H\u1ec7 th\u1ed1ng",status:t.data.state,statusDisplay:fe[t.data.state].name};const n=t.data.channelDistribution.split(",");this.formGroup.get("channelDistribution").setValue(n),this.initBookingDetail(t.data.bookingInfo),this.initPriceDetail(t.data.bookingInfo)}})}initBookingDetail(t){this.bookingDetail={bookingCode:t.bookingCode,provider:t.provider,supplier:t.supplier,airline:t.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(t.airline),airlineSystem:t.airline,airlineName:t.airlineName,startPoint:t.journeys[0].departure.airport.code,endPoint:1===t.journeys.length?t.journeys[0].arrival.airport.code:t.journeys[t.journeys.length-1].departure.airport.code,startTime:new Date(t.journeys[0].departure.localTime),endTime:new Date(t.journeys[0].arrival.localTime),statusText:"\u0110\xe3 gi\u1eef ch\u1ed7",flightNumber:`${t.journeys[0].airline}${t.journeys[0].segments[0].flightNumber}`,status:t.state,passengers:t.passengers.map(n=>({index:n.index,key:n.key,name:"",birthday:n.birthday,lastName:n.lastName,firstName:n.firstName,parentKey:n.parentKey,gender:n.genderEnum,type:n.type}))}}initPriceDetail(t){const n=t.passengers.map(o=>({name:o.getName(),type:o.type,typeName:o.getType(),key:o.key}));this.priceDetail={provider:t.journeys.map(o=>o.airline||o.operating),totalBasePrice:t.totalCharges.total.totalFareCharge,totalServiceFee:t.totalCharges.total.totalServiceFee,totalAddonService:t.totalCharges.total.totalAddonCharge,totalPrice:t.totalCharges.total.totalFareCharge,totalOthersCharge:t.totalCharges.total.totalOthersCharge,totalDiscountBasePrice:0,passengers:n.map(o=>({name:o.name,type:o.typeName,base:t.fareCharges.getBaseCharge(o.type),tax:t.fareCharges.getTaxCharge(o.type)+t.fareCharges.getVATCharge(o.type),total:t.fareCharges.getTotalCharge(o.type)}))}}updateProduct(){var t;if(this.formGroup.invalid)return;const n=this.formGroup.value;let r="";r=(null===(t=n.channelDistribution)||void 0===t?void 0:t.some(s=>"ALL"===s))?this.channelDistributionOption.filter(s=>"ALL"!==s.value).map(s=>s.value).join(","):n.channelDistribution.join(",");const c={channelDistribution:r,productId:this.productId,saleInfo:null};this.isSpinning=!0,this._inventoryService.updateProductDetail(c).pipe((0,k.x)(()=>this.isSpinning=!1)).subscribe({next:s=>{console.log(s),this._toastService.add("OK"===s.status?{severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng",sticky:!1}:{severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",sticky:!0})}})}onChangeChannel(t){"ALL"===t.value?(this.formGroup.get("channelDistribution").setValue(null),this.formGroup.get("channelDistribution").setValue(["ALL"])):this.formGroup.get("channelDistribution").value.includes("ALL")&&(this.formGroup.get("channelDistribution").setValue(null),this.formGroup.get("channelDistribution").setValue([t.value]))}gotoManage(){this._router.navigate(["admin/manage-product"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(N.gz),e.Y36(N.F0),e.Y36(j.G),e.Y36(re),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["edit-product"]],standalone:!0,features:[e.jDz],decls:12,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","overflow-hidden","md:hidden"],[1,"p-4","bg-neutral-white","flex","items-center","gap-x-1"],[1,"text-body-md","text-neutral-gray-5","cursor-pointer",3,"click"],["icon","chevron_right","size","small"],[1,"text-body-md","text-neutral-gray-4"],[1,"flex-auto","w-full","h-full","flex","gap-x-4","justify-center","py-6","px-[30px]","overflow-auto"],[1,"flex","gap-x-4","w-[764px]","h-full"],["class","flex-1 h-full flex flex-col gap-y-6",4,"ngIf"],["class","flex-1",4,"ngIf"],[4,"ngIf"],[1,"flex-1","h-full","flex","flex-col","gap-y-6"],[1,"flex","gap-x-[20px]","mb-4","md:hidden"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"bg-white","py-4","px-6","mb-2","shadow-cf-md"],[1,"flex","justify-between","items-center","gap-x-7","mb-4"],[1,"h-full","w-full","flex","flex-col","gap-y-1.5","justify-center","items-center"],[1,"w-[120px]","h-[60px]","object-contain",3,"src"],[1,"text-body-sm","flex","flex-nowrap"],[1,"text-espressive-sm","whitespace-nowrap"],[1,"whitespace-nowrap"],[1,"h-5","flex","items-center","px-2","bg-neutral-gray-1","rounded","text-espressive-sm","text-neutral-black"],[1,"w-[2px]","h-[108px]","border-l","border-dashed","border-neutral-gray-1"],[1,"h-full","w-[206px]","shrink-0","flex","flex-col","items-start","justify-center"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","rounded","flex","gap-x-2","items-center","w-fit"],["icon","arrow_right","size","small"],[1,"mt-3"],[1,"text-espressive-sm","text-neutral-black"],[1,"h-full","w-full","flex","flex-col","items-start","py-3","gap-[20px]"],[1,"text-body-md","text-neutral-black"],[1,"text-heading-lg"],[1,"text-espressive-md","text-neutral-black","flex","gap-2.5","items-center"],["icon","checkbox_checked","size","medium",1,"text-secondary-5-4"],[1,"flex","flex-col","items-center"],[1,"text-espressive-md","text-neutral-black","whitespace-nowrap"],[1,"bg-white","rounded","shadow-cf-md","flex","flex-col","md:hidden"],[1,"text-heading-sm","text-neutral-black","p-6","flex","items-center","gap-x-2"],["icon","circle_information","size","small"],[1,"!pt-0"],[1,"table-auto","w-full"],[1,"border-b","border-neutral-gray-1"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3","pl-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3"],[1,"text-right","text-espressive-sm","text-neutral-gray-4","py-3","pr-3"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","items-end","gap-[10px]","p-3"],[1,"flex","justify-end","items-center","gap-8"],[1,"text-espressive-sm","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-body-dm","text-neutral-black"],[1,"flex","justify-end","items-center","gap-x-4","p-4","border-t","border-neutral-gray-1"],[1,"text-espressive-md","text-neutral-gray-4"],[1,"min-w-[120px]","text-end","text-heading-lg","text-secondary-3-4"],[1,"grid","grid-cols-2","gap-4","bg-neutral-white","py-4","px-6"],[1,"flex","flex-col","gap-y-1.5"],[1,"text-express-sm"],[1,"w-full","h-10","py-2.5","px-3","text-body-md","text-neutral-gray-6","rounded","border","border-neutral-gray-3","bg-neutral-gray-1","overflow-ellipsis","whitespace-nowrap","overflow-hidden"],["textField","text","valueField","value",1,"w-full","!max-w-full",3,"status","data","allowSearch","formControl","placeholder","maxHeight","valueChange"],["cfLabel","",1,"text-express-sm","text-black",3,"CfRequired"],["cfHint","",3,"hint",4,"ngIf"],[1,"flex","justify-end","gap-x-4"],["cf-button","","type","secondary",1,"justify-center","bg-neutral-white",3,"click"],["cf-button","",1,"justify-center",3,"click"],[1,"text-left","text-body-md","text-neutral-black","py-3","pl-3","uppercase"],[1,"text-left","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3"],[1,"text-right","text-body-md","text-neutral-black","py-3","pr-3"],["cfHint","",3,"hint"],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e.NdJ("click",function(){return n.gotoManage()}),e._uU(3,"T\u1ed5ng kho"),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"span",4),e._uU(6,"Chi ti\u1ebft h\xe0ng"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,vc,119,39,"div",7),e.YNc(10,xc,4,0,"div",8),e.qZA()()(),e.YNc(11,Tc,1,0,"cf-spinner",9)),2&t&&(e.xp6(9),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isSpinning))},dependencies:[d.ez,d.sg,d.O5,d.JJ,d.uU,u.u5,u.JJ,u.UX,u.oH,l.AxE,l.Sm8,T.N8,T.Xq,P.IA,b.j$,Z.OR,ie.U,le.C,ne.m],encapsulation:2}),i})();function yc(i,a){1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"ticket-item-skeleton",16)(3,"ticket-item-skeleton",16)(4,"ticket-item-skeleton",16)(5,"ticket-item-skeleton",16),e.qZA()())}function Ac(i,a){1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",22),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\u1ec3 retrieve th\xf4ng tin "),e.qZA(),e.TgZ(8,"div",24),e._uU(9," Vui l\xf2ng nh\u1eadp m\xe3 \u0111\u1eb7t ch\u1ed7 c\u1ee7a b\u1ea1n v\xe0o \xf4 b\xean tr\xean v\xe0 ch\u1ecdn n\xfat "),e.TgZ(10,"span",25),e._uU(11,"T\xecm ki\u1ebfm"),e.qZA(),e._uU(12," \u0111\u1ec3 b\u1eaft \u0111\u1ea7u "),e.qZA()()()()())}function Ec(i,a){1&i&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 "),e.qZA(),e.TgZ(3,"div",28)(4,"div"),e._uU(5,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 \u0111\u1ec3 hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Vui l\xf2ng th\u1eed l\u1ea1i sau ho\u1eb7c ki\u1ec3m tra l\u1ea1i th\xf4ng tin m\xe3 \u0111\u1eb7t ch\u1ed7!"),e.qZA()(),e.BQk())}function bc(i,a){1&i&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 b\u1ecb h\u1ee7y "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 b\u1ecb h\u1ee7y, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Zc(i,a){1&i&&(e.ynx(0),e.TgZ(1,"div",23),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 \u0111\xe3 xu\u1ea5t "),e.qZA(),e.TgZ(3,"div",29)(4,"div"),e._uU(5,"M\xe3 \u0111\u1eb7t ch\u1ed7 n\xe0y \u0111\xe3 xu\u1ea5t v\xe9, kh\xf4ng th\u1ec3 ti\u1ebfp t\u1ee5c xu\u1ea5t v\xe9. Vui l\xf2ng xu\u1ea5t cho m\xe3 \u0111\u1eb7t ch\u1ed7 kh\xe1c!"),e.qZA()(),e.BQk())}function Dc(i,a){if(1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21),e._UZ(5,"img",26),e.qZA(),e.YNc(6,Ec,8,0,"ng-container",27),e.YNc(7,bc,6,0,"ng-container",27),e.YNc(8,Zc,6,0,"ng-container",27),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf","not_found"===t.stateMode),e.xp6(1),e.Q6J("ngIf","cancelled"===t.stateMode),e.xp6(1),e.Q6J("ngIf","issued"===t.stateMode)}}function Fc(i,a){1&i&&(e.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33),e._UZ(4,"div",34),e.TgZ(5,"div",35),e._uU(6,"Chi ti\u1ebft \u0111\u01a1n h\xe0ng"),e.qZA()(),e.TgZ(7,"button",36),e._uU(8," Ch\u01b0a thanh to\xe1n "),e.qZA()(),e.TgZ(9,"div",37)(10,"div",38),e._uU(11,"T\u1ed5ng quan \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(12,"div",39)(13,"div",40)(14,"div",41)(15,"div",42),e._uU(16,"M\xe3 \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(17,"div",43),e._uU(18,"GMBR12312"),e.qZA()(),e.TgZ(19,"div",41)(20,"div",42),e._uU(21,"T\u1ed5ng ti\u1ec1n(bao g\u1ed3m VAT)"),e.qZA(),e.TgZ(22,"div",43),e._uU(23,"GMBR12312"),e.qZA()(),e.TgZ(24,"div",41)(25,"div",42),e._uU(26,"Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng"),e.qZA(),e.TgZ(27,"div",43),e._uU(28,"Ch\u01b0a thanh to\xe1n"),e.qZA()()(),e.TgZ(29,"div",44)(30,"div"),e._uU(31,"1. Qu\xfd kh\xe1ch vui l\xf2ng ti\u1ebfn h\xe0nh thanh to\xe1n, \u0111\u01a1n h\xe0ng s\u1ebd h\u1ebft h\u1ea1n n\u1ebfu kh\xf4ng thanh to\xe1n tr\u01b0\u1edbc th\u1eddi gian "),e.qZA(),e.TgZ(32,"div"),e._uU(33,"2. Vui l\xf2ng ki\u1ec3m tra email abc@gmail.com \u0111\u1ec3 bi\u1ebft chi ti\u1ebft \u0111\u01a1n h\xe0ng v\xe0 h\u01b0\u1edbng d\u1eabn thanh to\xe1n"),e.qZA(),e.TgZ(34,"div"),e._uU(35,"3. Li\xean h\u1ec7 xxx \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 khi c\u1ea7n thi\u1ebft"),e.qZA(),e.TgZ(36,"div"),e._uU(37,"4. Ki\u1ec3m tra t\xecnh tr\u1ea1ng \u0111\u01a1n h\xe0ng t\u1ea1i xxx"),e.qZA()()()(),e.TgZ(38,"div",37)(39,"div",38),e._uU(40,"Th\xf4ng b\xe1o"),e.qZA(),e.TgZ(41,"div"),e._uU(42,"\u0110\u01a1n h\xe0ng ch\u01b0a \u0111\u01b0\u1ee3c thanh to\xe1n"),e.qZA()()(),e.TgZ(43,"div",45),e._UZ(44,"div",46),e.qZA()())}let kc=(()=>{class i{constructor(t){this._fb=t,this.isLoading=!1,this.distributionChannelOptions=[],this.stateMode="has_value"}ngOnInit(){this.initFormGroup(),this.initListOptions()}initFormGroup(){this.searchForm=this._fb.group({channel:[""],searchText:[""]})}initListOptions(){this.distributionChannelOptions=[{value:"",text:"T\u1ef1 \u0111\u1ed9ng"},{value:w.h.B2B_GMBR,text:"Flychills"},{value:w.h.B2C_GMBR,text:"GMBR"}]}onSearch(){}onChannelChange(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["retail-order"]],standalone:!0,features:[e.jDz],decls:17,vars:10,consts:[[1,"flex-auto","flex","flex-col","w-full"],[1,"bg-white","p-[30px]","w-full","shadow-sm","flex","flex-col","gap-y-[30px]","md:hidden"],[1,"text-heading-lg"],[1,"flex","gap-x-3","items-start"],["textField","text","valueField","value","size","medium",1,"w-[180px]",3,"formControl","data","allowSearch","selectedChange"],[1,"flex-1",3,"status"],["cfHeadIcon","","icon","search","size","small"],["size","medium","cf-input","","placeholder","Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng",3,"formControl"],["cf-button","","size","medium","type","secondary",1,"!text-button-md",3,"disabled","click"],["icon","search","size","small",1,"mr-2.5"],[1,"w-full","h-full"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px]",4,"ngIf"],["class","flex-auto w-full max-h-[calc(100vh-152px)] py-4 px-[30px] md:p-0",4,"ngIf"],["class","flex-auto flex justify-center w-full max-h-[calc(100vh-152px)] py-4 px-[30px] gap-x-[20px] ",4,"ngIf"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]"],[1,"flex","flex-col","justify-center","items-center","w-full","h-full"],[1,"w-full"],[1,"flex-auto","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","md:p-0"],[1,"bg-white","w-full","h-full","rounded-lg","md:bg-transparent"],[1,"h-[500px]","flex","flex-col","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],[1,"mb-8"],["src","assets/images/web-page.svg","alt",""],[1,"text-heading-md","text-neutral-black","mb-2"],[1,"text-espressive-md","text-neutral-gray-5","md:w-[257px]","md:text-center"],[1,"text-espressive-md"],["src","assets/images/empty-result.svg","alt",""],[4,"ngIf"],[1,"text-espressive-md","text-neutral-gray-5","text-center","md:w-[257px]"],[1,"text-espressive-md","text-neutral-gray-5","text-center"],[1,"flex-auto","flex","justify-center","w-full","max-h-[calc(100vh-152px)]","py-4","px-[30px]","gap-x-[20px]"],[1,"w-[764px]","flex","flex-col","gap-y-4"],[1,"flex","justify-between","items-center"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],["cf-button","","size","medium"],[1,"bg-neutral-white","p-4","flex","flex-col","gap-y-4","rounded"],[1,"text-heading-xs"],[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","gap-y-2"],[1,"flex","items-center","gap-x-4"],[1,"w-[200px]","text-body-md-short"],[1,"text-express-md"],[1,"px-3","py-1.5","bg-functional-1-1","rounded","text-body-md-short"],[1,"mt-[56px]","w-[302px]","rounded","h-fit","md:hidden","sticky","top-0"],[1,"bg-neutral-white","h-[500px]","rounded"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Nh\u1eadp h\xe0ng v\xe0o kho"),e.qZA(),e.TgZ(4,"div",3)(5,"cf-select",4),e.NdJ("selectedChange",function(r){return n.onChannelChange(r)}),e.qZA(),e.TgZ(6,"cf-input-group",5),e._UZ(7,"cf-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.onSearch()}),e._UZ(10,"cf-icon",9),e._uU(11," T\xecm ki\u1ebfm "),e.qZA()()(),e.TgZ(12,"div",10),e.YNc(13,yc,6,0,"div",11),e.YNc(14,Ac,13,0,"div",12),e.YNc(15,Dc,9,3,"div",12),e.YNc(16,Fc,45,0,"div",13),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("formControl",n.searchForm.controls.channel)("data",n.distributionChannelOptions)("allowSearch",!1),e.xp6(1),e.Q6J("status",n.searchForm.controls.searchText.invalid&&(n.searchForm.controls.searchText.dirty||n.searchForm.controls.searchText.touched)?"error":"default"),e.xp6(2),e.Q6J("formControl",n.searchForm.controls.searchText),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(4),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"search_default"===n.stateMode),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&("not_found"===n.stateMode||"cancelled"===n.stateMode||"issued"===n.stateMode)),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&"has_value"===n.stateMode))},dependencies:[d.ez,d.O5,b.j$,b.ND,b.BN,l.AxE,l.Sm8,B.q,u.u5,u.Fj,u.JJ,u.UX,u.oH,T.N8,T.Xq,P.IA],encapsulation:2}),i})();function Ic(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCancelHunt(o.pnrOrderDetailData.code,o.orderId))}),e._UZ(1,"cf-icon",52),e._uU(2," H\u1ee7y s\u0103n "),e.qZA()}}function Sc(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",53,54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onEditHunt())}),e._UZ(3,"cf-icon",55),e._uU(4," Ch\u1ec9nh s\u1eeda "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.pnrOrderDetailData.canUpdate)("disabledOneClick",!0)("manualHandle",t.pnrOrderDetailData.canUpdate)("placement","topCenter")("cfTooltip","Kh\xf4ng th\u1ec3 ch\u1ec9nh s\u1eeda do \u0111\xe3 th\u1ef1c hi\u1ec7n tr\u01b0\u1edbc \u0111\xf3")}}function wc(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.gotoBookingDetail())}),e._UZ(1,"cf-icon",57),e._uU(2," M\u1edf \u0111\u1eb7t ch\u1ed7 "),e.qZA()}}function Oc(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCreateNewRegisterHunt())}),e._UZ(1,"cf-icon",58),e._uU(2," T\u1ea1o l\u1ea1i y\xeau c\u1ea7u "),e.qZA()}}function Nc(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",37)(2,"div",38),e._UZ(3,"cf-icon",59),e.TgZ(4,"span"),e._uU(5,"Th\xf4ng tin chuy\u1ebfn bay"),e.qZA()(),e.TgZ(6,"div",40)(7,"div",60)(8,"div",61)(9,"div",62),e._uU(10),e.qZA()(),e.TgZ(11,"div",63),e._UZ(12,"img",64),e.qZA(),e.TgZ(13,"div",65)(14,"div",66),e._uU(15),e.qZA(),e.TgZ(16,"div",67),e._uU(17),e.qZA()(),e.TgZ(18,"div",65)(19,"div",66),e._uU(20),e.qZA(),e.TgZ(21,"div",67),e._uU(22),e.qZA()(),e.TgZ(23,"div",65)(24,"div",66),e._uU(25),e.qZA(),e.TgZ(26,"div",67),e._uU(27),e.qZA()(),e.TgZ(28,"div",68)(29,"div"),e._uU(30),e.qZA(),e.TgZ(31,"div",69)(32,"div",61),e._UZ(33,"div",70)(34,"div",71),e.qZA(),e._UZ(35,"cf-icon",72),e.qZA()(),e.TgZ(36,"div",65)(37,"div",66),e._uU(38),e.qZA(),e.TgZ(39,"div",67),e._uU(40),e.qZA()()()()(),e.BQk()),2&i){const t=a.$implicit,n=a.index;e.xp6(10),e.hij(" ",n+1," "),e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(3),e.Oqu(t.flightNumber),e.xp6(2),e.Oqu(t.airlineName),e.xp6(3),e.Oqu(t.departDate),e.xp6(2),e.Oqu(t.fareClass),e.xp6(3),e.Oqu(t.departTime),e.xp6(2),e.Oqu(t.startPoint),e.xp6(3),e.Oqu("Bay th\u1eb3ng"),e.xp6(8),e.Oqu(t.arriveTime),e.xp6(2),e.Oqu(t.endPoint)}}function Uc(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Nc,41,11,"ng-container",36),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t.segments)}}function qc(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"span",49),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.fromDate," - ",t.toDate," ")}}function Mc(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",73),e._UZ(2,"img",74),e.TgZ(3,"div",33),e._uU(4),e.ALo(5,"number"),e.qZA()(),e.BQk()),2&i){const t=a.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij("",e.lcZ(5,2,t.targetPrice)," \u0111")}}function Pc(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Mc,6,4,"ng-container",36),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.priceMonitors)}}function Jc(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Bc(i,a){if(1&i&&(e.TgZ(0,"div",49),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Hc(i,a){if(1&i&&(e.TgZ(0,"div",78)(1,"div",81),e._uU(2),e.qZA(),e.TgZ(3,"div",82),e.YNc(4,Bc,2,1,"div",83),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngForOf",t.fareClass)}}function Lc(i,a){if(1&i&&(e.TgZ(0,"div",77)(1,"div",78),e._UZ(2,"img",74),e.TgZ(3,"div",33),e._uU(4),e.TgZ(5,"span",79),e._uU(6),e.qZA()()(),e.YNc(7,Hc,5,2,"div",80),e.qZA()),2&i){const t=a.$implicit;e.xp6(2),e.Q6J("src",t.airlineLogo,e.LSH),e.xp6(2),e.hij("",t.airlineName," "),e.xp6(2),e.hij("(",t.airline,")"),e.xp6(1),e.Q6J("ngForOf",t.fareType)}}function Qc(i,a){if(1&i&&(e.TgZ(0,"div",75),e.YNc(1,Lc,8,4,"div",76),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.monitors)}}function Yc(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1,"B\u1ea5t k\xec"),e.qZA())}function Gc(i,a){1&i&&(e.TgZ(0,"div",84)(1,"div",42),e._uU(2,"Th\xf4ng b\xe1o s\u1eafp h\u1ebft h\u1ea1n: "),e.qZA(),e.TgZ(3,"div",45),e._uU(4," Th\xf4ng b\xe1o tr\u01b0\u1edbc 15 ph\xfat tr\u01b0\u1edbc khi h\u1ebft h\u1ea1n s\u0103n v\xe9 "),e.qZA()())}function Rc(i,a){if(1&i&&(e.TgZ(0,"div",84)(1,"div",42),e._uU(2,"Thu\u1ed9c \u0111\u1ea1i l\xfd:"),e.qZA(),e.TgZ(3,"div",51),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij("",null==t.pnrOrderDetailData.ownerInfo?null:t.pnrOrderDetailData.ownerInfo.name," ")}}const We=function(){return["CREATE","IN_PROCESS","IN_PROCESS_PRICE_UP"]},jc=function(){return["COMPLETED"]},Vc=function(){return["EXPIRED","CANCEL"]};function zc(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.gotoManage())}),e._UZ(3,"cf-icon",12),e._uU(4," Quay l\u1ea1i "),e.qZA(),e.TgZ(5,"div",13),e.YNc(6,Ic,3,0,"button",14),e.YNc(7,Sc,5,5,"button",15),e.YNc(8,wc,3,0,"button",16),e.YNc(9,Oc,3,0,"button",16),e.qZA()(),e.TgZ(10,"div",17)(11,"div",18)(12,"div",19)(13,"div",20),e._UZ(14,"cf-icon",21),e.TgZ(15,"div",22),e._uU(16),e.qZA()()(),e.TgZ(17,"div",23)(18,"div",24)(19,"div",25)(20,"div",26),e._uU(21,"H\xe0nh tr\xecnh"),e.qZA(),e.TgZ(22,"div",22)(23,"div",27)(24,"span"),e._uU(25),e.qZA(),e._UZ(26,"cf-icon",28),e.TgZ(27,"span"),e._uU(28),e.qZA()()()(),e._UZ(29,"div",29),e.TgZ(30,"div",30)(31,"div",26),e._uU(32,"Ng\xe0y kh\u1edfi h\xe0nh"),e.qZA(),e.TgZ(33,"div",31),e._uU(34),e.ALo(35,"date"),e.ALo(36,"date"),e.qZA()(),e._UZ(37,"div",29),e.TgZ(38,"div",30)(39,"div",32),e._uU(40,"M\xe3 \u0111\u1eb7t ch\u1ed7 (PNR)"),e.qZA(),e.TgZ(41,"div",33),e._uU(42," N/A "),e.qZA()(),e._UZ(43,"div",29),e.TgZ(44,"div",30)(45,"div",26),e._uU(46,"T\u1ed5ng chi ph\xed"),e.qZA(),e.TgZ(47,"div",33),e._uU(48),e.ALo(49,"number"),e.qZA()()(),e.TgZ(50,"div",34),e._UZ(51,"cf-icon",35),e.TgZ(52,"span"),e._uU(53),e.qZA()()()(),e.YNc(54,Uc,2,1,"ng-container",36),e.TgZ(55,"div",37)(56,"div",38),e._UZ(57,"cf-icon",39),e.TgZ(58,"span"),e._uU(59,"C\u1ea5u h\xecnh s\u0103n v\xe9"),e.qZA()(),e.TgZ(60,"div",40)(61,"div",41)(62,"div",42),e._uU(63,"H\u1ea1n s\u0103n v\xe9:"),e.qZA(),e.TgZ(64,"div",43)(65,"div"),e._uU(66),e.qZA()()(),e.TgZ(67,"div",41)(68,"div",42),e._uU(69,"Gi\u1edd kh\u1edfi h\xe0nh: "),e.qZA(),e.TgZ(70,"div",44),e.YNc(71,qc,3,2,"ng-container",36),e.qZA()(),e.TgZ(72,"div",41)(73,"div",42),e._uU(74,"M\u1ee9c gi\xe1 t\u1ed1i \u0111a: "),e.qZA(),e.TgZ(75,"div",45),e.YNc(76,Pc,2,1,"div",46),e.YNc(77,Jc,2,0,"div",46),e.qZA()(),e.TgZ(78,"div",41)(79,"div",42),e._uU(80,"H\u1ea1ng gh\u1ebf mong mu\u1ed1n: "),e.qZA(),e.YNc(81,Qc,2,1,"div",47),e.YNc(82,Yc,2,0,"div",46),e.qZA(),e.YNc(83,Gc,5,0,"div",48),e.TgZ(84,"div",41)(85,"div",42),e._uU(86,"K\xeanh ph\xe2n ph\u1ed1i: "),e.qZA(),e.TgZ(87,"div",49),e._uU(88),e.ALo(89,"mapper"),e.qZA()()()(),e.TgZ(90,"div",37)(91,"div",38),e._UZ(92,"cf-icon",50),e.TgZ(93,"span"),e._uU(94,"Th\xf4ng tin chi ti\u1ebft"),e.qZA()(),e.TgZ(95,"div",40)(96,"div",41)(97,"div",42),e._uU(98,"M\xe3 y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(99,"div",45),e._uU(100),e.qZA()(),e.TgZ(101,"div",41)(102,"div",42),e._uU(103,"Ng\xe0y y\xeau c\u1ea7u:"),e.qZA(),e.TgZ(104,"div",45),e._uU(105),e.qZA()(),e.TgZ(106,"div",41)(107,"div",42),e._uU(108,"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n: "),e.qZA(),e.TgZ(109,"div",51),e._uU(110),e.qZA()(),e.YNc(111,Rc,5,1,"div",48),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",e.DdM(39,We).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(40,We).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(41,jc).includes(t.pnrOrderDetailData.state)),e.xp6(1),e.Q6J("ngIf",e.DdM(42,Vc).includes(t.pnrOrderDetailData.state)),e.xp6(3),e.Tol(t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].backgroundColor),e.xp6(1),e.Tol(t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].textColor),e.xp6(1),e.Q6J("icon",t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].icon),e.xp6(2),e.Oqu(t.CARD_HUNTER_STATUS[t.pnrOrderDetailData.state].description),e.xp6(9),e.hij(" ",t.pnrOrderDetailData.journeys[0].startPoint," "),e.xp6(3),e.hij(" ",t.pnrOrderDetailData.journeys[0].endPoint," "),e.xp6(6),e.hij(" ",e.xi3(35,28,1e3*t.pnrOrderDetailData.rangeDateTime.fromDate,"dd/MM/yyy")+" - "+e.xi3(36,31,1e3*t.pnrOrderDetailData.rangeDateTime.toDate,"dd/MM/yyy"),""),e.xp6(14),e.hij(" ",t.pnrOrderDetailData.totalCharge?e.lcZ(49,34,t.pnrOrderDetailData.totalCharge)+" \u0111":"N/A",""),e.xp6(5),e.hij("C\u1eadp nh\u1eadt g\u1ea7n nh\u1ea5t l\xfac ",t.pnrOrderDetailData.timeUpdate,""),e.xp6(1),e.Q6J("ngForOf",t.pnrOrderDetailData.journeys),e.xp6(12),e.hij("",t.pnrOrderDetailData.timeExpire," "),e.xp6(5),e.Q6J("ngForOf",t.pnrOrderDetailData.journeys[0].rangeTime),e.xp6(5),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(4),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.FARE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.monitorType===t.MONITOR_TYPE.PRICE),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.notifyBeforeExpired),e.xp6(5),e.hij(" ",e.xi3(89,36,t.pnrOrderDetailData.distributionChannel,t.distributionChannelFormat),""),e.xp6(12),e.hij(" ",t.pnrOrderDetailData.code," "),e.xp6(5),e.hij("",t.pnrOrderDetailData.timeCreate," "),e.xp6(5),e.hij("",t.pnrOrderDetailData.userActionInfo.name," "),e.xp6(1),e.Q6J("ngIf",t.pnrOrderDetailData.ownerInfo)}}function Kc(i,a){1&i&&(e.TgZ(0,"div",85),e._UZ(1,"ticket-item-skeleton",86)(2,"ticket-item-skeleton",86)(3,"ticket-item-skeleton",86),e.qZA())}let $c=(()=>{class i{constructor(t,n,o,r,c,s,p,v,g){this._route=n,this._router=o,this._flightDataService=r,this._bookingHunterService=c,this._modal=s,this._ticketLowFareService=p,this._toastService=v,this._huntTicketAdvancedBindingSvc=g,this.STATUS_HUNTER=I.b,this.MONITOR_TYPE=ve.$,this.CARD_HUNTER_STATUS=X.u1,this.isSpinner=!1,this.distributionChannelFormat=m=>{var x;return(null===(x=Ze.find(y=>y.id===m))||void 0===x?void 0:x.name)||""},t.registerIcons([l.toh,l.Xzk,l.D7,l.Ffn,l.TOh,l.okA,l.QkI,l.oFb,l.Hge,l.rks,l.$S]),this._route.params.subscribe(m=>{this.orderId=m.id,this.getHunterOrderDetail()})}ngOnInit(){}getHunterOrderDetail(){this._bookingHunterService.getPnrOrderDetail(this.orderId).subscribe({next:t=>{var n,o;console.log(t),"OK"===t.status&&(this.pnrOrderDetailData={orderId:t.data.orderId,code:t.data.code,canUpdate:t.data.canUpdate,distributionChannel:t.data.distributionChannel,airline:t.data.fareInfo.airline||"",rangeDateTime:t.data.ticketInfo.journeys[0].rangeDateTime,bookingCode:t.data.fareInfo.detectedPnr||"",totalCharge:t.data.fareInfo.detectedFare||0,ownerInfo:t.data.ownerInfo,userActionInfo:t.data.userActionInfo,state:t.data.state,monitorType:t.data.monitorType,priceMonitors:(null===(n=t.data.orderInfo.priceMonitors)||void 0===n?void 0:n.map(r=>({airline:r.airline,airlineLogo:this._flightDataService.getAirlineLogoByCode(r.airline),targetPrice:r.targetPrice})))||[],notifyBeforeExpired:t.data.orderInfo.notifyBeforeExpired,timeCreate:t.data.orderInfo.timeCreate?C(t.data.orderInfo.timeCreate).format("DD/MM/YYYY HH:mm"):"",timeExpire:t.data.orderInfo.timeExpire?C(t.data.orderInfo.timeExpire).format("DD/MM/YYYY HH:mm"):"",timeUpdate:t.data.orderInfo.timeUpdate?C(t.data.orderInfo.timeUpdate).format("DD/MM/YYYY HH:mm"):"",timeFinished:t.data.orderInfo.timeFinished?C(t.data.orderInfo.timeFinished).format("DD/MM/YYYY HH:mm"):"",monitors:(null===(o=t.data.orderInfo.fareMonitors)||void 0===o?void 0:o.map(r=>({airline:r.specifyFareClassInfo.airline,airlineName:this._flightDataService.getAirlineNameByCode(r.specifyFareClassInfo.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(r.specifyFareClassInfo.airline),fareType:r.specifyFareClassInfo.cabin.flatMap(c=>c.fareType).map(c=>({order:c.order,code:c.code,name:c.description,fareClass:c.fareClass.map(s=>({order:s.order,code:s.code,name:s.name}))}))})))||[],journeys:t.data.ticketInfo.journeys.map(r=>{var c;return{leg:r.leg,airline:t.data.ticketInfo.airline,startPoint:r.startPoint,endPoint:r.endPoint,departTime:r.departTime?C(r.departTime).format("DD/MM/YYYY"):"",arrivalTime:r.arrivalTime,duration:r.duration,rangeTime:r.rangeTime,segments:(null===(c=r.segments)||void 0===c?void 0:c.map(s=>({departDate:C(s.departTime).format("DD/MM/YYYY"),departTime:C(s.departTime).format("HH:mm"),arriveDate:C(s.arriveTime).format("DD/MM/YYYY"),arriveTime:C(s.arriveTime).format("HH:mm"),startPoint:s.startPoint,endPoint:s.endPoint,fareClass:s.fareClass,airline:t.data.fareInfo.airline||"",airlineName:this._flightDataService.getAirlineNameByCode(t.data.fareInfo.airline),airlineLogo:this._flightDataService.getAirlineLogoByCode(t.data.fareInfo.airline),flightNumber:`${t.data.fareInfo.airline} ${s.flightNumber}`,duration:""})))||[]}}),passengers:t.data.ticketInfo.passengers.map(r=>({birthday:r.birthday,firstName:r.firstName,lastName:r.lastName,displayName:`${r.lastName} ${r.firstName}`,type:r.type,index:r.index,parentIndex:r.parentIndex,namePrefix:r.namePrefix,gender:r.gender}))},console.log(this.pnrOrderDetailData),this.mappingPaxDisplayData())}})}mappingPaxDisplayData(){const t=[];this.pnrOrderDetailData.passengers.forEach(n=>{var o;if("INF"!==n.type){const r={displayName:n.lastName+" "+n.firstName,index:"number"==typeof n.index?n.index:"",type:n.type,gender:n.gender,namePrefix:"MALE"===(null===(o=n.gender)||void 0===o?void 0:o.toUpperCase())?"MR":"MRS"};t.push(r)}}),this.pnrOrderDetailData.passengers.forEach(n=>{var o;if("INF"===n.type){const r={displayName:n.lastName+" "+n.firstName,type:n.type,gender:n.gender,namePrefix:"MALE"===(null===(o=n.gender)||void 0===o?void 0:o.toUpperCase())?"B\xc9 TRAI":"B\xc9 G\xc1I",parentIndex:n.parentIndex||"",birthday:n.birthday?C(n.birthday).format("DD/MM/YYYY"):""},c=t.find(s=>s.index===n.parentIndex);c&&(c.infant=r)}}),this.displayPassengers=t}gotoManage(){this._router.navigate(["admin/hunt-ticket-advanced-list"])}gotoBookingDetail(){}onEditHunt(){this._modal.open(Ce,{orderId:this.orderId}).afterClosed$.subscribe({next:n=>{"OK"===n.data&&this.getHunterOrderDetail()}})}onCancelHunt(t,n){this._modal.open(Z.V0,{title:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9",body:`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 <strong>#${t}</strong>?`,okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y b\u1ecf",isSecondary:!0}).afterClosed$.subscribe({next:r=>{r.data&&(this.isSpinner=!0,this._ticketLowFareService.cancelPnrOrder(n).pipe((0,k.x)(()=>this.isSpinner=!1)).subscribe({next:c=>{this._toastService.add("OK"===c.status?{severity:"success",summary:"H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 th\xe0nh c\xf4ng",detail:`H\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${t} th\xe0nh c\xf4ng.`,sticky:!1}:{severity:"error",summary:"C\xf3 l\u1ed7i x\u1ea3y ra",detail:`Kh\xf4ng th\u1ec3 h\u1ee7y y\xeau c\u1ea7u s\u0103n v\xe9 #${t} l\xfac n\xe0y. Vui l\xf2ng th\u1eed l\u1ea1i.`,sticky:!1})}}))}})}onCreateNewRegisterHunt(){this._huntTicketAdvancedBindingSvc.setOrderId(this.orderId),this._router.navigate(["admin/hunt-ticket-advanced-add"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.KNP),e.Y36(N.gz),e.Y36(N.F0),e.Y36(j.G),e.Y36(X.yL),e.Y36(S.oE),e.Y36(ae.s),e.Y36(H.BX),e.Y36(Fe))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hunt-ticket-advanced-detail"]],standalone:!0,features:[e.jDz],decls:11,vars:2,consts:[[1,"flex","flex-col","w-full","h-full","overflow-hidden","md:hidden"],[1,"p-4","bg-neutral-white","flex","items-center","gap-x-1"],[1,"text-body-md","text-neutral-gray-5","cursor-pointer",3,"click"],["icon","chevron_right","size","small"],[1,"text-body-md","text-neutral-gray-4"],[1,"flex-auto","w-full","h-full","flex","gap-x-4","justify-center","py-6","px-[30px]","overflow-auto"],[1,"flex","gap-x-4","w-[764px]","h-full"],["class","flex-1 h-full flex flex-col gap-y-6",4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"flex-1","h-full","flex","flex-col","gap-y-6"],[1,"flex","justify-between","items-center"],["cf-button","","size","medium","type","secondary",1,"whitespace-nowrap","bg-neutral-white",3,"click"],["icon","arrow_left","size","small",1,"mr-2.5"],[1,"flex","gap-x-4"],["cf-button","","size","medium","type","secondary","class","whitespace-nowrap bg-neutral-white",3,"click",4,"ngIf"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium",3,"disabled","disabledOneClick","manualHandle","placement","cfTooltip","click",4,"ngIf"],["cf-button","","size","medium",3,"click",4,"ngIf"],[1,"flex","flex-col","gap-y-6"],[1,"bg-white","rounded-lg","overflow-hidden"],[1,"flex","items-center","gap-x-2","px-2.5","py-1.5"],[1,"flex","items-center","gap-x-1"],["size","small",3,"icon"],[1,"text-express-md"],[1,"p-3","flex","flex-col","gap-y-[20px]"],[1,"flex","gap-x-6"],[1,"flex","flex-col","gap-y-2"],[1,"text-body-md"],[1,"text-heading-sm","py-1","px-3","bg-neutral-gray-1","flex","gap-x-2","items-center","justify-center","w-fit","rounded"],["icon","arrow_right","size","small"],[1,"h-[48px]","w-[1px]","bg-neutral-gray-1"],[1,"flex-1","flex","flex-col","justify-between","gap-y-2"],[1,"text-express-sm","text-neutral-gray-6"],[1,"text-body-md","whitespace-nowrap"],[1,"text-express-md","text-neutral-gray-6"],[1,"flex","justify-center","gap-x-2","items-center","text-body-sm","text-neutral-gray-4"],["icon","refresh","size","small"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-2.5"],[1,"flex","items-center","gap-x-2","text-heading-xs","text-neutral-gray-6"],["icon","settings","size","small"],[1,"p-3","bg-neutral-white","rounded","border","border-dashed","border-neutral-gray-3"],[1,"p-3","border-b","border-neutral-gray-1","flex","gap-x-3"],[1,"min-w-[142px]","whitespace-nowrap","text-body-md-short","text-neutral-black"],[1,"flex-1","flex","items-center","gap-x-6","text-express-md","text-neutral-gray-6"],[1,"flex-1","flex","gap-x-2","items-center","text-express-md","text-neutral-gray-6"],[1,"flex-1","text-express-md","text-neutral-gray-6"],[4,"ngIf"],["class","flex-1 text-express-md text-neutral-gray-6 flex flex-col gap-y-3",4,"ngIf"],["class","p-3 flex gap-x-3",4,"ngIf"],[1,"text-express-sm","text-neutral-gray-6","py-1","px-2","rounded","bg-neutral-gray-2"],["icon","document","size","small"],[1,"flex-1","text-body-md","text-neutral-gray-6"],["icon","delete","size","small",1,"mr-2.5"],["tabIndex","-1","cdkOverlayOrigin","","cf-button","","size","medium",3,"disabled","disabledOneClick","manualHandle","placement","cfTooltip","click"],["trigger","","originOverlay","cdkOverlayOrigin"],["icon","edit_alt","size","small",1,"mr-2.5"],["cf-button","","size","medium",3,"click"],["icon","external_link","size","small",1,"mr-2.5"],["icon","refresh","size","small",1,"mr-2.5"],["icon","plane","size","small"],[1,"flex","justify-between","gap-x-3","py-3"],[1,"flex","items-center"],[1,"flex","justify-center","items-center","w-[22px]","h-[22px]","rounded-full","bg-neutral-gray-1","text-neutral-gray-4","text-heading-sm"],[1,"w-[80px]","flex-shrink-0","px-4"],[1,"w-[80px]","h-[40px]","object-contain",3,"src"],[1,"flex","flex-col","items-center"],[1,"text-heading-sm"],[1,"text-express-sm","text-neutral-gray-4"],[1,"flex","flex-col","items-center","gap-y-1","text-express-sm","text-neutral-gray-4","relative"],[1,"flex","gap-x-1","items-center"],[1,"w-1","h-1","bg-neutral-gray-3","rounded-full"],[1,"w-[100px]","h-[1px]","bg-neutral-gray-3"],["icon","plane","size","small",1,"text-neutral-gray-3"],[1,"flex","gap-x-2","py-2"],[1,"w-[24px]","h-[24px]","object-contain",3,"src"],[1,"flex-1","text-express-md","text-neutral-gray-6","flex","flex-col","gap-y-3"],["class","flex flex-col gap-y-3",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-3"],[1,"flex","gap-x-2"],[1,"uppercase"],["class","flex gap-x-2",4,"ngFor","ngForOf"],[1,"rounded","text-express-sm","h-fit","py-1","px-2","border","border-neutral-gray-5"],[1,"flex","gap-2","flex-wrap"],["class","text-express-sm text-neutral-gray-6 py-1 px-2 rounded bg-neutral-gray-2",4,"ngFor","ngForOf"],[1,"p-3","flex","gap-x-3"],[1,"flex-1"],[1,"rounded","border","border-neutral-gray-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e.NdJ("click",function(){return n.gotoManage()}),e._uU(3,"S\u0103n v\xe9 t\u1ebft"),e.qZA(),e._UZ(4,"cf-icon",3),e.TgZ(5,"span",4),e._uU(6,"Chi ti\u1ebft y\xeau c\u1ea7u"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,zc,112,43,"div",7),e.YNc(10,Kc,4,0,"div",8),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.pnrOrderDetailData),e.xp6(1),e.Q6J("ngIf",!n.pnrOrderDetailData))},dependencies:[d.ez,d.sg,d.O5,d.JJ,d.uU,l.AxE,l.Sm8,T.N8,T.Xq,P.IA,$e.Lk,Ke.f,ke.xu,V.q],encapsulation:2}),i})();var ee=(()=>{return(i=ee||(ee={})).FOR_APPROVAL="FOR_APPROVAL",i.APPROVED="APPROVED",i.SUCCESS="SUCCESS",i.FAILED="FAILED",ee;var i})();const Xc={[ee.FOR_APPROVAL]:{name:"Ch\u01b0a duy\u1ec7t",backgroundColor:"orange",textColor:""},[ee.APPROVED]:{name:"\u0110\xe3 duy\u1ec7t",backgroundColor:"cyan",textColor:""},[ee.SUCCESS]:{name:"Th\xe0nh c\xf4ng",backgroundColor:"green",textColor:""},[ee.FAILED]:{name:"Th\u1ea5t b\u1ea1i",backgroundColor:"red",textColor:""}};function Wc(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",30),e._uU(2),e.qZA(),e.TgZ(3,"td",31),e._uU(4),e.qZA(),e.TgZ(5,"td",32),e._uU(6),e.ALo(7,"mapper"),e.qZA()()),2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",t.firstName+" "+t.lastName||"N/A"," "),e.xp6(2),e.hij(" ",t.type||"N/A"," "),e.xp6(2),e.hij(" ",e.xi3(7,3,t.gender,n.formatterGender)||"N/A"," ")}}function es(i,a){if(1&i&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2),e.qZA(),e.TgZ(3,"div",47),e._uU(4),e.qZA(),e.TgZ(5,"div",47),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.airline,"",t.flightNumber," "),e.xp6(2),e.AsE(" ",t.startPoint," - ",t.endPoint," "),e.xp6(2),e.AsE(" (",e.xi3(7,6,1e3*t.departureTime,"HH:mm")," - ",e.xi3(8,9,1e3*t.departureTime,"dd/MM/yyyy"),") ")}}function ts(i,a){if(1&i&&(e.TgZ(0,"div",48)(1,"div"),e._uU(2," M\xe3 \u0111\u1eb7t ch\u1ed7 "),e.qZA(),e.TgZ(3,"div",49),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.pnr||"---"," ")}}function ns(i,a){if(1&i&&(e.TgZ(0,"div",33)(1,"div",34)(2,"div",35),e._UZ(3,"img",36),e.ALo(4,"mapper"),e.TgZ(5,"div",37),e._uU(6),e.ALo(7,"mapper"),e.qZA()(),e.TgZ(8,"div",38)(9,"div",35)(10,"div",39)(11,"div",35)(12,"div",40),e._uU(13),e.ALo(14,"mapper"),e.qZA()(),e.TgZ(15,"div"),e._UZ(16,"cf-icon",41),e.qZA(),e.TgZ(17,"div",35)(18,"div",42),e._uU(19),e.ALo(20,"mapper"),e.qZA()()(),e.TgZ(21,"div",43),e.YNc(22,es,9,12,"div",44),e.qZA()(),e.YNc(23,ts,5,1,"div",45),e.qZA()()()),2&i){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Q6J("src",e.xi3(4,10,t.airline,n.getAirlineLogoByCode),e.LSH)("alt",t.airline),e.xp6(3),e.AsE(" ",t.airline," - ",e.xi3(7,13,t.airline,n.getAirlineName)," "),e.xp6(7),e.AsE(" ",e.xi3(14,16,t.startPoint,n.getLocationData)," (",t.startPoint,") "),e.xp6(6),e.AsE(" ",e.xi3(20,19,t.endPoint,n.getLocationData)," ( ",t.endPoint,") "),e.xp6(3),e.Q6J("ngForOf",t.segments),e.xp6(1),e.Q6J("ngIf",t.pnr)}}function is(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",50)(1,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onCancel())}),e._uU(2," T\u1eeb ch\u1ed1i "),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onIssue())}),e._uU(4," Xu\u1ea5t v\xe9 "),e.qZA()()}}function os(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3),e._UZ(2,"div",4),e.TgZ(3,"div",5),e._uU(4,"T\u1ed5ng quan \u0111\u01a1n h\xe0ng"),e.qZA()(),e.TgZ(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e._UZ(10,"cf-icon",11),e.TgZ(11,"div",12),e._uU(12," M\xe3 \u0111\u01a1n h\xe0ng: "),e.qZA(),e.TgZ(13,"span",13),e._uU(14),e.qZA()(),e.TgZ(15,"div",10),e._UZ(16,"cf-icon",14),e.TgZ(17,"div",12),e._uU(18," T\u1ed5ng ti\u1ec1n (\u0110\xe3 g\u1ed3m VAT): "),e.qZA(),e.TgZ(19,"span",13),e._uU(20),e.ALo(21,"number"),e.qZA()(),e.TgZ(22,"div",10),e._UZ(23,"cf-icon",15),e.TgZ(24,"div",12),e._uU(25," Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n: "),e.qZA(),e.TgZ(26,"span",13),e._uU(27),e.qZA()(),e.TgZ(28,"div",10),e._UZ(29,"cf-icon",15),e.TgZ(30,"div",12),e._uU(31," Tr\u1ea1ng th\xe1i: "),e.qZA(),e.TgZ(32,"span",13),e._uU(33),e.ALo(34,"mapper"),e.qZA()()()()()(),e.TgZ(35,"div",8)(36,"div",3),e._UZ(37,"div",4),e.TgZ(38,"div",5),e._uU(39,"Th\xf4ng tin li\xean h\u1ec7"),e.qZA()(),e.TgZ(40,"div",6)(41,"div",16)(42,"div",17),e._UZ(43,"cf-icon",18),e.TgZ(44,"span",19),e._uU(45,"H\u1ecd v\xe0 t\xean:"),e.qZA(),e.TgZ(46,"span",20),e._uU(47),e.qZA()(),e.TgZ(48,"div",17),e._UZ(49,"cf-icon",21),e.TgZ(50,"span",19),e._uU(51,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"),e.qZA(),e.TgZ(52,"span",20),e._uU(53),e.qZA()(),e.TgZ(54,"div",17),e._UZ(55,"cf-icon",22),e.TgZ(56,"span",19),e._uU(57,"Email:"),e.qZA(),e.TgZ(58,"span",20),e._uU(59),e.qZA()()()()(),e.TgZ(60,"div",8)(61,"div",3),e._UZ(62,"div",4),e.TgZ(63,"div",5),e._uU(64,"Th\xf4ng tin h\xe0nh kh\xe1ch"),e.qZA()(),e.TgZ(65,"div",6)(66,"div",23)(67,"table",24)(68,"thead")(69,"tr")(70,"th",25),e._uU(71," H\u1ecd t\xean "),e.qZA(),e.TgZ(72,"th",25),e._uU(73," Lo\u1ea1i kh\xe1ch "),e.qZA(),e.TgZ(74,"th",25),e._uU(75," Gi\u1edbi t\xednh "),e.qZA()()(),e.TgZ(76,"tbody"),e.YNc(77,Wc,8,6,"tr",26),e.qZA()()()()(),e.TgZ(78,"div",8)(79,"div",3),e._UZ(80,"div",4),e.TgZ(81,"div",5),e._uU(82,"Th\xf4ng tin h\xe0nh tr\xecnh"),e.qZA()(),e.TgZ(83,"div",6)(84,"div",27),e.YNc(85,ns,24,22,"div",28),e.qZA()()(),e.YNc(86,is,5,0,"div",29),e.qZA()),2&i){const t=e.oxw();e.xp6(14),e.Oqu(t.paymentOrderDetail.paymentOrderInfo.paymentCode),e.xp6(6),e.hij(" ",e.lcZ(21,11,t.paymentOrderDetail.paymentOrderInfo.totalPrice)," \u0111 "),e.xp6(7),e.hij("","H\u1ec7 Th\u1ed1ng"," "),e.xp6(6),e.hij(" ",e.xi3(34,13,t.paymentOrderDetail.paymentOrderInfo.state,t.getState)," "),e.xp6(14),e.hij(" ",t.paymentOrderDetail.bookingContact.agentName||"N/A"," "),e.xp6(6),e.AsE(" ",t.paymentOrderDetail.bookingContact.phonePrefix,"",t.paymentOrderDetail.bookingContact.phone||"N/A"," "),e.xp6(6),e.hij(" ",t.paymentOrderDetail.bookingContact.email||"N/A"," "),e.xp6(18),e.Q6J("ngForOf",t.paymentOrderDetail.passengers),e.xp6(8),e.Q6J("ngForOf",t.paymentOrderDetail.journeys),e.xp6(1),e.Q6J("ngIf","FOR_APPROVAL"===t.paymentOrderDetail.paymentOrderInfo.state)}}function rs(i,a){1&i&&e._UZ(0,"cf-spinner")}let as=(()=>{class i{constructor(t,n,o,r,c,s,p,v){this._route=t,this._router=n,this._ticketLowFareService=o,this._flightDataService=r,this._locationDataSvc=c,this.cfIconRegister=s,this._modal=p,this._toastService=v,this.configStatus=Xc,this.isLoading=!1,this.formatterGender=g=>{const m=null==g?void 0:g.toLocaleLowerCase();return{male:"Nam",female:"N\u1eef",order:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"}[m]||m},this.getAirlineLogoByCode=g=>this._flightDataService.getAirlineLogoByCode(g),this.getLocationData=g=>this._locationDataSvc.getCityNameByCode(g),this.getState=g=>{switch(g){case"PROCESSING":return"\u0110ang x\u1eed l\xfd";case"FOR_APPROVAL":return"Ch\u01b0a duy\u1ec7t";case"APPROVED":case"SUCCESS":return"Th\xe0nh c\xf4ng";case"FAILED":return"Th\u1ea5t b\u1ea1i";case"REJECT":return"\u0110\xe3 h\u1ee7y";default:return""}},this.getAirlineName=g=>this._flightDataService.getAirlineSystemNameByCode(g),this.cfIconRegister.registerIcons([l.KYu,l.GUN,l.$f3,l.o1t,l.P5K,l.PcQ,l.S7Q,l.Gey,l.YwC,l.hTA,l.okA]),this.paymentCode=t.snapshot.params.code,this.paymentCode&&this.getPaymentOrderDetail()}ngOnInit(){}getPaymentOrderDetail(){this._ticketLowFareService.getPaymentOrderDetail(this.paymentCode).subscribe({next:t=>{"OK"===t.status&&(this.paymentId=t.data.paymentOrderInfo.paymentId,this.paymentOrderDetail={paymentOrderInfo:t.data.paymentOrderInfo,bookingContact:t.data.bookingContact,passengers:t.data.listPax,journeys:t.data.listJourney.map(n=>({airline:n.airline,airlineLogo:n.airline,startPoint:n.startPoint,endPoint:n.endPoint,departure:n.segments[0].departureTime,pnr:n.pnr,totalPrice:n.totalPrice,segments:n.segments.map(o=>({airline:o.airline,arrivalTime:o.arrivalTime,departureTime:o.departureTime,endPoint:o.endPoint,flightNumber:o.flightNumber,startPoint:o.startPoint}))}))})},error:t=>{}})}onCancel(){this._modal.open(Z.V0,{title:"X\xe1c nh\u1eadn t\u1eeb ch\u1ed1i xu\u1ea5t v\xe9",body:"\n        <div>1. Ph\xed d\u1ecbch v\u1ee5 GMBR \u0111\xe3 thu s\u1ebd kh\xf4ng ho\xe0n tr\u1ea3 l\u1ea1i \u0111\u1ea1i l\xfd</div>\n        <div>2. Ti\u1ec1n v\xe9 (kh\xf4ng g\u1ed3m ph\xed d\u1ecbch v\u1ee5) s\u1ebd \u0111\u01b0\u1ee3c tr\u1ea3 l\u1ea1i, \u0111\u1ea1i l\xfd vui l\xf2ng ki\u1ec3m tra c\xf4ng n\u1ee3</div>\n        <div>3. Sau khi b\u1ea5m X\xe1c nh\u1eadn, v\xe9 s\u1ebd b\u1ecb h\u1ee7y v\xe0 kh\xf4ng th\u1ec3 xu\u1ea5t d\u01b0\u1edbi b\u1ea5t k\u1ef3 h\xecnh th\u1ee9c n\xe0o</div>\n      ",okText:"X\xe1c nh\u1eadn",cancelText:"H\u1ee7y",hasIcon:!1}).afterClosed$.subscribe({next:n=>{if(n.data){const o={paymentCode:this.paymentCode,paymentId:this.paymentId};this.isLoading=!0,this._ticketLowFareService.rejectTicketPending(o).pipe((0,k.x)(()=>this.isLoading=!1)).subscribe({next:r=>{"OK"===r.status?(this._toastService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\xe0nh c\xf4ng!",sticky:!1}),this.getPaymentOrderDetail()):this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})},error:()=>{this._toastService.add({severity:"error",summary:"Th\u1ea5t b\u1ea1i",detail:"T\u1eeb ch\u1ed1i duy\u1ec7t xu\u1ea5t v\xe9 th\u1ea5t b\u1ea1i!",sticky:!0})}})}}})}onIssue(){this._modal.open(_e,{paymentCode:this.paymentCode,paymentId:this.paymentId,isViewAgent:!0}).afterClosed$.subscribe(n=>{n.data&&this.getPaymentOrderDetail()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.gz),e.Y36(N.F0),e.Y36(ae.s),e.Y36(j.G),e.Y36(R._),e.Y36(l.KNP),e.Y36(S.oE),e.Y36(H.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["payment-order-detail"]],standalone:!0,features:[e.jDz],decls:2,vars:2,consts:[["class","container mx-auto px-4 py-6 max-w-5xl flex flex-col gap-y-4",4,"ngIf"],[4,"ngIf"],[1,"container","mx-auto","px-4","py-6","max-w-5xl","flex","flex-col","gap-y-4"],[1,"flex","gap-x-[20px]"],[1,"w-1","bg-primary-2-4"],[1,"text-heading-md","text-neutral-black"],[1,"p-6","bg-white","shadow-sm","rounded-lg"],[1,"flex","justify-between","items-start","flex-col","gap-3"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-col","gap-3"],[1,"flex","items-center","gap-2","text-sm","text-neutral-gray-6"],["cfHeadIcon","","icon","ticket","size","small",1,"text-neutral-gray-6"],[1,"text-body-md-short"],[1,"font-medium","text-body-md-short","text-neutral-gray-6"],["cfHeadIcon","","icon","money","size","small",1,"text-neutral-gray-6"],["cfHeadIcon","","icon","credit_card","size","small",1,"text-neutral-gray-6"],[1,"space-y-3"],[1,"flex","items-center","gap-2","text-sm"],["cfHeadIcon","","icon","user","size","small",1,"text-neutral-gray-6"],[1,"text-neutral-gray-6","text-body-md-short"],[1,"font-medium","text-body-md-short"],["cfHeadIcon","","icon","call","size","small",1,"text-neutral-gray-6"],["cfHeadIcon","","icon","email","size","small",1,"text-neutral-gray-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-neutral-gray-3"],[1,"text-left","text-espressive-sm","text-neutral-gray-4","pb-3"],[4,"ngFor","ngForOf"],[1,"space-y-4"],["class","p-3 flex flex-col  gap-3 shadow-lg rounded-lg",4,"ngFor","ngForOf"],["class","flex justify-end gap-x-4",4,"ngIf"],[1,"text-body-md","text-neutral-black","pt-4","uppercase"],[1,"text-body-md","text-neutral-black","pt-4"],[1,"text-body-md","text-neutral-black","pt-4","capitalize"],[1,"p-3","flex","flex-col","gap-3","shadow-lg","rounded-lg"],[1,"flex","gap-6","items-center"],[1,"flex","flex-col","items-center"],[1,"w-14","h-14","object-contain",3,"src","alt"],[1,"text-body-md-long","font-semibold","text-neutral-gray-4"],[1,"flex","gap-3","md:flex-col"],[1,"flex","gap-3","items-center","md:flex-col","md:items-start"],[1,"text-body-md","font-semibold"],["icon","plane","size","small"],[1,"text-body-lg","font-semibold"],[1,"flex","flex-col","gap-3","w-full"],["class","flex gap-2 md:flex-col text-neutral-gray-4 text-body-md",4,"ngFor","ngForOf"],["class","flex flex-col gap-1 text-body-md",4,"ngIf"],[1,"flex","gap-2","md:flex-col","text-neutral-gray-4","text-body-md"],[1,"flex","items-center","gap-1"],[1,"flex","flex-col","gap-1","text-body-md"],[1,"font-semibold"],[1,"flex","justify-end","gap-x-4"],["cf-button","","size","medium","type","secondary",1,"bg-white","flex","gap-x-2","md:hidden",3,"click"],["cf-button","","size","medium",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,os,87,16,"div",0),e.YNc(1,rs,1,0,"cf-spinner",1)),2&t&&(e.Q6J("ngIf",n.paymentOrderDetail),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[d.ez,d.sg,d.O5,d.JJ,d.uU,l.AxE,l.Sm8,T.N8,T.Xq,V.q,Z.OR],encapsulation:2}),i})()},80429:(Oe,te,h)=>{h.d(te,{q:()=>u});var d=h(94650);let u=(()=>{class T{transform(l,b,...ie){return b(l,...ie)}}return T.\u0275fac=function(l){return new(l||T)},T.\u0275pipe=d.Yjl({name:"mapper",type:T,pure:!0,standalone:!0}),T})()}}]);